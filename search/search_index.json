{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"About","text":""},{"location":"#disclaimer","title":"disclaimer","text":"<ul> <li>\u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043d\u043e\u0441\u0438\u0442 \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440 \u043f\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u043e\u0433\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u0438 \u041f\u041e;</li> <li>\u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0432 \u0437\u0430\u043c\u0435\u0442\u043a\u0430\u0445 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438 \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0447\u0430\u0441\u0442\u043d\u044b\u043c, \u0430 \u043d\u0435 \u043b\u0443\u0447\u0448\u0438\u043c \u0438\u043b\u0438 \u043e\u0431\u0449\u0435\u043f\u0440\u0438\u043d\u044f\u0442\u044b\u043c \u0440\u0435\u0448\u0435\u043d\u0438\u0435\u043c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u0437\u0430\u0434\u0430\u0447;</li> </ul> <p>\u0412\u0441\u0435\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e, \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u0435\u0440\u0441\u0438\u0438 \u041f\u041e, \u043b\u0443\u0447\u0448\u0438\u0435 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0438 \u043e\u0442 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439.</p>"},{"location":"info/dns_info/","title":"dns servers","text":""},{"location":"info/dns_info/#dns-","title":"DNS-\u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u041d\u0421\u0414\u0418","text":"<p>\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0432\u0437\u044f\u0442\u0430 \u0438\u0437 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \"\u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044e \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u0441\u0432\u044f\u0437\u0438 \u0438 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0410\u0421 \u043a \u041d\u0430\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0434\u043e\u043c\u0435\u043d\u043d\u044b\u0445 \u0438\u043c\u0435\u043d (\u041d\u0421\u0414\u0418)\" \u0414\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0445 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 (\u0440\u0435\u0437\u043e\u043b\u0432\u0435\u0440\u043e\u0432) \u041d\u0421\u0414\u0418 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u0430\u0432\u0442\u043e\u043d\u043e\u043c\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0438/\u0438\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043e\u043a DNS-\u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u0434\u043b\u044f \u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0430\u0434\u0440\u0435\u0441\u0430 \u0440\u0435\u0437\u043e\u043b\u0432\u0435\u0440\u043e\u0432 \u041d\u0421\u0414\u0418.</p> \u0438\u043c\u044f a.res-nsdi.ru b.res-nsdi.ru ipv4 195.208.4.1 195.208.5.1 ipv6 2a0c:a9c7:8::1 2a0c:a9c7:9::1 <p>\u041b\u044e\u0431\u043e\u0439 \u0438\u0437 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0445 \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u0438\u043b\u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e DNS-\u0441\u0435\u0440\u0432\u0435\u0440\u0430.</p>"},{"location":"info/dns_info/#_1","title":"\u0414\u0440\u0443\u0433\u043e\u0435","text":"<p>\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 DNS-\u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u044b</p> <p>\u0412 \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0441\u0435\u0442\u044f\u0445, \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0430\u0437\u0432\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c MS AD, dns-\u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c \u0432\u044b\u0441\u0442\u0443\u043f\u0430\u044e\u0442 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u044b \u0434\u043e\u043c\u0435\u043d\u0430.</p>"},{"location":"info/dns_info/#doh","title":"DoH","text":"<p>\u0414\u043b\u044f DNS over HTTPS (DoH) \u043d\u0443\u0436\u0435\u043d dnscrypt-proxy, \u043b\u0438\u0431\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430\u0445.</p>"},{"location":"info/dns_info/#53","title":"\u041a\u0442\u043e \u043d\u0430 53","text":"<p>\u041d\u0443\u0436\u043d\u044b \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u0441\u0441</p> <p><pre><code>sudo ss -lp 'sport = :domain'\n</code></pre> \u0418\u043b\u0438 <pre><code>sudo netstat -lp | grep ':domain'\n</code></pre></p>"},{"location":"info/dns_info/#_2","title":"\u0423\u0442\u0438\u043b\u0438\u0442\u044b","text":"<p>\u0412\u0441\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 <pre><code>dig domain ANY\n</code></pre> \u041b\u0438\u0431\u043e \u043f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435 <pre><code>nslookup -q=any domain\n</code></pre> \u0412 ubuntu <pre><code>resolvectl query -t any domain\n</code></pre> \u041a\u0440\u0430\u0442\u043a\u043e <pre><code>dig domain +short\nhost domain\n</code></pre> \u0422\u0443\u043f\u043e <pre><code>ping domain\n</code></pre> whois <pre><code>whois domain\n</code></pre></p>"},{"location":"info/mac_info/","title":"Mac address","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 mac-\u0430\u0434\u0440\u0435\u0441\u0430</p> <p>macvendors.com/api <pre><code>curl https://api.macvendors.com/[mac]\n</code></pre></p> <p>// Accepted MAC Address Formats Send your MAC address in any shape or form and our server should be able to handle it. Separated by periods? Dashes? Slashes? Separated every 2 characters? 4 characters? Not a problem. Generally, MAC addresses will come in the following shape or form:</p> <p>00-11-22-33-44-55 00:11:22:33:44:55 00.11.22.33.44.55 001122334455 0011.2233.4455</p> <p>macvendors.co/api</p> <pre><code>https://macvendors.co/api/vendorname/[mac]\nhttps://macvendors.co/api/[mac]\n</code></pre>"},{"location":"info/mail_info/","title":"Mail","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0434\u043b\u044f \u043f\u043e\u0447\u0442\u044b</p> <p>mxtoolbox.com/SuperTool.aspx \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0432 \u0447\u0435\u0440\u043d\u044b\u0445 \u0441\u043f\u0438\u0441\u043a\u0430\u0445.</p> <p>mha.azurewebsites.net \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432.</p>"},{"location":"info/phone_info/","title":"Phone number","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u043e\u043c\u0435\u0440\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430</p> <p><pre><code>curl https://api.bmi.io/bdpn/v2/check/full?number=79110000000\n{\"code\":200,\"error\":false,\"Transfered\":false,\"OperatorID\":\"14\",\"OperatorCODE\":\"mMTS\",\"OperatorMCC\":\"250\",\"OperatorMNC\":\"01\",\"OperatorNAME\":\"\\u041f\\u0410\\u041e \\\"\\u041c\\u043e\\u0431\\u0438\\u043b\\u044c\\u043d\\u044b\\u0435 \\u0422\\u0435\\u043b\\u0435\\u0421\\u0438\\u0441\\u0442\\u0435\\u043c\\u044b\\\"\",\"OperatorAreaID\":\"1839\",\"OperatorAreaNAME\":\"\\u0433.\\u0421\\u0430\\u043d\\u043a\\u0442-\\u041f\\u0435\\u0442\\u0435\\u0440\\u0431\\u0443\\u0440\\u0433 \\u0438 \\u041b\\u0435\\u043d\\u0438\\u043d\\u0433\\u0440\\u0430\\u0434\\u0441\\u043a\\u0430\\u044f \\u043e\\u0431\\u043b\\u0430\\u0441\\u0442\\u044c\",\"OperatorAreaTIMEZONE\":\"3\",\"OperatorAreaGEOLAT\":\"59.93913130\",\"OperatorAreaGEOLON\":\"30.31590040\",\"PhoneFormat\":\"79110000000\",\"PhoneTemplate\":\"+7 911 000-00-00\",\"UTC\":\"3\"}\n</code></pre> \u0418\u043b\u0438 \u0431\u043e\u0442 \u0432 \u0442\u0435\u043b\u0435\u0433\u0435 @bmi_np_bot</p> <p>num.voxlink.ru</p> <pre><code>curl http://num.voxlink.ru/get/?num=79000000000\n{\"code\": \"900\", \"num\": \"0000000\", \"full_num\": \"9000000000\", \"operator\": \"\u041c\u0435\u0433\u0430\u0424\u043e\u043d\", \"old_operator\": \"\u0422\u0435\u043b\u04352\", \"region\": \"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440\u0441\u043a\u0438\u0439 \u043a\u0440\u0430\u0439\"}\n</code></pre>"},{"location":"info/routing_info/","title":"Routing","text":""},{"location":"info/routing_info/#looking-glass","title":"looking glass","text":"<p>rfc7999 blackhole community</p> AS LG BlackHole community comment 1299 lg.twelve99.net 1299:999 \u0432\u0438\u0434\u043d\u043e community, \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c ping'\u043e\u043c 8631 msk-ix.ru/lookingglass/ 65535:666 \u0432\u0438\u0434\u043d\u043e community, \u043d\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c ping'\u043e\u043c 9002 lg.retn.net 9002:666 \u043d\u0435 \u0432\u0438\u0434\u043d\u043e community, \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c ping'\u043e\u043c 49869 lg.piter-ix.ru 50509:666 .. 56931 www.eurasiapeering.com/looking-glass/ 65535:666 \u0432\u0438\u0434\u043d\u043e community, \u043d\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c ping'\u043e\u043c 199599 lg.cirex.ru 64000:666 12389 lg.ip.rt.ru 12389:55555 <p>mastertel, mts </p> <p>\u0423 \u0420\u0415\u0422\u041d \u0435\u0441\u0442\u044c \u0443\u0441\u0443\u0433\u0430 extended blackhole, \u0433\u0434\u0435 \u0441 9002:667 \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u0442\u0441\u044f \u0432\u0435\u0441\u044c udp, \u0441 9002:668 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f UDP-\u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u043e\u0442 \u00ab\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0445 amplifier\u2019\u043e\u0432\u00bb (UDP with source-port 19, 53, 123, 161, 389, 520, 1900, 11211) \u0438 \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e UDP-\u0442\u0440\u0430\u0444\u0438\u043a\u0430</p>"},{"location":"info/routing_info/#route-info","title":"route info","text":"<p>bgpview.io \u0438 \u0435\u0433\u043e api, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 <code>curl https://api.bgpview.io/asn/as_number</code>.</p> <p>ifconfig.co. \u0412 \u043a\u0430\u043a\u043e\u0439 \u0430\u0432\u0442\u043e\u043d\u043e\u043c\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0445\u043e\u0441\u0442 <code>curl ifconfig.co/asn</code> \u0438 \u0435\u0433\u043e \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 ip-\u0430\u0434\u0440\u0435\u0441 <code>curl ifconfig.co</code></p>"},{"location":"info/routing_info/#ripe","title":"ripe","text":"<p>rpki-validator.ripe.net/roas stat.ripe.net \u0438 beta</p> <p>We are pleased to announce that we have updated the RIPE NCC Certification Practice Statement (CPS) for the Resource Public Key Infrastructure (RPKI). As a Certificate Authority in RPKI, we are required to publish a CPS. In this document, we describe:</p> <ul> <li>How certificates are issued, managed, and revoked;</li> <li>How we perform the key management;</li> <li>The kind of certificates we issue.</li> </ul> <p>The CPS is an update to RIPE-549 and is published as RIPE-751: www.ripe.net/publications/docs/ripe-751</p> <p>The document follows the \"Template for a CPS for the RPKI\" as defined in RFC7382.</p>"},{"location":"info/routing_info/#_1","title":"\u041f\u0440\u043e\u0447\u0435\u0435","text":"<p>peeringdb.com</p>"},{"location":"info/routing_info/#mtr","title":"mtr","text":"<pre><code>mtr --report -c 100 ip\n</code></pre>"},{"location":"info/speedtest/","title":"Speed test","text":""},{"location":"info/speedtest/#_1","title":"\u0441\u0430\u0439\u0442\u044b \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f","text":"<p>fast.com \u0443\u0434\u043e\u0431\u0435\u043d \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0430 \u043d\u0430 \u0441\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u044b\u0445 \u043a\u0430\u043d\u0430\u043b\u0430\u0445. \u041f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 (Show more/Settings), \u0433\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439.</p> <p>speed.cloudflare.com</p> <p>yandex.ru/internet</p> <p>speedtest.net</p> <p>librespeed.org</p> <p>fireprobe.net \u0432 \u0442\u0447 ping-test.ru</p>"},{"location":"info/speedtest/#_2","title":"\u0441\u0430\u0439\u0442\u044b \u0434\u043b\u044f \u043f\u0440\u043e\u0447\u0438\u0445 \u043f\u0440\u043e\u0432\u0435\u0440\u043e\u043a","text":"<p>help.kontur.ru/check \u0434\u043b\u044f windows \u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043f\u043b\u0430\u0433\u0438\u043d\u043e\u0432. \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 mitm \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432 \u0432 \u0430\u043d\u0442\u0438\u0432\u0438\u0440\u0443\u0441\u0435, \u043f\u0440\u043e\u043a\u0441\u0438. \u041f\u0438\u0448\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u043c\u0435\u043d\u043e\u0432-\u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445.</p>"},{"location":"info/speedtest/#_3","title":"\u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0435 \u0443\u0442\u0438\u043b\u0438\u0442\u044b \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438","text":"<p>iperf. \u0415\u0441\u0442\u044c \u0432 \u043f\u0430\u043a\u0435\u0442\u0430\u0445. 3\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 tcp \u0438 udp \u0440\u0435\u0436\u0438\u043c\u0435 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e. \u0423\u0434\u043e\u0431\u043d\u0435\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432\u0442\u043e\u0440\u043e\u0439 \u0432\u0435\u0440\u0441\u0438\u0435\u0439.</p> <p>\u0417\u0430\u043f\u0443\u0441\u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f udp \u043f\u0430\u043a\u0435\u0442\u0430\u043c\u0438: <pre><code>iperf -s -u\n</code></pre> \u0417\u0430\u043f\u0443\u0441\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u0430: <pre><code>iperf -u -c &lt;ip&gt; -b 1M -t 300 -i 10\n</code></pre> \u0414\u043b\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430 iperf2 \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0422\u0430\u043a, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0443\u044e \u043f\u043e\u043b\u043e\u0441\u0443 \u043f\u0440\u0438 \u0430\u0440\u0435\u043d\u0434\u0435 \u043a\u0430\u043d\u0430\u043b\u0430. \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430, \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 \u0438\u043b\u0438 \u0445\u043e\u0441\u0442\u0430 \u0437\u0430 \u043d\u0438\u043c \u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043f\u043e\u0440\u0442\u0430 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435, \u043a\u0443\u0434\u0430 \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u043a\u0430\u043d\u0430\u043b \u043e\u0442 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430 \u0441\u0432\u044f\u0437\u0438.</p> <p>fast.com \u0435\u0441\u0442\u044c \u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u0430\u044f \u0443\u0442\u0438\u043b\u0438\u0442\u0430. \u041a\u043e\u043c\u0430\u043d\u0434\u044b: \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c, \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f, \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0430\u043f\u043b\u043e\u0430\u0434. <pre><code>$ npm install --global fast-cli\n$ fast\n$ fast -u\n</code></pre></p> <p>speedtest.net \u0435\u0441\u0442\u044c \u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u0430\u044f \u0443\u0442\u0438\u043b\u0438\u0442\u0430. \u041a\u043e\u043c\u0430\u043d\u0434\u044b: \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430, \u0437\u0430\u043f\u0443\u0441\u043a. <pre><code>$ apt install speedtest-cli\n$ speedtest\n</code></pre></p>"},{"location":"info/speedtest/#tcp","title":"\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 tcp","text":"<p>\u0411\u0435\u0437 TCP win scaling  \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u043e\u043a\u043d\u0430 \u0440\u0430\u0432\u0435\u043d 65535 \u0431\u0430\u0439\u0442. \u0418\u0437 rfc1323:</p> <p>(1)  Window Size Limit</p> <pre><code>      The TCP header uses a 16 bit field to report the receive\n      window size to the sender.  Therefore, the largest window\n      that can be used is 2**16 = 65K bytes.\n</code></pre> <p>https://wintelguy.com/wanperf.pl \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0432 \u0442\u0447 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043e\u043a\u043d\u0430. \u041c\u043e\u0436\u043d\u043e \u043e\u0446\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u0443\u044e \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 rtt \u043f\u0440\u0438 \u043e\u043a\u043d\u0435 65535 \u0438 \u0442\u043e\u0433\u0434\u0430 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043d\u044f\u0442\u043d\u0430 \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u0438\u043c\u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u043c\u0438 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435 \u0438 \u0432 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445, \u0432 \u0442.\u0447. \u0447\u0435\u0440\u0435\u0437 \u0441\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u044b\u0435 \u043a\u0430\u043d\u0430\u043b\u044b \u0441\u0432\u044f\u0437\u0438 \u0441 rtt 600\u043c\u0441. \u041e\u0442 \u0431\u0443\u0444\u0435\u0440\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0442\u043e\u0436\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0440\u043e\u0432\u043e\u0434\u043d\u0438\u043a \u043d\u0430 ftp \u0431\u0443\u0434\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 1\u043c\u0431\u0438\u0442/\u0441. \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e\u0431 \u044d\u0442\u043e\u043c \u0435\u0441\u0442\u044c \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 MS.</p>"},{"location":"info/www_info/","title":"Web","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0434\u043b\u044f \u0432\u0435\u0431\u0430</p> <p>www.sslshopper.com/ssl-checker.html \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u0435\u0440\u0442\u0438\u0438\u043a\u0430\u0442\u043e\u0432</p> <p>check-host.net \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0438\u0437 \u0440\u0430\u0437\u043d\u044b\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u043e\u0432</p> <p>securityheaders.com \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432</p>"},{"location":"monitoring/a1/","title":"\u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 Victoriametrics \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u043f\u043e SNMP","text":"<p>\u0417\u0430\u043c\u0435\u0442\u043a\u0430 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0430 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u0442\u0438 VictoriaMetrics_ru1 \u0432 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c.</p>"},{"location":"monitoring/a1/#tsdb","title":"\u0412\u044b\u0431\u043e\u0440 tsdb","text":"<p>\u0420\u0430\u0437\u0432\u0438\u0442\u0438\u0435 \u043e\u0431\u043b\u0430\u0447\u043d\u044b\u0445 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432, \u0445\u0430\u0439\u043f \u0432\u043e\u043a\u0440\u0443\u0433 kubernetes \u043f\u0440\u0438\u0432\u0435\u043b\u0438 \u043a \u0442\u043e\u043c\u0443, \u0447\u0442\u043e \u0441 2017 \u0433\u043e\u0434\u0430 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u044c \u0441\u0442\u0430\u043b\u0438 \u043d\u0430\u0431\u0438\u0440\u0430\u0442\u044c \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0440\u044f\u0434\u043e\u0432 (time series databases). \u0412 \u0442\u0430\u043a\u0438\u0445 \u0431\u0430\u0437\u0430\u0445 \u0445\u0440\u0430\u043d\u044f\u0442 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 (metrics) \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439, \u0430 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0435 \u044f\u0437\u044b\u043a\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0434\u043b\u044f \u044d\u0442\u0438\u0445 \u0431\u0430\u0437 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0430\u043d\u0430\u043b\u0438\u0437 \u0434\u0430\u043d\u043d\u044b\u0445, \u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0433\u0440\u0430\u0444\u0438\u043a\u0438, \u0438\u043d\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0431 \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f\u0445 \u043e\u0442 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0433\u043e\u0432\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0438 \u0442.\u0434. Prometheus \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0440\u0435\u0448\u0435\u043d\u0438\u0435\u043c \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 kubernetes \u0438 \u0432\u0441\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0442 \u0434\u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u0447\u0442\u043e\u0431\u044b \u0442\u0435 \u043c\u043e\u0433\u043b\u0438 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 http \u043e\u0442\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u0432\u043e\u0438 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0432 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 prometheus:</p> <pre><code>myapp_status{server=\"prod1\"} 1\n</code></pre> <p>\u041d\u0435 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u0434\u0430\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0432 \u043d\u0443\u0436\u043d\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435. \u041d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u0434\u043b\u044f \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438 \u0441 prometheus, \u043f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0438\u0445 \u043e\u0431\u0449\u0435\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 exporter. \u0421\u043f\u0438\u0441\u043e\u043a exporter'\u043e\u0432 \u043d\u0438\u0447\u0435\u043c \u043d\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d. \u041d\u0430\u0434\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0441 community \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0440\u0442\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0432\u0430\u0448 exporter \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b. \u0415\u0441\u0442\u044c \u0438 \u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0431\u0435\u0437 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f exporter'\u0430. \u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 node_exporter \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043b\u0438 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e textfile collector. \u0422\u0435\u043f\u0435\u0440\u044c \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0444\u0430\u0439\u043b \u0441 \u0433\u043e\u0442\u043e\u0432\u044b\u043c\u0438 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c\u0438 \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043a\u0430\u0442\u0430\u043b\u043e\u0433.</p> <p>\u0421 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c (scrape interval) Prometheus \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, exporter'\u044b \u0438 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0441 \u0431\u0430\u0437\u0443. \u041f\u0440\u0438 \u0432\u0441\u0435\u0445 \u0434\u043e\u0441\u0442\u043e\u0438\u043d\u0441\u0442\u0432\u0430\u0445 \u044d\u0442\u043e\u0433\u043e \u0440\u0435\u0448\u0435\u043d\u0438\u044f, \u043a\u043e\u043d\u0435\u0447\u043d\u043e, \u0431\u044b\u043b\u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f:</p> <ul> <li>\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043c\u0435\u0442\u0440\u0438\u043a;</li> <li>\u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f;</li> <li>\u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u043f\u0443\u043b\u043b \u043c\u043e\u0434\u0435\u043b\u0438.</li> </ul> <p>\u041f\u0435\u0440\u0432\u043e\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043e\u0431\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449, \u0442.\u043d. remote storage. \u0422\u0430\u043a\u043e\u0439 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0440\u044f\u0434\u043e\u0432 \u0441 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f VictoriaMetrics (\u0434\u0430\u043b\u0435\u0435 VM). \u0415\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043d\u0430\u0447\u0430\u043b\u0430\u0441\u044c \u0432 2018 \u0433\u043e\u0434\u0443, \u0430 \u0432 \u043c\u0430\u0435 2019 \u0433\u043e\u0434\u0430 \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f open-source \u0432\u0435\u0440\u0441\u0438\u044f \u043d\u0430 github. VM \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0442 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u0437\u0430 \u0431\u044b\u0441\u0442\u0440\u043e\u0442\u0443, \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u0443 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u043d\u043e\u0439 \u0432\u0435\u0440\u0441\u0438\u0438. \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f \u043d\u0430 \u0440\u0435\u0441\u0443\u0440\u0441\u0430\u0445, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u044f\u0437\u044b\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 PromQl \u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043d\u043e\u0432\u044b\u0445 \u0432\u043e\u0441\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u0432 MetricsQl \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u0440\u043e\u0441\u0442\u0443 \u0435\u0435 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438. \u0412\u043e\u043a\u0440\u0443\u0433 VM \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u0440\u0430\u0437\u0432\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u044d\u043a\u043e\u0441\u0438\u0441\u0442\u0435\u043c\u0430, \u0440\u0430\u0437\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0449\u0438\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c prometheus, \u043a\u0430\u043a \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442, \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e.</p>"},{"location":"monitoring/a1/#telegraf-vs-vmagentsnmp_exporter","title":"telegraf vs vmagent+snmp_exporter","text":"<p>\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b snmp \u0432\u0441\u0435 \u0435\u0449\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0440\u0430\u0431\u043e\u0442\u044b \u0442\u0435\u043b\u0435\u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:</p> <ul> <li>\u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043e\u0431\u044a\u0435\u043c\u043e\u0432 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0432 \u0431\u0430\u0439\u0442\u0430\u0445, \u043f\u0430\u043a\u0435\u0442\u0430\u0445;</li> <li>\u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043e\u0448\u0438\u0431\u043e\u043a \u0438 \u043f\u043e\u0442\u0435\u0440\u044c \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445;</li> <li>\u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0441\u0435\u043d\u0441\u043e\u0440\u043e\u0432 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b, \u043f\u0438\u0442\u0430\u043d\u0438\u044f, \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0442\u043e\u0440\u043e\u0432;</li> <li>\u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0443\u0442\u0438\u0437\u0438\u0437\u0430\u0446\u0438\u0438 \u0440\u0435\u0441\u0443\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u043f\u0430\u043c\u044f\u0442\u044c, cpu;</li> <li>\u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u0439 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0438;</li> <li>\u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a, acl.</li> </ul> <p>\u041d\u0438\u0436\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 telegraf c \u043f\u043b\u0430\u0433\u0438\u043d\u043e\u043c snmp (T) \u0438 vmagent + snmp_exporter (VS). \u042f \u0440\u0430\u0431\u043e\u0442\u0430\u043b \u0441 \u043e\u0431\u043e\u0438\u043c\u0438, telegraf \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e \u0431\u043e\u043b\u0435\u0435 \u0433\u043e\u0434\u0430. \u041d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f \u0441 \u0434\u0440\u0443\u0433\u0438\u043c \u041f\u041e: zabbix, cacti, librenms.</p> <p>vmagent \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 snmp_exporter \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 snmp \u0438 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0432 \u0431\u0430\u0437\u0443 VictoriaMetrics. \u041f\u043e\u0441\u043b\u0435 0.20.0 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u044b \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438 snmp_exporter \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0435\u0440\u0435\u0434\u0435\u0442 github.com/prometheus-community/snmp</p>"},{"location":"monitoring/a1/#service-discovery","title":"service discovery","text":"<p>\u0423\u0434\u043e\u0431\u043d\u043e, \u043a\u043e\u0433\u0434\u0430 \u0445\u043e\u0441\u0442\u044b \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u043b\u0435\u0442\u0443 \u0438 \u043d\u0435\u0442 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e, \u0440\u0435\u043b\u043e\u0430\u0434\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441.</p> <p>T: \u041d\u0435\u0442 service discovery. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u0441\u043b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043f\u0438\u0441\u043a\u0430 \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0434\u0435\u043b\u0430\u0442\u044c reload telegraf'\u0443.</p> <p>VS: \u0415\u0441\u0442\u044c service discovery \u0438 file_sd \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043c\u043e\u0434\u0443\u043b\u044f \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0444\u0430\u0439\u043b \u0441\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0445\u043e\u0441\u0442\u043e\u0432 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438.</p>"},{"location":"monitoring/a1/#_1","title":"\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432","text":"<p>\u0415\u0441\u043b\u0438 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e, \u0442\u043e \u044d\u0442\u043e \u043d\u0430\u0434\u043e \u0432\u0438\u0434\u0435\u0442\u044c \u043a\u0430\u043a-\u0442\u043e \u0438 \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044e \u043c\u0435\u0442\u0440\u0438\u043a \u0432 \u0431\u0430\u0437\u0435.</p> <p>T: \u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0435\u043b\u044c\u0437\u044f. \u041c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043b\u043e\u0433\u0438 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0430\u0445.</p> <p>VS: \u0415\u0441\u0442\u044c \u0440\u0443\u0447\u043a\u0430 <code>curl http://vmagent-host:8429/targets</code> , \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0438 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 dashboard \u0434\u043b\u044f \u043d\u0438\u0445 \u0441 \u043a\u043e\u043b-\u0432\u043e\u043c targets up/down.</p>"},{"location":"monitoring/a1/#_2","title":"\u0411\u0443\u0444\u0435\u0440 \u0434\u043b\u044f \u043e\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0445 \u043c\u0435\u0442\u0440\u0438\u043a","text":"<p>\u041f\u0440\u0438 \u043e\u0442\u0441\u0443\u0441\u0442\u0432\u0438\u0438 \u0441\u0432\u044f\u0437\u0438 \u043c\u0435\u0436\u0434\u0443 \u0430\u0433\u0435\u043d\u0442\u043e\u043c \u0438 \u0431\u0430\u0437\u043e\u0439 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u043a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 \u0430\u0433\u0435\u043d\u0442\u0430.</p> <p>T: metric_buffer_limit \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 telegraf \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0440\u0430\u0437\u043c\u0435\u0440 \u043a\u044d\u0448\u0430 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043c\u0435\u0442\u0440\u0438\u043a \u043f\u0440\u0438 \u043e\u043f\u0440\u043e\u0441\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u041f\u0440\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0431\u0430\u0437\u044b \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432 \u043a\u044d\u0448\u0435 (\u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438) \u0438 \u043f\u0440\u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u0432\u044f\u0437\u0438 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f. \u041f\u0440\u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0435 telegraf'\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0438\u0437-\u0437\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0430\u0434\u0440\u0435\u0441\u0430 \u0431\u0430\u0437\u044b, \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b.</p> <p>VS: remoteWrite.tmpDataPath \u0443 vmagent \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0431\u0430\u0437\u044b. \u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043f\u0440\u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0431\u0430\u0437\u0435, \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u043e\u0447\u0438\u0449\u0430\u0435\u0442\u0441\u044f, \u0430 \u043c\u0435\u0442\u0440\u0438\u043a\u0430 <code>vmagent_remotewrite_pending_data_bytes</code> \u0431\u0443\u0434\u0435\u0442 \u0441 \u043a\u0430\u043a\u043e\u0433\u043e-\u0442\u043e \u0447\u0438\u0441\u043b\u0430 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0442\u044c\u0441\u044f \u0434\u043e \u043d\u0443\u043b\u044f.</p>"},{"location":"monitoring/a1/#snmp-mib","title":"snmp mib'\u044b","text":"<p>\u041e\u0431\u044b\u0447\u043d\u043e \u043d\u0430 \u0445\u043e\u0441\u0442, \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u043f\u0440\u043e\u0441, \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c snmp, \u0432\u0441\u0435 mib'\u044b \u0441 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044f\u043c\u0438. \u0412 \u0441\u043b\u0443\u0447\u0430\u0435 snmp_exporter'\u0430, \u0447\u0435\u0439 \u043a\u043e\u043d\u0444\u0438\u0433 \u0441 oid'\u0430\u043c\u0438 \u0433\u0435\u043d\u0435\u0440\u0438\u0442\u0441\u044f \u043d\u0430 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u043c \u0445\u043e\u0441\u0442\u0435, mib'\u044b \u043d\u0443\u0436\u043d\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0440\u0430\u0431\u043e\u0447\u0435\u043c \u043c\u0435\u0441\u0442\u0435 \u0438\u043b\u0438 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u043c\u0430\u0448\u0438\u043d\u0435 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430, \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0448\u0435\u0433\u043e \u0441 \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c.</p> <p>T: \u041d\u0430 \u0445\u043e\u0441\u0442\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0442\u044c \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f snmp, mib'\u044b, telegraf. \u0412 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c oid \u0431\u0435\u0437 \u043c\u0438\u0431\u043e\u0432 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435  inputs.snmp.field. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b mib'\u044b \u043d\u0430 \u0445\u043e\u0441\u0442\u0435, \u0442.\u043a \u043f\u043b\u0430\u0433\u0438\u043d \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 snmptranslate \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435 \u0438 \u0434\u0435\u043b\u0430\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 oid \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446 inputs.snmp.table \u0447\u0442\u043e \u044d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0430.</p> <p>VS: \u041d\u0430 \u0445\u043e\u0441\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f snmp_exporter c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u043c \u0444\u0430\u0439\u043b\u043e\u043c snmp.yml, vmagent. \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c snmp, mib'\u044b \u043d\u0435 \u043d\u0443\u0436\u043d\u043e.</p> <p>\u041e\u0442\u0434\u0435\u043b\u044c\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u044e \u043f\u0440\u043e \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440, \u0442.\u043a. \u043e\u043d \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0430\u0441\u0442\u044c\u044e \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0440\u0430\u0431\u043e\u0442 \u043f\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0431\u0435\u0437 \u043c\u0438\u0431\u0430 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0432\u0441\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b - \u044d\u0442\u043e \u043b\u0435\u0439\u0431\u043b\u044b.</p>"},{"location":"monitoring/a1/#_3","title":"\u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u043f\u0440\u043e\u0441\u0430","text":"<p>interval \u0438\u043b\u0438 scrape interval. \u0421\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u0445\u043e\u0440\u043e\u0448\u0435\u0439 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u043e\u0439 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0432 \u0431\u0430\u0437\u0435 \u0441 \u043e\u0434\u043d\u0438\u043c \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c. \u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b 1 \u043c\u0438\u043d\u0443\u0442\u0430 \u0445\u043e\u0440\u043e\u0448 \u0434\u043b\u044f \u0430\u043b\u0435\u0440\u0442\u0438\u043d\u0433\u0430, \u0430 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0432 5 \u043c\u0438\u043d\u0443\u0442 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u044b\u043c \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u043e\u043f\u0440\u043e\u0441\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u0441 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u043c control-plane, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u043d\u0430 \u043c\u0438\u043d\u0443\u0442\u0443 \u043e\u0442\u0434\u0430\u0442\u044c \u0441\u0432\u043e\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043b\u0438\u0431\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0430 \u043a\u0430\u043d\u0430\u043b\u0430\u043c\u0438 \u0441 \u0432\u044b\u0441\u043e\u043a\u0438\u043c RTT. \u0412\u043e \u0432\u0442\u043e\u0440\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441 \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0438 \u0432\u044b\u043d\u043e\u0441\u043e\u043c \u0430\u0433\u0435\u043d\u0442\u0430 \u043f\u043e\u0431\u043b\u0438\u0436\u0435 \u043a \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c, \u0447\u0442\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043e\u0442\u0432\u0435\u0447\u0430\u044e\u0442 \u043f\u043e snmp \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e \u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u043a\u043e\u043c\u043f\u0440\u043e\u043c\u0438\u0441 \u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043e\u043f\u0440\u043e\u0441\u0430.</p> <p>T: \u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u043f\u0440\u043e\u0441\u0430 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435, \u043b\u0438\u0431\u043e \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e. \u0418\u043c\u0435\u0435\u0442 \u0441\u043c\u044b\u0441\u043b \u0434\u0435\u043b\u0430\u0442\u044c \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0444\u0430\u0439\u043b\u043e\u0432, \u0442.\u043a. \u0435\u0441\u043b\u0438 \u043f\u043b\u0430\u0433\u0438\u043d \u043d\u0435 \u0443\u0441\u043f\u0435\u0435\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b, \u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043e \u0432\u0441\u0435\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b. \u041a\u043e\u0433\u0434\u0430 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u043a\u0430\u044f-\u0442\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430, \u0442\u043e \u043f\u043e\u0442\u0435\u0440\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u0434\u0435\u043b\u0430\u0435\u0442 \u0431\u0435\u0441\u0441\u043c\u044b\u0441\u043b\u0435\u043d\u043d\u044b\u043c \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433.</p> <p>VS: \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043e\u0434\u0438\u043d \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043c\u0435\u0442\u0440\u0438\u043a. 1 \u043c\u0438\u043d\u0443\u0442\u0430 - \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u043f\u0440\u043e\u0441\u0430 \u0432\u0441\u0435\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043f\u043e snmp. \u041d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e snmp \u0438\u043b\u0438 \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u043f\u0440\u043e\u0441\u0430, \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u044e\u0449\u0435\u0435 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u043f\u0440\u043e\u0441\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0435 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043e\u043f\u0440\u043e\u0441\u0430 \u043e\u0442 \u0434\u0440\u0443\u0433\u0438\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432.</p>"},{"location":"monitoring/a1/#_4","title":"\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b","text":"<p>T: \u041a\u0430\u0437\u0430\u043b\u043e\u0441\u044c \u0431\u044b, \u0447\u0442\u043e \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u043f\u043b\u0430\u0433\u0438\u043d\u044b \u0432 \u043e\u0434\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u0443\u0434\u043e\u0431\u043d\u043e, \u043d\u043e \u0438\u0437-\u0437\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u043f\u043b\u0430\u0433\u0438\u043d\u0430 \u043f\u0440\u0438 \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u0435 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430 \u0438\u0445 \u043d\u0443\u0436\u043d\u043e \u043c\u043d\u043e\u0433\u043e. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u0435\u043d\u0434\u043e\u0440\u0430 \u0438\u043b\u0438 \u043c\u043e\u0434\u0435\u043b\u0438 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u0438\u043b\u0438/\u0438 \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u043e\u043f\u0440\u043e\u0441\u0430 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0434\u043b\u044f snmp \u043f\u043b\u0430\u0433\u0438\u043d\u0430 \u0432 /etc/telegraf/telegraf.d/.</p> <p>VS: \u0423 snmp_exporter \u043e\u0434\u0438\u043d \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u0435\u043d\u0434\u043e\u0440\u0430 \u0438\u043b\u0438 \u043c\u043e\u0434\u0435\u043b\u0438 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043c\u043e\u0434\u0443\u043b\u044c. \u042d\u0442\u043e\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u043c \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043d\u0430 \u0441\u0435\u0442\u0438 \u0438 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0432\u0441\u0435 \u0445\u043e\u0441\u0442\u044b \u0441 exporter'\u0430\u043c\u0438. \u0412 vmagent'\u0435 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043c\u043e\u0434\u0443\u043b\u044f \u0441\u0432\u043e\u0439 job \u0438\u043b\u0438 \u0438\u043d\u0430\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0445\u043e\u0441\u0442\u0430 \u0432 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0431\u0443\u0434\u0443\u0442 \u0441\u0432\u043e\u0438 \u0442\u0430\u0440\u0433\u0435\u0442\u044b \u0438\u0437 service discovery.</p>"},{"location":"monitoring/a1/#_5","title":"\u043a\u0430\u0440\u0434\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c","text":"<p>\u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 influx \u043e\u0431 \u043a\u0430\u0440\u0434\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0432\u043e\u043e\u0431\u0449\u0435 \u043d\u0435 \u0437\u0430\u0434\u0443\u043c\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0434\u043e \u0442\u0435\u0445 \u043f\u043e\u0440, \u043f\u043e\u043a\u0430 \u0431\u0430\u0437\u0430 \u043a\u0430\u043a-\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442. \u042d\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043e\u0431\u043c\u0430\u043d\u0447\u0438\u0432\u0430 \u0438 \u0440\u0430\u0441\u043f\u043b\u0430\u0447\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u043e\u0439 \u0431\u0430\u0437\u044b. \u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u0411\u0414 prometheus \u0443\u0436\u0435 \u0442\u043e\u0442 \u0444\u0430\u043a\u0442 \u0447\u0442\u043e \u0432 \u0431\u0430\u0437\u0443 \u043d\u0435\u043b\u044c\u0437\u044f \u043f\u0438\u0441\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0437\u0430\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0447\u0442\u043e \u0432\u043e\u043e\u0431\u0449\u0435 \u043f\u0438\u0448\u0435\u0442\u0441\u044f.</p> <p>T: \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u0433\u043e\u0432 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0438\u043d\u0434\u0435\u043a\u0441\u0430\u0446\u0438\u0438 \u0438 \u043f\u043e\u0438\u0441\u043a\u0430. \u0417\u0430\u043f\u0438\u0448\u0435\u0442 \u0432\u0441\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (value) \u0442\u0435\u043a\u0441\u0442, \u0447\u0438\u0441\u043b\u0430, \u043d\u0435\u043e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043c\u0443\u0441\u043e\u0440 \u0432 \u0431\u0430\u0437\u0443 influxdb \u043a\u0430\u043a \u043e\u0434\u043d\u0443 \u043c\u0435\u0442\u0440\u0438\u043a\u0443 (measurement) \u0441 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0438 \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 (tag). \u0415\u0441\u0442\u044c \u043c\u0438\u0431\u044b, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u043e\u0442 polycom, \u0433\u0434\u0435 \u0447\u0438\u0441\u043b\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u044b \u043a\u0430\u043a \u0441\u0442\u0440\u043e\u043a\u0438. \u0422\u0430\u043a\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 conversion = \"int\". \u041b\u0438\u0448\u043d\u0438\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u0432 oid \u043c\u043e\u0436\u043d\u043e \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 oid_index_length \u0432 inputs.snmp.table.field. \u041c\u043e\u0436\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e \u0447\u0435\u0440\u0435\u0437 fieldpass, tagexclude, inputs.snmp.tagdrop \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043f\u043b\u0430\u0433\u0438\u043d\u0430.</p> <p>VS: \u041c\u0435\u0442\u0440\u0438\u043a\u0430 \u0441 \u0434\u0440\u0443\u0433\u0438\u043c \u043d\u0430\u0431\u043e\u0440\u043e\u043c \u043b\u0435\u0439\u0431\u043b\u043e\u0432 - \u044d\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0440\u044f\u0434. \u0412 victoria-metrics \u0438 prometheus \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0438\u0441\u043b\u043e\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0430 \u0442\u0435\u043a\u0441\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0438\u043d\u0434\u0435\u043a\u0441\u044b/\u043b\u0435\u0439\u0431\u043b\u044b. \u041e\u0434\u043d\u043e\u0439 \u043c\u0435\u0442\u0440\u0438\u043a\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043e\u0434\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441 \u043d\u0430\u0431\u043e\u0440\u043e\u043c \u043b\u0435\u0439\u0431\u043b\u043e\u0432. snmp_exporter \u0443\u043c\u0435\u0435\u0442 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u044b\u0432\u0430\u0442\u044c string \u0447\u0435\u0440\u0435\u0437 overrides. \u041d\u0438\u0436\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u0440 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0442\u043e\u0440\u0435 \u0441 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u043c extreme, \u0433\u0434\u0435 cpu usage \u0432 oid \u043e\u043f\u0438\u0441\u0430\u043d\u0430 \u043a\u0430\u043a string \u0438 \u043f\u043e \u0434\u0435\u0444\u043e\u043b\u0442\u0443 \u0437\u0430\u043f\u0438\u0448\u0435\u0442\u0441\u044f \u0432 label. \u0412 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 vmagent'\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c labeldrop \u0432 metric_relabel_configs. \u0415\u0441\u0442\u044c drop_source_indexes \u0432 lookup \u0438 ignore overrides \u0432 snmp_exporter.</p>"},{"location":"monitoring/a1/#gui","title":"GUI \u0434\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432","text":"<p>\u0414\u043b\u044f \u043d\u043e\u0432\u0438\u0447\u043a\u043e\u0432 \u043d\u0438\u0437\u043a\u0438\u0439 \u043f\u043e\u0440\u043e\u0433 \u0432\u0445\u043e\u0434\u0430 \u0432 \u044f\u0437\u044b\u043a \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 influx \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0441\u044f \u0443\u0434\u043e\u0431\u043d\u044b\u043c. \u0417\u0434\u0435\u0441\u044c \u043c\u0435\u0434\u0432\u0435\u0436\u044c\u044e \u0443\u0441\u043b\u0443\u0433\u0443 \u043e\u043a\u0430\u0437\u0430\u043b\u0430 grafana.</p> <p>T: \u0412 grafana \u0435\u0441\u0442\u044c \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0434\u043b\u044f influxdb, \u0433\u0434\u0435 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0442\u0435\u0433\u0438.</p> <p>VS: \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u043d\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u0438 promql \u0434\u043b\u044f \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0432 \u0431\u0430\u0437\u0443, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0435 \u0434\u043b\u044f \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043b\u0435\u0439\u0431\u043b\u044b.</p>"},{"location":"monitoring/a1/#rate","title":"rate","text":"<p>\u0414\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u044f \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0432\u0438\u0434\u0435 \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u0432 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0441 64-\u0431\u0438\u0442\u043d\u044b\u043c\u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0430\u0441\u0442\u0443\u0442, \u043b\u0438\u0431\u043e \u0441\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0432 0. \u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u0437 \u0431\u0430\u0437\u044b \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0442\u043e\u0447\u0435\u043a \u0437\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b.</p> <p>T: \u0424\u0443\u043d\u043a\u0446\u0438\u0438 derivative() \u0438\u043b\u0438 non_negative_derivative() \u0438\u0441\u043f\u043e\u043b\u044c\u0443\u044e\u0442\u0441\u044f \u0432 grafana \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u0432 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432. \u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u0445 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043e\u043f\u0440\u043e\u0441\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432.</p> <p>VS: \u0424\u0443\u043d\u043a\u0446\u0438\u0438 rate() \u0438 increase() \u0434\u043b\u044f \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 (counters) 32 \u0438 64 \u0431\u0438\u0442\u043d\u044b\u0445. \u0412 \u0431\u0430\u0437\u0435 prometheus \u0434\u043b\u044f rate() \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e 2.3 \u0442\u043e\u0447\u043a\u0438 \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0435. \u0422.\u0435. \u043f\u0440\u0438 \u043e\u043f\u0440\u043e\u0441\u0435 \u0440\u0430\u0437 \u0432 \u043c\u0438\u043d\u0443\u0442\u0443 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0434\u0430\u0442\u044c rate(metric[5m]), \u043d\u043e \u043d\u0435 rate(metric[1m]). \u0412 victoria-metrics \u0442\u0430\u043a\u043e\u0433\u043e \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u043d\u0435\u0442.</p>"},{"location":"monitoring/a1/#telegraf","title":"telegraf","text":"<p>\u041d\u0438\u0436\u0435 \u0431\u0443\u0434\u0435\u0442 \u0442\u0435\u043a\u0441\u0442 \u043f\u0440\u043e \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u043e\u043f\u044b\u0442 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438 telegraf'\u0430 \u0441 influxdb. \u0412 influxdb \u043c\u043e\u0436\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442, \u0430 \u044d\u0442\u043e \u0443\u0436\u0435 \u0441\u043e\u0432\u0441\u0435\u043c \u043d\u0435 \u043f\u0440\u043e \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043c\u0435\u0442\u0440\u0438\u043a. \u0415\u0449\u0435 \u044f \u043f\u0440\u043e\u0431\u043e\u0432\u0430\u043b \u043f\u043b\u0430\u0433\u0438\u043d \u0441lickhouse \u0438 \u043f\u0438\u0441\u0430\u043b \u0442\u0443\u0434\u0430 \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0448\u0435\u043d\u044b \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432, \u0430 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 iftable \u043f\u0438\u0441\u0430\u043b \u0432 VM. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0430\u0431\u0437\u0430\u0446 \u0434\u043b\u044f \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438.</p> <p>\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 snmp \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u0443\u044e: \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432, \u0441\u0442\u0430\u0442\u0443\u0441 sla, \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432, \u0441\u043e\u0441\u0442\u0430\u0432 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u0438\u0437 entity-mib, \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a qos. \u0412\u0441\u0435 \u044d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u0441 \u0440\u0430\u0437\u043d\u044b\u043c\u0438 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430\u043c\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e sla \u043d\u0443\u0436\u043d\u044b \u0440\u0430\u0437 \u0432 \u043c\u0438\u043d\u0443\u0442\u0443, \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a \u0440\u0430\u0437 \u0432 \u043f\u044f\u0442\u044c \u043c\u0438\u043d\u0443\u0442, \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u044e \u0440\u0430\u0437 \u0432 \u0441\u0443\u0442\u043a\u0438. \u0420\u0430\u0437\u043d\u044b\u0435 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u044b \u043f\u043e\u0434\u0440\u0430\u0437\u0443\u043c\u0435\u0432\u0430\u044e\u0442 \u0440\u0430\u0437\u043d\u044b\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u0434\u043b\u044f \u043f\u043b\u0430\u0433\u0438\u043d\u0430 snmp, \u0442.\u043a. \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u043b\u0430\u0433\u0438\u043d\u0430, \u0430 \u043d\u0435 \u0434\u043b\u044f job'\u0430, \u043a\u0430\u043a \u0432 prometheus/vmagent. \u041e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0441 \u043e\u0434\u043d\u0438\u043c \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f, \u0442.\u043a. \u043d\u0435\u0442 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043e\u0434\u043d\u0438 \u0438 \u0442\u0435 \u0436\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u0437\u0430\u0446\u0438\u0438, \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432, ip-\u0430\u0434\u0440\u0435\u0441\u0430, arp'\u044b \u0438 \u0442.\u043f. \u0415\u0449\u0435 \u043e\u043f\u0440\u043e\u0441 \u0442\u0430\u043a\u043e\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0442\u0430\u0431\u043b\u0438\u0446 \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442 \u043f\u0440\u0438\u043b\u0438\u0447\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0438 \u0432 \u043c\u0438\u043d\u0443\u0442\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043f\u0440\u043e\u0441\u0442\u043e \u043d\u0435 \u0443\u0441\u043f\u0435\u0442\u044c. \u042d\u0442\u043e \u043b\u0435\u0433\u043a\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0432 \u0432 \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 telegraf. <pre><code>$ telegraf -config test.cfg -test\n</code></pre> \u041e\u0442\u0441\u044e\u0434\u0430 \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435, \u0447\u0442\u043e \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u043f\u0440\u043e\u0441\u0430 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u0432\u0440\u0435\u043c\u044f \u043e\u043f\u0440\u043e\u0441\u0430 \u0432\u0441\u0435\u0445 \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0432 \u0442.\u0447. \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u043e\u0432 \u0438\u0437-\u0437\u0430 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438. \u0415\u0441\u043b\u0438 \u0432\u0441\u0435 \u0430\u0433\u0435\u043d\u0442\u044b \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u043e\u043f\u0440\u043e\u0448\u0435\u043d\u044b \u0434\u043e \u043d\u0430\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430 \u043e\u043f\u0440\u043e\u0441\u0430, \u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0435, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u043e\u0442 \u0432\u0441\u0435\u0445 \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b \u0441 \u0444\u0438\u043a\u0441\u0430\u0446\u0438\u0435\u0439 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0432 \u043b\u043e\u0433\u0430\u0445 \"input \"inputs.snmp\" did not complete within its interval\". \u0422.\u0435. \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043a\u0430\u043a-\u0442\u043e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e, \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u0435\u043d\u0435\u0435 \u0447\u0430\u0441\u0442\u043e, \u043d\u043e \u0441 \u0431\u041e\u043b\u044c\u0448\u0438\u043c \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438. \u041d\u0438\u0436\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u0440\u044b, \u043d\u043e \u044d\u0442\u043e \u0431\u043e\u043b\u044c\u0448\u0435 \u0434\u043b\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u0438\u0441\u0442\u043e\u0440\u0438\u0438. \u0422\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0441\u044c vmagent'\u043e\u043c \u0438 snmp_exporter'\u043e\u043c \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u0430 \u043a\u0430\u0443\u043d\u0442\u0435\u0440\u043e\u0432 \u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u043d\u0435\u0433\u043e \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u0432 \u0441\u0442\u043e\u0440\u043e\u043d\u0443 \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u0438\u044f \u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u044f \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043b\u0435\u0439\u0431\u043b\u043e\u0432. Telegraf \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438 \u0441\u0442\u0440\u043e\u043a \u0432 clickhouse. \u0414\u0430\u043b\u044c\u0448\u0435 \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u0445 \u0431\u0443\u0434\u0443\u0442 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0448\u0442\u0443\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u0448\u043b\u0438 \u0441 \u043e\u043f\u044b\u0442\u043e\u043c:</p> <ul> <li>\u0415\u0441\u043b\u0438 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e field \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043a\u0430\u043a tag, \u0442\u043e \u0438\u043c\u044f \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0435 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f. \u042d\u0442\u043e \u0441\u0432\u044f\u0437\u0430\u043d\u043e \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0440\u0430\u043d\u043d\u0438\u0445 \u0432\u0435\u0440\u0441\u0438\u0439 influxdb, \u0433\u0434\u0435 \u0441 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0432 \u0441\u0430\u043c\u043e\u0439 \u0431\u0430\u0437\u0435 \u0441\u043b\u0443\u0447\u0430\u043b\u0430\u0441\u044c \u043a\u0430\u043d\u0430\u044f-\u0442\u043e \u043a\u0430\u0448\u0430. \u0422\u0430\u043a \u043f\u043e\u044f\u0432\u043b\u044f\u043b\u0438\u0441\u044c ifName \u0438 ifName_1 \u0438 \u044f \u0443\u0436\u0435 \u043d\u0435 \u043f\u043e\u043c\u043d\u044e \u0447\u0442\u043e \u0438\u0437 \u044d\u0442\u043e\u0433\u043e \u0447\u0442\u043e. \u041e\u043f\u044f\u0442\u044c \u0436\u0435 \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445 \u043c\u0435\u043d\u044c\u0448\u0435 \u043f\u0443\u0442\u0430\u043d\u0438\u0446\u044b \u0431\u0443\u0434\u0435\u0442, \u043a\u043e\u0433\u0434\u0430 ifName - \u044d\u0442\u043e field, \u0430 Name - \u044d\u0442\u043e tag. \u041f\u043e\u0437\u0436\u0435 \u0441\u0442\u0430\u043b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c fieldpass , \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043d\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u043b \u0432\u0441\u0435 field, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 tag.</li> <li>\u0412\u043c\u0435\u0441\u0442\u043e \u0438\u043c\u0435\u043d\u0438 oid'\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0441\u0430\u043c oid, \u0430 \u0435\u0433\u043e \u0438\u043c\u044f \u0434\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0432 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0432\u044b\u0448\u0435. \u0421\u0442\u0430\u0440\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f telegraf'\u0430 \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u043b\u0430 \u0432 shell'\u0435 snmptranslate \u0438 \u0447\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u0431\u044b\u043b\u043e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432, \u0442\u0435\u043c \u0432\u044b\u0448\u0435 \u0431\u044b\u043b\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 cpu. \u0420\u0435\u0441\u0442\u0430\u0440\u0442 \u0431\u044b\u043b \u043e\u0447\u0435\u043d\u044c \u043d\u0435\u0443\u0434\u043e\u0431\u0435\u043d \u0438 \u043f\u043e\u0437\u0436\u0435 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u043c\u0435\u043d\u044f\u043b\u0438 \u043d\u0430 \u043e\u0434\u043d\u043e\u043a\u0440\u0430\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0443\u0441\u043a snmptranslate. \u0412\u0441\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u044e\u0442\u0441\u044f \u0432 \u043c\u0438\u0431\u0430\u0445 \u0438 \u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0441\u043e\u0432\u0441\u0435\u043c \u0431\u0435\u0437 \u043c\u0438\u0431\u0430 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f.</li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u043b\u044f cisco ip sla, \u0433\u0434\u0435 \u043d\u0435 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0432\u0441\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 rttMonLatestRttOperTable (\u0437\u0430\u043a\u043e\u043c\u0435\u043d\u043d\u0438\u0440\u043e\u0432\u0430\u043d oid), \u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u0432\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u0437 \u043d\u0435\u0435. \u0422\u044d\u0433 \u0434\u043b\u044f \u0437\u0430\u043c\u0435\u043d\u044b \u0438\u043d\u0434\u0435\u043a\u0441\u0430 \u0431\u0435\u0440\u0435\u0442\u0441\u044f \u0438\u0437 \u0434\u0440\u0443\u0433\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b rttMonCtrlAdmintable. \u041d\u0430 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0438 cisco \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 sla: <pre><code>ip sla 1\n icmp-echo 10.4.3.1 source-ip 10.4.3.2\n tos 96\n threshold 200\n owner IPSName-vlanid@AddrA-AddrB\nip sla schedule 1 life forever start-time now\n</code></pre> \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043f\u043b\u0430\u0433\u0438\u043d\u0430 \u0441 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0435\u0439 \u043f\u043e \u0442\u0435\u0433\u0443, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0435, \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0431\u044b: <pre><code>[[inputs.snmp]]\n interval = \"1m\"\n agents = [ \"cisco\" ]\n version = 2\n community = \"public\"\n\n#CISCO-RTTMON-MIB::rttMonCtrlAdminOwner.5 = STRING: \"IPSName-vlanid@AddrA-AddrB\"\n\n  [[inputs.snmp.table]]\n    name = \"rttsla\"\n    #oid = \"CISCO-RTTMON-MIB::rttMonLatestRttOperTable\"\n\n    [[inputs.snmp.table.field]]\n      name = \"Descr\"\n      #oid = \"CISCO-RTTMON-MIB::rttMonCtrlAdminOwner\"\n      oid = \"1.3.6.1.4.1.9.9.42.1.2.1.1.2\"\n      is_tag = true\n\n    [[inputs.snmp.table.field]]\n      name = \"icmpResults\"\n      #oid = \"CISCO-RTTMON-MIB::rttMonLatestRttOperSense\"\n      oid = \"1.3.6.1.4.1.9.9.42.1.2.10.1.2\"\n\n    [[inputs.snmp.table.field]]\n      name = \"rttAvg\"\n      #oid = \"CISCO-RTTMON-MIB::rttMonLatestRttOperCompletionTime\"\n      oid = \"1.3.6.1.4.1.9.9.42.1.2.10.1.1\"\n\n [inputs.snmp.tagpass]\n   Descr = [ \"*@*\" ]\n</code></pre> \u0411\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u043c \u043e\u043a\u0430\u0437\u0430\u043b\u0441\u044f \u043e\u043f\u0440\u043e\u0441 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u0445 \u043f\u0440\u043e\u0431\u0435\u0440\u043e\u0432 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 huawei s5720ei, \u0433\u0434\u0435 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0440\u0430\u0441\u0442\u0443\u0449\u0438\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0434\u043b\u044f \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043e\u043a. \u0427\u0442\u043e\u0431\u044b \u0435\u0433\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c, \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u043b\u043e\u0441\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c oid. \u0414\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0442\u0430\u043a\u0438\u0435 \u0436\u0435 \u0438\u043c\u0435\u043d\u0430 \u043c\u0435\u0442\u0440\u0438\u043a: <pre><code>[[inputs.snmp]]\n interval = \"1m\"\n agents = [ \"huawei\" ]\n version = 2\n community = \"public\"\n\n# for  huawei s5720-ei\n#NQA-MIB::nqaAdminCtrlTag.\"1\".\"1\" = STRING: IPSName-vlanid@AddrA-AddrB\n#.1.3.6.1.4.1.2011.5.25.111.2.1.1.3.1.49.1.49 = STRING: IPSName-vlanid@AddrA-AddrB\n#index is 1.49.1.49. oid_index_length = 4\n#NQA-MIB::nqaResultsCompletions.\"1\".\"1\".186177.1 = INTEGER: success(1)\n#s5720-ei has a history index\n\n  [[inputs.snmp.table]]\n    name = \"rttsla\"\n    #oid = \"NQA-MIB::nqaAdminCtrlTable\"\n\n    [[inputs.snmp.table.field]]\n      name = \"Descr\"\n      #oid = \"NQA-MIB::nqaAdminCtrlTag\"\n      oid = \"1.3.6.1.4.1.2011.5.25.111.2.1.1.3\"\n      is_tag = true\n\n    [[inputs.snmp.table.field]]\n      name = \"icmpResults\"\n      #NQA-MIB::nqaResultsCompletions\n      oid = \"1.3.6.1.4.1.2011.5.25.111.4.1.1.3\"\n      oid_index_length = 4\n\n    [[inputs.snmp.table.field]]\n      name = \"rttAvg\"\n      #NQA-MIB::nqaResultsRttAvg\n      oid = \"1.3.6.1.4.1.2011.5.25.111.4.1.1.26\"\n      oid_index_length = 4\n\n [inputs.snmp.tagpass]\n   Descr = [ \"*@*\" ]\n</code></pre> \u0412\u043e\u0442 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0437\u0430 \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043e\u043f\u0440\u043e\u0441\u0430 \u043e\u0434\u043d\u0430 \u043c\u0438\u043d\u0443\u0442\u0430. \u0414\u0430\u043b\u0435\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 cisco, \u0433\u0434\u0435 \u0435\u0441\u0442\u044c \u0440\u044f\u0434 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439, \u0447\u0442\u043e\u0431\u044b \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e \u0432 \u0431\u0430\u0437\u0443 influxdb \u043d\u0435 \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043b\u0438\u0448\u043d\u0435\u0433\u043e \u0438 \u043d\u0435 \u0431\u044b\u043b\u043e \u0442\u0430\u043a\u043e\u0433\u043e, \u043a\u043e\u0433\u0434\u0430 \u043e\u0434\u043d\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u0438\u0448\u0435\u0442 \u0431\u043e\u043b\u044c\u0448\u0435 \u043f\u043e\u043b\u0435\u0439 \u0432 \u0431\u0430\u0437\u0443, \u0447\u0435\u043c \u0434\u0440\u0443\u0433\u043e\u0435. \u042d\u0442\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u0437\u0430\u043f\u0438\u0448\u0435\u0442 \u0432 \u0431\u0430\u0437\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f mtu, ifalias \u0438 \u043f\u0440\u043e\u0447\u0435\u0435. \u0422\u043e\u043b\u044c\u043a\u043e \u0442\u043e, \u0447\u0442\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e \u0432 fieldpass. \u041c\u0435\u0442\u0440\u0438\u043a\u0438 \u0441 \u0442\u0435\u0433\u0430\u043c\u0438 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b. \u0421\u0435\u0439\u0447\u0430\u0441 \u044f \u0443\u0434\u0430\u043b\u044f\u044e \u043f\u043e \u043b\u0435\u0439\u0431\u043b\u0443 ifType, \u0430 \u043d\u0435 \u043f\u043e \u0438\u043c\u0435\u043d\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430. \u0412\u043e\u043f\u0440\u0435\u043a\u0438 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u043c, \u043d\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u044b ifTable \u0438 ifTableX \u0446\u0435\u043b\u0438\u043a\u043e\u043c \u0438 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0432 influxdb \u0432\u0441\u0435 \u043f\u043e\u0434\u0440\u044f\u0434: \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0448\u0435\u043d\u044b, \u0442\u0430\u0439\u043c\u0441\u0442\u0430\u043c\u043f\u044b \u0438 \u043f\u0440\u043e\u0447\u0443\u044e \u043d\u0435\u043d\u0443\u0436\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0438\u0442\u0441\u044f \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0432\u044b\u043f\u043e\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0445\u043e\u0442\u044f \u0442\u0443\u0442 \u0442\u043e\u0436\u0435 \u043c\u043d\u043e\u0433\u043e \u043b\u0438\u0448\u043d\u0435\u0433\u043e \u0434\u043b\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430. \u0416\u0430\u043b\u044c \u0431\u044b\u043b\u043e \u0440\u0430\u0441\u0441\u0442\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u043e\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0437\u0432\u043e\u043b\u0438\u043b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u043d\u043e \u0442\u0430\u043a\u0443\u044e \u0437\u0430\u043c\u0435\u043d\u0443 \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 cbqos, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u044d\u0442\u043e\u0442 \u043c\u0438\u0431 \u0441\u0430\u043c\u044b\u0439 \u043d\u0435\u0432\u043c\u0435\u043d\u044f\u0435\u043c\u044b\u0439, \u0430 chain lookup \u0432 snmp_exporter'\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0435\u0434\u0430\u0432\u043d\u043e. <pre><code>[[inputs.snmp]]\n interval = \"5m\"\n agents = [ \"cisco_router\" ]\n version = 2\n community = \"public\"\n fieldpass = [ \"cbQos*\", \"bgpPeerState\", \"bgpPeerFsmEstablishedTransitions\", \"Duplex\" , \"Speed\" , \"ifAdminStatus\" , \"ifOperStatus\" , \"ifInDiscards\" , \"ifInErrors\" , \"ifOutDiscards\" , \"ifOutErrors\" , \"ifHCInOctets\" , \"ifHCInUcastPkts\" , \"ifHCInMulticastPkts\" , \"ifHCInBroadcastPkts\" , \"ifHCOutOctets\" , \"ifHCOutUcastPkts\" , \"ifHCOutMulticastPkts\" , \"ifHCOutBroadcastPkts\" ]\n tagexclude = [ \"ifIndex\" ]\n\n [[inputs.snmp.table]]\n  name = \"interface32\"\n  #oid = \"IF-MIB::ifTable\"\n\n   [[inputs.snmp.table.field]]\n    name = \"Name\"\n    #IF-MIB::ifName\n    oid = \"1.3.6.1.2.1.31.1.1.1.1\"\n    is_tag = true\n\n   [[inputs.snmp.table.field]]\n    name = \"Speed\"\n    #IF-MIB::ifHighSpeed\n    oid = \"1.3.6.1.2.1.31.1.1.1.15\"\n\n   [[inputs.snmp.table.field]]\n    name = \"Duplex\"\n    #EtherLike-MIB::dot3StatsDuplexStatus\n    oid = \"1.3.6.1.2.1.10.7.2.1.19\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifAdminStatus\"\n    #IF-MIB::ifAdminStatus\n    oid = \"1.3.6.1.2.1.2.2.1.7\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifOperStatus\"\n    #IF-MIB::ifOperStatus\n    oid = \"1.3.6.1.2.1.2.2.1.8\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifInDiscards\"\n    #IF-MIB::ifInDiscards\n    oid = \"1.3.6.1.2.1.2.2.1.13\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifInErrors\"\n    #IF-MIB::ifInErrors\n    oid = \"1.3.6.1.2.1.2.2.1.14\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifOutDiscards\"\n    #IF-MIB::ifOutDiscards\n    oid = \"1.3.6.1.2.1.2.2.1.19\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifOutErrors\"\n    #IF-MIB::ifOutErrors\n    oid = \"1.3.6.1.2.1.2.2.1.20\"\n\n [[inputs.snmp.table]]\n  name = \"interface64\"\n  #oid = \"IF-MIB::ifXTable\"\n\n   [[inputs.snmp.table.field]]\n    name = \"Name\"\n    #IF-MIB::ifName\n    oid = \"1.3.6.1.2.1.31.1.1.1.1\"\n    is_tag = true\n\n   [[inputs.snmp.table.field]]\n     name = \"Speed\"\n     #IF-MIB::ifHighSpeed\n     oid = \"1.3.6.1.2.1.31.1.1.1.15\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCInOctets\"\n     #IF-MIB::ifHCInOctets\n     oid = \"1.3.6.1.2.1.31.1.1.1.6\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCInUcastPkts\"\n     #IF-MIB::ifHCInUcastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.7\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCInMulticastPkts\"\n     #IF-MIB::ifHCInMulticastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.8\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCInBroadcastPkts\"\n     #IF-MIB::ifHCInBroadcastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.9\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCOutOctets\"\n     #IF-MIB::ifHCOutOctets\n     oid = \"1.3.6.1.2.1.31.1.1.1.10\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCOutUcastPkts\"\n     #IF-MIB::ifHCOutUcastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.11\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCOutMulticastPkts\"\n     #IF-MIB::ifHCOutMulticastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.12\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCOutBroadcastPkts\"\n     #IF-MIB::ifHCOutBroadcastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.13\"\n\n  [[inputs.snmp.table]]\n    name = \"bgpPeer\"\n    #oid = \"1.3.6.1.2.1.15.3\"\n\n    [[inputs.snmp.table.field]]\n      name = \"bgpPeerIdentifier\"\n      #BGP4-MIB::bgpPeerIdentifier\"\n      oid = \"1.3.6.1.2.1.15.3.1.1\"\n      is_tag = true\n\n    [[inputs.snmp.table.field]]\n      name = \"bgpPeerState\"\n      #BGP4-MIB::bgpPeerState\"\n      oid = \"1.3.6.1.2.1.15.3.1.2\"\n\n    [[inputs.snmp.table.field]]\n      name = \"bgpPeerFsmEstablishedTransitions\"\n      #BGP4-MIB::bgpPeerFsmEstablishedTransitions\n      oid = \"1.3.6.1.2.1.15.3.1.15\"\n\n [[inputs.snmp.table]]\n   name =\"cbQos\"\n   oid = \"CISCO-CLASS-BASED-QOS-MIB::cbQosCMStatsTable\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ConfigIndex\"\n     #oid = \"CISCO-CLASS-BASED-QOS-MIB::cbQosConfigIndex\"\n     oid = \"1.3.6.1.4.1.9.9.166.1.5.1.1.2\"\n     is_tag = true\n\n   [[inputs.snmp.table.field]]\n     name = \"ParentObjectsIndex\"\n     #oid = \"CISCO-CLASS-BASED-QOS-MIB::cbQosParentObjectsIndex\"\n     oid = \"1.3.6.1.4.1.9.9.166.1.5.1.1.4\"\n     is_tag = true\n\n [inputs.snmp.tagdrop]\n   Name = [ \"SONET*\", \"Vo*\", \"Nu0\", \"E1*\", \"Lo*\", \"Vl*\", \"CH*\", \"*:*\", \"St*\", \"VL*\" ]\n</code></pre> \u0420\u0430\u0437 \u0432 4 \u0447\u0430\u0441\u0430 \u043d\u0435\u0441\u043f\u0435\u0448\u0430 c getnext, \u0430 \u043d\u0435 getbulk \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0438\u0437 ifalias. \u041f\u0440\u043e\u0431\u043e\u0432\u0430\u043b \u043f\u0438\u0441\u0430\u0442\u044c \u043f\u043e\u0434\u043e\u0431\u043d\u043e\u0435 \u0432 clickhouse, \u0447\u0442\u043e\u0431\u044b \u0432\u044b\u0432\u0435\u0441\u0442\u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0432 \u0433\u0440\u0430\u0444\u0430\u043d\u0435. <pre><code>[[inputs.snmp]]\n interval = \"4h\"\n agents = [ \"device\" ]\n version = 2\n max_repetitions = 1\n retries = 1\n community = \"public\"\n fieldpass = [ \"Alias\", \"Name\" ]\n\n [[inputs.snmp.table]]\n  name = \"ifalias\"\n\n   [[inputs.snmp.table.field]]\n    name = \"Ifindex\"\n    #IF-MIB::ifIndex\n    oid = \"1.3.6.1.2.1.2.2.1.1\"\n    is_tag = true\n\n   [[inputs.snmp.table.field]]\n    name = \"Name\"\n    #IF-MIB::ifName\n    oid = \"1.3.6.1.2.1.31.1.1.1.1\"\n\n   [[inputs.snmp.table.field]]\n    name = \"Alias\"\n    #IF-MIB::ifAlias\n    oid = \"1.3.6.1.2.1.31.1.1.1.18\"\n</code></pre> \u042d\u0442\u043e\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043c\u043e\u0434\u0435\u043b\u0438, \u0441\u0435\u0440\u0438\u0439\u043d\u0438\u043a\u0430\u0445, \u043a\u043e\u0433\u0434\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 entity-mib. Juniper \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442. \u0422\u0443\u0442 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 index_as_tag, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u0432 \u0441\u0442\u0435\u043a\u0435, \u0442\u043e\u0447\u043a\u0430\u0445 \u0434\u043e\u0441\u0442\u0443\u043f\u0430, \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0435. \u0422.\u043a. \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u0432\u0435\u043d\u0434\u043e\u0440\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432\u0441\u0435 \u0447\u0442\u043e \u0443\u0433\u043e\u0434\u043d\u043e (dlink,d-link \u0438 \u0442\u043f), \u0442\u043e \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u0435\u043d\u0434\u043e\u0440\u0430 \u0440\u0435\u0448\u0438\u043b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u0433 MfgName. \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441 ModelName \u0432 inputs.snmp.tagpass \u0434\u043b\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u0438\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u043f\u043e\u0440\u0442\u0430\u0445. <pre><code>[[inputs.snmp]]\n interval = \"24h\"\n agents = [ \"dlink\" ]\n version = 2\n timeout = \"2m\"\n community = \"public\"\n fieldpass = [ \"entPhysicalDescr\" , \"entPhysicalName\" , \"entPhysicalFirmwareRev\" , \"entPhysicalHardwareRev\" , \"entPhysicalSerialNum\" , \"entPhysicalSoftwareRev\" ]\n\n [[inputs.snmp.field]]\n  name = \"location\"\n  #SNMPv2-MIB::sysLocation.0\n  oid = \"1.3.6.1.2.1.1.6.0\"\n  is_tag = true\n\n [[inputs.snmp.field]]\n  name = \"contact\"\n  #SNMPv2-MIB::sysContact.0\n  oid = \"1.3.6.1.2.1.1.4.0\"\n  is_tag = true\n\n [[inputs.snmp.table]]\n  name = \"inventory_entity\"\n  inherit_tags = [ \"location\", \"contact\" ]\n  #oid = \"ENTITY-MIB::entPhysicalTable\"\n  index_as_tag = true # stack, access points\n   [[inputs.snmp.table.field]]\n    name = \"ModelName\"\n    #ENTITY-MIB::entPhysicalModelName\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.13\"\n    is_tag = true\n\n   [[inputs.snmp.table.field]]\n    name = \"Class\"\n    #ENTITY-MIB::entPhysicalClass\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.5\"\n    is_tag = true\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalName\"\n    #ENTITY-MIB::entPhysicalName\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.7\"\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalDescr\"\n    #ENTITY-MIB::entPhysicalDescr\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.2\"\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalHardwareRev\"\n    #ENTITY-MIB::entPhysicalHardwareRev\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.8\"\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalFirmwareRev\"\n    #ENTITY-MIB::entPhysicalFirmwareRev\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.9\"\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalSoftwareRev\"\n    #ENTITY-MIB::entPhysicalSoftwareRev\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.10\"\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalSerialNum\"\n    #ENTITY-MIB::entPhysicalSerialNum\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.11\"\n\n [inputs.snmp.tags]\n  MfgName = \"dlink\"\n  obj = \"object_id\"\n\n [inputs.snmp.tagpass]\n  ModelName = [ \"*\" ]\n</code></pre> \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0432 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0445 \u0441\u0442\u0440\u043e\u043a\u0430\u0445 \u0431\u044b\u0432\u0430\u0435\u0442 \u043a\u0440\u0438\u0432\u0430\u044f, \u0441 \u043f\u0440\u043e\u0431\u0435\u043b\u0430\u043c\u0438 \u0432 \u043a\u043e\u043d\u0446\u0435, \u0441\u0438\u043c\u0432\u043e\u043b\u0430\u043c\u0438, \u0447\u0435\u043c \u0433\u0440\u0435\u0448\u0430\u0442 sfp \u0438 wic \u043c\u043e\u0434\u0443\u043b\u0438 cisco. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432 telegraf.d \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b proc_trim.conf. \u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u044b \u0432 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u0444\u0435 \u043d\u0438\u043a\u0430\u043a \u043d\u0435\u043b\u044c\u0437\u044f \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c. <pre><code>[[processors.strings]]\n namepass = [\"inventory_entity\"]\n [[processors.strings.trim]]\n  tag = \"ModelName\"\n [[processors.strings.trim]]\n  field = \"entPhysicalDescr\"\n [[processors.strings.trim]]\n  field = \"entPhysicalName\"\n [[processors.strings.trim]]\n  field = \"entPhysicalFirmwareRev\"\n [[processors.strings.trim]]\n  field = \"entPhysicalHardwareRev\"\n [[processors.strings.trim]]\n  field = \"entPhysicalSerialNum\"\n [[processors.strings.trim]]\n  field = \"entPhysicalSoftwareRev\"\n [[processors.strings.lowercase]]\n  tag = \"contact\"\n [[processors.strings.lowercase]]\n  tag = \"location\"\n</code></pre> \u0412\u0440\u043e\u0434\u0435 \u0431\u044b \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443, \u043d\u043e \u043d\u0435\u0442. \u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0448\u044c \u0442\u0435\u0441\u0442 \u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0448\u044c: <pre><code>inventory_entity,Class=9,MfgName=cisco,ModelName=WIC-2T\\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n</code></pre> \u0427\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f, \u0442\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 LimitNOFILE \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0432 /lib/systemd/system/telegraf.service. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0442\u044c metric_buffer_limit \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0430\u0433\u0435\u043d\u0442\u0430 \u0432 /etc/telegraf/telegraf.conf, \u043a\u043e\u0433\u0434\u0430 \u0432 \u043b\u043e\u0433\u0430\u0445 \u043f\u043e\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0434\u0440\u043e\u043f\u0430\u0445. \u0420\u0430\u0437\u043c\u0435\u0440 \u044d\u0442\u043e\u0433\u043e \u043a\u044d\u0448\u0430 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0432\u0440\u0435\u043c\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0431\u0430\u0437\u044b. \u0411\u0435\u0434\u0430, \u043a\u043e\u0433\u0434\u0430 \u043d\u0443\u0436\u0435\u043d \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u043d\u0435 \u043c\u0435\u0442\u0440\u0438\u043a, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432 \u043a\u0430\u0436\u0434\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u0439, \u043a\u043e\u0433\u0434\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0440\u044f\u0434 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f. \u0422\u0443\u0442 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u0432\u0438\u0434\u0435\u043e\u043a\u043e\u0434\u0435\u043a\u043e\u0432 polycom, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e snmp \u043e\u0442\u0434\u0430\u044e\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u0435\u0430\u043d\u0441\u0430 \u0432\u0438\u0434\u0435\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0441\u0432\u044f\u0437\u0438. \u0421\u0442\u0440\u0430\u043d\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0432\u0441\u0435 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u044b\u0435 oid'\u044b \u043d\u0438\u0436\u0435 - \u044d\u0442\u043e \u0441\u0442\u0440\u043e\u043a\u0438. \u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u0437\u0430\u043f\u0443\u0441\u043a \u0431\u0435\u0437 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 \u0447\u0438\u0441\u043b\u043e \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u0442\u043e\u043c\u0443, \u0447\u0442\u043e field \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442, \u0435\u0441\u043b\u0438 \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u0443\u0441\u0442\u0430\u044f. \u041d\u043e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u0435\u043b\u0430\u0435\u0442 \u0438\u0437 \u043f\u0443\u0441\u0442\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 0i \u0438 \u0432\u0441\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0438\u0448\u0443\u0442\u0441\u044f \u0432 \u0431\u0430\u0437\u0443, \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0440\u044f\u0434 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043d\u0435 \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f. \u0421 \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c \u0434\u043b\u044f snmp_exporter'\u0430 \u0442\u0430\u043a \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f. <pre><code>[[inputs.snmp]]\n  interval = \"1m\"\n  agents = [ \"polycom\" ]\n  version = 2\n  community = \"public\"\n\n  name = \"polycom\"\n  [[inputs.snmp.field]]\n   name = \"PercentPacketLoss\"\n   oid = \"1.3.6.1.4.1.2684.1.1.21.0\"\n   conversion = \"int\"\n\n  [[inputs.snmp.field]]\n   name = \"Jitter\"\n   oid = \"1.3.6.1.4.1.2684.1.1.22.0\"\n   conversion = \"int\"\n\n  [[inputs.snmp.field]]\n   name = \"Latency\"\n   oid = \"1.3.6.1.4.1.2684.1.1.23.0\"\n   conversion = \"int\"\n</code></pre></p>"},{"location":"monitoring/a1/#snmp_exporter","title":"\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 snmp_exporter","text":"<p>\u0412 \u0432\u0435\u0440\u0441\u0438\u0438 0.20 \u043f\u043e\u043a\u0430 \u0435\u0449\u0435 \u043d\u0443\u0436\u0435\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u0434\u043b\u044f \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f snmp.yml (\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b snmp_exporter) \u0438\u0437 yaml \u0444\u0430\u0439\u043b\u0430 generator.yml \u0418\u0437 \u0438\u0441\u0445\u043e\u0434\u0438\u043a\u043e\u0432 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u0432 \u044d\u0442\u043e\u0442 \u0440\u0430\u0437, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0441 \u0434\u043e\u043a\u0435\u0440\u043e\u043c https://hub.docker.com/r/prom/snmp-generator. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435 podman \u0432 ubuntu 20.10 \u0421\u0442\u0430\u0440\u044b\u0439 \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u0438\u0441\u043a\u0430\u043b \u043c\u0438\u0431\u044b \u0432 \u0434\u043e\u043c\u0430\u0448\u043d\u0435\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 .snmp/mibs, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0430\u0440\u0445\u0438\u0432 \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u043c\u0438 \u043c\u0438\u0431\u0430\u043c\u0438 \u0442\u0430\u043c. \u0421\u0430\u043c \u0444\u0430\u0439\u043b generator.yml \u0432 .snmp/ <pre><code>cd .snmp/\ndocker run -it -v \"${PWD}:/opt/\" prom/snmp-generator generate\n</code></pre> \u0415\u0441\u043b\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0441\u044f \u0431\u0435\u0437 \u043e\u0448\u0438\u0431\u043e\u043a, \u0442\u043e \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0442\u044c\u0441\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b snmp.yml <pre><code>$ ls\ngenerator.yml  mibs  snmp.yml\n</code></pre></p>"},{"location":"monitoring/a1/#generatoryml","title":"generator.yml","text":"<p>\u0414\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u044b \u0432\u0441\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430, \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c\u044b\u0435 \u043e\u0434\u043d\u0438\u043c \u043c\u043e\u0434\u0443\u043b\u0435\u043c \u0438\u043c\u0435\u044e\u0442 \u043e\u0434\u043d\u0443 \u0438 \u0442\u0443 \u0436\u0435 \u0432\u0435\u0440\u0441\u0438\u044e snmp \u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0438\u0442\u0438 public. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u0438 \u0434\u0430\u043b\u0435\u0435 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 vmagent'\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0442\u0430\u043a\u043e\u0433\u043e \u043c\u043e\u0434\u0443\u043b\u044f \u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 job</p> <p>\u0414\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043c\u043e\u0434\u0443\u043b\u044c \u0434\u043b\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u0432 generator.yml: <pre><code>modules:\n\n  devicename:\n    retries: 1\n    walk:\n      - 1.3.6.1.2.1.1.3         #sysUpTime\n      - 1.3.6.1.2.1.2.2.1.8     #IF-MIB::ifOperStatus\n      - 1.3.6.1.2.1.2.2.1.14    #IF-MIB::ifInErrors\n      - 1.3.6.1.2.1.2.2.1.19    #IF-MIB::ifOutDiscards\n      - 1.3.6.1.2.1.31.1.1.1.6  #IF-MIB::ifHCInOctets\n      - 1.3.6.1.2.1.31.1.1.1.7  #IF-MIB::ifHCInUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.10 #IF-MIB::ifHCOutOctets\n      - 1.3.6.1.2.1.31.1.1.1.11 #IF-MIB::ifHCOutUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.15 #IF-MIB::ifHighSpeed\n\n    lookups:\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.31.1.1.1.1  #ifName\n        drop_source_indexes: true\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.2.2.1.3     #ifType\n</code></pre></p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u043e, \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0438 \u0447\u0442\u043e \u043c\u043e\u0436\u043d\u043e (\u0441\u0442\u0440\u043e\u043a\u0438 \u043d\u0435\u043b\u044c\u0437\u044f, \u043d\u043e \u0441\u0441\u044b\u043b\u043a\u0430 \u0432\u043d\u0438\u0437\u0443). \u041d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u0432\u043e\u043e\u0431\u0449\u0435 \u0432\u0441\u0435 \u0438 \u0442\u0435\u043c \u0431\u043e\u043b\u0435\u0435 \u043e\u0431\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b iftable \u0438 ifxtable \u0446\u0435\u043b\u0438\u043a\u043e\u043c. \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0441 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c\u0438:</p> \u0447\u0442\u043e \u0437\u0430\u0447\u0435\u043c sysUpTime \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0440\u0430\u0431\u043e\u0442\u044b \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f ifOperStatus \u0441\u0442\u0430\u0442\u0443\u0441 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 up/down ifInErrors \u043e\u0431\u0449\u0438\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043e\u0448\u0438\u0431\u043e\u043a ifOutDiscards \u0434\u0438\u0441\u043a\u0430\u0440\u0434\u044b \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u0438\u0437-\u0437\u0430 speed mismatch, qos, \u0438 \u0442\u043f ifHCInOctets 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0431\u0430\u0439\u0442 ifHCInUcastPkts 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u044e\u043d\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0445 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 ifHCOutOctets 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0431\u0430\u0439\u0442 ifHCOutUcastPkts 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u044e\u043d\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0445 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 ifHighSpeed \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0434\u043b\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u0430 % \u0443\u0442\u0438\u043b\u0438\u0437\u0430\u0446\u0438\u0438 <p>\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0441 label, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0431\u0443\u0434\u0443\u0442 \u0443 \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> \u0447\u0442\u043e \u0437\u0430\u0447\u0435\u043c ifName \u0438\u043c\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0438\u0437 ifxtable \u0432\u043c\u0435\u0441\u0442\u043e ifIndex, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u0434\u0430\u043b\u0435\u043d <code>drop_source_indexes: true</code> ifType \u0442\u0438\u043f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0434\u043b\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u043c\u0435\u0442\u0440\u0438\u043a \u0432 vmagent'\u0435, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u043c <p>\u0414\u0440\u043e\u043f\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0434\u043b\u044f \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430\u0445 cisco \u043d\u0435\u043b\u044c\u0437\u044f. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0440\u0438 \u043e\u043f\u0440\u043e\u0441\u0435 7206VXR \u0441 \u043c\u043e\u0434\u0443\u043b\u044f\u043c\u0438 \u043c\u043e\u0436\u0435\u0442 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u0443\u0442\u044c \u043e\u0448\u0438\u0431\u043a\u0430.</p> <p>\u0423 snmp_exporter'\u0430 \u0435\u0441\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b overrides, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442\u044c \u0434\u0440\u043e\u043f\u0430\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a\u0438. \u042d\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0432\u044b\u0441\u043e\u043a\u043e\u043a\u0430\u0440\u0434\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0442\u0440\u0438\u043a, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0438\u043b\u0438 \u043c\u0443\u0441\u043e\u0440\u0430. <pre><code>  n3k:\n    retries: 1\n    walk:\n      - 1.3.6.1.2.1.1.3             # sysUpTime\n      - 1.3.6.1.2.1.2.2.1.7         # IF-MIB::ifAdminStatus\n      - 1.3.6.1.2.1.2.2.1.8         # IF-MIB::ifOperStatus\n      - 1.3.6.1.2.1.2.2.1.9         # IF-MIB::ifLastChange\n      - 1.3.6.1.2.1.2.2.1.14        # IF-MIB::ifInErrors\n      - 1.3.6.1.2.1.2.2.1.19        # IF-MIB::ifOutDiscards\n      - 1.3.6.1.2.1.31.1.1.1.6      # IF-MIB::ifHCInOctets\n      - 1.3.6.1.2.1.31.1.1.1.7      # IF-MIB::ifHCInUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.10     # IF-MIB::ifHCOutOctets\n      - 1.3.6.1.2.1.31.1.1.1.11     # IF-MIB::ifHCOutUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.15     # IF-MIB::ifHighSpeed\n      - 1.3.6.1.2.1.10.7.10         # EtherLike-MIB::dot3PauseTable\n      - 1.3.6.1.2.1.15.3.1.2        # BGP4-MIB::bgpPeerState\n      - 1.3.6.1.2.1.15.3.1.15       # BGP4-MIB::bgpPeerFsmEstablishedTransitions\n      - 1.3.6.1.4.1.9.9.91.1.1.1.1.4    # CISCO-ENTITY-SENSOR-MIB::entSensorValue\n      - 1.3.6.1.4.1.9.9.91.1.1.1.1.5    # CISCO-ENTITY-SENSOR-MIB::entSensorStatus\n      - 1.3.6.1.4.1.9.9.109.1.1.1.1.7       # CISCO-PROCESS-MIB::cpmCPUTotal1minRev\n      - 1.3.6.1.4.1.9.9.109.1.1.1.1.12      # CISCO-PROCESS-MIB::cpmCPUMemoryUsed\n      - 1.3.6.1.4.1.9.9.109.1.1.1.1.13      # CISCO-PROCESS-MIB::cpmCPUMemoryFree\n      - 1.3.6.1.4.1.9.9.117.1.1.2       # CISCO-ENTITY-FRU-CONTROL-MIB::cefcFRUPowerStatusTable\n      - 1.3.6.1.4.1.9.9.117.1.2.1       # CISCO-ENTITY-FRU-CONTROL-MIB::cefcModuleTable\n      - 1.3.6.1.4.1.9.9.117.1.4.1       # CISCO-ENTITY-FRU-CONTROL-MIB::cefcFanTrayStatusTable\n      - 1.3.6.1.4.1.9.9.42.1.2.10.1.2   # CISCO-RTTMON-MIB::rttMonLatestRttOperSense\n\n    lookups:\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.31.1.1.1.1  # ifName\n        drop_source_indexes: true\n      - source_indexes: [dot3StatsIndex]\n        lookup: 1.3.6.1.2.1.31.1.1.1.1  # ifName\n        drop_source_indexes: true\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.2.2.1.3     # ifType for eth=6\n      - source_indexes: [entPhysicalIndex]\n        drop_source_indexes: true\n        lookup: 1.3.6.1.2.1.47.1.1.1.1.2    # entPhysicalDescr\n\n    overrides:\n      entSensorStatus:\n        ignore: true\n</code></pre></p>"},{"location":"monitoring/a1/#override-displaystrings","title":"Override DisplayStrings","text":"<p>\u0411\u044b\u0432\u0430\u0435\u0442 \u0447\u0442\u043e oid \u0438\u043c\u0435\u0435\u0442 \u0442\u0438\u043f string, \u043d\u043e \u0432 \u043d\u0435\u0433\u043e \u043f\u0438\u0448\u0443\u0442\u0441\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f. \u041f\u043e\u043c\u0438\u043c\u043e \u043f\u0440\u043e\u0447\u0435\u0433\u043e \u0442\u0430\u043a\u0438\u0435 oid'\u044b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0442\u044c \u0438 \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u043b\u0438\u0431\u043e \u043f\u0435\u0440\u0435\u0434\u0435\u043b\u044b\u0432\u0430\u0442\u044c. \u0415\u0441\u043b\u0438 \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u043a \u0435\u0441\u0442\u044c, \u0442\u043e \u0441\u0442\u0440\u043e\u043a\u0438 \u0441\u0442\u0430\u043d\u0443\u0442 label'\u043c\u0438, \u0447\u0442\u043e \u043f\u043b\u043e\u0445\u043e \u0441\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438, \u0442.\u043a. \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0434\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a. \u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u043e - Numbers from DisplayStrings with the snmp_exporter \u041d\u0438\u0436\u0435 \u043f\u0440\u0438\u043c\u0435\u0440 \u0441 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u043c\u0438 extreme, \u0433\u0434\u0435 \u043f\u0430\u043c\u044f\u0442\u044c \u0438 cpu - \u044d\u0442\u043e string. https://gtacknowledge.extremenetworks.com/articles/Q_A/Is-there-a-way-to-display-the-OID-1-3-6-1-4-1-1916-1-32-1-4-1-9-for-CPU-utilization-to-an-integer-instead-of-a-string EXTREME-SOFTWARE-MONITOR-MIB</p> <pre><code>  exos:\n    retries: 1\n    walk:\n      - 1.3.6.1.2.1.1.3             # sysUpTime\n      - 1.3.6.1.2.1.2.2.1.7         # IF-MIB::ifAdminStatus\n      - 1.3.6.1.2.1.2.2.1.8         # IF-MIB::ifOperStatus\n      - 1.3.6.1.2.1.2.2.1.9         # IF-MIB::ifLastChange\n      - 1.3.6.1.2.1.2.2.1.14        # IF-MIB::ifInErrors\n      - 1.3.6.1.2.1.2.2.1.19        # IF-MIB::ifOutDiscards\n      - 1.3.6.1.4.1.1916.1.4.14.1.1   # EXTREME-PORT-MIB::extremePortCongDropPkts\n      - 1.3.6.1.2.1.31.1.1.1.6      # IF-MIB::ifHCInOctets\n      - 1.3.6.1.2.1.31.1.1.1.7      # IF-MIB::ifHCInUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.10     # IF-MIB::ifHCOutOctets\n      - 1.3.6.1.2.1.31.1.1.1.11     # IF-MIB::ifHCOutUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.15     # IF-MIB::ifHighSpeed\n      - 1.3.6.1.2.1.15.3.1.2        # BGP4-MIB::bgpPeerState\n      - 1.3.6.1.2.1.15.3.1.15       # BGP4-MIB::bgpPeerFsmEstablishedTransitions\n      - 1.3.6.1.4.1.1916.1.32.1.4.1.8   # EXTREME-SOFTWARE-MONITOR-MIB::extremeCpuMonitorSystemUtilization1min\n      - 1.3.6.1.4.1.1916.1.32.2.2       # EXTREME-SOFTWARE-MONITOR-MIB::extremeMemoryMonitorSystemTable\n      - 1.3.6.1.4.1.1916.1.1.1.27.1.2       # EXTREME-SYSTEM-MIB::extremePowerSupplyStatus\n      - 1.3.6.1.4.1.1916.1.1.1.7        # EXTREME-SYSTEM-MIB::extremeOverTemperatureAlarm\n      - 1.3.6.1.4.1.1916.1.1.1.8        # EXTREME-SYSTEM-MIB::extremeCurrentTemperature\n      - 1.3.6.1.4.1.1916.1.1.1.9        # EXTREME-SYSTEM-MIB::extremeFanStatusTable\n\n    lookups:\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.31.1.1.1.1  # ifName for ifmib and fcfemib\n        drop_source_indexes: true\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.2.2.1.3     # ifType for eth=6\n      - source_indexes: [entPhysicalIndex]\n        drop_source_indexes: true\n        lookup: 1.3.6.1.2.1.47.1.1.1.1.2    # entPhysicalDescr\n    overrides:\n      extremeCpuMonitorSystemUtilization1min:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorSystemTotal:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorSystemFree:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorSystemUsage:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorUserUsage:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n</code></pre>"},{"location":"monitoring/a1/#chain-lookup-indexes","title":"Chain lookup indexes","text":"<p>\u0415\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0432 oid'\u0435 \u043d\u0430 \u043e\u0434\u0438\u043d. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0431\u044b\u043b\u043e \u0438 \u0441\u0442\u0430\u043b\u043e <pre><code># TYPE jnxOperatingTemp gauge\njnxOperatingTemp{jnxOperatingContentsIndex=\"1\",jnxOperatingL1Index=\"0\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"12\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 36\njnxOperatingTemp{jnxOperatingContentsIndex=\"2\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 29\njnxOperatingTemp{jnxOperatingContentsIndex=\"2\",jnxOperatingL1Index=\"2\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 32\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"1\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"2\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"2\",jnxOperatingL2Index=\"1\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"2\",jnxOperatingL2Index=\"2\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"3\",jnxOperatingL2Index=\"1\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"3\",jnxOperatingL2Index=\"2\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"7\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"8\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"1\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"8\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"2\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"9\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 41\n\n\n# TYPE jnxOperatingTemp gauge\njnxOperatingTemp{jnxOperatingDescr=\"CB 0\"} 36\njnxOperatingTemp{jnxOperatingDescr=\"FPC: MPC @ 0/*/*\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 0 Fan 0\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 0 Fan 1\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 1 Fan 0\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 1 Fan 1\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 2 Fan 0\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 2 Fan 1\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"PEM 0\"} 29\njnxOperatingTemp{jnxOperatingDescr=\"PEM 1\"} 32\njnxOperatingTemp{jnxOperatingDescr=\"PIC: 4XQSFP28 PIC @ 0/0/*\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"PIC: 8XSFPP PIC @ 0/1/*\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Routing Engine\"} 41\njnxOperatingTemp{jnxOperatingDescr=\"midplane\"} 0\n</code></pre> \u042d\u0442\u043e \u0434\u043e\u0441\u0442\u0438\u0433\u0430\u0435\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439 <pre><code>  mx:\n    retries: 1\n    walk:\n      - 1.3.6.1.2.1.1.3             # sysUpTime\n      - 1.3.6.1.2.1.2.2.1.14        # IF-MIB::ifInErrors\n      - 1.3.6.1.2.1.31.1.1.1.6      # IF-MIB::ifHCInOctets\n      - 1.3.6.1.2.1.31.1.1.1.10     # IF-MIB::ifHCOutOctets\n      - 1.3.6.1.2.1.15.3.1.2        # BGP4-MIB::bgpPeerState\n      - 1.3.6.1.2.1.15.3.1.15       # BGP4-MIB::bgpPeerFsmEstablishedTransitions\n      - 1.3.6.1.4.1.2636.3.5.2.1.4  # JUNIPER-FIREWALL-MIB::jnxFWCounterPacketCount\n      - 1.3.6.1.4.1.2636.3.5.2.1.5  # JUNIPER-FIREWALL-MIB::jnxFWCounterByteCount\n      - 1.3.6.1.4.1.2636.3.1.13     # https://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB17526\n                                    # https://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB15467\n    lookups:\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.31.1.1.1.1  # ifName\n        drop_source_indexes: true\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.2.2.1.3     # ifType\n      - source_indexes: [jnxOperatingContentsIndex,jnxOperatingL1Index,jnxOperatingL2Index,jnxOperatingL3Index]\n        lookup: 1.3.6.1.4.1.2636.3.1.13.1.5     # jnxOperatingDescr\n        drop_source_indexes: true\n</code></pre></p>"},{"location":"monitoring/a1/#hex-in-string","title":"HEX in string","text":"<p>\u0411\u044b\u0432\u0430\u0435\u0442 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u0442\u0438\u043f, \u0432 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 label \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0442\u0441\u044f \u0432 hex. \u041e\u043f\u0438\u0441\u0430\u043d\u043e \u0442\u0443\u0442 Why is my SNMP string showing as hexadecimal?. \u041d\u0438\u0436\u0435 \u043f\u0440\u0438\u043c\u0435\u0440 \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u0433\u0438\u043f\u0435\u0440\u0432\u0438\u0437\u043e\u0440\u0430 esxi <pre><code>  esxi:\n    retries: 1\n    walk:\n      - 1.3.6.1.2.1.25.1.1              # hrSystemUptime\n      - 1.3.6.1.2.1.25.2.3.1.5          # hrStorageSize\n      - 1.3.6.1.2.1.25.2.3.1.6          # hrStorageUsed\n      - 1.3.6.1.2.1.25.3.3              # hrProcessorTable\n      - 1.3.6.1.2.1.25.5.1.1.2          # hrSWRunPerfMem\n      - 1.3.6.1.2.1.25.4.2.1.7          # hrSWRunStatus\n\n    lookups:\n      - source_indexes: [hrStorageIndex]\n        lookup: 1.3.6.1.2.1.25.2.3.1.2    # hrStorageType\n        drop_source_indexes: false\n      - source_indexes: [hrSWRunIndex]\n        lookup: 1.3.6.1.2.1.25.4.2.1.2    # hrSWRunName\n        drop_source_indexes: false\n    overrides:\n      hrSWRunName:\n        type: DisplayString\n</code></pre> \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 RAM \u0432 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0445 \u043d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435. <pre><code>hrStorageSize{hrStorageType=\"1.3.6.1.2.1.25.2.1.2\"}\nhrStorageUsed{hrStorageType=\"1.3.6.1.2.1.25.2.1.2\"}\n</code></pre></p>"},{"location":"monitoring/a1/#_6","title":"\u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0435\u0440\u0430","text":"<p>snmp.yml \u043a\u043e\u043f\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u0445\u043e\u0441\u0442 \u0441 exporter'\u043e\u043c, reload. \u041c\u043e\u0436\u043d\u043e \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u043e\u0432\u044b\u0445 \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u0431\u0435\u0437 \u0440\u0438\u0441\u043a\u0430 \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043b\u0438\u0448\u043d\u0435\u0435 \u0432 \u0431\u0430\u0437\u0443. <pre><code>curl localhost:9116/snmp?module=mx_v2\\&amp;target=mx_host\n</code></pre></p>"},{"location":"monitoring/a1/#vmagent","title":"vmagent","text":"<p>snmp_exporter'\u0443 \u043d\u0435\u043b\u044c\u0437\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432. \u0415\u0441\u0442\u044c \u0434\u0432\u0430 \u0441\u043f\u043e\u0441\u043e\u0431\u0430 \u043e\u043f\u0438\u0441\u0430\u0442\u044c job'\u044b \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438. \u041f\u0435\u0440\u0432\u044b\u0439, \u0433\u0434\u0435 \u0432\u0441\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043e\u0434\u043d\u0438\u043c job'\u043e\u043c: <pre><code>- job_name: snmp\n  honor_timestamps: true\n  metrics_path: /snmp\n  scheme: http\n  http_sd_configs:\n  - url: xxxx\n    follow_redirects: false\n    refresh_interval: 3m\n  relabel_configs:\n...\n  - source_labels: [__meta_netbox_module]\n    separator: ;\n    regex: (.*)\n    target_label: __param_module\n    replacement: $1\n    action: replace\n...\n</code></pre> \u0412\u0442\u043e\u0440\u043e\u0439, \u0433\u0434\u0435 \u0443 \u043a\u0430\u0436\u0434\u043e\u0433\u043e job'\u0430 \u0435\u0441\u0442\u044c \u0435\u0449\u0435 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0435 \u0442\u0430\u0440\u0433\u0435\u0442\u044b, relabel \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438: <pre><code>  - job_name: 'n3k'\n    metrics_path: /snmp\n    params:\n      module: [n3k]\n    file_sd_configs:\n        - files:\n            - 'targets/n3k.yml'\n    metric_relabel_configs:\n      - source_labels: [ifType]\n        regex: '^[^6]$|\\d{2,}'\n        action: drop\n      - source_labels: [ifName]\n        regex: 'mgmt0'\n        action: drop\n    relabel_configs:\n      - source_labels: [__address__]\n        target_label: __param_target\n      - source_labels: [__param_target]\n        target_label: instance\n      - target_label: __address__\n        replacement: \"fdqn.local:9116\"\n\n  - job_name: 'exos'\n    metrics_path: /snmp\n    params:\n      module: [exos]\n    file_sd_configs:\n        - files:\n            - 'targets/exos.yml'\n    metric_relabel_configs:\n      - source_labels: [ifType]\n        regex: '^[^6]$|\\d{2,}'\n        action: drop\n      - source_labels: [ifName]\n        regex: 'Management'\n        action: drop\n    relabel_configs:\n      - source_labels: [__address__]\n        target_label: __param_target\n      - source_labels: [__param_target]\n        target_label: instance\n      - target_label: __address__\n        replacement: \"fdqn.local:9116\"\n\n  - job_name: 'mds9k'\n    metrics_path: /snmp\n    params:\n      module: [mds9k]\n    file_sd_configs:\n        - files:\n            - 'targets/mds9k.yml'\n    metric_relabel_configs:\n      - source_labels: [ifType]\n        regex: '^6$'\n        action: drop\n    relabel_configs:\n      - source_labels: [__address__]\n        target_label: __param_target\n      - source_labels: [__param_target]\n        target_label: instance\n      - target_label: __address__\n        replacement: \"fdqn.local:9116\"\n\n  - job_name: 'mx'\n    metrics_path: /snmp\n    params:\n      module: [mx]\n    file_sd_configs:\n        - files:\n            - 'targets/mx.yml'\n    relabel_configs:\n      - source_labels: [__address__]\n        target_label: __param_target\n      - source_labels: [__param_target]\n        target_label: instance\n      - target_label: __address__\n        replacement: \"fdqn.local:9116\"\n</code></pre> \u0422\u0430\u0440\u0433\u0435\u0442\u044b (\u0445\u043e\u0441\u0442\u044b) \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0438\u0441\u0430\u0442\u044c \u0441 \u043b\u0435\u0439\u0431\u043b\u0430\u043c\u0438 \u0438 \u0431\u0435\u0437. \u0412\u043e\u0442 \u0441 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u043b\u0435\u0439\u0431\u043b\u0430\u043c\u0438: <pre><code>---\n- labels:\n    rack: 8\n    region: 1\n  targets:\n    - s0002\n    - s0003\n</code></pre> \u0411\u0435\u0437 \u043b\u0435\u0439\u0431\u043b\u043e\u0432 \u043f\u0440\u043e\u0441\u0442\u043e \u0441\u043f\u0438\u0441\u043e\u043a \u0442\u0430\u0440\u0433\u0435\u0442\u043e\u0432: <pre><code>---\n- targets:\n    - s0002\n    - s0003\n</code></pre> \u0423 vmagent'\u0430 \u0435\u0441\u0442\u044c rewrite \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b, \u0433\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u0441\u0432\u043e\u0438\u043c\u0438 \u0440\u0443\u043a\u0430\u043c\u0438 \u043e\u043f\u0438\u0441\u0430\u0442\u044c \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0448\u0435\u043d\u044b, \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u0438\u043d label <code>hw</code> \u0438\u043b\u0438 <code>desc</code>, \u0430 \u043d\u0435 \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u0438\u0445 \u0441 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f. \u041f\u0440\u0438\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u043a\u0430\u0437\u0430\u043d \u043a\u0430\u043a remoteWrite_relabelConfig: <pre><code>---\n- source_labels: [instance,ifName]\n  regex: \"s0001;Ethernet1/47\"\n  target_label: \"hw\"\n  replacement: \"s0003\"\n- source_labels: [instance,ifName]\n  regex: \"s0002;Ethernet1/48\"\n  target_label: \"hw\"\n  replacement: \"s0004\"\n- source_labels: [instance,ifName]\n  regex: \"s0007;1:48\"\n  target_label: \"hw\"\n  replacement: \"m9\"\n</code></pre> \u0423 vmagent'\u0430 \u0435\u0441\u0442\u044c url http://fdqn.local:8429/targets, \u0433\u0434\u0435 \u0432\u0438\u0434\u043d\u043e \u043d\u0430\u0433\u043b\u044f\u0434\u043d\u043e \u0437\u0430 \u043a\u0430\u043a\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0438 \u0441 \u043a\u0430\u043a\u0438\u043c \u0443\u0441\u043f\u0435\u0445\u043e\u043c \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c snmp_exporter \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0445\u043e\u0441\u0442\u0443.</p>"},{"location":"monitoring/a1/#_7","title":"\u042f\u0437\u044b\u043a \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432","text":"<p>MetricQL \u0438 PromQL</p> <p>Expand VictoriaMetrics WITH templates to canonical PromQL</p> <p>\u0412\u0441\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b vmagent'\u043e\u043c \u0441 snmp_exporter'\u0430, \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u044b \u0432 \u0431\u0430\u0437\u0443 VictoriaMetrics.</p> <p>\u0414\u043b\u044f \u0432\u044b\u0432\u043e\u0434\u0430 \u0432\u0441\u0435\u0445 \u043c\u0435\u0442\u0440\u0438\u043a, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0445 \u043f\u043e job'\u0443 job_name \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c: <pre><code>max({job=\"job_name\"}) by (__name__)\n</code></pre></p> <p>\u041d\u0438\u0436\u0435 \u0431\u0443\u0434\u0443\u0442 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f (expr) \u0434\u043b\u044f vmalert \u0441 \u043a\u0440\u0430\u0442\u043a\u0438\u043c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c</p>"},{"location":"monitoring/a1/#ifmib","title":"ifmib","text":"<p>flapping \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432 up, \u043d\u043e \u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c \u0434\u043e \u044d\u0442\u043e\u0433\u043e <pre><code>(changes(ifLastChange{ifType=\"6\"}[15m]) &gt; 0) and (ifOperStatus == 1) and ON(instance) (sysUpTime &gt; 150000)\n</code></pre> \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u043b\u0441\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440. \u0418\u043d\u0430\u0447\u0435 \u0435\u0441\u0442\u044c \u0448\u0430\u043d\u0441 \u0447\u0442\u043e \u043a\u0430\u043a\u043e\u0439-\u0442\u043e ifLastChange \u0431\u043e\u043b\u044c\u0448\u0435, \u0430 \u043a\u0430\u0443\u043d\u0442\u0435\u0440 sysUpTime \u043e\u0431\u043d\u0443\u043b\u0438\u043b\u0441\u044f. \u0415\u0441\u043b\u0438 \u0435\u0449\u0435 \u0431\u044b\u043b\u0438 labels, \u043a\u0430\u043a \u0443 \u043c\u0435\u043d\u044f, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, rack, \u0442\u043e by (instance,rack) <pre><code>(max(ifLastChange{ifType=\"6\"} &lt; 20000) by (instance)) and ON(instance) (sysUpTime &lt; 150000)\n</code></pre> \u041d\u0435\u0442 \u043b\u0438\u043d\u043a\u0430 \u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u043e\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 <pre><code>(ifAdminStatus == 1) and (ifOperStatus == 2)\n</code></pre> \u0412\u043a\u043b\u044e\u0447\u0438\u043b\u0441\u044f flowcontrol. \u041f\u043e\u043b\u0435\u0437\u043d\u043e \u0434\u043b\u044f \u043f\u043e\u0440\u0442\u043e\u0432, \u043a\u0443\u0434\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u0441\u0442\u043e\u0440\u0430\u0434\u0436\u0438 <pre><code>rate(dot3HCInPauseFrames[5m]) &gt; 5\n</code></pre> \u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u0448\u0438\u0431\u043a\u0438 <pre><code>rate(ifInErrors[15m]) &gt; 5\n</code></pre> \u0414\u0438\u0441\u043a\u0430\u0440\u0434\u044b <pre><code>rate(ifOutDiscards[15m]) &gt; 100\n</code></pre> \u0423\u0442\u0438\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u043d\u043e\u0439 \u043f\u043e\u043b\u043e\u0441\u044b \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 bw \u0438\u043b\u0438 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430. 62500 = 1e6 / 8 / 2, \u0433\u0434\u0435 2 - rate 50%. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435 72% \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043a\u0440\u0443\u0433\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e <pre><code>rate(ifHCOutOctets{ifType=\"6\"}[10m]) &gt; ((ifHighSpeed{ifType=\"6\"})*90000)\n</code></pre></p>"},{"location":"monitoring/a1/#bgp","title":"bgp","text":"<p>flapping \u0441\u0435\u0441\u0441\u0438\u0438 <pre><code> changes(bgpPeerFsmEstablishedTransitions[15m]) &gt; 0\n</code></pre> \u0421\u0442\u0430\u0442\u0443\u0441 \u043d\u0435 established \u0434\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043d\u0435\u0439\u0431\u043e\u0440\u0430 <pre><code>bgpPeerState{bgpPeerRemoteAddr=\"9.8.7.6\",instance=\"r0001\"} &lt; 6\n</code></pre></p>"},{"location":"monitoring/a1/#extreme","title":"\u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0435 \u0434\u043b\u044f extreme \u043c\u0435\u0442\u0440\u0438\u043a\u0438","text":"<p>\u041f\u0438\u0442\u0430\u043d\u0438\u0435 <pre><code>extremePowerSupplyStatus !=2\n</code></pre> \u0411\u043b\u043e\u043a \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0442\u043e\u0440\u043e\u0432 <pre><code>extremeFanOperational &gt; 1\n</code></pre> \u041f\u0435\u0440\u0435\u0433\u0440\u0435\u0432 <pre><code>extremeOverTemperatureAlarm &lt; 2\n</code></pre> cpu <pre><code>extremeCpuMonitorSystemUtilization1min &gt; 15\n</code></pre></p>"},{"location":"monitoring/a1/#apc","title":"\u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0418\u0411\u041f APC","text":"<p>\u0421\u0442\u0430\u0442\u0443\u0441. 2 - \u041e\u041a. 3 - \u043d\u0430 \u0431\u0430\u0442\u0430\u0440\u0435\u044f\u0445. 12 - \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u0432\u044b\u0448\u0435 250\u0412 \u043d\u0430 \u0432\u0445\u043e\u0434\u0435. <pre><code>upsBasicOutputStatus{instance=\"apc_ups\"} != 2\n</code></pre></p> <p>Enum \u0438\u0437 \u043c\u0438\u0431\u0430 \u0434\u043b\u044f \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u044f \u043e \u0447\u0435\u043c \u0440\u0435\u0447\u044c <pre><code>  1: unknown\n  2: onLine\n  3: onBattery\n  4: onSmartBoost\n  5: timedSleeping\n  6: softwareBypass\n  7: \"off\"\n  8: rebooting\n  9: switchedBypass\n  10: hardwareFailureBypass\n  11: sleepingUntilPowerReturn\n  12: onSmartTrim\n</code></pre></p>"},{"location":"monitoring/a2/","title":"\u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 Victoriametrics \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 VMware vCenter","text":"<p>\u0417\u0430\u043c\u0435\u0442\u043a\u0430 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0430 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u0442\u0438 VictoriaMetrics_ru1 \u0432 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c.</p>"},{"location":"monitoring/a2/#tsdb","title":"\u0412\u044b\u0431\u043e\u0440 tsdb","text":"<p>\u0412 vmware vcenter \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c realtime \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0445 \u043c\u0430\u0448\u0438\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0441 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0438\u043b\u0438 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0438 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u043c\u0430\u0448\u0438\u043d\u044b \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0447\u0430\u0441\u0430. \u0415\u0441\u0442\u044c \u0435\u0449\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0439 \u0431\u0430\u0437\u0435. \u0422\u0443\u0434\u0430 \u043e\u043d\u0438 \u043f\u0438\u0448\u0443\u0442\u0441\u044f \u0432 \u0441\u043e\u043e\u0442\u0432. \u0441 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 Data Collection Levels. \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u0432 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u0440\u043e\u0441\u0442\u0443 \u0431\u0430\u0437\u044b, \u0434\u0435\u0433\u0440\u0430\u0434\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438. \u0411\u043b\u0430\u0433\u043e \u0435\u0441\u0442\u044c api, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043d\u0443\u0436\u043d\u044b\u0445 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0445 \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0443\u044e \u0431\u0430\u0437\u0443 \u0434\u043b\u044f \u0434\u0430\u043b\u044c\u0448\u0435\u0439\u0448\u0435\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f.</p> <p>\u0427\u0435\u043c \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c vcenter:</p> <ul> <li>telegraf \u0441 input \u043f\u043b\u0430\u0433\u0438\u043d\u043e\u043c vsphere;</li> <li>vmware_exporter;</li> <li>govc_exporter.</li> </ul> <p>\u041f\u0440\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043d\u0443\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u043d\u0430\u0442\u044c, \u0447\u0442\u043e \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u0442\u0438 prometheus \u043d\u0435 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0435\u0440\u043e\u0432 \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0433\u043e \u0438 \u0442\u043e\u0433\u043e \u0436\u0435 \u0441\u043e\u0444\u0442\u0430, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432 \u0441\u0432\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0430\u0432\u0442\u043e\u0440 \u0431\u044b\u043b \u043f\u043e\u0441\u043b\u0430\u043d \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u043c \u0434\u043e\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0435\u0440 \u043d\u0430 python, \u0430 \u043d\u0435 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0442\u044c \u0441\u0432\u043e\u0435 \u041f\u041e. \u0412 \u0438\u0442\u043e\u0433\u0435 \u0430\u0432\u0442\u043e\u0440 \u0437\u0430\u0431\u0438\u043b.</p> <p>\u041a\u0443\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435:</p> <ul> <li>\u0412 influxdb \u0442\u043e\u043b\u044c\u043a\u043e telegraf'\u043e\u043c;</li> <li>\u0412 prometheus \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u044f exporter'\u044b;</li> <li>\u0412 victoriametrics \u0432\u0441\u0435\u043c \u0447\u0435\u043c \u0443\u0433\u043e\u0434\u043d\u043e, \u0442.\u043a. \u0438 \u0431\u0430\u0437\u0430, \u0438 vmagent \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043e\u0431\u0430 \u0444\u043e\u0440\u043c\u0430\u0442\u0430: prometheus \u0438 influx. \u041d\u043e \u043a\u0440\u043e\u043c\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, ip-\u0430\u0434\u0440\u0435\u0441\u0430 \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f.</li> </ul> <p>\u0411\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438 telegraf, \u0438 vmware_exporter \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e. \u0412 \u0438\u0442\u043e\u0433\u0435 \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c\u0441\u044f \u0432 victoriametrics. \u041d\u0443\u0436\u043d\u043e \u043d\u0435 \u0437\u0430\u0431\u044b\u0432\u0430\u0442\u044c \u043f\u0440\u043e \u044d\u0442\u0443 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044c:</p> <p>Note that InfluxDB line protocol expects timestamps in nanoseconds by default, while VictoriaMetrics stores them with milliseconds precision.</p> <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0435\u0440\u0430 (VE) \u0438 \u043f\u043b\u0430\u0433\u0438\u043d\u0430 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u0444\u0430 (TG) \u043d\u0438\u0436\u0435.</p>"},{"location":"monitoring/a2/#_1","title":"\u041b\u0435\u0439\u0431\u043b\u044b \u0438 \u0442\u0435\u0433\u0438","text":"<p>TG: \u0432 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0445 \u043d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0433\u0438\u043f\u0435\u0440\u0432\u0438\u0437\u043e\u0440\u0435, \u0434\u0430\u0442\u0430\u0441\u0442\u043e\u0440\u0435. \u0422\u043e\u043b\u044c\u043a\u043e \u043e \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0435 \u0438 \u044d\u0442\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0441 \u0442\u043e\u0447\u043a\u0438 \u0437\u0440\u0435\u043d\u0438\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 tsdb, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0440\u044f\u0434 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u0437-\u0437\u0430 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0438 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u043c\u0430\u0448\u0438\u043d\u044b \u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u0439 \u0433\u0438\u043f\u0435\u0440\u0432\u0438\u0437\u043e\u0440 \u0438\u043b\u0438 \u0434\u0430\u0442\u0430\u0441\u0442\u043e\u0440. \u0418\u0434\u0435\u0430\u043b\u044c\u043d\u043e \u0438 \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u043e.</p> <p>VE: \u041c\u043d\u043e\u0433\u043e \u043b\u0438\u0448\u043d\u0435\u0433\u043e, \u043d\u043e \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u043c. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u0433\u0434\u0430 \u043a\u0443\u0434\u0430 \u043c\u0438\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0430 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u043c\u0430\u0448\u0438\u043d\u0430.</p>"},{"location":"monitoring/a2/#_2","title":"\u0421\u0447\u0435\u0442\u0447\u0438\u043a\u0438","text":"<p>TG: \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435, \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432\u0441\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435.</p> <p>VE: \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u043a\u043e\u0434\u0435 (wat?). \u041f\u0438\u0448\u0443\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438 \u043d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c\u0443 \u044f\u0434\u0440\u0443, \u0441\u0435\u0442\u0435\u0432\u043e\u043c\u0443 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443. \u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 IOPS'\u043e\u0432. \u041e\u043f\u0440\u043e\u0441 \u0435\u0441\u0442\u044c, \u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043d\u0435\u0442. \u041f\u043e \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u043c \u043c\u0430\u0448\u0438\u043d\u0430\u043c \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0442\u0441\u044f \u0438\u0437 \u043a\u043e\u0440\u043e\u0431\u043a\u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043f\u043e \u043a\u043e\u043b-\u0432\u0443 vcpu, \u0441\u043d\u0430\u043f\u0448\u043e\u0442\u0430\u043c, \u0434\u0430\u043d\u043d\u044b\u043c \u0438\u0437 \u0433\u043e\u0441\u0442\u0435\u0432\u043e\u0439 \u041e\u0421. \u041f\u0440\u0438 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u043e\u043c \u0432 vcenter'\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043a\u043b\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043e\u043f\u0440\u043e\u0441\u044f\u0442\u0441\u044f, \u043d\u043e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 exporter \u0438\u0445 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0438\u0437-\u0437\u0430 \u043e\u0448\u0438\u0431\u043a\u0438. \u0422\u043e\u0436\u0435 \u0441\u0430\u043c\u043e\u0435 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043a\u043e\u0433\u0434\u0430 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0438\u0437 \u0433\u0438\u043f\u0435\u0440\u0432\u0438\u0437\u043e\u0440\u043e\u0432. \u0412\u0441\u0435 \u0434\u043e\u043b\u0433\u043e \u0438 \u043f\u043b\u043e\u0445\u043e.</p>"},{"location":"monitoring/a2/#ustom-","title":"\u0421ustom-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b","text":"<p>TG: \u0415\u0441\u043b\u0438 \u0430\u0442\u0440\u0438\u0431\u0443\u0442 \u0435\u0441\u0442\u044c \u0438 \u043e\u043d \u043f\u0443\u0441\u0442\u043e\u0439, \u0442\u043e \u0442\u0435\u0433\u0430 \u0441 \u043d\u0438\u043c \u043d\u0435 \u0431\u0443\u0434\u0435\u0442.</p> <p>VE: \u0415\u0441\u043b\u0438 \u0430\u0442\u0440\u0438\u0431\u0443\u0442 \u0435\u0441\u0442\u044c \u0438 \u043e\u043d \u043f\u0443\u0441\u0442\u043e\u0439, \u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u0442\u0435\u0433 \u0441\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c <code>n/a</code>.</p>"},{"location":"monitoring/a2/#_3","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430","text":"<p>TG: \u0411\u0438\u043d\u0430\u0440\u043d\u0438\u043a \u0441 \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u043c\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u043c \u0444\u0430\u0439\u043b\u0430\u043c\u0438.</p> <p>VE: pip \u0438\u043b\u0438 docker \u0441 \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0438\u0437 readme</p>"},{"location":"monitoring/a2/#_4","title":"\u0421\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438","text":"<p>\u0427\u0435\u0440\u0435\u0437 UI \u0432 vcenter \u043c\u043e\u0436\u043d\u043e \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u0433\u0440\u0430\u0444\u0438\u043a\u0438 \u043f\u043e \u0440\u0430\u0437\u043d\u044b\u043c \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430\u043c. \u0418\u043d\u043e\u0439 \u0440\u0430\u0437 \u043d\u0435\u043f\u043e\u043d\u044f\u0442\u043d\u043e \u043a\u0430\u043a\u043e\u0439 \u0438\u043c\u0435\u043d\u043d\u043e \u043d\u0443\u0436\u043d\u043e \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0435\u0441\u0442\u044c govmomi.</p> <p><pre><code>cd /tmp\nwget https://github.com/vmware/govmomi/releases/download/v0.27.2/govc_Linux_x86_64.tar.gz\ntar zxvf govc_Linux_x86_64.tar.gz\n</code></pre> \u041d\u0443\u0436\u043d\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u043f\u043e\u0434\u043b\u043a\u044e\u0447\u0435\u043d\u0438\u044f \u043a vcenter</p> <p><pre><code>export GOVC_USERNAME=vmuser\nexport GOVC_PASSWORD=pswd\nexport GOVC_URL=vcenter-host\nexport GOVC_INSECURE=true\n</code></pre> \u0414\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 telegraf'\u0430 \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b. \u0415\u0441\u043b\u0438 \u043e\u043d \u043d\u0435 \u043c\u0435\u043d\u044f\u043b\u0441\u044f, \u0442\u043e \u044d\u0442\u043e 5m.</p> <p><pre><code>./govc metric.interval.info\n</code></pre> \u0432\u044b\u0432\u043e\u0434 <pre><code>ID:                   300\n  Enabled:            true\n  Interval:           5m\n  Available Samples:  288\n  Name:               Past day\n  Level:              1\nID:                   1800\n  Enabled:            true\n  Interval:           30m\n  Available Samples:  336\n  Name:               Past week\n  Level:              1\nID:                   7200\n  Enabled:            true\n  Interval:           2h\n  Available Samples:  360\n  Name:               Past month\n  Level:              1\nID:                   86400\n  Enabled:            true\n  Interval:           24h\n  Available Samples:  365\n  Name:               Past year\n  Level:              1\n</code></pre> \u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043c\u0435\u0442\u0440\u0438\u043a <pre><code> ./govc metric.ls /*/vm/* &gt; vm.out\n</code></pre> \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043f\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c\u0443 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0443 <pre><code>./govc metric.info - cpu.usage.average\n</code></pre> \u0432\u044b\u0432\u043e\u0434 \u043a\u0430\u043a \u0438\u0437 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 <pre><code>Name:                cpu.usage.average\n  Label:             Usage\n  Summary:           CPU usage as a percentage during the interval\n  Group:             CPU\n  Unit:              %\n  Rollup type:       average\n  Stats type:        rate\n  Level:             1\n    Intervals:       Past day,Past week,Past month,Past year\n  Per-device level:  3\n    Intervals:\n</code></pre></p>"},{"location":"monitoring/a2/#victoriametrics","title":"victoriametrics","text":"<p>\u041f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u0431\u0430\u0437\u0430 \u0438 vmagent \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u044b \u0438 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u044b. \u041d\u0435\u0432\u0430\u0436\u043d\u043e \u043a\u043b\u0430\u0441\u0442\u0435\u0440 \u0438\u043b\u0438 \u0441\u0438\u043d\u0433\u043b. \u0410\u0433\u0435\u043d\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0445\u043e\u0441\u0442(\u044b) \u0441 vmware_exporter'\u043e\u043c, telegraf'\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0431\u0430\u0437\u044b \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u043d\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u043c \u0434\u0438\u0441\u043a\u0435. \u0422\u0443\u0442 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u0438 \u0440\u0435\u0448\u0438\u0442\u044c \u043a\u0430\u043a \u0447\u0430\u0441\u0442\u043e \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043b\u044e\u0431\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0432 \u0431\u0430\u0437\u0443. \u041f\u0443\u0441\u0442\u044c 1m. \u0422\u043e\u0433\u0434\u0430 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u043d\u0444\u0438\u0433 \u0434\u043b\u044f vmagent'\u0430, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043d\u0430 exporters-host \u0442\u0430\u043a\u043e\u0439: <pre><code>global:\n  scrape_interval: 60s\n  scrape_timeout: 30s\n\nscrape_configs:\n  - job_name: vmagent\n    static_configs:\n    - targets:\n      - exporters-host:8429\n  - job_name: victoria-metrics\n    static_configs:\n    - targets:\n      - victoriametrics-host:8428\n</code></pre> vmagent \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0441 \u0444\u043b\u0430\u0433\u0430\u043c\u0438 \u0438\u043b\u0438 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u0440\u0430\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0438\u0437 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445. \u0414\u043b\u044f \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 /etc/default/vmagent \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u0442\u0430\u043a: <pre><code>#\n# Ansible managed\n#\n\n# must have\nVMAGENT_promscrape_config=/etc/vmagent/vmagent.yml\nVMAGENT_remoteWrite_tmpDataPath=/var/lib/vmagent\nVMAGENT_remoteWrite_url='http://victoriametrics-host:8428/api/v1/write'\n\n# optional\nVMAGENT_promscrape_suppressScrapeErrors=True\nVMAGENT_influxTrimTimestamp=1s\nVMAGENT_remoteWrite_urlRelabelConfig='/etc/vmagent/relabel/telegraf.yml'\n</code></pre> \u0417\u0430\u043f\u0443\u0441\u043a \u0438\u0437 /lib/systemd/system/vmagent.service <pre><code>#\n# Ansible managed\n#\n\n[Unit]\nDescription=Victoria-metrics vmagent\nAfter=network-online.target auditd.service\n\n[Service]\nType=simple\nUser=vmagent\nGroup=vmagent\nEnvironmentFile=-/etc/default/vmagent\nExecReload=/bin/kill -HUP $MAINPID\nExecStart=/usr/local/bin/vmagent -envflag.enable -envflag.prefix=VMAGENT_\n\nSyslogIdentifier=vmagent\nRestart=always\nLimitNOFILE=infinity\nReadWriteDirectories=/var/lib/vmagent\n\nPrivateTmp=yes\nProtectHome=yes\nNoNewPrivileges=yes\nProtectSystem=strict\nProtectControlGroups=true\nProtectKernelModules=true\nProtectKernelTunables=yes\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p>"},{"location":"monitoring/a2/#vmware_exporter","title":"vmware_exporter","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0432 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u043c \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0438 <pre><code>pip install vmware_exporter\n</code></pre> \u0417\u0430\u043f\u0443\u0441\u043a <pre><code>vmware_exporter -c config.yml\n</code></pre> \u041a\u043e\u043d\u0444\u0438\u0433 \u0431\u0435\u0437 \u043e\u043f\u0440\u043e\u0441\u0430 \u0445\u043e\u0441\u0442\u043e\u0432 \u0438 \u0434\u0430\u0442\u0430\u0441\u0442\u043e\u0440\u043e\u0432. \u0414\u043b\u044f \u043d\u0438\u0445 \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0443\u044e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0438 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u043c job'\u043e\u043c. <pre><code>default:\n    vsphere_host: \"vcenter-host\"\n    vsphere_user: \"vmuser\"\n    vsphere_password: \"pswd\"\n    ignore_ssl: True\n    specs_size: 5000\n    fetch_custom_attributes: True\n    fetch_tags: False\n    fetch_alarms: False\n    collect_only:\n        vms: True\n        vmguests: True\n        datastores: False\n        hosts: False\n        snapshots: True\n</code></pre> \u041f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435 \u043d\u0430\u043f\u0438\u0448\u0435\u0442 \u043f\u043e\u0440\u0442, \u043a\u0443\u0434\u0430 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 <pre><code>curl http://localhost:9272/metrics &gt; vc.metrics\n</code></pre> \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c job \u0434\u043b\u044f \u043e\u043f\u0440\u043e\u0441\u0430 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0435\u0440\u0430 \u0432 vmagent. \u042d\u0442\u043e \u0443\u0436\u0435 \u043f\u043e\u0441\u043b\u0435 nice_yaml, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0438 \u043e\u0442\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432\u043e\u0442 \u0442\u0430\u043a. <pre><code>  - job_name: vcenter\n    metric_relabel_configs:\n    - regex: ^([A-Z]):.*\n      replacement: $1\n      source_labels:\n      - partition\n      target_label: partition\n    - action: drop\n      regex: /target|/storage/archive\n      source_labels:\n      - partition\n    - action: labeldrop\n      regex: host_name|ds_name\n    static_configs:\n    - targets:\n      - exporters-host:9272\n</code></pre> \u041f\u0440\u0438 \u043e\u043f\u0440\u043e\u0441\u0435 \u044d\u043a\u043f\u043e\u0440\u0442\u0435\u0440\u0430 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u044b \u043f\u0440\u0430\u0432\u0438\u043b\u0430 relabel \u043a\u043e \u0432\u0441\u0435\u043c \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u043c \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c, \u0430 \u0438\u043c\u0435\u043d\u043d\u043e:</p> <ul> <li>\u0438\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0440\u0430\u0437\u0434\u0435\u043b\u043e\u0432 \u0434\u0438\u0441\u043a\u043e\u0432 \u041e\u0421 windows \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c\u0441\u044f \u0434\u0432\u043e\u0435\u0442\u043e\u0447\u0438\u044f, \u0438\u043d\u0430\u0447\u0435 \u0438\u0445 \u043f\u0440\u0438\u0434\u0435\u0442\u0441\u044f \u044d\u043a\u0440\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445;</li> <li>\u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c\u0441\u044f \u0432\u0441\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0441 \u0440\u0430\u0437\u0434\u0435\u043b\u0430\u043c\u0438 \u0432 \u041e\u0421 linux <code>/target</code> \u0438\u043b\u0438 <code>/storage/archive</code>, \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0435\u0441\u0441\u043c\u044b\u0441\u043b\u0435\u043d\u043d\u043e;</li> <li>\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043b\u0435\u0439\u0431\u043b\u044b <code>host_name</code> \u0438 <code>ds_name</code> \u0447\u0442\u043e\u0431\u044b \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0440\u044f\u0434\u043e\u0432 \u0438\u043b\u0438 \u0442.\u043d. churn rate.</li> </ul>"},{"location":"monitoring/a2/#telegraf","title":"telegraf","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043f\u0430\u043a\u0435\u0442\u0430 \u043f\u0440\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0438 \u0447\u0442\u043e \u0440\u0435\u043f\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 <pre><code>apt install telegraf\n</code></pre> \u0412 \u0434\u0440\u0443\u0433\u043e\u0439 \u0437\u0430\u043c\u0435\u0442\u043a\u0435 \u043f\u0438\u0441\u0430\u043b \u043f\u043e\u0447\u0435\u043c\u0443 \u043d\u0443\u0436\u043d\u043e \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u0434\u0435\u043b\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0438 \u0432 /etc/telegraf/telegraf.d. \u041d\u0435 \u0431\u0443\u0434\u0443 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c\u0441\u044f. \u041d\u0443\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0431\u0435\u0437 \u043b\u0438\u0448\u043d\u0438\u0445 \u0441\u0442\u0440\u043e\u043a <pre><code>telegraf --input-filter vsphere --output-filter influxdb config | grep -v '#' | grep -v '^$' &gt; influx\n</code></pre> \u0414\u0430\u043b\u0435\u0435 \u0432\u043d\u0435\u0441\u0442\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0442\u043e\u0433\u043e \u0447\u0442\u043e timestamp \u0431\u0443\u0434\u0435\u0442 \u043e\u043a\u0440\u0443\u0433\u043b\u044f\u0442\u044c\u0441\u044f \u0434\u043e \u0441\u0435\u043a\u0443\u043d\u0434 \u0432 <code>precision</code>, \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b 1m, \u0430 \u0441\u0435\u043a\u0446\u0438\u044e \u0441 inputs \u0432\u044b\u043d\u0435\u0441\u0442\u0438 \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0444\u0430\u0439\u043b. \u0412 \u0438\u0442\u043e\u0433\u0435 /etc/telegraf/telegraf.conf \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0433\u043b\u044f\u0434\u0435\u0442\u044c \u0442\u0430\u043a \u0438 \u043f\u0438\u0441\u0430\u0442\u044c vmagent'\u0443 \u0432 \u043f\u043e\u0440\u0442 8429. <pre><code>[global_tags]\n[agent]\n  interval = \"1m\"\n  round_interval = false\n  metric_batch_size = 1000\n  metric_buffer_limit = 100000\n  collection_jitter = \"0s\"\n  flush_interval = \"10s\"\n  flush_jitter = \"0s\"\n  precision = \"s\"\n  hostname = \"\"\n  omit_hostname = true\n[[outputs.influxdb]]\n  urls = [\"http://127.0.0.1:8429\"]\n  exclude_database_tag = true\n  skip_database_creation = true\n</code></pre> \u0422\u0435\u0433 <code>hostname</code> \u043d\u0435 \u043d\u0443\u0436\u0435\u043d, \u0430 \u0442\u0435\u0433 <code>db</code> \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d vmagent'\u043e\u043c relabel \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c\u0438 \u0438\u0437 <code>/etc/vmagent/relabel/telegraf.yml</code> \u0434\u043e \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0431\u0430\u0437\u0443.</p> <p>\u041f\u043b\u0430\u0433\u0438\u043d vsphere c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u043c\u043d\u043e\u0433\u043e \u0434\u0430\u043d\u043d\u044b\u0445. \u041d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0434\u043b\u044f \u0431\u044b\u0441\u0442\u0440\u043e\u0433\u043e \u043e\u043f\u0440\u043e\u0441\u0430 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0445 \u043c\u0430\u0448\u0438\u043d, \u0430 \u0435\u0441\u043b\u0438 \u0442\u0440\u0435\u0431\u0443\u044e\u0442\u0441\u044f \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043f\u043e \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0443, \u0445\u043e\u0441\u0442\u0430\u043c, \u0442\u043e \u0434\u043b\u044f \u043d\u0438\u0445 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u0438 \u043f\u0443\u0441\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e. \u0424\u0430\u0439\u043b <code>/etc/telegraf/telegraf.d/vcenter_vm.conf</code> <pre><code>[[inputs.vsphere]]\n  vcenters = [ \"https://vcenter-host/sdk\" ]\n  username = \"vmuser\"\n  password = \"pswd\"\n  tagexclude = [ \"dcname\", \"source\", \"vcenter\", \"uuid\", \"moid\" ]\n  vm_metric_include = [\n    \"cpu.costop.summation\",\n    \"cpu.ready.summation\",\n    \"cpu.wait.summation\",\n    \"cpu.run.summation\",\n    \"cpu.idle.summation\",\n    \"cpu.used.summation\",\n    \"cpu.demand.average\",\n    \"cpu.usagemhz.average\",\n    \"cpu.usage.average\",\n    \"mem.active.average\",\n    \"mem.granted.average\",\n    \"mem.consumed.average\",\n    \"mem.usage.average\",\n    \"mem.vmmemctl.average\",\n    \"net.bytesRx.average\",\n    \"net.bytesTx.average\",\n    \"net.droppedRx.summation\",\n    \"net.droppedTx.summation\",\n    \"net.usage.average\",\n    \"power.power.average\",\n    \"virtualDisk.numberReadAveraged.average\",\n    \"virtualDisk.numberWriteAveraged.average\",\n    \"virtualDisk.read.average\",\n    \"virtualDisk.readOIO.latest\",\n    \"virtualDisk.throughput.usage.average\",\n    \"virtualDisk.totalReadLatency.average\",\n    \"virtualDisk.totalWriteLatency.average\",\n    \"virtualDisk.write.average\",\n    \"virtualDisk.writeOIO.latest\",\n    \"sys.uptime.latest\",\n  ]\n  host_include = []\n  host_exclude = [\"*\"]\n  cluster_include = []\n  cluster_exclude = [\"*\"]\n  datastore_include = []\n  datastore_exclude = [\"*\"]\n  datacenter_include = []\n  datacenter_exclude = [\"*\"]\n  separator = \"_\"\n  collect_concurrency = 10\n  discover_concurrency = 10\n  custom_attribute_include = [\"*\"]\n  custom_attribute_exclude = []\n  insecure_skip_verify = true\n  historical_interval = \"5m\"\n\n[inputs.vsphere.tags]\n job = \"vmware_vm\"\n</code></pre> \u041d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 inputs \u043f\u043b\u0430\u0433\u0438\u043d/\u0444\u0430\u0439\u043b \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0442\u0435\u0433 <code>job</code> \u043f\u043e \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0438 \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 exporter'\u0430\u043c\u0438. \u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e \u0442\u0443\u0442 <code>job = \"vmware_vm\"</code> \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043a \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0435\u0442\u0440\u0438\u043a\u0435. \u0418\u0437 \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b \u0442\u0435\u0433\u0438, \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u044b\u0435 \u0432 <code>tagexclude</code>. <code>historical_interval</code> \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 5m \u0438 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442 \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u0438\u0437 <code>metric.interval.info</code>. \u0412\u0441\u0435 custom-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b, \u0435\u0441\u043b\u0438 \u0442\u0430\u043a\u043e\u0432\u044b\u0435 \u0435\u0441\u0442\u044c, \u0431\u0443\u0434\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0442\u0435\u0433\u043e\u0432.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 <pre><code> telegraf --config /etc/telegraf/telegraf.d/vcenter_vm.conf --test &gt; /tmp/vcenter_vm.out\n</code></pre> \u041f\u043e\u0441\u043b\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 telegraf \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u043c \u0444\u0430\u0439\u043b\u043e\u043c \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u0414\u043e \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c relabel \u043a\u043e\u043d\u0444\u0438\u0433 <code>/etc/vmagent/relabel/telegraf.yml</code> <pre><code>---\n# rename label\n- action: labelmap_all\n  regex: \"vmname\"\n  replacement: \"vm_name\"\n# remove labels\n- action: labeldrop\n  regex:\n    - \"db\"\n</code></pre> \u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d <code>vmname</code> \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u043b \u0441 vmware_exporter \u0438 \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0431\u044b \u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u043c \u043b\u0435\u0439\u0431\u043b\u0430\u043c. \u0423\u0434\u0430\u043b\u0435\u043d \u043b\u0435\u0439\u0431\u043b <code>db</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0438\u0448\u0435\u0442 telegraf. </p>"},{"location":"monitoring/a2/#vmui","title":"VMUI","text":"<p>vmagent \u0440\u0430\u0437 \u0432 \u043c\u0438\u043d\u0443\u0442\u0443 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 vmware_exporter \u0438 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043e\u0442 telegraf'\u0430 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043f\u043e influx-\u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443. \u0417\u0430\u0439\u0442\u0438 \u043d\u0430 http://victoriametrics-host:8428/vmui/ \u0432 instant query table \u0438 \u043f\u043e\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b, \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0447\u0442\u043e \u043d\u0430\u0441\u043e\u0431\u0438\u0440\u0430\u043b telegraf <pre><code>max({job=\"vmware_vm\"}) by  (__name__)\n</code></pre> \u0438 \u0447\u0442\u043e \u043d\u0430\u0441\u043e\u0431\u0438\u0440\u0430\u043b vmware_exporter <pre><code>max({job=\"vcenter\"}) by  (__name__)\n</code></pre></p>"},{"location":"monitoring/a2/#grafana","title":"Grafana","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c grafana, \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c datasource <code>Prometheus</code> c url <code>http://victoriametrics-host:8428</code>, \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u043e\u0442\u043e\u0432\u044b\u0435 \u0434\u0430\u0448\u0431\u043e\u0440\u0434\u044b. \u0414\u0430\u0448\u0431\u043e\u0440\u0434\u044b \u0434\u043b\u044f influx \u043f\u0440\u0438\u0434\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e.</p>"},{"location":"monitoring/a2/#kapacitor","title":"Kapacitor","text":"<p>\u041d\u0435 \u043d\u0443\u0436\u0435\u043d.</p>"},{"location":"monitoring/a2/#vmalert","title":"Vmalert","text":"<p>\u0414\u043b\u044f \u043c\u0435\u0442\u0440\u0438\u043a \u0438\u0437 vmware_exporter \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: <pre><code>---\ngroups:\n  - name: vmware\n    rules:\n      - alert: VMMemoryBalooning\n        expr: vmware_vm_mem_vmmemctl_average &gt; 0\n        for: 1h\n        labels:\n          severity: info\n        annotations:\n          summary: \"Balooning {{ $labels.vm_name }}\"\n      - alert: VMDiskLowSpace\n        expr: vmware_vm_guest_disk_free{partition=\"C\"} &lt; 10000000000\n        for: 5m\n        labels:\n          severity: warning\n          partition: C\n        annotations:\n          summary: 'Low disk space {{ $labels.partition }} {{ $labels.vm_name }}'\n</code></pre> \u0415\u0449\u0435 \u043c\u043e\u0436\u043d\u043e \u0442\u0443\u0442 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u044b. \u0414\u043b\u044f \u043c\u0435\u0442\u0440\u0438\u043a \u0438\u0437 telegraf'\u0430 \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430.</p>"},{"location":"monitoring/backbox_exporter/","title":"Vmagent, blackbox_exporter","text":"<p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u041e\u0442\u043b\u0430\u0434\u043a\u0430 \u0441 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u043c\u0438 \u041f\u0440\u0438\u043c\u0435\u0440 \u043a\u043e\u043d\u0444\u0438\u0433\u0430</p>"},{"location":"monitoring/backbox_exporter/#_1","title":"\u043f\u043e\u0447\u0442\u0430","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 ssl \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u0430 c send/expect \u0434\u043b\u044f blackbox. 143,993 - \u044d\u0442\u043e \u043f\u043e\u0440\u0442\u044b IMAP. 587 - SMTP</p> <pre><code>openssl s_client -starttls imap -crlf -connect domain:143\nopenssl s_client -crlf -connect domain:993\nopenssl s_client -starttls smtp -crlf -connect domain:587\n</code></pre> <p>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f blackbox_exporter</p> <pre><code>  imap_starttls:\n    prober: tcp\n    tcp:\n      preferred_ip_protocol: ipv4\n      query_response:\n      - starttls: true\n      - expect: ^* OK (.+)$\n      - send: \". capability\\r\"\n      - expect: ^* CAPABILITY IMAP(.+)$\n      - send: \"logout\\r\"\n      tls: false\n    timeout: 5s\n  smtp_starttls:\n    prober: tcp\n    tcp:\n      preferred_ip_protocol: ipv4\n      query_response:\n      - expect: ^220 (.+) ESMTP (.+)$\n      - send: \"EHLO prober\\r\"\n      - expect: ^250-STARTTLS\n      - send: \"STARTTLS\\r\"\n      - expect: ^220\n      - starttls: true\n      - send: \"EHLO prober\\r\"\n      - expect: ^250-AUTH\n      - send: \"QUIT\\r\"\n    timeout: 5s\n</code></pre>"},{"location":"monitoring/backbox_exporter/#_2","title":"\u043f\u0438\u043d\u0433\u0438","text":"<p>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f blackbox_exporter</p> <pre><code>  icmp:\n    icmp:\n      preferred_ip_protocol: ip4\n    prober: icmp\n    timeout: 1s\n</code></pre>"},{"location":"monitoring/backbox_exporter/#http-https","title":"http \u0438 https","text":"<p>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f blackbox_exporter</p> <p><pre><code>  http_2xx:\n    http:\n      fail_if_not_ssl: false\n      fail_if_ssl: true\n      method: GET\n      no_follow_redirects: false\n      preferred_ip_protocol: ipv4\n    prober: http\n    timeout: 5s\n  https_2xx:\n    http:\n      fail_if_not_ssl: true\n      fail_if_ssl: false\n      method: GET\n      no_follow_redirects: false\n      preferred_ip_protocol: ipv4\n    prober: http\n    timeout: 5s\n</code></pre> \u0414\u043b\u044f \u0441\u0430\u043c\u043e\u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 \u0438 \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0445/\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0445 \u043a\u043e\u0434\u043e\u0432 \u043e\u0442\u0432\u0435\u0442\u0430 <pre><code>  https_self:\n    prober: http\n    timeout: 5s\n    http:\n      method: GET\n      no_follow_redirects: false\n      fail_if_ssl: false\n      fail_if_not_ssl: true\n      preferred_ip_protocol: \"ipv4\"\n      valid_status_codes:\n        - 200\n        - 401\n        - 403\n      tls_config:\n        insecure_skip_verify: true\n</code></pre></p>"},{"location":"monitoring/logs/","title":"logs","text":""},{"location":"monitoring/logs/#syslog-format","title":"syslog format","text":"<p>rfc5424, \u0441\u0442\u0430\u0440\u044b\u0439 3164</p>"},{"location":"monitoring/logs/#vectordev","title":"vector.dev","text":"<p>https://vector.dev/docs/setup/installation/package-managers/apt/ \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0430\u043b\u043e\u0433 /var/log/vector/ \u0441 \u043f\u0440\u0430\u0432\u0430\u043c\u0438 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e vector <pre><code>mkdir -p /var/log/vector\nchown vector /var/log/vector\n</code></pre></p>"},{"location":"monitoring/logs/#vectoryaml","title":"vector.yaml","text":"<p>\u0414\u043b\u044f \u0432\u0435\u0440\u0441\u0438\u0438 \u043d\u0435 \u043d\u0438\u0436\u0435 0.12. \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0430 \u0432 yaml \u0444\u043e\u0440\u043c\u0430\u0442\u0435. \u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440 toml-yaml \u0434\u043b\u044f \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 \u0438\u0437 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438.</p> <p>\u041a\u043e\u043d\u0444\u0438\u0433 \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u043c \u043f\u043e <code>debug</code>.</p> <pre><code>data_dir: /var/lib/vector\nsources:\n  syslog:\n    type: \"syslog\"\n    address: \"0.0.0.0:514\"\n    mode: \"udp\"\ntransforms:\n  filter_severity:\n    type: \"filter\"\n    inputs:\n      - \"syslog\"\n    condition: |\n      !includes([\"debug\"], .severity)\nsinks:\n  file_syslog:\n    type: \"file\"\n    inputs:\n      - \"filter_severity\"\n    healthcheck: true\n    path: \"/var/log/vector/vector-%Y-%m-%d.log\"\n    encoding: \"ndjson\"\n</code></pre> <p>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0430 <pre><code>vector validate --config-yaml vector.yaml\n</code></pre></p>"},{"location":"monitoring/logs/#ubuntu","title":"\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 ubuntu","text":"<p>\u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0430\u0439\u043b /etc/rsyslog.d/44-vector.conf <pre><code>*.* @[vector.hostname]:514;RSYSLOG_SyslogProtocol23Format\n</code></pre></p>"},{"location":"monitoring/logs/#centos","title":"centos","text":"<p><pre><code>yum install rsyslog\nsystemctl enable rsyslog\nsystemctl start rsyslog\nsystemctl status rsyslog\n</code></pre> \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0430\u0439\u043b /etc/rsyslog.d/44-vector.conf <pre><code>*.* @[vector.hostname]:514;RSYSLOG_SyslogProtocol23Format\n</code></pre></p>"},{"location":"monitoring/logs/#cisco","title":"cisco","text":"<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e rfc3164. \u0412 XR \u0435\u0441\u0442\u044c <code>logging format rfc5424</code>, \u0430 \u0432 nx-os \u043a\u043e\u0435-\u0433\u0434\u0435 \u0438 \u0442\u043e \u0441 \u043e\u0448\u0438\u0431\u043a\u0430\u043c\u0438</p> <p>nexus <pre><code>logging server [vector.ip] 7\nlogging source-interface loopback0\nlogging level authpri 6\nlogin on-success log\n</code></pre> \u043b\u0438\u0431\u043e \u043f\u0440\u043e\u0449\u0435 \u0435\u0441\u043b\u0438 \u0441\u0442\u0430\u0440\u044b\u0439 nx-os \u0438\u043b\u0438 mds, \u0433\u0434\u0435 \u043d\u0435\u0442 \u043b\u0443\u043f\u0431\u0435\u043a\u0430 <pre><code>logging server [vector.ip] 7\nlogging level authpri 6\n</code></pre></p>"},{"location":"monitoring/logs/#juniper","title":"juniper","text":"<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e rfc3164.</p> <p>The structured-data format complies with Internet standard RFC 5424, The Syslog Protocol, which is at rfc5424. The RFC establishes a standard message format regardless of the source or transport protocol for logged messages. To output messages to a file in structured-data format, include the structured-data statement at the .. hierarchy level</p> <pre><code>set system syslog host [vector.ip] any any\nset system syslog host [vector.ip] explicit-priority\nset system syslog host [vector.ip] structured-data brief\n</code></pre>"},{"location":"monitoring/logs/#exos","title":"exos","text":"<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e rfc5424.</p> <p>\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0430\u0440\u043e\u0435 <pre><code>configure syslog delete [old-ip]:514 vr VR-Default local0\n</code></pre> \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u043a \u043a\u0430\u043a \u0431\u0443\u0434\u0435\u0442 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0435 \u0432 \u0438\u0442\u043e\u0433\u0435. \u0412\u043e\u043e\u0431\u0449\u0435 <code>local7 match Any</code> \u0434\u043e\u0431\u0430\u0432\u044f\u0435\u0442 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0443\u044e \u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u043e\u043c <pre><code>configure syslog add [vector-ip]:514 vr VR-Default local7\nenable log target syslog [vector-ip]:514 vr VR-Default local7\nconfigure log target syslog [vector-ip]:514 vr VR-Default local7 filter DefaultFilter severity Debug-Data\nconfigure log target syslog [vector-ip]:514 vr VR-Default local7 match Any\nconfigure log target syslog [vector-ip]:514 vr VR-Default local7 format timestamp seconds date Mmm-dd event-name none priority host-name tag-name\n</code></pre></p>"},{"location":"monitoring/logs/#facility","title":"facility","text":"<p>\u0422.\u043a cisco \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043f\u043e \u0431\u043e\u043b\u044c\u0448\u0435\u0439 \u0447\u0430\u0441\u0442\u0438 rfc5424, \u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 facility. local7 \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0434\u043b\u044f \u043d\u0435\u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f</p> \u041e\u0421 \u0444\u043e\u0440\u043c\u0430\u0442 \u043b\u043e\u0433\u043e\u0432 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u043c\u044b\u0439 facility nxos 3164 local6 exos 5424 local5 junos 5424 local4 <p>\u0412 junos 3164 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u043e\u0434\u043d\u0430\u043a\u043e \u043d\u0430\u0434\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c 5424. \u041b\u043e\u0433\u0438 cisco \u043f\u0440\u0438\u0434\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0434\u0435\u043b\u044b\u0432\u0430\u0442\u044c.</p>"},{"location":"monitoring/logs/#ansible","title":"ansible \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438","text":"<p>\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0434\u043b\u044f exos, cisco. \u0412 \u043c\u0430\u0440\u0442\u0435 2021 \u0432\u044b\u0448\u043b\u0430 ansible.netcommon 2.0. \u0414\u043b\u044f junos \u043d\u0443\u0436\u0435\u043d ncclient, junos_netconf_module, \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b\u0439 netconf \u043d\u0430 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0438.</p> <p>\u0412\u0441\u0435 \u0441\u0442\u0430\u0432\u0438\u0442\u0441\u044f \u0432 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f. <pre><code>pip install wheel\npip install ansible scp ncclient\nansible-galaxy collection install -f ansible.netcommon junipernetworks.junos cisco.nxos\n</code></pre> \u0421\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u0430\u0440\u044b\u0439 inventory \u0432 yaml \u0444\u043e\u0440\u043c\u0430\u0442, \u043f\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435. <pre><code>ansible-inventory -i inventory -y --list &gt; inventory.yaml\n</code></pre> \u0424\u0430\u0439\u043b ansible.cfg \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 <pre><code>[defaults]\nhost_key_checking = False\n#forks = 20\ninventory=./inventory.yaml\nroles_path = ~/.ansible/roles\n[ssh_connection]\npipelining = true\n</code></pre></p>"},{"location":"monitoring/logs/#playbook","title":"\u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 playbook","text":"<pre><code>ansible-playbook syslog.yml --syntax-check\nansible-playbook -v syslog.yml  -u [username] -k --limit [test_device] --check\n</code></pre>"},{"location":"monitoring/logs/#exos-playbook","title":"exos playbook","text":"<p>\u041f\u0440\u0438 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0447\u0435\u0440\u0435\u0437 OOBM \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f VR-Default \u043d\u0430 VR-Mgmt. \u0418\u0434\u0435\u043c\u043f\u043e\u0442\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u0438 \u0442\u0443\u0442 \u043d\u0435\u0442, \u043a\u0430\u043a \u0432 \u043f\u0440\u043e\u0447\u0435\u043c \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 playbook \u0434\u043b\u044f exos, \u0442.\u043a. \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043d\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0441\u0442\u0441\u044f \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u043c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0442\u0443\u0442 \u0437\u0430\u043f\u0438\u0441\u044c, \u0430 \u043d\u0435 handler. \u041a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u044b \u0432 \u0442\u043e\u043c \u0436\u0435 \u0432\u0438\u0434\u0435, \u043a\u0430\u043a \u0438 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u0431\u0435\u0437 \u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u0438\u0439.</p> <pre><code>---\n- name: configure syslog for extreme summit\n  hosts: extreme\n  gather_facts: false\n  vars:\n    Facility: local5\n    FacilityOld: local7\n    LogServers:\n      - 10.1.0.1\n      - 10.2.0.1\n\n  tasks:\n\n    - name: Delete old syslog\n      community.network.exos_config:\n        lines:\n          - \"configure syslog delete {{ item }}:514 vr VR-Default {{ FacilityOld }}\"\n      with_items: \"{{ LogServers }}\"\n\n    - name: Add new syslog\n      community.network.exos_config:\n        lines:\n          - \"configure syslog add {{ item }}:514 vr VR-Default {{ Facility }}\"\n          - \"enable log target syslog {{ item }}:514 vr VR-Default {{ Facility }}\"\n          - \"configure log target syslog {{ item }}:514 vr VR-Default {{ Facility }} filter DefaultFilter severity Debug-Data\"\n          - \"configure log target syslog {{ item }}:514 vr VR-Default {{ Facility }} match Any\"\n          - \"configure log target syslog {{ item }}:514 vr VR-Default {{ Facility }} format timestamp seconds date Mmm-dd event-name none priority host-name tag-name\"\n      with_items: \"{{ LogServers }}\"\n\n    - name: Save running to startup when modified\n      community.network.exos_config:\n        save_when: modified\n</code></pre>"},{"location":"monitoring/logs/#cisco-playbook","title":"cisco playbook","text":"<p>\u0426\u0438\u0442\u0430\u0442\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432 \u0442\u043e\u043c \u0436\u0435 \u0432\u0438\u0434\u0435, \u0447\u0442\u043e \u0438 \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0435. \u0422\u043e\u043b\u044c\u043a\u043e \u0432 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0438\u0434\u0435\u043c\u043f\u043e\u0442\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c.</p> <p>[WARNING]: To ensure idempotency and correct diff the input configuration lines should be similar to how they appear if present in the running configuration on device including the indentation</p> <p>with_item \u0442\u0443\u0442 \u043d\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437-\u0437\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u043c\u043e\u0434\u0443\u043b\u044f, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 jinja \u0448\u0430\u0431\u043b\u043e\u043d.</p> <pre><code>---\n- name: configure syslog for nexus\n  hosts: cisco_n3k\n  gather_facts: false\n  vars:\n    Facility: local6\n    LogServers:\n      - 10.1.0.1\n      - 10.2.0.1\n\n  tasks:\n\n    - name: syslog servers for n3k\n      ansible.netcommon.cli_config:\n        config: |\n            #jinja2: lstrip_blocks: True\n            {% for ip in LogServers %}\n            logging server {{ ip }} 7 use-vrf default facility {{ Facility }}\n            {% endfor %}\n            logging source-interface loopback0\n            logging level authpri 6\n            login on-success log\n            no logging rate-limit\n      notify:\n        - SAVE CONFIGURATION\n\n  handlers:\n\n    - name: SAVE CONFIGURATION\n      cli_command:\n        command: copy running-config startup-config\n</code></pre> <p>\u0414\u043b\u044f mds \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u043f\u043e\u043f\u0440\u043e\u0449\u0435 <pre><code>logging server {{ ip }} 7 facility {{ Facility }}\n</code></pre> \u0412 \u0438\u0442\u043e\u0433\u0435 \u0432 \u043b\u043e\u0433\u0430\u0445 \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e \u043d\u0435\u0442 facility.</p>"},{"location":"monitoring/logs/#junos-playbook","title":"junos playbook","text":"<p>\u041a\u0430\u043a\u0438\u0435-\u0442\u043e \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0435 \u043c\u043e\u0434\u0443\u043b\u0438 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u043b\u0438, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u043e\u043a\u0430 \u0442\u0430\u043a, \u043a\u0430\u043a \u0438 \u0432 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0445 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u0445. \u0418\u0437-\u0437\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u044b delete \u0431\u0443\u0434\u0443\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u0438 \u043a\u043e\u043c\u043c\u0438\u0442, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u043b \u0442\u0435\u0433\u0438 \u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0442\u0430\u0441\u043a\u0430 \u043f\u043e \u0445\u043e\u0441\u0442\u0430\u043c \u0441 \u043f\u0430\u0443\u0437\u043e\u0439 \u043d\u0430 60 \u0441\u0435\u043a\u0443\u043d\u0434 \u043c\u0435\u0436\u0434\u0443 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435\u043c \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u0441\u0442\u0440\u043e\u043a, \u0442.\u043a. \u043a\u043e\u043c\u043c\u0438\u0442\u044b \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437, \u043a\u0430\u043a \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u043e \u043d\u0438\u0436\u0435. <pre><code>0   2021-03-12 00:35:09 MSK by [username] via netconf\n    set syslog hosts\n1   2021-03-12 00:35:06 MSK by [username] via netconf\n    set syslog hosts\n2   2021-03-12 00:34:01 MSK by [username] via netconf\n    delete syslog hosts\n3   2021-03-12 00:33:58 MSK by [username] via netconf\n    delete syslog hosts\n</code></pre> \u041d\u0438\u0436\u0435 \u0437\u0430\u043f\u0443\u0441\u043a \u043f\u043b\u0435\u044f \u0441 \u0442\u0435\u0433\u043e\u043c junos_set. \u041a\u043e\u043c\u043c\u0438\u0442\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442, \u0435\u0441\u043b\u0438 \u0442\u0430\u043a\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u0442.\u0435. \u0438\u0434\u0435\u043c\u043f\u043e\u0442\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0430. <pre><code>ansible-playbook syslog_junos.yml -u [username] -k -t junos_set\n</code></pre> playbook <pre><code>---\n- name: configure syslog for juniper\n  hosts: junos\n  serial: 1\n  gather_facts: false\n  vars:\n    Facility: local4\n    LogServers:\n      - 10.1.0.1\n      - 10.2.0.1\n\n  tasks:\n\n    - name: delete syslog servers for junos\n      junipernetworks.junos.junos_config:\n        lines:\n          - \"delete system syslog host {{ item }}\"\n        comment: delete syslog hosts\n      with_items: \"{{ LogServers }}\"\n      tags:\n        - junos_delete\n\n    - name: pause for 60 seconds\n      pause:\n        seconds: 60\n      tags:\n        - junos_delete\n\n    - name: syslog servers for junos\n      junipernetworks.junos.junos_config:\n        lines:\n          - \"set system syslog host {{ item }} any any\"\n          - \"set system syslog host {{ item }} facility-override {{ Facility }}\"\n          - \"set system syslog host {{ item }} explicit-priority\"\n          - \"set system syslog host {{ item }} structured-data brief\"\n        comment: set syslog hosts\n      with_items: \"{{ LogServers }}\"\n      tags:\n        - junos_set\n</code></pre> \u041d\u0438\u0447\u0435\u0433\u043e \u0441\u0442\u0440\u0430\u0448\u043d\u043e\u0433\u043e \u0432 <code>any any</code> \u043d\u0435\u0442, \u0442.\u043a. debug \u0443\u0434\u0430\u043b\u044f\u0435\u0442\u0441\u044f vector'\u043e\u043c. \u041f\u043e\u0442\u043e\u043c \u044d\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0441 local4, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440.</p>"},{"location":"monitoring/promql_metricql/","title":"PromQL, MetricQL","text":"<p>MetricQL \u0438 PromQL</p> <p>Expand VictoriaMetrics WITH templates to canonical PromQL</p> <p>\u0412\u0441\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b vmagent'\u043e\u043c \u0441 snmp_exporter'\u0430, \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u044b \u0432 \u0431\u0430\u0437\u0443 VictoriaMetrics.</p>"},{"location":"monitoring/promql_metricql/#_1","title":"\u0421\u043f\u0438\u0441\u043e\u043a \u043c\u0435\u0442\u0440\u0438\u043a","text":"<p>\u0412 grafana \u0435\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0432 \u0431\u0430\u0437\u044b \u0447\u0435\u0440\u0435\u0437 Explore. \u0414\u043b\u044f \u0432\u044b\u0432\u043e\u0434\u0430 \u0432\u0441\u0435\u0445 \u043c\u0435\u0442\u0440\u0438\u043a, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0445 \u043f\u043e job'\u0443 job_name \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c: <pre><code>max({job=\"job_name\"}) by (__name__)\n</code></pre></p>"},{"location":"monitoring/promql_metricql/#_2","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0432 \u0431\u0430\u0437\u0443","text":"<p>\u0412 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0435 \u043f\u0430\u043d\u0435\u043b\u0438 \u0435\u0441\u0442\u044c query inspector. \u041e\u043d \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u0432 \u0431\u0430\u0437\u0443 \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438. \u041c\u043e\u0436\u043d\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430 \u0434\u0432\u0430 \u0442\u0438\u043f\u0430, \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0445 \u0432 API:</p> <ul> <li>instant-queries. \u0412\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0433\u0430\u043b\u043e\u0447\u043a\u043e\u0439 instant.</li> <li>range-queries. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.</li> </ul> <p>\u0426\u0438\u0442\u0430\u0442\u0430 \u0438\u0437 \u0447\u0430\u0442\u0430:</p> <p>Instant \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0438\u0434\u0443\u0442 \u043a /api/v1/query, \u0430 \u043d\u0435 \u043a /api/v1/query_range. \u0422\u0430\u043c \u0432\u043e\u043e\u0431\u0449\u0435 \u043d\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 step - \u0441\u043c. https://prometheus.io/docs/prometheus/latest/querying/api/#instant-queries, \u0442.\u043a. \u0442\u0430\u043a\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e \u043e\u0434\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0435 \u043d\u0430 \u0440\u044f\u0434 \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u043c \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 time. \u0412\u041c \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 step \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u043a /api/v1/query \u0438\u0437-\u0437\u0430 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438. \u0412 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u0435\u0433\u043e \u0442\u0443\u0434\u0430 \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u0435 \u043d\u0443\u0436\u043d\u043e.</p>"},{"location":"monitoring/promql_metricql/#_3","title":"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0434\u0430\u0448\u0431\u043e\u0440\u0434\u043e\u0432","text":"<p>\u0414\u043b\u044f \u0434\u0430\u0448\u0431\u043e\u0440\u0434\u0430 \u0441 \u0432\u044b\u0432\u043e\u0434\u043e\u043c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043f\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430\u043c \u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u043c \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u0441\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445: \u0445\u043e\u0441\u0442 (ip) \u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 (iface). \u0418\u043c\u044f \u0445\u043e\u0441\u0442\u0430 (instance) \u0438\u0437 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 ifHCInOctets \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e ip. <pre><code>label_values(ifHCInOctets{},instance)\n</code></pre> \u0414\u043b\u044f \u0441\u043f\u0438\u0441\u043a\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0445\u043e\u0441\u0442\u0430 \u0432\u0437\u044f\u043b ifName \u0438\u0437 ifHCInOctets, \u0433\u0434\u0435 label instance - \u044d\u0442\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0440\u0430\u043d\u0435\u0435 \u0445\u043e\u0441\u0442: <pre><code>label_values(ifHCInOctets{instance=\"$ip\"},  ifName)\n</code></pre> ifDescr \u0438\u0437 ifTable \u043d\u0435 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u044e, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0438\u043c\u0435\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 ifXTable.</p>"},{"location":"monitoring/promql_metricql/#uptime","title":"Uptime","text":"<pre><code>sysUpTime{instance=\"$ip\"}*10\n</code></pre> instant panel format interval relative time yes Stat 1m 15m <p>Field -&gt; Standard options -&gt; Units -&gt; Time -&gt; duration (ms), Field -&gt; Standard options -&gt; Decimals -&gt; 3, Panel -&gt; Display -&gt; Fields - Numeric Fields</p>"},{"location":"monitoring/promql_metricql/#cisco","title":"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0443\u0442\u0435\u0447\u043a\u0438 \u043f\u0430\u043c\u044f\u0442\u0438 \u043d\u0430 cisco","text":"<p>\u0412 vmagent'\u0435 job'\u0443 \u0441\u043e\u043e\u0442\u0432\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043c\u043e\u0434\u0443\u043b\u044c snmp_exporter'\u0430, \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0439 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432: asa, router, l2 switch, l3 switch. \u0422.\u0435. \u0432\u044b\u0431\u0438\u0440\u0430\u0435\u0442\u0441\u044f \u043f\u043e 5 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0442\u0438\u043f\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432.</p> <pre><code>bottomk by (job) (5, (delta(ciscoMemoryPoolFree{ciscoMemoryPoolType!=\"20\"}[7d])))\n</code></pre> instant panel format interval relative time yes table table 7d 7d"},{"location":"monitoring/promql_metricql/#_4","title":"\u041e\u0448\u0438\u0431\u043a\u0438 \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445","text":"<p>\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0438\u043c\u0435\u044e\u0442 label \"obj\" \u0434\u043b\u044f \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u043c\u0435\u0441\u0442\u0430 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0438 \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430 \u043f\u0440\u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.</p> <pre><code>topk(10, (increase(ifInErrors{obj=\"$object\"}[8h]))) &gt; 0\ntopk(5, (increase(ifOutDiscards{obj=\"$object\"}[8h]))) &gt; 0\n</code></pre> instant panel format interval relative time yes table table 8d 8d <p>\u0414\u043b\u044f \u0432\u044b\u0432\u043e\u0434\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u043f\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c\u0443 \u0445\u043e\u0441\u0442\u0443 \u0443\u0434\u043e\u0431\u043d\u0435\u0435 \u0432\u0438\u0434\u0435\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0441 \u0442\u0435\u043a\u0443\u0449\u0438\u043c\u0438 \u043e\u0448\u0438\u0431\u043a\u0430\u043c\u0438 \u0438 \u0441\u0443\u043c\u043c\u043e\u0439 \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434: <pre><code>increase(ifInErrors{instance=\"$ip\"}[5m])\n</code></pre></p> instant panel format interval relative time no table timeseries 5m 1h <p>\u0414\u043b\u044f timeseries \u043d\u0443\u0436\u043d\u043e \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c Transform Reduce \u0441 Calculation Last, Total. \u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>{{ ifName }}</code> \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0432\u0441\u0435 \u0438\u043c\u0435\u044e\u0449\u0438\u0435\u0441\u044f \u043b\u0435\u0439\u0431\u043b\u044b \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0433\u043e \u0440\u044f\u0434\u0430.</p>"},{"location":"monitoring/promql_metricql/#_5","title":"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438","text":"<p>\u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u044b \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0432 cisco ip sla (4) \u0438 huawei nqa (2). \u0412 \u0434\u0430\u0448\u0431\u043e\u0440\u0434\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0430 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f ivl \u0442\u0438\u043f Interval. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043f\u0440\u043e\u0431\u0435\u0440\u0430 \u0432 \u043e\u0434\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u043c\u0438 \u0431\u0443\u043a\u0432\u0430\u043c\u0438 \u0432 \u043b\u0435\u0433\u0435\u043d\u0434\u0435 \u043e\u043f\u0438\u0441\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u043d\u0430\u043b\u0430 \u0441\u0432\u044f\u0437\u0438. \u041a\u0430\u0436\u0434\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 - \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441: A,B \u0438 \u0442.\u0434. <pre><code>count_gt_over_time(rttMonLatestRttOperSense{instance=\"cisco-router-1\",rttMonCtrlAdminIndex=\"1\"}[$ivl], 3)\ncount_gt_over_time(rttMonLatestRttOperSense{instance=\"cisco-router-1\",rttMonCtrlAdminIndex=\"2\"}[$ivl], 3)\n..\ncount_gt_over_time(nqaResultsCompletions{instance=\"huawei-1\",nqaAdminCtrlOwnerIndex=\"1\",nqaAdminCtrlTestName=\"1\"}[$ivl], 1)\ncount_gt_over_time(nqaResultsCompletions{instance=\"huawei-1\",nqaAdminCtrlOwnerIndex=\"1\",nqaAdminCtrlTestName=\"2\"}[$ivl], 1)\n</code></pre></p> instant panel format interval relative time yes table timeseries $ivl <p>\u0414\u043b\u044f timeseries \u043d\u0443\u0436\u043d\u043e \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c Transform Reduce \u0441 Calculation Max \u0438\u043b\u0438 Last.</p>"},{"location":"monitoring/promql_metricql/#_6","title":"\u0413\u0440\u0430\u0444\u0438\u043a \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438","text":"<p>\u041d\u0443\u0436\u043d\u043e \u0432\u044b\u0432\u0435\u0441\u0442\u0438 %, \u0430 \u0437\u043d\u0430\u0447\u0438\u0442 \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c: <pre><code>ciscoMemoryPoolFree{instance=\"$ip\",ciscoMemoryPoolType!=\"20\"}*100/(ciscoMemoryPoolFree{instance=\"$ip\",ciscoMemoryPoolType!=\"20\"}+ciscoMemoryPoolUsed{instance=\"$ip\",ciscoMemoryPoolType!=\"20\"})\n</code></pre></p> instant panel format interval relative time no graph timeseries <p>\u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>{{ciscoMemoryPoolName}}</code> \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0432\u0441\u0435 \u0438\u043c\u0435\u044e\u0449\u0438\u0435\u0441\u044f \u043b\u0435\u0439\u0431\u043b\u044b \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0433\u043e \u0440\u044f\u0434\u0430. Panel -&gt; Axes -&gt; Left Y -&gt; Unit -&gt; Misc -&gt; percent (0-100)</p>"},{"location":"monitoring/promql_metricql/#cpu","title":"\u0413\u0440\u0430\u0444\u0438\u043a \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 cpu","text":"<p>\u0412 \u043c\u0435\u0442\u0440\u0438\u043a\u0435 \u0435\u0441\u0442\u044c %, \u043f\u043e\u044d\u0442\u043e\u043c\u0443: <pre><code>cpmCPUTotal5min{instance=\"$ip\"}\n</code></pre></p> instant panel format interval relative time no graph timeseries <p>\u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>{{cpu5min}}</code> \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0432\u0441\u0435 \u0438\u043c\u0435\u044e\u0449\u0438\u0435\u0441\u044f \u043b\u0435\u0439\u0431\u043b\u044b \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0433\u043e \u0440\u044f\u0434\u0430. Panel -&gt; Axes -&gt; Left Y -&gt; Unit -&gt; Misc -&gt; percent (0-100)</p>"},{"location":"monitoring/promql_metricql/#ifoutdiscards","title":"\u0413\u0440\u0430\u0444\u0438\u043a ifOutDiscards \u043e\u0448\u0438\u0431\u043e\u043a","text":"<p>\u0412 \u043f\u0430\u043d\u0435\u043b\u0438 \u0431\u0443\u0434\u0435\u0442 \u0433\u0440\u0430\u0444\u0438\u043a \u0441 \u0434\u0432\u0443\u043c\u044f \u043b\u0438\u043d\u0438\u044f\u043c\u0438: \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441, \u0441\u0443\u043c\u043c\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u043f\u043e \u0432\u0441\u0435\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u043c. \u0422\u0430\u043c \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043f\u0438\u0441\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f ifType=6, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0435\u0441\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043d\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0432 vmagent'\u0435. \u0414\u043b\u044f \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430: <pre><code>increase(ifOutDiscards{instance=\"$ip\",ifName=\"$iface\"}[5m])\n</code></pre> \u0421\u0443\u043c\u043c\u0430 \u043e\u0448\u0438\u0431\u043e\u043a: <pre><code>sum(increase(ifOutDiscards{instance=\"$ip\"}[5m]))\n</code></pre></p> instant panel format interval relative time no graph timeseries <p>\u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>$iface</code> \u0434\u043b\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0438 <code>Total</code> \u0434\u043b\u044f \u0432\u0442\u043e\u0440\u043e\u0433\u043e.</p>"},{"location":"monitoring/promql_metricql/#ifinerrors","title":"\u0413\u0440\u0430\u0444\u0438\u043a IfInErrors \u043e\u0448\u0438\u0431\u043e\u043a","text":"<p>\u0412 \u043f\u0430\u043d\u0435\u043b\u0438 \u0431\u0443\u0434\u0435\u0442 \u0433\u0440\u0430\u0444\u0438\u043a \u0441 \u0434\u0432\u0443\u043c\u044f \u043b\u0438\u043d\u0438\u044f\u043c\u0438: \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441, \u0441\u0443\u043c\u043c\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u043f\u043e \u0432\u0441\u0435\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u043c. \u0422\u0430\u043c \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043f\u0438\u0441\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f ifType=6, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0435\u0441\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043d\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0432 vmagent'\u0435. \u0414\u043b\u044f \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430: <pre><code>increase(ifInErrors{instance=\"$ip\",ifName=\"$iface\"}[5m])\n</code></pre> \u0421\u0443\u043c\u043c\u0430 \u043e\u0448\u0438\u0431\u043e\u043a: <pre><code>sum(increase(ifInErrors{instance=\"$ip\"}[5m]))\n</code></pre></p> instant panel format interval relative time no graph timeseries <p>\u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>$iface</code> \u0434\u043b\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0438 <code>Total</code> \u0434\u043b\u044f \u0432\u0442\u043e\u0440\u043e\u0433\u043e.</p>"},{"location":"monitoring/promql_metricql/#bps","title":"\u0413\u0440\u0430\u0444\u0438\u043a BPS","text":"<p>\u0421\u0443\u043c\u043c\u0430 \u043f\u043e \u0432\u0441\u0435\u043c \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u043c \u0445\u043e\u0441\u0442\u0430: <pre><code>8 * sum(rate(ifHCInOctets{instance=\"$ip\",ifType=\"6\"}[5m]))\n</code></pre> BPS \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443 \u043f\u043e \u043f\u0440\u0438\u0435\u043c\u0443: <pre><code>8 * rate(ifHCInOctets{instance=\"$ip\",ifName=\"$iface\"}[5m])\n</code></pre> BPS \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443 \u043f\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435: <pre><code>8 * rate(ifHCOutOctets{instance=\"$ip\",ifName=\"$iface\"}[5m])\n</code></pre></p> instant panel format interval relative time no graph timeseries <p>\u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>$iface recv</code> \u0438 <code>$iface send</code> \u0434\u043b\u044f \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0438 \u0442\u0440\u0435\u0442\u044c\u0435\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0438 <code>Total recv</code> \u0434\u043b\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e. Panel -&gt; Axes -&gt; Left Y -&gt; Unit -&gt; Data rate -&gt; bits/sec.</p> <p>MetricQL \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u043b\u044f \u043f\u0440\u0438\u0435\u043c\u0430 \u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438. \u041d\u0438\u0436\u0435 \u0441\u0443\u043c\u043c\u0430 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 \u0441 \u0434\u0432\u0443\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 Gi0/1.100 \u0440\u0430\u0437\u043d\u044b\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u044f \u043e\u0434\u043d\u043e\u0433\u043e \u0433\u0440\u0430\u0444\u0438\u043a\u0430: <pre><code>WITH (\n    cf = {instance=~\"border-1|border-2\", ifName=\"Gi0/1.100\" },\n    netUsage(name, m) = label_set(sum(rate(m{cf})*8), \"name\", name),\n)\nunion (\n    netUsage(\"recv\", ifHCOutOctets),\n    netUsage(\"send\", ifHCInOctets),\n)\n</code></pre> \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0448\u0430\u0431\u043b\u043e\u043d <code>instance=~</code> \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435, \u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>rate()</code> \u043f\u043e\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432 <code>sum()</code>. \u042d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043d\u043e \u0432\u044b\u0448\u0435 \u0438 \u043d\u0438\u0436\u0435 \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435, \u0433\u0434\u0435 BPS \u043f\u043e\u043a\u0430\u0437\u0430\u043d \u0438\u0437 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438 huawei c \u0434\u0432\u0443\u0445 \u0440\u0430\u0437\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432. \u0421\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438 \u0434\u043b\u044f \u043f\u0440\u0438\u0435\u043c\u0430 (direction=1): <pre><code>sum(rate(hwCBQoSPolicyStatClassifierMatchedPassBytes{hwCBQoSIfApplyPolicyDirection=\"1\",hwCBQoSIfApplyPolicyIfIndex=\"6\",hwCBQoSIfVlanApplyPolicyVlanid1=\"0\",hwCBQoSPolicyStatClassifierName=\"0xA\",instance=~\"huawei-[12]\"}[5m]))*8\n</code></pre> \u0421\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 (direction=2): <pre><code>sum(rate(hwCBQoSPolicyStatClassifierMatchedPassBytes{hwCBQoSIfApplyPolicyDirection=\"2\",hwCBQoSIfApplyPolicyIfIndex=\"6\",hwCBQoSIfVlanApplyPolicyVlanid1=\"0\",hwCBQoSPolicyStatClassifierName=\"0xB\",instance=~\"huawei-[12]\"}[5m]))*8\n</code></pre> \u0421\u0447\u0435\u0442\u0447\u0438\u043a\u0438 bps \u0435\u0441\u0442\u044c \u0432 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430\u0445 \u043d\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430\u0445 cisco. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435 \u0441\u0443\u043c\u043c\u0430 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 \u043a\u043b\u0430\u0441\u0441\u0430 \u0434\u0432\u0443\u0445 \u043f\u043e\u043b\u0438\u0442\u0438\u043a \u0441 \u0434\u0432\u0443\u0445 \u0440\u0430\u0437\u043d\u044b\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u0432. \u0414\u043b\u044f \u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043d\u0430\u043f\u0438\u0448\u0443 \u043f\u0440\u0438\u043c\u0435\u0440 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0433\u043e \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f. \u041a\u0430\u043a \u0443\u0437\u043d\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u044f \u043d\u0435 \u0431\u0443\u0434\u0443 \u0442\u0443\u0442 \u043f\u0438\u0441\u0430\u0442\u044c. <pre><code>8 * (sum(rate(cbQosCMPostPolicyByte{cbQosObjectsIndex=\"13816289\",cbQosPolicyIndex=\"240\",instance=\"border-1\"}))\n + \nsum(rate(cbQosCMPostPolicyByte{cbQosObjectsIndex=\"1341969\",cbQosPolicyIndex=\"3680\",instance=\"border-2\"})))\n</code></pre> \u0424\u0443\u043d\u043a\u0446\u0438\u044f offset \u0438\u0437 MetricQL \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0441 \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u0432 BPS \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0441\u0435\u0439\u0447\u0430\u0441 \u0438 \u043d\u0435\u0434\u0435\u043b\u044e \u043d\u0430\u0437\u0430\u0434: <pre><code>8 * (sum(rate(ifHCOutOctets{instance=\"switch\",ifName=\"Gi1/0/1\"})) - sum(rate(ifHCOutOctets{instance=\"switch\",ifName=\"Gi1/0/1\"}) offset 7d))\n</code></pre></p>"},{"location":"monitoring/promql_metricql/#bps_1","title":"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 BPS","text":"<p>\u0421\u043d\u043e\u0432\u0430 MetricQL. Top 10 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u043f\u043e \u0432\u0441\u0435\u0439 \u0441\u0435\u0442\u0438 \u0437\u0430 5 \u043c\u0438\u043d\u0443\u0442 \u043f\u043e \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0443 ifHCOutOctets, \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u043a\u0430\u043a \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 PortUtilization \u0438\u0437 topk. \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f ru() \u0438\u0437 MetricQL \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f % \u0443\u0442\u0438\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u0440\u0442\u0430: <pre><code>WITH (\n    maxRate = ifHighSpeed{ifType=\"6\"}[$__interval] * 1e6 / 8,\n    commonFilters = {ifType=\"6\"},\n    PortUtilization(ifHCOctets, maxRate) = ru(maxRate - rate(ifHCOctets{commonFilters}[$__interval]), maxRate)\n)topk(10,PortUtilization(ifHCOutOctets, maxRate))\n</code></pre></p> instant panel format interval relative time yes table timeseries 5m 5m <p>\u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>{{instance}},{{ifName}}</code>. \u0422\u0430\u043a\u0443\u044e \u0436\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0434\u043b\u044f ifHCInOctets.</p>"},{"location":"monitoring/promql_metricql/#pps","title":"\u0413\u0440\u0430\u0444\u0438\u043a PPS","text":"<p>PPS \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443 \u043f\u043e \u043f\u0440\u0438\u0435\u043c\u0443: <pre><code>rate(ifHCInUcastPkts{instance=\"$ip\",ifName=\"$iface\"}[5m])\n</code></pre> PPS \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443 \u043f\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435: <pre><code>rate(ifHCOutUcastPkts{instance=\"$ip\",ifName=\"$iface\"}[5m])\n</code></pre></p> instant panel format interval relative time no graph timeseries <p>\u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>$iface recv</code> \u0438 <code>$iface send</code> \u0434\u043b\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0438 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430. Panel -&gt; Axes -&gt; Left Y -&gt; Unit -&gt; Data rate -&gt; packets/sec.</p>"},{"location":"monitoring/promql_metricql/#c-top-flapping-interface","title":"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 c top \u043f\u043e flapping interface","text":"<p>\u041f\u0435\u0440\u0432\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u043e \u043a\u043e\u043b-\u0432\u0443 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430. <pre><code>topk(10,sum_over_time(changes(ifOperStatus{}[1m])[1h]))\n</code></pre> \u0412\u0442\u043e\u0440\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u043e \u0438\u0437\u043c\u0435\u043d\u043d\u0438\u044e \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f. \u0412 \u0442\u043e\u043f\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043d\u0442\u0435\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u044e\u0442\u0441\u044f \u0432 10\u043c\u0431\u0438\u0442 \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438. <pre><code>topk(10,sum_over_time(changes(ifHighSpeed{}[1m])[1h]))\n</code></pre></p> instant panel format interval relative time yes table timeseries 1m 1h <p>\u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>{{instance}},{{ifName}}</code>. \u0414\u043b\u044f timeseries \u043d\u0443\u0436\u043d\u043e \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c Transform Reduce \u0441 Calculation Max.</p>"},{"location":"monitoring/promql_metricql/#spanning-tree","title":"\u0422\u0430\u0431\u043b\u0438\u0446\u044b \u043f\u043e spanning-tree","text":"<p>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 root'\u0430 \u0432 \u0440\u0435\u0433\u0438\u043e\u043d\u0435. <pre><code>bottomk(1,dot1dStpPriority) by (obj) \n</code></pre></p> instant panel format interval relative time yes table timeseries 1m 5m <p>\u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>{{instance}}</code>. \u0414\u043b\u044f timeseries \u043d\u0443\u0436\u043d\u043e \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c Transform Reduce \u0441 Calculation Max.</p> <p>\u0422\u0430\u0439\u043c\u0435\u0440\u044b TCN. \u0415\u0441\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0441\u044f \u043d\u0435\u0434\u0430\u0432\u043d\u043e, \u0442\u043e \u0437\u043d\u0430\u0447\u0438\u0442 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0442\u043e\u043f\u043e\u043b\u043e\u0433\u0438\u0438 \u0438\u0437-\u0437\u0430 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u0438\u043b\u0438 \u0438\u0437-\u0437\u0430 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a. <pre><code>10 * bottomk(1,dot1dStpTimeSinceTopologyChange != 0) by (obj)\n</code></pre></p> instant panel format interval relative time yes table timeseries 1m 5m <p>\u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>{{instance}}</code>. \u0414\u043b\u044f timeseries \u043d\u0443\u0436\u043d\u043e \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c Transform Reduce \u0441 Calculation Max. \u0414\u043b\u044f \u043a\u043e\u043b\u043e\u043d\u043a\u0438 \u0441 \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c \u0432\u044b\u0431\u0440\u0430\u0442\u044c Units -&gt; Time -&gt; duration (ms)</p> <p>\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u043c\u0435\u043d\u044f\u043b\u0441\u044f root port \u0437\u0430 \u0447\u0430\u0441. <pre><code>sum_over_time(changes(dot1dStpRootPort{})[1h]) &gt; \n</code></pre></p> instant panel format interval relative time yes table timeseries 1m 1h <p>\u0412 \u043f\u043e\u043b\u0435 Legend \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>{{instance}}</code>. \u0414\u043b\u044f timeseries \u043d\u0443\u0436\u043d\u043e \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c Transform Reduce \u0441 Calculation Max.</p>"},{"location":"monitoring/promql_metricql/#cisco-errdisableifstatus","title":"Cisco ErrDisableIfStatus","text":"<p>\u042d\u0442\u043e \u043d\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438, \u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f. \u0421 \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c tsdb. \u0421 \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b, \u043a\u043e\u0433\u0434\u0430 recovery \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d, \u0442\u043e \u0432\u043f\u043e\u043b\u043d\u0435. \u0412 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0431\u0443\u0434\u0443\u0442 \u0447\u0438\u0441\u043b\u0430, \u0430 Enum \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 snmp.yml \u0438\u043b\u0438 \u0432 \u043c\u0438\u0431\u0430\u0445. \u0422\u0430\u043a 2 - \u044d\u0442\u043e \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u043b bpduguard. <pre><code>cErrDisableIfStatusCause{}[1m]\n</code></pre></p> instant panel format interval relative time yes table table 1m 5m"},{"location":"monitoring/promql_metricql/#_7","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0438","text":"<p>\u0414\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438, \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0430\u043b\u0435\u0440\u0442\u044b \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 grafana \u0438\u043b\u0438 vmalerts+alertmanager.</p> <p>BGP peer status \u0440\u0430\u0432\u0435\u043d 6, \u0435\u0441\u043b\u0438 established. \u0415\u0441\u043b\u0438 \u043d\u0435 6, \u0442\u043e \u0430\u043b\u0435\u0440\u0442. <pre><code>bgpPeerState{bgpPeerRemoteAddr=\"10.9.8.7\"}[1m]\n</code></pre> Huawei OSPF nbr state. 8 - OK. \u0415\u0441\u043b\u0438 \u043c\u0435\u043d\u044c\u0448\u0435, \u0442\u043e \u0430\u043b\u0435\u0440\u0442. <pre><code>hwOspfv2NbrState{hwOspfv2NbrIpAddrIndex=\"10.9.8.7\"}[1m]\n</code></pre></p>"},{"location":"monitoring/promql_metricql/#sla-nqa","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u043e\u0431\u0435\u0440\u043e\u0432 SLA, NQA","text":"<p>NQA \u0434\u043b\u044f huawei \u0441 icmp \u043f\u0440\u043e\u0431\u0435\u0440\u043e\u043c. 1 - \u041e\u041a. \u0415\u0441\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435, \u0442\u043e \u0430\u043b\u0435\u0440\u0442. <pre><code>nqaResultsCompletions{instance=\"huawei\",nqaAdminCtrlTestName=\"1\"}[1m]`\n</code></pre> Cisco SLA \u0441 icmp \u043f\u0440\u043e\u0431\u0435\u0440\u043e\u043c. 1 - OK. 3 - OK, \u043d\u043e \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u043b \u0442\u0440\u0435\u0448\u0445\u043e\u043b\u0434 \u043f\u043e rtt. 4 - FAIL. <pre><code>rttMonLatestRttOperSense{instance=\"cisco\",rttMonCtrlAdminIndex=\"1\"}[1m]\n</code></pre> \u041d\u0430\u043b\u0438\u0447\u0438\u0435 \u043f\u043e\u0442\u0435\u0440\u044c \u043d\u0430 \u043a\u0430\u043d\u0430\u043b\u0435 \u0441\u0432\u044f\u0437\u0438, \u043a\u043e\u0433\u0434\u0430 \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f. \u0415\u0441\u043b\u0438 \u0431\u043e\u043b\u0435\u0435 4 \u0440\u0430\u0437 \u0437\u0430 15 \u043c\u0438\u043d\u0443\u0442, \u0442\u043e \u0430\u043b\u0435\u0440\u0442. <pre><code>changes(rttMonLatestRttOperSense{instance=\"cisco\",rttMonCtrlAdminIndex=\"1\"}[15m])\n</code></pre></p>"},{"location":"monitoring/promql_metricql/#_8","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430","text":"<p>1 - OK. \u0415\u0441\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435, \u0442\u043e \u0430\u043b\u0435\u0440\u0442. <pre><code>ifOperStatus{ifName=\"Gi1/0/1\",instance=\"cisco\"}[1m]\n</code></pre></p>"},{"location":"monitoring/promql_metricql/#_9","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b","text":"<p>\u0415\u0441\u0442\u044c \u0434\u0430\u0442\u0447\u0438\u043a\u0438 \u043d\u0430 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0438 Cisco \u0438 \u0443 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0430 \u0441\u0442\u0430\u0440\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0439 oid, \u043d\u043e \u0440\u0430\u0437\u043d\u044b\u0435 TemperatureStatusIndex \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439, \u0441\u0442\u0435\u043a\u043e\u0432. \u041b\u0438\u0431\u043e \u0434\u0430\u0442\u0447\u0438\u043a\u043e\u0432 \u0431\u043e\u043b\u0435\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0438 \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439. <pre><code>ciscoEnvMonTemperatureStatusValue{ciscoEnvMonTemperatureStatusIndex=\"1\",instance=\"cisco\"}[10m]\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u0431\u0430\u0442\u0430\u0440\u0435\u0439 \u0418\u0411\u041f. <pre><code>upsAdvBatteryTemperature{instance=\"apc_ups\"}\n</code></pre></p>"},{"location":"monitoring/promql_metricql/#apc","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0418\u0411\u041f APC","text":"<p>\u0421\u0442\u0430\u0442\u0443\u0441. 2 - \u041e\u041a. 3 - \u043d\u0430 \u0431\u0430\u0442\u0430\u0440\u0435\u044f\u0445. 12 - \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u0432\u044b\u0448\u0435 250\u0412 \u043d\u0430 \u0432\u0445\u043e\u0434\u0435. <pre><code>upsBasicOutputStatus{instance=\"apc_ups\"}\n</code></pre></p> <p>Enum <pre><code>  1: unknown\n  2: onLine\n  3: onBattery\n  4: onSmartBoost\n  5: timedSleeping\n  6: softwareBypass\n  7: \"off\"\n  8: rebooting\n  9: switchedBypass\n  10: hardwareFailureBypass\n  11: sleepingUntilPowerReturn\n  12: onSmartTrim\n</code></pre></p>"},{"location":"monitoring/promql_metricql/#alerts-ifmib","title":"alerts ifmib","text":"<p>flapping \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432 up, \u043d\u043e \u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c \u0434\u043e \u044d\u0442\u043e\u0433\u043e <pre><code>(changes(ifLastChange{ifType=\"6\"}[15m]) &gt; 0) and (ifOperStatus == 1) and ON(instance) (sysUpTime &gt; 150000)\n</code></pre> \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u043b\u0441\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440. \u0418\u043d\u0430\u0447\u0435 \u0435\u0441\u0442\u044c \u0448\u0430\u043d\u0441 \u0447\u0442\u043e \u043a\u0430\u043a\u043e\u0439-\u0442\u043e ifLastChange \u0431\u043e\u043b\u044c\u0448\u0435, \u0430 \u043a\u0430\u0443\u043d\u0442\u0435\u0440 sysUpTime \u043e\u0431\u043d\u0443\u043b\u0438\u043b\u0441\u044f. \u0415\u0441\u043b\u0438 \u0435\u0449\u0435 \u0431\u044b\u043b\u0438 labels, \u043a\u0430\u043a \u0443 \u043c\u0435\u043d\u044f, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, rack, \u0442\u043e by (instance,rack) <pre><code>(max(ifLastChange{ifType=\"6\"} &lt; 20000) by (instance)) and ON(instance) (sysUpTime &lt; 150000)\n</code></pre> \u041d\u0435\u0442 \u043b\u0438\u043d\u043a\u0430 \u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u043e\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 <pre><code>(ifAdminStatus == 1) and (ifOperStatus == 2)\n</code></pre> \u0412\u043a\u043b\u044e\u0447\u0438\u043b\u0441\u044f flowcontrol. \u041f\u043e\u043b\u0435\u0437\u043d\u043e \u0434\u043b\u044f \u043f\u043e\u0440\u0442\u043e\u0432, \u043a\u0443\u0434\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u0441\u0442\u043e\u0440\u0430\u0434\u0436\u0438 <pre><code>rate(dot3HCInPauseFrames[5m]) &gt; 5\n</code></pre> \u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u0448\u0438\u0431\u043a\u0438 <pre><code>rate(ifInErrors[15m]) &gt; 5\n</code></pre> \u0414\u0438\u0441\u043a\u0430\u0440\u0434\u044b <pre><code>rate(ifOutDiscards[15m]) &gt; 100\n</code></pre> \u0423\u0442\u0438\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u043d\u043e\u0439 \u043f\u043e\u043b\u043e\u0441\u044b \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 bw \u0438\u043b\u0438 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430. 62500 = 1e6 / 8 / 2, \u0433\u0434\u0435 2 - rate 50%. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435 72% \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043a\u0440\u0443\u0433\u043b\u043e\u0435 \u0447\u0438\u0441\u043b\u043e <pre><code>rate(ifHCOutOctets{ifType=\"6\"}[10m]) &gt; ((ifHighSpeed{ifType=\"6\"})*90000)\n</code></pre></p>"},{"location":"monitoring/promql_metricql/#alerts-fiber-channel","title":"alerts fiber channel","text":"<p>\u0420\u0435\u0434\u043a\u043e. \u043d\u0435 \u0432\u0438\u0434\u0435\u043b <pre><code>rate(fcIfCreditLoss[5m]) &gt; 0\nrate(fcIfTxWaitCount[5m]) &gt; 0\n</code></pre> \u0424\u0438\u0437\u0438\u043a\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u043a\u043b/\u0432\u044b\u043a\u043b <pre><code>rate(fcIfLinkResetIns[5m]) &gt; 0\nrate(fcIfLinkResetOuts[5m]) &gt; 0\n</code></pre> \u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 FC \u0441\u0435\u0442\u0438, \u043a\u043e\u0433\u0434\u0430 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u044e\u0442\u0441\u044f bbcredits <pre><code>rate(fcHCIfBBCreditTransistionToZero[5m]) &gt; 500000\nrate(fcHCIfBBCreditTransistionFromZero[5m]) &gt; 500000\n</code></pre> \u0421\u0435\u0440\u044c\u0435\u0437\u043d\u044b\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b. \u0427\u0442\u043e-\u0442\u043e \u043e\u0442\u0432\u0430\u043b\u0438\u043b\u0438\u043b\u043e\u0441\u044c \u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u0431\u044b\u043b\u0438 \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u044b. <pre><code>rate(fcIfTimeOutDiscards[5m]) &gt; 0\nrate(fcIfOutDiscards[5m]) &gt; 0\n</code></pre> \u0411\u043e\u043b\u0435\u0435 100\u043c\u0441 \u043d\u0435 \u0431\u044b\u043b\u043e \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 \u043d\u0430 \u043f\u043e\u0440\u0442\u0443. \u041f\u0435\u0440\u0435\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u043e\u0440\u0442-\u0433\u0440\u0443\u043f\u043f\u0443, \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432 \u043d\u0430 \u043f\u043e\u0440\u0442. <pre><code>rate(fcIfTxWtAvgBBCreditTransitionToZero[5m]) &gt; 0\n</code></pre> \u041d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 \u043f\u043e\u043b\u043e\u0441\u044b. \u041d\u0443\u0436\u0435\u043d port-channel, \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043b\u0438\u043d\u043a\u0438 <pre><code>rate(fcIfC3InOctets[10m]) &gt; ((ifHighSpeed)*90000)\nrate(fcIfC3OutOctets[10m]) &gt; ((ifHighSpeed)*90000)\n</code></pre></p>"},{"location":"monitoring/promql_metricql/#alerts-exos","title":"alerts exos","text":"<p>\u041f\u0438\u0442\u0430\u043d\u0438\u0435 <pre><code>extremePowerSupplyStatus !=2\n</code></pre> \u0411\u043b\u043e\u043a \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0442\u043e\u0440\u043e\u0432 <pre><code>extremeFanOperational &gt; 1\n</code></pre> \u041f\u0435\u0440\u0435\u0433\u0440\u0435\u0432 <pre><code>extremeOverTemperatureAlarm &lt; 2\n</code></pre> cpu <pre><code>extremeCpuMonitorSystemUtilization1min &gt; 15\n</code></pre></p>"},{"location":"monitoring/sflow/","title":"netflow, sflow","text":""},{"location":"monitoring/sflow/#_1","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043a\u043e\u043b\u043b\u0435\u043a\u0442\u043e\u0440\u0430 netflow, sflow \u0441 \u0440\u043e\u043b\u044c\u044e v98765_nfdump. \u041f\u0430\u043a\u0435\u0442\u044b \u0435\u0441\u0442\u044c \u0434\u043b\u044f ubuntu,debian. \u0420\u043e\u043b\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u044d\u0442\u0438\u0445 \u041e\u0421 \u0441 systemd.</p>"},{"location":"monitoring/sflow/#_2","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p><code>man nfdump</code> \u0434\u043b\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0438.</p> <p>\u0418\u043d\u0434\u0435\u043a\u0441 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u043f\u0438\u0448\u0435\u0442\u0441\u044f \u0442\u043e\u0436\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u0412\u044b\u0431\u0440\u0430\u0442\u044c top 1 srcip, \u0433\u0434\u0435 snmp-\u0438\u043d\u0434\u0435\u043a\u0441 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 12, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u0442\u043a\u0443\u0434\u0430 \u043a\u0430\u0447\u0430\u044e\u0442. \u0417\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430 dstip, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441 \u043a\u0430\u043a\u0438\u0445 \u0430\u0434\u0440\u0435\u0441\u043e\u0432. <pre><code>nfdump -r [filename] 'out if 12' -s srcip -O bytes -n 1\n</code></pre></p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u043e\u0439 \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 <pre><code>nfdump -r [filename] -c 1 'tos &gt; 0 and port 5060'  -o long\n</code></pre></p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u043d\u0430 \u043f\u0430\u043a\u0435\u0442\u0430\u0445 \u043e\u0442/\u0434\u043e \u0410\u0422\u0421. <pre><code>nfdump -r [filename] 'host 10.00.00.0 and tos 0'  -o long\n</code></pre></p> <p>Top10 \u0437\u0430 1 \u0430\u043f\u0440\u0435\u043b\u044f <pre><code>nfdump -R 2021/04/01 -s srcip -O bytes\n</code></pre></p> <p>\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b <pre><code>nfdump -r [filename] '(proto tcp and flags F and dst ip in [ 999.888.777.0/22 ] and dst port in [ 80 445 443 ]) %nf_fragment ' -c 10\n</code></pre> TCP syn. \u0412 <code>man nfdump</code> \u043f\u0440\u044f\u043c\u043e \u0442\u0430\u043a \u043f\u043e \u0444\u043b\u0430\u0433\u0430\u043c. <pre><code>nfdump -r [filename]  '(proto tcp and flags S and not flags ARFPU and dst ip in [ 999.888.777.0/22 ] and port in [ 80 443 445 ]) %nf_syn' -c 10\n</code></pre> UDP <pre><code>nfdump -r [filename]   '(proto udp and dst ip in [ 999.888.777.0/22 ] and port in [ 53 123 161 80 3389 ] )' -c 10\n</code></pre> ICMP <pre><code>nfdump -r [filename]  '(proto icmp and dst ip in [  999.888.777.0/22 ] )' -A dstip\n</code></pre></p>"},{"location":"monitoring/sflow/#_3","title":"\u041c\u0435\u0441\u0442\u043e \u043d\u0430 \u0434\u0438\u0441\u043a\u0435","text":"<p>\u0415\u0441\u0442\u044c \u0443\u0442\u0438\u043b\u0438\u0442\u0430 <code>nfexpire</code> \u043d\u043e \u043e\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0444\u0430\u0439\u043b\u043e\u0432 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c <code>nfdump.*</code>. \u0415\u0441\u043b\u0438 \u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b, \u0442\u043e \u0431\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u043d\u0430.</p> <pre><code>root@flows:/var/lib/flows# nfexpire -h\nusage nfexpire [options] \n-h      This text\n-l datadir  List stat from directory\n-e datadir  Expire data in directory\n-r datadir  Rescan data directory\n-u datadir  Update expire params from collector logging at &lt;datadir&gt;\n-s size     max size: scales b bytes, k kilo, m mega, g giga t tera\n-t lifetime maximum life time of data: scales: w week, d day, H hour, M minute\n-w watermark    low water mark in % for expire.\n\nroot@flows:/var/lib/flows# for i in `ls` ; do echo -n \"$i has \" ; nfexpire -l $i | grep Status ; done \nrouter1 has Status:    OK\nrouter2 has Status:    OK\nswitch1 has Status:    OK\nswitch2 has Status:    OK\n\nroot@flows:/var/lib/flows# for i in `ls` ; do nfexpire -u $i -s 5g -t 8w ; done\n</code></pre> <p>\u041c\u043e\u0436\u043d\u043e \u0441\u0442\u0430\u0432\u0438\u0442\u044c node_exporter \u0441 collector.textfile \u0438 \u0433\u0435\u043d\u0435\u0440\u0438\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a\u0438</p>"},{"location":"monitoring/sflow/#_4","title":"\u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438","text":"<p>\u0421 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c \u0432 \u0444\u0430\u0439\u043b \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 nfdump, \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0435\u0439 \u0438 \u0441\u0436\u0430\u0442\u0438\u0435\u043c <code>-A srcip,dstip -j</code>. <pre><code>#!/bin/bash\n\ncd /var/cache/nflow\nfilecounter=0\nfor file in `find . -name 'nfcapd.[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'` ; do\n    aggfile=$(echo ${file} | sed s/nfcapd/ajnfcapd/)\n    nfdump -A srcip,dstip -j -a -r ${file} -w ${aggfile}\n    [ -f ${aggfile} ] &amp;&amp; rm -f ${file} &amp;&amp; let filecounter=${filecounter}+1\ndone\ndate &gt;&gt; add.log\necho \" $filecounter\" &gt;&gt; add.log\n</code></pre></p>"},{"location":"monitoring/sflow/#_5","title":"\u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0444\u0430\u0439\u043b\u0430\u043c \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434","text":"<p>\u0414\u043b\u044f \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u043a\u043e\u0433\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</p> <pre><code>#!/bin/bash\n\ncd /var/cache/nflow\nmkdir -p reports\n\necho 'enter ip address'\nread varip\n\n# \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u043e\u0432 \u0434\u043b\u044f \u043e\u0442\u0447\u0435\u0442\u0430 \u043f\u043e Ip-\u0430\u0434\u0440\u0435\u0441\u0443\n\nmkdir -p reports/${varip}\n\n# \u043f\u043e\u0438\u0441\u043a \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430\u043c \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438\n\ndate\nfor m in $(find ./20* -maxdepth 1 -mindepth 1 -type d -name \"[0-9][0-9]\"); do\n  reportdata=$( echo $m | tr -d './')\n  set -x bash\n  targetnfdump=\"reports/${varip}/nfdump.${reportdata}\"\n  nfdump -R $m \"host ${varip}\" -w $targetnfdump\n  nfdump -r $targetnfdump -o \"fmt:%ts;%sa;%da\" &gt; reports/${varip}/${reportdata}.txt\n  set +x bash\ndone\ndate\n</code></pre> <p>\u041b\u0443\u0447\u0448\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0432 <code>screen</code>, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0434\u043e\u043b\u0433\u043e.</p>"},{"location":"monitoring/sflow/#_6","title":"\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0442\u0435\u043a\u0443\u0449\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u0424\u0430\u0439\u043b\u044b \u0440\u043e\u0442\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u0440\u0430\u0437 \u0432 15 \u043c\u0438\u043d\u0443\u0442, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0434\u043e\u043b\u0433\u043e \u0436\u0434\u0430\u0442\u044c \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445. \u041f\u0440\u043e\u0441\u043c\u0430\u0442\u0438\u0432\u0430\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u0438 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b. \u0412\u0440\u0435\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043e. <pre><code>#!/bin/bash -x\n\ncd /var/cache/nflow\n\nfilecurr=$(ls nfcapd.current*)\ntimewin=$(date -d \"-1 minutes\" +%Y/%m/%d.%H:%M)\nnfdump -r $filecurr -t $timewin\n</code></pre></p>"},{"location":"monitoring/sflow/#vmware","title":"vmware","text":"<p>\u041f\u043e\u043c\u0438\u043c\u043e \u0442\u0435\u043b\u0435\u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f, \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u0430 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u043f\u043e \u0442\u0440\u0430\u0444\u0438\u043a\u0443 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 vmware Configure the NetFlow Settings of a vSphere Distributed Switch</p>"},{"location":"monitoring/snmp_exporter/","title":"Vmagent, snmp_exporter (old)","text":"<p>vmagent \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 snmp_exporter \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 snmp \u0438 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0432 \u0431\u0430\u0437\u0443 VictoriaMetrics.</p>"},{"location":"monitoring/snmp_exporter/#go","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 go \u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440\u0430","text":"<p>ubuntu golang wiki <pre><code>curl -LO https://get.golang.org/$(uname)/go_installer &amp;&amp; chmod +x go_installer &amp;&amp; ./go_installer &amp;&amp; rm go_installer\nsource ${HOME}/.bash_profile\n</code></pre> \u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438, \u043a\u0440\u043e\u043c\u0435 snmp, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0443\u0436\u0435\u043d \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e <pre><code>sudo apt install unzip build-essential libsnmp-dev p7zip-full snmp\n</code></pre></p>"},{"location":"monitoring/snmp_exporter/#_1","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440\u0430","text":"<p>generator readme \u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043f\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438, \u043a\u0440\u043e\u043c\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043c\u0438\u0431\u043e\u0432. <pre><code>go get github.com/prometheus/snmp_exporter/generator\ncd ${GOPATH-$HOME/go}/src/github.com/prometheus/snmp_exporter/generator\ngo build\ncp generator ${HOME}/bin\n</code></pre> \u0412\u0441\u0435 \u043c\u0438\u0431\u044b \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u044c \u0432 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 ~/.snmp/mibs \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u0430\u043c\u043e\u043c\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u044d\u0442\u0438\u043c\u0438 \u043c\u0438\u0431\u0430\u043c\u0438 \u0441 snmptranslate <pre><code>export MIBDIRS=$HOME/.snmp/mibs:/usr/share/snmp/mibs\nexport MIBS=ALL\n</code></pre></p>"},{"location":"monitoring/snmp_exporter/#_2","title":"\u0417\u0430\u043f\u0443\u0441\u043a \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440\u0430","text":"<p>\u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 \u0441 \u0444\u0430\u0439\u043b\u043e\u043c generator.yml \u0438 \u0441\u043e\u0437\u0434\u0430\u0435\u0442 snmp.yml <pre><code>(base) vit@abc-MS-1244:~/work/m2/ansible-snmp-exporter/files$ ls\ngenerator.yml  snmp.yml\n(base) vit@abc-MS-1244:~/work/m2/ansible-snmp-exporter/files$ generator generate\nlevel=info ts=2020-08-12T06:08:15.911Z caller=net_snmp.go:142 msg=\"Loading MIBs\" from=$HOME/.snmp/mibs:/usr/share/snmp/mibs:/usr/share/snmp/mibs/iana:/usr/share/snmp/mibs/ietf:/usr/share/mibs/site:/usr/share/snmp/mibs:/usr/share/mibs/iana:/usr/share/mibs/ietf:/usr/share/mibs/netsnmp\n</code></pre></p>"},{"location":"monitoring/snmp_exporter/#generatoryml","title":"generator.yml","text":"<p>\u043f\u0440\u0438\u043c\u0435\u0440 generator.yml</p> <p>\u0423\u0434\u043e\u0431\u043d\u0435\u0435, \u043a\u043e\u0433\u0434\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043e\u0434\u043d\u043e\u0442\u0438\u043f\u043d\u044b\u0435, \u0438\u043c\u0435\u044e\u0442 \u043e\u0434\u043d\u0443 \u0438 \u0442\u0443 \u0436\u0435 community \u043d\u0430 \u0447\u0442\u0435\u043d\u0438\u0435, \u0438\u043d\u0430\u0447\u0435 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e community \u043f\u0438\u0441\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u043e\u0434\u0443\u043b\u044c. \u041a\u0430\u0436\u0434\u043e\u043c\u0443 \u043c\u043e\u0434\u0443\u043b\u044e \u0432 vmagent'\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 (job) \u0441\u043e \u0441\u0432\u043e\u0438\u043c\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438. \u041e\u0442\u043a\u0430\u0437\u0430\u043b\u0441\u044f \u043e\u0442 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0445 \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u043f\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u0443 \u0432 \u043f\u043e\u043b\u044c\u0437\u0443 \u043c\u043e\u0434\u0443\u043b\u0435\u0439, \u0433\u0434\u0435 \u0432\u0441\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u043e \u0435\u0434\u0438\u043d\u043e\u0436\u0434\u044b \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f, \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0438 \u0434\u043b\u044f vmagent \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u043e\u0434\u0438\u043d target.</p> <p>\u0414\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043c\u043e\u0434\u0443\u043b\u044c \u0434\u043b\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u0432 generator.yml: <pre><code>modules:\n\n  vendorname_l2:\n    retries: 1\n    walk:\n      - 1.3.6.1.2.1.1.3         #sysUpTime\n      - 1.3.6.1.2.1.2.2.1.8     #IF-MIB::ifOperStatus\n      - 1.3.6.1.2.1.2.2.1.14    #IF-MIB::ifInErrors\n      - 1.3.6.1.2.1.2.2.1.19    #IF-MIB::ifOutDiscards\n      - 1.3.6.1.2.1.31.1.1.1.6  #IF-MIB::ifHCInOctets\n      - 1.3.6.1.2.1.31.1.1.1.7  #IF-MIB::ifHCInUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.10 #IF-MIB::ifHCOutOctets\n      - 1.3.6.1.2.1.31.1.1.1.11 #IF-MIB::ifHCOutUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.15 #IF-MIB::ifHighSpeed\n\n    lookups:\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.31.1.1.1.1  #ifName\n        drop_source_indexes: true\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.2.2.1.3     #ifType\n</code></pre></p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u043e, \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0438 \u0447\u0442\u043e \u043c\u043e\u0436\u043d\u043e (\u0441\u0442\u0440\u043e\u043a\u0438 \u043d\u0435\u043b\u044c\u0437\u044f, \u043d\u043e \u0441\u0441\u044b\u043b\u043a\u0430 \u0432\u043d\u0438\u0437\u0443). \u041d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u0432\u043e\u043e\u0431\u0449\u0435 \u0432\u0441\u0435 \u0438 \u0442\u0435\u043c \u0431\u043e\u043b\u0435\u0435 \u043e\u0431\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b iftable \u0438 ifxtable \u0446\u0435\u043b\u0438\u043a\u043e\u043c. \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0441 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c\u0438:</p> \u0447\u0442\u043e \u0437\u0430\u0447\u0435\u043c sysUpTime \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0440\u0430\u0431\u043e\u0442\u044b \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f ifOperStatus \u0441\u0442\u0430\u0442\u0443\u0441 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 up/down ifInErrors \u043e\u0431\u0449\u0438\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043e\u0448\u0438\u0431\u043e\u043a ifOutDiscards \u0434\u0438\u0441\u043a\u0430\u0440\u0434\u044b \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u0438\u0437-\u0437\u0430 speed mismatch, qos, \u0438 \u0442\u043f ifHCInOctets 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0431\u0430\u0439\u0442 ifHCInUcastPkts 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u044e\u043d\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0445 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 ifHCOutOctets 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0431\u0430\u0439\u0442 ifHCOutUcastPkts 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u044e\u043d\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0445 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 ifHighSpeed \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0434\u043b\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u0430 % \u0443\u0442\u0438\u043b\u0438\u0437\u0430\u0446\u0438\u0438 <p>\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0441 label, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0431\u0443\u0434\u0443\u0442 \u0443 \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> \u0447\u0442\u043e \u0437\u0430\u0447\u0435\u043c ifName \u0438\u043c\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0438\u0437 ifxtable \u0432\u043c\u0435\u0441\u0442\u043e ifIndex, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u0434\u0430\u043b\u0435\u043d <code>drop_source_indexes: true</code> ifType \u0442\u0438\u043f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0434\u043b\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u043c\u0435\u0442\u0440\u0438\u043a \u0432 vmagent'\u0435, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u043c <p>\u0414\u0440\u043e\u043f\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0434\u043b\u044f \u043d\u0435\u043a\u0442\u043e\u0440\u044b\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u0432 cisco \u043d\u0435\u043b\u044c\u0437\u044f.</p> <p>\u0423 snmp_exporter'\u0430 \u0435\u0441\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b overrides, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442\u044c \u0434\u0440\u043e\u043f\u0430\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a\u0438: <pre><code>    overrides:\n      entSensorStatus:\n        ignore: true\n</code></pre> \u041f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 \u0447\u0438\u0441\u043b\u0430, \u0438\u043d\u0430\u0447\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 1, \u0430 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 cpu \u0438\u043b\u0438 \u043a\u043e\u043b-\u0432\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438, \u0431\u0443\u0434\u0435\u0442 \u0432 label, \u0447\u0442\u043e \u043f\u043b\u043e\u0445\u043e \u0441\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438, \u0442.\u043a. \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0434\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a: <pre><code>    overrides:\n      extremeCpuMonitorSystemUtilization1min:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorSystemTotal:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorSystemFree:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorSystemUsage:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorUserUsage:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n</code></pre> \u0421\u0441\u044b\u043b\u043a\u0438 \u043f\u043e \u0442\u0435\u043c\u0435: https://gtacknowledge.extremenetworks.com/articles/Q_A/Is-there-a-way-to-display-the-OID-1-3-6-1-4-1-1916-1-32-1-4-1-9-for-CPU-utilization-to-an-integer-instead-of-a-string EXTREME-SOFTWARE-MONITOR-MIB Numbers from DisplayStrings with the snmp_exporter</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440\u044b: github.com/prometheus/snmp_exporter/tree/master/generator github.com/v98765/ansible-snmp-exporter/blob/master/files/generator.yml</p>"},{"location":"monitoring/snmp_exporter/#snmp_exporter","title":"\u0417\u0430\u043f\u0443\u0441\u043a snmp_exporter","text":"<p>\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b /etc/snmp_exporter/snmp.yml \u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c snmp_exporter.</p> <p><pre><code>$ systemctl status snmp_exporter\n\u25cf snmp_exporter.service - SNMP Exporter\n   Loaded: loaded (/usr/lib/systemd/system/snmp_exporter.service; enabled; vendor preset: disabled)\n   Active: active (running) since \u0427\u0442 2020-06-25 10:28:56 +07; 1 months 17 days ago\n Main PID: 6467 (snmp_exporter)\n   CGroup: /system.slice/snmp_exporter.service\n           \u2514\u25006467 /usr/local/bin/snmp_exporter --config.file /etc/snmp_exporter/snmp.yml\n</code></pre> \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 snmp_expoter \u0434\u0435\u043b\u0430\u044e \u0441 \u0440\u043e\u043b\u044c\u044e ansible-snmp-exporter.</p>"},{"location":"monitoring/snmp_exporter/#vmagent","title":"vmagent","text":"<p>\u0412\u043e\u0442 vmagent.yml \u0438 job, \u0434\u043b\u044f \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d file service discovery. \u041e\u043f\u0440\u043e\u0441 \u0445\u043e\u0441\u0442\u043e\u0432 \u0440\u0430\u0437 \u0432 \u043c\u0438\u043d\u0443\u0442\u0443. \u0423 job'\u0430 \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u0445 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u0438\u043d module.</p> <p><pre><code>global:\n  scrape_interval: 60s\n  scrape_timeout: 30s\n\n\nscrape_configs:\n  - file_sd_configs:\n    - files:\n      - targets/vendorname_l2_*.yml\n    job_name: vendorname_l2\n    metric_relabel_configs:\n    - action: drop\n      regex: ^[^6]$|\\d{2,}\n      source_labels:\n      - ifType\n    metrics_path: /snmp\n    params:\n      module:\n      - vendorname_l2\n    relabel_configs:\n    - source_labels:\n      - __address__\n      target_label: __param_target\n    - source_labels:\n      - __param_target\n      target_label: instance\n    - replacement: 127.0.0.1:9116\n      target_label: __address__\n</code></pre> \u0412 metric_relabel_configs \u043f\u0440\u0430\u0432\u0438\u043b\u043e, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0434\u0440\u043e\u043f\u0430\u0435\u0442 \u0432\u0441\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438, \u0433\u0434\u0435 iftype!=6. \u0422.\u043e. \u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0441\u0443\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043f\u043e \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u043c, \u043d\u0435 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430\u043c \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432.</p> <p>\u0424\u0430\u0439\u043b \u0441 \u0442\u0430\u0440\u0433\u0435\u0442\u0430\u043c\u0438 vendorname_l2_region1.yml: <pre><code>- targets:\n    - switch1\n    - switch2\n  labels:\n    obj: 'region1'\n</code></pre> \u0421\u0442\u0430\u0442\u0443\u0441 \u0442\u0430\u0440\u0433\u0435\u0442\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u0432 vmagent'\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c: <pre><code>curl http://localhost:8429/targets\n</code></pre> \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 vmagent \u0434\u0435\u043b\u0430\u044e \u0441 \u0440\u043e\u043b\u044c\u044e ansible-vmagent.</p> <p>\u0414\u043b\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u0432 \u043d\u0443\u0436\u043d\u044b \u0432 \u0442.\u0447. \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0434\u043b\u044f \u0446\u0438\u0441\u043e\u043a \u0443\u0434\u0430\u043b\u044f\u044e\u0442\u0441\u044f \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 iftype: <pre><code>    metric_relabel_configs:\n    - action: drop\n      regex: ^1$|22|24|32|33|39|53|63|77\n      source_labels:\n      - ifType\n</code></pre></p> <p>\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 huawei nqa \u043e\u0441\u043b\u043e\u0436\u043d\u044f\u0435\u0442\u0441\u044f \u043d\u0430\u043b\u0438\u0447\u0438\u0435\u043c \u043c\u0435\u043d\u044f\u044e\u0449\u0438\u0445\u0441\u044f \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0430\u0434\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c: <pre><code>    metric_relabel_configs:\n    - action: labeldrop\n      regex: nqaResultsIndex|nqaResultsHopIndex\n</code></pre></p> <p>mkdir snmp https://raw.githubusercontent.com/prometheus/snmp_exporter/master/generator/Dockerfile podman build -t snmp-generator .</p>"},{"location":"monitoring/snmp_exporter/#links","title":"links","text":"<p>https://www.robustperception.io/numbers-from-displaystrings-with-the-snmp_exporter</p>"},{"location":"monitoring/snmp_exporter_20/","title":"snmp_exporter 0.20","text":"<p>vmagent \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 snmp_exporter \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 snmp \u0438 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0432 \u0431\u0430\u0437\u0443 VictoriaMetrics. \u041f\u043e\u0441\u043b\u0435 0.20.0 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u044b \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438 snmp_exporter \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0435\u0440\u0435\u0434\u0435\u0442 github.com/prometheus-community/snmp</p>"},{"location":"monitoring/snmp_exporter_20/#_1","title":"\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<p>\u0412 \u0432\u0435\u0440\u0441\u0438\u0438 0.20 \u043f\u043e\u043a\u0430 \u0435\u0449\u0435 \u043d\u0443\u0436\u0435\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u0434\u043b\u044f \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f snmp.yml (\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b snmp_exporter) \u0438\u0437 yaml \u0444\u0430\u0439\u043b\u0430 generator.yml \u0418\u0437 \u0438\u0441\u0445\u043e\u0434\u0438\u043a\u043e\u0432 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u0432 \u044d\u0442\u043e\u0442 \u0440\u0430\u0437, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0441 \u0434\u043e\u043a\u0435\u0440\u043e\u043c https://hub.docker.com/r/prom/snmp-generator. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435 podman \u0432 ubuntu 20.10 \u0421\u0442\u0430\u0440\u044b\u0439 \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u0438\u0441\u043a\u0430\u043b \u043c\u0438\u0431\u044b \u0432 \u0434\u043e\u043c\u0430\u0448\u043d\u0435\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 .snmp/mibs, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0430\u0440\u0445\u0438\u0432 \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u043c\u0438 \u043c\u0438\u0431\u0430\u043c\u0438 \u0442\u0430\u043c. \u0421\u0430\u043c \u0444\u0430\u0439\u043b generator.yml \u0432 .snmp/ <pre><code>cd .snmp/\ndocker run -it -v \"${PWD}:/opt/\" prom/snmp-generator generate\n</code></pre> \u0415\u0441\u043b\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0441\u044f \u0431\u0435\u0437 \u043e\u0448\u0438\u0431\u043e\u043a, \u0442\u043e \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0442\u044c\u0441\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b snmp.yml <pre><code>$ ls\ngenerator.yml  mibs  snmp.yml\n</code></pre></p>"},{"location":"monitoring/snmp_exporter_20/#generatoryml","title":"generator.yml","text":"<p>\u0414\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u044b \u0432\u0441\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430, \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c\u044b\u0435 \u043e\u0434\u043d\u0438\u043c \u043c\u043e\u0434\u0443\u043b\u0435\u043c \u0438\u043c\u0435\u044e\u0442 \u043e\u0434\u043d\u0443 \u0438 \u0442\u0443 \u0436\u0435 \u0432\u0435\u0440\u0441\u0438\u044e snmp \u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0438\u0442\u0438 public. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u0438 \u0434\u0430\u043b\u0435\u0435 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 vmagent'\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0442\u0430\u043a\u043e\u0433\u043e \u043c\u043e\u0434\u0443\u043b\u044f \u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 job</p> <p>\u0414\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043c\u043e\u0434\u0443\u043b\u044c \u0434\u043b\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u0432 generator.yml: <pre><code>modules:\n\n  devicename:\n    retries: 1\n    walk:\n      - 1.3.6.1.2.1.1.3         #sysUpTime\n      - 1.3.6.1.2.1.2.2.1.8     #IF-MIB::ifOperStatus\n      - 1.3.6.1.2.1.2.2.1.14    #IF-MIB::ifInErrors\n      - 1.3.6.1.2.1.2.2.1.19    #IF-MIB::ifOutDiscards\n      - 1.3.6.1.2.1.31.1.1.1.6  #IF-MIB::ifHCInOctets\n      - 1.3.6.1.2.1.31.1.1.1.7  #IF-MIB::ifHCInUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.10 #IF-MIB::ifHCOutOctets\n      - 1.3.6.1.2.1.31.1.1.1.11 #IF-MIB::ifHCOutUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.15 #IF-MIB::ifHighSpeed\n\n    lookups:\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.31.1.1.1.1  #ifName\n        drop_source_indexes: true\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.2.2.1.3     #ifType\n</code></pre></p> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u043e, \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0438 \u0447\u0442\u043e \u043c\u043e\u0436\u043d\u043e (\u0441\u0442\u0440\u043e\u043a\u0438 \u043d\u0435\u043b\u044c\u0437\u044f, \u043d\u043e \u0441\u0441\u044b\u043b\u043a\u0430 \u0432\u043d\u0438\u0437\u0443). \u041d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u0432\u043e\u043e\u0431\u0449\u0435 \u0432\u0441\u0435 \u0438 \u0442\u0435\u043c \u0431\u043e\u043b\u0435\u0435 \u043e\u0431\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b iftable \u0438 ifxtable \u0446\u0435\u043b\u0438\u043a\u043e\u043c. \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0441 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c\u0438:</p> \u0447\u0442\u043e \u0437\u0430\u0447\u0435\u043c sysUpTime \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0440\u0430\u0431\u043e\u0442\u044b \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f ifOperStatus \u0441\u0442\u0430\u0442\u0443\u0441 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 up/down ifInErrors \u043e\u0431\u0449\u0438\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043e\u0448\u0438\u0431\u043e\u043a ifOutDiscards \u0434\u0438\u0441\u043a\u0430\u0440\u0434\u044b \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u0438\u0437-\u0437\u0430 speed mismatch, qos, \u0438 \u0442\u043f ifHCInOctets 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0431\u0430\u0439\u0442 ifHCInUcastPkts 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u044e\u043d\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0445 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 ifHCOutOctets 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0431\u0430\u0439\u0442 ifHCOutUcastPkts 64-\u0431\u0438\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u044e\u043d\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0445 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 ifHighSpeed \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0434\u043b\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u0430 % \u0443\u0442\u0438\u043b\u0438\u0437\u0430\u0446\u0438\u0438 <p>\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0441 label, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0431\u0443\u0434\u0443\u0442 \u0443 \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> \u0447\u0442\u043e \u0437\u0430\u0447\u0435\u043c ifName \u0438\u043c\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0438\u0437 ifxtable \u0432\u043c\u0435\u0441\u0442\u043e ifIndex, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u0434\u0430\u043b\u0435\u043d <code>drop_source_indexes: true</code> ifType \u0442\u0438\u043f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0434\u043b\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u043c\u0435\u0442\u0440\u0438\u043a \u0432 vmagent'\u0435, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u043c <p>\u0414\u0440\u043e\u043f\u0430\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0434\u043b\u044f \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430\u0445 cisco \u043d\u0435\u043b\u044c\u0437\u044f. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0440\u0438 \u043e\u043f\u0440\u043e\u0441\u0435 7206VXR \u0441 \u043c\u043e\u0434\u0443\u043b\u044f\u043c\u0438 \u043c\u043e\u0436\u0435\u0442 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u0443\u0442\u044c \u043e\u0448\u0438\u0431\u043a\u0430.</p> <p>\u0423 snmp_exporter'\u0430 \u0435\u0441\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b overrides, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442\u044c \u0434\u0440\u043e\u043f\u0430\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a\u0438. \u042d\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0432\u044b\u0441\u043e\u043a\u043e\u043a\u0430\u0440\u0434\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0442\u0440\u0438\u043a, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0438\u043b\u0438 \u043c\u0443\u0441\u043e\u0440\u0430. <pre><code>  n3k:\n    retries: 1\n    walk:\n      - 1.3.6.1.2.1.1.3             # sysUpTime\n      - 1.3.6.1.2.1.2.2.1.7         # IF-MIB::ifAdminStatus\n      - 1.3.6.1.2.1.2.2.1.8         # IF-MIB::ifOperStatus\n      - 1.3.6.1.2.1.2.2.1.9         # IF-MIB::ifLastChange\n      - 1.3.6.1.2.1.2.2.1.14        # IF-MIB::ifInErrors\n      - 1.3.6.1.2.1.2.2.1.19        # IF-MIB::ifOutDiscards\n      - 1.3.6.1.2.1.31.1.1.1.6      # IF-MIB::ifHCInOctets\n      - 1.3.6.1.2.1.31.1.1.1.7      # IF-MIB::ifHCInUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.10     # IF-MIB::ifHCOutOctets\n      - 1.3.6.1.2.1.31.1.1.1.11     # IF-MIB::ifHCOutUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.15     # IF-MIB::ifHighSpeed\n      - 1.3.6.1.2.1.10.7.10         # EtherLike-MIB::dot3PauseTable\n      - 1.3.6.1.2.1.15.3.1.2        # BGP4-MIB::bgpPeerState\n      - 1.3.6.1.2.1.15.3.1.15       # BGP4-MIB::bgpPeerFsmEstablishedTransitions\n      - 1.3.6.1.4.1.9.9.91.1.1.1.1.4    # CISCO-ENTITY-SENSOR-MIB::entSensorValue\n      - 1.3.6.1.4.1.9.9.91.1.1.1.1.5    # CISCO-ENTITY-SENSOR-MIB::entSensorStatus\n      - 1.3.6.1.4.1.9.9.109.1.1.1.1.7       # CISCO-PROCESS-MIB::cpmCPUTotal1minRev\n      - 1.3.6.1.4.1.9.9.109.1.1.1.1.12      # CISCO-PROCESS-MIB::cpmCPUMemoryUsed\n      - 1.3.6.1.4.1.9.9.109.1.1.1.1.13      # CISCO-PROCESS-MIB::cpmCPUMemoryFree\n      - 1.3.6.1.4.1.9.9.117.1.1.2       # CISCO-ENTITY-FRU-CONTROL-MIB::cefcFRUPowerStatusTable\n      - 1.3.6.1.4.1.9.9.117.1.2.1       # CISCO-ENTITY-FRU-CONTROL-MIB::cefcModuleTable\n      - 1.3.6.1.4.1.9.9.117.1.4.1       # CISCO-ENTITY-FRU-CONTROL-MIB::cefcFanTrayStatusTable\n      - 1.3.6.1.4.1.9.9.42.1.2.10.1.2   # CISCO-RTTMON-MIB::rttMonLatestRttOperSense\n\n    lookups:\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.31.1.1.1.1  # ifName\n        drop_source_indexes: true\n      - source_indexes: [dot3StatsIndex]\n        lookup: 1.3.6.1.2.1.31.1.1.1.1  # ifName\n        drop_source_indexes: true\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.2.2.1.3     # ifType for eth=6\n      - source_indexes: [entPhysicalIndex]\n        drop_source_indexes: true\n        lookup: 1.3.6.1.2.1.47.1.1.1.1.2    # entPhysicalDescr\n\n    overrides:\n      entSensorStatus:\n        ignore: true\n</code></pre></p> <p>\u0415\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 \u0447\u0438\u0441\u043b\u0430, \u0438\u043d\u0430\u0447\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 1, \u0430 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 cpu \u0438\u043b\u0438 \u043a\u043e\u043b-\u0432\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438, \u0431\u0443\u0434\u0435\u0442 \u0432 label, \u0447\u0442\u043e \u043f\u043b\u043e\u0445\u043e \u0441\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438, \u0442.\u043a. \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0434\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a: <pre><code>  exos:\n    retries: 1\n    walk:\n      - 1.3.6.1.2.1.1.3             # sysUpTime\n      - 1.3.6.1.2.1.2.2.1.7         # IF-MIB::ifAdminStatus\n      - 1.3.6.1.2.1.2.2.1.8         # IF-MIB::ifOperStatus\n      - 1.3.6.1.2.1.2.2.1.9         # IF-MIB::ifLastChange\n      - 1.3.6.1.2.1.2.2.1.14        # IF-MIB::ifInErrors\n      - 1.3.6.1.2.1.2.2.1.19        # IF-MIB::ifOutDiscards\n      - 1.3.6.1.4.1.1916.1.4.14.1.1   # EXTREME-PORT-MIB::extremePortCongDropPkts\n      - 1.3.6.1.2.1.31.1.1.1.6      # IF-MIB::ifHCInOctets\n      - 1.3.6.1.2.1.31.1.1.1.7      # IF-MIB::ifHCInUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.10     # IF-MIB::ifHCOutOctets\n      - 1.3.6.1.2.1.31.1.1.1.11     # IF-MIB::ifHCOutUcastPkts\n      - 1.3.6.1.2.1.31.1.1.1.15     # IF-MIB::ifHighSpeed\n      - 1.3.6.1.2.1.15.3.1.2        # BGP4-MIB::bgpPeerState\n      - 1.3.6.1.2.1.15.3.1.15       # BGP4-MIB::bgpPeerFsmEstablishedTransitions\n      - 1.3.6.1.4.1.1916.1.32.1.4.1.8   # EXTREME-SOFTWARE-MONITOR-MIB::extremeCpuMonitorSystemUtilization1min\n      - 1.3.6.1.4.1.1916.1.32.2.2       # EXTREME-SOFTWARE-MONITOR-MIB::extremeMemoryMonitorSystemTable\n      - 1.3.6.1.4.1.1916.1.1.1.27.1.2       # EXTREME-SYSTEM-MIB::extremePowerSupplyStatus\n      - 1.3.6.1.4.1.1916.1.1.1.7        # EXTREME-SYSTEM-MIB::extremeOverTemperatureAlarm\n      - 1.3.6.1.4.1.1916.1.1.1.8        # EXTREME-SYSTEM-MIB::extremeCurrentTemperature\n      - 1.3.6.1.4.1.1916.1.1.1.9        # EXTREME-SYSTEM-MIB::extremeFanStatusTable\n\n    lookups:\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.31.1.1.1.1  # ifName for ifmib and fcfemib\n        drop_source_indexes: true\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.2.2.1.3     # ifType for eth=6\n      - source_indexes: [entPhysicalIndex]\n        drop_source_indexes: true\n        lookup: 1.3.6.1.2.1.47.1.1.1.1.2    # entPhysicalDescr\n    overrides:\n      extremeCpuMonitorSystemUtilization1min:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorSystemTotal:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorSystemFree:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorSystemUsage:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n      extremeMemoryMonitorUserUsage:\n        regex_extracts:\n          '':\n            - regex: '(.*)'\n              value: '$1'\n</code></pre></p> <p>\u0415\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u043d\u0430 \u043e\u0434\u0438\u043d. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0431\u044b\u043b\u043e \u0438 \u0441\u0442\u0430\u043b\u043e <pre><code># TYPE jnxOperatingTemp gauge\njnxOperatingTemp{jnxOperatingContentsIndex=\"1\",jnxOperatingL1Index=\"0\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"12\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 36\njnxOperatingTemp{jnxOperatingContentsIndex=\"2\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 29\njnxOperatingTemp{jnxOperatingContentsIndex=\"2\",jnxOperatingL1Index=\"2\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 32\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"1\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"2\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"2\",jnxOperatingL2Index=\"1\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"2\",jnxOperatingL2Index=\"2\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"3\",jnxOperatingL2Index=\"1\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"4\",jnxOperatingL1Index=\"3\",jnxOperatingL2Index=\"2\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"7\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"8\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"1\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"8\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"2\",jnxOperatingL3Index=\"0\"} 0\njnxOperatingTemp{jnxOperatingContentsIndex=\"9\",jnxOperatingL1Index=\"1\",jnxOperatingL2Index=\"0\",jnxOperatingL3Index=\"0\"} 41\n\n\n# TYPE jnxOperatingTemp gauge\njnxOperatingTemp{jnxOperatingDescr=\"CB 0\"} 36\njnxOperatingTemp{jnxOperatingDescr=\"FPC: MPC @ 0/*/*\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 0 Fan 0\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 0 Fan 1\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 1 Fan 0\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 1 Fan 1\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 2 Fan 0\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Fan Tray 2 Fan 1\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"PEM 0\"} 29\njnxOperatingTemp{jnxOperatingDescr=\"PEM 1\"} 32\njnxOperatingTemp{jnxOperatingDescr=\"PIC: 4XQSFP28 PIC @ 0/0/*\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"PIC: 8XSFPP PIC @ 0/1/*\"} 0\njnxOperatingTemp{jnxOperatingDescr=\"Routing Engine\"} 41\njnxOperatingTemp{jnxOperatingDescr=\"midplane\"} 0\n</code></pre> \u042d\u0442\u043e \u0434\u043e\u0441\u0442\u0438\u0433\u0430\u0435\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439 <pre><code>  mx:\n    retries: 1\n    walk:\n      - 1.3.6.1.2.1.1.3             # sysUpTime\n      - 1.3.6.1.2.1.2.2.1.14        # IF-MIB::ifInErrors\n      - 1.3.6.1.2.1.31.1.1.1.6      # IF-MIB::ifHCInOctets\n      - 1.3.6.1.2.1.31.1.1.1.10     # IF-MIB::ifHCOutOctets\n      - 1.3.6.1.2.1.15.3.1.2        # BGP4-MIB::bgpPeerState\n      - 1.3.6.1.2.1.15.3.1.15       # BGP4-MIB::bgpPeerFsmEstablishedTransitions\n      - 1.3.6.1.4.1.2636.3.5.2.1.4  # JUNIPER-FIREWALL-MIB::jnxFWCounterPacketCount\n      - 1.3.6.1.4.1.2636.3.5.2.1.5  # JUNIPER-FIREWALL-MIB::jnxFWCounterByteCount\n      - 1.3.6.1.4.1.2636.3.1.13     # https://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB17526\n                                    # https://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB15467\n    lookups:\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.31.1.1.1.1  # ifName\n        drop_source_indexes: true\n      - source_indexes: [ifIndex]\n        lookup: 1.3.6.1.2.1.2.2.1.3     # ifType\n      - source_indexes: [jnxOperatingContentsIndex,jnxOperatingL1Index,jnxOperatingL2Index,jnxOperatingL3Index]\n        lookup: 1.3.6.1.4.1.2636.3.1.13.1.5\n        drop_source_indexes: true\n</code></pre></p> <p>\u0411\u044b\u0432\u0430\u0435\u0442 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u0442\u0438\u043f, \u0432 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 label \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0442\u0441\u044f \u0432 hex. \u041d\u0438\u0436\u0435 \u043f\u0440\u0438\u043c\u0435\u0440 \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u0433\u0438\u043f\u0435\u0440\u0432\u0438\u0437\u043e\u0440\u0430 esxi <pre><code>  esxi:\n    retries: 1\n    walk:\n      - 1.3.6.1.2.1.25.1.1              # hrSystemUptime\n      - 1.3.6.1.2.1.25.2.3.1.5          # hrStorageSize\n      - 1.3.6.1.2.1.25.2.3.1.6          # hrStorageUsed\n      - 1.3.6.1.2.1.25.3.3              # hrProcessorTable\n      - 1.3.6.1.2.1.25.5.1.1.2          # hrSWRunPerfMem\n      - 1.3.6.1.2.1.25.4.2.1.7          # hrSWRunStatus\n\n    lookups:\n      - source_indexes: [hrStorageIndex]\n        lookup: 1.3.6.1.2.1.25.2.3.1.2    # hrStorageType\n        drop_source_indexes: false\n      - source_indexes: [hrSWRunIndex]\n        lookup: 1.3.6.1.2.1.25.4.2.1.2    # hrSWRunName\n        drop_source_indexes: false\n    overrides:\n      hrSWRunName:\n        type: DisplayString\n</code></pre> RAM \u0442\u0443\u0442 \u043a\u0430\u043a \u0434\u0438\u0441\u043a <pre><code>hrStorageSize{hrStorageType=\"1.3.6.1.2.1.25.2.1.2\"}\nhrStorageUsed{hrStorageType=\"1.3.6.1.2.1.25.2.1.2\"}\n</code></pre></p>"},{"location":"monitoring/snmp_exporter_20/#_2","title":"\u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"<pre><code>curl localhost:9116/snmp?module=mx\\&amp;target=mx_host\n</code></pre> <p>\u0421\u0441\u044b\u043b\u043a\u0438 \u043f\u043e \u0442\u0435\u043c\u0435:</p> <p>https://gtacknowledge.extremenetworks.com/articles/Q_A/Is-there-a-way-to-display-the-OID-1-3-6-1-4-1-1916-1-32-1-4-1-9-for-CPU-utilization-to-an-integer-instead-of-a-string</p> <p>EXTREME-SOFTWARE-MONITOR-MIB</p> <p>Numbers from DisplayStrings with the snmp_exporter</p> <p>Why is my SNMP string showing as hexadecimal?</p> <p>EX How to check temperature, CPU/memory usage by SNMP OID</p> <p>Verifying some of the EX Switch chassis operating states using SNMP OID's</p>"},{"location":"monitoring/telegraf_snmp/","title":"Telegraf snmp","text":"<p>\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 snmp \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u0443\u044e: \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432, \u0441\u0442\u0430\u0442\u0443\u0441 sla, \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432, \u0441\u043e\u0441\u0442\u0430\u0432 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u0438\u0437 entity-mib, \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a qos. \u0412\u0441\u0435 \u044d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u0441 \u0440\u0430\u0437\u043d\u044b\u043c\u0438 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430\u043c\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e sla \u043d\u0443\u0436\u043d\u044b \u0440\u0430\u0437 \u0432 \u043c\u0438\u043d\u0443\u0442\u0443, \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a \u0440\u0430\u0437 \u0432 \u043f\u044f\u0442\u044c \u043c\u0438\u043d\u0443\u0442, \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u044e \u0440\u0430\u0437 \u0432 \u0441\u0443\u0442\u043a\u0438. \u0420\u0430\u0437\u043d\u044b\u0435 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u044b \u043f\u043e\u0434\u0440\u0430\u0437\u0443\u043c\u0435\u0432\u0430\u044e\u0442 \u0440\u0430\u0437\u043d\u044b\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u0434\u043b\u044f \u043f\u043b\u0430\u0433\u0438\u043d\u0430 snmp, \u0442.\u043a. \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u043b\u0430\u0433\u0438\u043d\u0430, \u0430 \u043d\u0435 \u0434\u043b\u044f job'\u0430, \u043a\u0430\u043a \u0432 prometheus/vmagent. \u041e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0441 \u043e\u0434\u043d\u0438\u043c \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f, \u0442.\u043a. \u043d\u0435\u0442 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043e\u0434\u043d\u0438 \u0438 \u0442\u0435 \u0436\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u0437\u0430\u0446\u0438\u0438, \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432, ip-\u0430\u0434\u0440\u0435\u0441\u0430, arp'\u044b \u0438 \u0442.\u043f. \u0415\u0449\u0435 \u043e\u043f\u0440\u043e\u0441 \u0442\u0430\u043a\u043e\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0442\u0430\u0431\u043b\u0438\u0446 \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442 \u043f\u0440\u0438\u043b\u0438\u0447\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0438 \u0432 \u043c\u0438\u043d\u0443\u0442\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043f\u0440\u043e\u0441\u0442\u043e \u043d\u0435 \u0443\u0441\u043f\u0435\u0442\u044c. \u042d\u0442\u043e \u043b\u0435\u0433\u043a\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0432 \u0432 \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 telegraf. <pre><code>$ telegraf -config test.cfg -test\n</code></pre> \u041e\u0442\u0441\u044e\u0434\u0430 \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435, \u0447\u0442\u043e \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u043f\u0440\u043e\u0441\u0430 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u0432\u0440\u0435\u043c\u044f \u043e\u043f\u0440\u043e\u0441\u0430 \u0432\u0441\u0435\u0445 \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0432 \u0442.\u0447. \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u043e\u0432 \u0438\u0437-\u0437\u0430 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438. \u0415\u0441\u043b\u0438 \u0432\u0441\u0435 \u0430\u0433\u0435\u043d\u0442\u044b \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u043e\u043f\u0440\u043e\u0448\u0435\u043d\u044b \u0434\u043e \u043d\u0430\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430 \u043e\u043f\u0440\u043e\u0441\u0430, \u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0435, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u043e\u0442 \u0432\u0441\u0435\u0445 \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b \u0441 \u0444\u0438\u043a\u0441\u0430\u0446\u0438\u0435\u0439 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0432 \u043b\u043e\u0433\u0430\u0445 \"input \"inputs.snmp\" did not complete within its interval\". \u0422.\u0435. \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043a\u0430\u043a-\u0442\u043e \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e, \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043c\u0435\u043d\u0435\u0435 \u0447\u0430\u0441\u0442\u043e, \u043d\u043e \u0441 \u0431\u041e\u043b\u044c\u0448\u0438\u043c \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u043e\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438. \u041d\u0438\u0436\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u0440\u044b, \u043d\u043e \u044d\u0442\u043e \u0431\u043e\u043b\u044c\u0448\u0435 \u0434\u043b\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u0438\u0441\u0442\u043e\u0440\u0438\u0438. \u0422\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0441\u044c vmagent'\u043e\u043c \u0438 snmp_exporter'\u043e\u043c \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u0430 \u043a\u0430\u0443\u043d\u0442\u0435\u0440\u043e\u0432 \u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u043d\u0435\u0433\u043e \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u0432 \u0441\u0442\u043e\u0440\u043e\u043d\u0443 \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u0438\u044f \u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u044f \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043b\u0435\u0439\u0431\u043b\u043e\u0432. Telegraf \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438 \u0441\u0442\u0440\u043e\u043a \u0432 clickhouse. \u0414\u0430\u043b\u044c\u0448\u0435 \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u0445 \u0431\u0443\u0434\u0443\u0442 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0448\u0442\u0443\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u0448\u043b\u0438 \u0441 \u043e\u043f\u044b\u0442\u043e\u043c:</p> <ul> <li>\u0415\u0441\u043b\u0438 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e field \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043a\u0430\u043a tag, \u0442\u043e \u0438\u043c\u044f  \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0435 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f. \u042d\u0442\u043e \u0441\u0432\u044f\u0437\u0430\u043d\u043e \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0440\u0430\u043d\u043d\u0438\u0445 \u0432\u0435\u0440\u0441\u0438\u0439 influxdb, \u0433\u0434\u0435 \u0441 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0432 \u0441\u0430\u043c\u043e\u0439 \u0431\u0430\u0437\u0435 \u0441\u043b\u0443\u0447\u0430\u043b\u0430\u0441\u044c \u043a\u0430\u043d\u0430\u044f-\u0442\u043e \u043a\u0430\u0448\u0430. \u0422\u0430\u043a \u043f\u043e\u044f\u0432\u043b\u044f\u043b\u0438\u0441\u044c ifName \u0438 ifName_1 \u0438 \u044f \u0443\u0436\u0435 \u043d\u0435 \u043f\u043e\u043c\u043d\u044e \u0447\u0442\u043e \u0438\u0437 \u044d\u0442\u043e\u0433\u043e \u0447\u0442\u043e. \u041e\u043f\u044f\u0442\u044c \u0436\u0435 \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u0445 \u043c\u0435\u043d\u044c\u0448\u0435 \u043f\u0443\u0442\u0430\u043d\u0438\u0446\u044b \u0431\u0443\u0434\u0435\u0442, \u043a\u043e\u0433\u0434\u0430 ifName - \u044d\u0442\u043e field, \u0430 Name - \u044d\u0442\u043e tag. \u041f\u043e\u0437\u0436\u0435 \u0441\u0442\u0430\u043b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c fieldpass , \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043d\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u043b \u0432\u0441\u0435 field, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 tag.</li> <li>\u0412\u043c\u0435\u0441\u0442\u043e \u0438\u043c\u0435\u043d\u0438 oid'\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0441\u0430\u043c oid, \u0430 \u0435\u0433\u043e \u0438\u043c\u044f \u0434\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0432 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0432\u044b\u0448\u0435. \u0421\u0442\u0430\u0440\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f telegraf'\u0430 \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u043b\u0430 \u0432 shell'\u0435 snmptranslate \u0438 \u0447\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u0431\u044b\u043b\u043e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432, \u0442\u0435\u043c \u0432\u044b\u0448\u0435 \u0431\u044b\u043b\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 cpu. \u0420\u0435\u0441\u0442\u0430\u0440\u0442 \u0431\u044b\u043b \u043e\u0447\u0435\u043d\u044c \u043d\u0435\u0443\u0434\u043e\u0431\u0435\u043d \u0438 \u043f\u043e\u0437\u0436\u0435 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u043c\u0435\u043d\u044f\u043b\u0438 \u043d\u0430 \u043e\u0434\u043d\u043e\u043a\u0440\u0430\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0443\u0441\u043a snmptranslate. \u0412\u0441\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u044e\u0442\u0441\u044f \u0432 \u043c\u0438\u0431\u0430\u0445 \u0438 \u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0441\u043e\u0432\u0441\u0435\u043c \u0431\u0435\u0437 \u043c\u0438\u0431\u0430 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f.</li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u043b\u044f cisco ip sla, \u0433\u0434\u0435 \u043d\u0435 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0432\u0441\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 rttMonLatestRttOperTable (\u0437\u0430\u043a\u043e\u043c\u0435\u043d\u043d\u0438\u0440\u043e\u0432\u0430\u043d oid), \u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u0432\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u0437 \u043d\u0435\u0435. \u0422\u044d\u0433 \u0434\u043b\u044f \u0437\u0430\u043c\u0435\u043d\u044b \u0438\u043d\u0434\u0435\u043a\u0441\u0430 \u0431\u0435\u0440\u0435\u0442\u0441\u044f \u0438\u0437 \u0434\u0440\u0443\u0433\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b rttMonCtrlAdmintable. \u041d\u0430 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0438 cisco \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 sla: <pre><code>ip sla 1\n icmp-echo 10.4.3.1 source-ip 10.4.3.2\n tos 96\n threshold 200\n owner IPSName-vlanid@AddrA-AddrB\nip sla schedule 1 life forever start-time now\n</code></pre> \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043f\u043b\u0430\u0433\u0438\u043d\u0430 \u0441 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0435\u0439 \u043f\u043e \u0442\u0435\u0433\u0443, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0435, \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0431\u044b: <pre><code>[[inputs.snmp]]\n interval = \"1m\"\n agents = [ \"cisco\" ]\n version = 2\n community = \"public\"\n\n#CISCO-RTTMON-MIB::rttMonCtrlAdminOwner.5 = STRING: \"IPSName-vlanid@AddrA-AddrB\"\n\n  [[inputs.snmp.table]]\n    name = \"rttsla\"\n    #oid = \"CISCO-RTTMON-MIB::rttMonLatestRttOperTable\"\n\n    [[inputs.snmp.table.field]]\n      name = \"Descr\"\n      #oid = \"CISCO-RTTMON-MIB::rttMonCtrlAdminOwner\"\n      oid = \"1.3.6.1.4.1.9.9.42.1.2.1.1.2\"\n      is_tag = true\n\n    [[inputs.snmp.table.field]]\n      name = \"icmpResults\"\n      #oid = \"CISCO-RTTMON-MIB::rttMonLatestRttOperSense\"\n      oid = \"1.3.6.1.4.1.9.9.42.1.2.10.1.2\"\n\n    [[inputs.snmp.table.field]]\n      name = \"rttAvg\"\n      #oid = \"CISCO-RTTMON-MIB::rttMonLatestRttOperCompletionTime\"\n      oid = \"1.3.6.1.4.1.9.9.42.1.2.10.1.1\"\n\n [inputs.snmp.tagpass]\n   Descr = [ \"*@*\" ]\n</code></pre> \u0411\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u043c \u043e\u043a\u0430\u0437\u0430\u043b\u0441\u044f \u043e\u043f\u0440\u043e\u0441 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u0445 \u043f\u0440\u043e\u0431\u0435\u0440\u043e\u0432 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 huawei s5720ei, \u0433\u0434\u0435 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0440\u0430\u0441\u0442\u0443\u0449\u0438\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0434\u043b\u044f \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043e\u043a. \u0427\u0442\u043e\u0431\u044b \u0435\u0433\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c, \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u043b\u043e\u0441\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c oid. \u0414\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0442\u0430\u043a\u0438\u0435 \u0436\u0435 \u0438\u043c\u0435\u043d\u0430 \u043c\u0435\u0442\u0440\u0438\u043a: <pre><code>[[inputs.snmp]]\n interval = \"1m\"\n agents = [ \"huawei\" ]\n version = 2\n community = \"public\"\n\n# for  huawei s5720-ei\n#NQA-MIB::nqaAdminCtrlTag.\"1\".\"1\" = STRING: IPSName-vlanid@AddrA-AddrB\n#.1.3.6.1.4.1.2011.5.25.111.2.1.1.3.1.49.1.49 = STRING: IPSName-vlanid@AddrA-AddrB\n#index is 1.49.1.49. oid_index_length = 4\n#NQA-MIB::nqaResultsCompletions.\"1\".\"1\".186177.1 = INTEGER: success(1)\n#s5720-ei has a history index\n\n  [[inputs.snmp.table]]\n    name = \"rttsla\"\n    #oid = \"NQA-MIB::nqaAdminCtrlTable\"\n\n    [[inputs.snmp.table.field]]\n      name = \"Descr\"\n      #oid = \"NQA-MIB::nqaAdminCtrlTag\"\n      oid = \"1.3.6.1.4.1.2011.5.25.111.2.1.1.3\"\n      is_tag = true\n\n    [[inputs.snmp.table.field]]\n      name = \"icmpResults\"\n      #NQA-MIB::nqaResultsCompletions\n      oid = \"1.3.6.1.4.1.2011.5.25.111.4.1.1.3\"\n      oid_index_length = 4\n\n\n    [[inputs.snmp.table.field]]\n      name = \"rttAvg\"\n      #NQA-MIB::nqaResultsRttAvg\n      oid = \"1.3.6.1.4.1.2011.5.25.111.4.1.1.26\"\n      oid_index_length = 4\n\n [inputs.snmp.tagpass]\n   Descr = [ \"*@*\" ]\n</code></pre> \u0412\u043e\u0442 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0437\u0430 \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043e\u043f\u0440\u043e\u0441\u0430 \u043e\u0434\u043d\u0430 \u043c\u0438\u043d\u0443\u0442\u0430. \u0414\u0430\u043b\u0435\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 cisco, \u0433\u0434\u0435 \u0435\u0441\u0442\u044c \u0440\u044f\u0434 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439, \u0447\u0442\u043e\u0431\u044b \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e \u0432 \u0431\u0430\u0437\u0443 influxdb \u043d\u0435 \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043b\u0438\u0448\u043d\u0435\u0433\u043e \u0438 \u043d\u0435 \u0431\u044b\u043b\u043e \u0442\u0430\u043a\u043e\u0433\u043e, \u043a\u043e\u0433\u0434\u0430 \u043e\u0434\u043d\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u0438\u0448\u0435\u0442 \u0431\u043e\u043b\u044c\u0448\u0435 \u043f\u043e\u043b\u0435\u0439 \u0432 \u0431\u0430\u0437\u0443, \u0447\u0435\u043c \u0434\u0440\u0443\u0433\u043e\u0435. \u042d\u0442\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u0437\u0430\u043f\u0438\u0448\u0435\u0442 \u0432 \u0431\u0430\u0437\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f mtu, ifalias \u0438 \u043f\u0440\u043e\u0447\u0435\u0435. \u0422\u043e\u043b\u044c\u043a\u043e \u0442\u043e, \u0447\u0442\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e \u0432 fieldpass. \u041c\u0435\u0442\u0440\u0438\u043a\u0438 \u0441 \u0442\u0435\u0433\u0430\u043c\u0438 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b. \u0421\u0435\u0439\u0447\u0430\u0441 \u044f \u0443\u0434\u0430\u043b\u044f\u044e \u043f\u043e \u043b\u0435\u0439\u0431\u043b\u0443 ifType, \u0430 \u043d\u0435 \u043f\u043e \u0438\u043c\u0435\u043d\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430. \u0412\u043e\u043f\u0440\u0435\u043a\u0438 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u043c, \u043d\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u044b ifTable \u0438 ifTableX \u0446\u0435\u043b\u0438\u043a\u043e\u043c \u0438 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0432 influxdb \u0432\u0441\u0435 \u043f\u043e\u0434\u0440\u044f\u0434: \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0448\u0435\u043d\u044b, \u0442\u0430\u0439\u043c\u0441\u0442\u0430\u043c\u043f\u044b \u0438 \u043f\u0440\u043e\u0447\u0443\u044e \u043d\u0435\u043d\u0443\u0436\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0438\u0442\u0441\u044f \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0432\u044b\u043f\u043e\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0445\u043e\u0442\u044f \u0442\u0443\u0442 \u0442\u043e\u0436\u0435 \u043c\u043d\u043e\u0433\u043e \u043b\u0438\u0448\u043d\u0435\u0433\u043e \u0434\u043b\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430. \u0416\u0430\u043b\u044c \u0431\u044b\u043b\u043e \u0440\u0430\u0441\u0441\u0442\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u043e\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0437\u0432\u043e\u043b\u0438\u043b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u043d\u043e \u0442\u0430\u043a\u0443\u044e \u0437\u0430\u043c\u0435\u043d\u0443 \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 cbqos, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u044d\u0442\u043e\u0442 \u043c\u0438\u0431 \u0441\u0430\u043c\u044b\u0439 \u043d\u0435\u0432\u043c\u0435\u043d\u044f\u0435\u043c\u044b\u0439, \u0430 chain lookup \u0432 snmp_exporter'\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0435\u0434\u0430\u0432\u043d\u043e. <pre><code>[[inputs.snmp]]\n interval = \"5m\"\n agents = [ \"cisco_router\" ]\n version = 2\n community = \"public\"\n fieldpass = [ \"cbQos*\", \"bgpPeerState\", \"bgpPeerFsmEstablishedTransitions\", \"Duplex\" , \"Speed\" , \"ifAdminStatus\" , \"ifOperStatus\" , \"ifInDiscards\" , \"ifInErrors\" , \"ifOutDiscards\" , \"ifOutErrors\" , \"ifHCInOctets\" , \"ifHCInUcastPkts\" , \"ifHCInMulticastPkts\" , \"ifHCInBroadcastPkts\" , \"ifHCOutOctets\" , \"ifHCOutUcastPkts\" , \"ifHCOutMulticastPkts\" , \"ifHCOutBroadcastPkts\" ]\n tagexclude = [ \"ifIndex\" ]\n\n [[inputs.snmp.table]]\n  name = \"interface32\"\n  #oid = \"IF-MIB::ifTable\"\n\n   [[inputs.snmp.table.field]]\n    name = \"Name\"\n    #IF-MIB::ifName\n    oid = \"1.3.6.1.2.1.31.1.1.1.1\"\n    is_tag = true\n\n   [[inputs.snmp.table.field]]\n    name = \"Speed\"\n    #IF-MIB::ifHighSpeed\n    oid = \"1.3.6.1.2.1.31.1.1.1.15\"\n\n   [[inputs.snmp.table.field]]\n    name = \"Duplex\"\n    #EtherLike-MIB::dot3StatsDuplexStatus\n    oid = \"1.3.6.1.2.1.10.7.2.1.19\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifAdminStatus\"\n    #IF-MIB::ifAdminStatus\n    oid = \"1.3.6.1.2.1.2.2.1.7\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifOperStatus\"\n    #IF-MIB::ifOperStatus\n    oid = \"1.3.6.1.2.1.2.2.1.8\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifInDiscards\"\n    #IF-MIB::ifInDiscards\n    oid = \"1.3.6.1.2.1.2.2.1.13\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifInErrors\"\n    #IF-MIB::ifInErrors\n    oid = \"1.3.6.1.2.1.2.2.1.14\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifOutDiscards\"\n    #IF-MIB::ifOutDiscards\n    oid = \"1.3.6.1.2.1.2.2.1.19\"\n\n   [[inputs.snmp.table.field]]\n    name = \"ifOutErrors\"\n    #IF-MIB::ifOutErrors\n    oid = \"1.3.6.1.2.1.2.2.1.20\"\n\n [[inputs.snmp.table]]\n  name = \"interface64\"\n  #oid = \"IF-MIB::ifXTable\"\n\n   [[inputs.snmp.table.field]]\n    name = \"Name\"\n    #IF-MIB::ifName\n    oid = \"1.3.6.1.2.1.31.1.1.1.1\"\n    is_tag = true\n\n   [[inputs.snmp.table.field]]\n     name = \"Speed\"\n     #IF-MIB::ifHighSpeed\n     oid = \"1.3.6.1.2.1.31.1.1.1.15\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCInOctets\"\n     #IF-MIB::ifHCInOctets\n     oid = \"1.3.6.1.2.1.31.1.1.1.6\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCInUcastPkts\"\n     #IF-MIB::ifHCInUcastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.7\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCInMulticastPkts\"\n     #IF-MIB::ifHCInMulticastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.8\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCInBroadcastPkts\"\n     #IF-MIB::ifHCInBroadcastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.9\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCOutOctets\"\n     #IF-MIB::ifHCOutOctets\n     oid = \"1.3.6.1.2.1.31.1.1.1.10\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCOutUcastPkts\"\n     #IF-MIB::ifHCOutUcastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.11\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCOutMulticastPkts\"\n     #IF-MIB::ifHCOutMulticastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.12\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ifHCOutBroadcastPkts\"\n     #IF-MIB::ifHCOutBroadcastPkts\n     oid = \"1.3.6.1.2.1.31.1.1.1.13\"\n\n  [[inputs.snmp.table]]\n    name = \"bgpPeer\"\n    #oid = \"1.3.6.1.2.1.15.3\"\n\n    [[inputs.snmp.table.field]]\n      name = \"bgpPeerIdentifier\"\n      #BGP4-MIB::bgpPeerIdentifier\"\n      oid = \"1.3.6.1.2.1.15.3.1.1\"\n      is_tag = true\n\n    [[inputs.snmp.table.field]]\n      name = \"bgpPeerState\"\n      #BGP4-MIB::bgpPeerState\"\n      oid = \"1.3.6.1.2.1.15.3.1.2\"\n\n    [[inputs.snmp.table.field]]\n      name = \"bgpPeerFsmEstablishedTransitions\"\n      #BGP4-MIB::bgpPeerFsmEstablishedTransitions\n      oid = \"1.3.6.1.2.1.15.3.1.15\"\n\n [[inputs.snmp.table]]\n   name =\"cbQos\"\n   oid = \"CISCO-CLASS-BASED-QOS-MIB::cbQosCMStatsTable\"\n\n   [[inputs.snmp.table.field]]\n     name = \"ConfigIndex\"\n     #oid = \"CISCO-CLASS-BASED-QOS-MIB::cbQosConfigIndex\"\n     oid = \"1.3.6.1.4.1.9.9.166.1.5.1.1.2\"\n     is_tag = true\n\n   [[inputs.snmp.table.field]]\n     name = \"ParentObjectsIndex\"\n     #oid = \"CISCO-CLASS-BASED-QOS-MIB::cbQosParentObjectsIndex\"\n     oid = \"1.3.6.1.4.1.9.9.166.1.5.1.1.4\"\n     is_tag = true\n\n [inputs.snmp.tagdrop]\n   Name = [ \"SONET*\", \"Vo*\", \"Nu0\", \"E1*\", \"Lo*\", \"Vl*\", \"CH*\", \"*:*\", \"St*\", \"VL*\" ]\n</code></pre> \u0420\u0430\u0437 \u0432 4 \u0447\u0430\u0441\u0430 \u043d\u0435\u0441\u043f\u0435\u0448\u0430 c getnext, \u0430 \u043d\u0435 getbulk \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0438\u0437 ifalias. \u0421\u0435\u0439\u0447\u0430\u0441 \u043f\u043e\u0434\u043e\u0431\u043d\u043e\u0435 \u043f\u0438\u0448\u0443 \u0432 clickhouse, \u0447\u0442\u043e\u0431\u044b \u0432\u044b\u0432\u0435\u0441\u0442\u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0432 \u0433\u0440\u0430\u0444\u0430\u043d\u0435. <pre><code>[[inputs.snmp]]\n interval = \"4h\"\n agents = [ \"device\" ]\n version = 2\n max_repetitions = 1\n retries = 1\n community = \"public\"\n fieldpass = [ \"Alias\", \"Name\" ]\n\n [[inputs.snmp.table]]\n  name = \"ifalias\"\n\n   [[inputs.snmp.table.field]]\n    name = \"Ifindex\"\n    #IF-MIB::ifIndex\n    oid = \"1.3.6.1.2.1.2.2.1.1\"\n    is_tag = true\n\n   [[inputs.snmp.table.field]]\n    name = \"Name\"\n    #IF-MIB::ifName\n    oid = \"1.3.6.1.2.1.31.1.1.1.1\"\n\n   [[inputs.snmp.table.field]]\n    name = \"Alias\"\n    #IF-MIB::ifAlias\n    oid = \"1.3.6.1.2.1.31.1.1.1.18\"\n</code></pre> \u042d\u0442\u043e\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043c\u043e\u0434\u0435\u043b\u0438, \u0441\u0435\u0440\u0438\u0439\u043d\u0438\u043a\u0430\u0445, \u043a\u043e\u0433\u0434\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 entity-mib. Juniper \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442. \u0422\u0443\u0442 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 index_as_tag, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u0432 \u0441\u0442\u0435\u043a\u0435, \u0442\u043e\u0447\u043a\u0430\u0445 \u0434\u043e\u0441\u0442\u0443\u043f\u0430, \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0435. \u0422.\u043a. \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u0432\u0435\u043d\u0434\u043e\u0440\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432\u0441\u0435 \u0447\u0442\u043e \u0443\u0433\u043e\u0434\u043d\u043e (dlink,d-link \u0438 \u0442\u043f), \u0442\u043e \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u0435\u043d\u0434\u043e\u0440\u0430 \u0440\u0435\u0448\u0438\u043b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u0433 MfgName. \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441 ModelName \u0432 inputs.snmp.tagpass \u0434\u043b\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u0438\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u043f\u043e\u0440\u0442\u0430\u0445. <pre><code>[[inputs.snmp]]\n interval = \"24h\"\n agents = [ \"dlink\" ]\n version = 2\n timeout = \"2m\"\n community = \"public\"\n fieldpass = [ \"entPhysicalDescr\" , \"entPhysicalName\" , \"entPhysicalFirmwareRev\" , \"entPhysicalHardwareRev\" , \"entPhysicalSerialNum\" , \"entPhysicalSoftwareRev\" ]\n\n [[inputs.snmp.field]]\n  name = \"location\"\n  #SNMPv2-MIB::sysLocation.0\n  oid = \"1.3.6.1.2.1.1.6.0\"\n  is_tag = true\n\n [[inputs.snmp.field]]\n  name = \"contact\"\n  #SNMPv2-MIB::sysContact.0\n  oid = \"1.3.6.1.2.1.1.4.0\"\n  is_tag = true\n\n [[inputs.snmp.table]]\n  name = \"inventory_entity\"\n  inherit_tags = [ \"location\", \"contact\" ]\n  #oid = \"ENTITY-MIB::entPhysicalTable\"\n  index_as_tag = true # stack, access points\n   [[inputs.snmp.table.field]]\n    name = \"ModelName\"\n    #ENTITY-MIB::entPhysicalModelName\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.13\"\n    is_tag = true\n\n   [[inputs.snmp.table.field]]\n    name = \"Class\"\n    #ENTITY-MIB::entPhysicalClass\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.5\"\n    is_tag = true\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalName\"\n    #ENTITY-MIB::entPhysicalName\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.7\"\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalDescr\"\n    #ENTITY-MIB::entPhysicalDescr\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.2\"\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalHardwareRev\"\n    #ENTITY-MIB::entPhysicalHardwareRev\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.8\"\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalFirmwareRev\"\n    #ENTITY-MIB::entPhysicalFirmwareRev\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.9\"\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalSoftwareRev\"\n    #ENTITY-MIB::entPhysicalSoftwareRev\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.10\"\n\n   [[inputs.snmp.table.field]]\n    name = \"entPhysicalSerialNum\"\n    #ENTITY-MIB::entPhysicalSerialNum\n    oid = \"1.3.6.1.2.1.47.1.1.1.1.11\"\n\n [inputs.snmp.tags]\n  MfgName = \"dlink\"\n  obj = \"object_id\"\n\n [inputs.snmp.tagpass]\n  ModelName = [ \"*\" ]\n</code></pre> \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0432 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0445 \u0441\u0442\u0440\u043e\u043a\u0430\u0445 \u0431\u044b\u0432\u0430\u0435\u0442 \u043a\u0440\u0438\u0432\u0430\u044f, \u0441 \u043f\u0440\u043e\u0431\u0435\u043b\u0430\u043c\u0438 \u0432 \u043a\u043e\u043d\u0446\u0435, \u0441\u0438\u043c\u0432\u043e\u043b\u0430\u043c\u0438, \u0447\u0435\u043c \u0433\u0440\u0435\u0448\u0430\u0442 sfp \u0438 wic \u043c\u043e\u0434\u0443\u043b\u0438 cisco. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432 telegraf.d \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b proc_trim.conf. \u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u044b \u0432 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u0444\u0435 \u043d\u0438\u043a\u0430\u043a \u043d\u0435\u043b\u044c\u0437\u044f \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c. <pre><code>[[processors.strings]]\n namepass = [\"inventory_entity\"]\n [[processors.strings.trim]]\n  tag = \"ModelName\"\n [[processors.strings.trim]]\n  field = \"entPhysicalDescr\"\n [[processors.strings.trim]]\n  field = \"entPhysicalName\"\n [[processors.strings.trim]]\n  field = \"entPhysicalFirmwareRev\"\n [[processors.strings.trim]]\n  field = \"entPhysicalHardwareRev\"\n [[processors.strings.trim]]\n  field = \"entPhysicalSerialNum\"\n [[processors.strings.trim]]\n  field = \"entPhysicalSoftwareRev\"\n [[processors.strings.lowercase]]\n  tag = \"contact\"\n [[processors.strings.lowercase]]\n  tag = \"location\"\n</code></pre> \u0412\u0440\u043e\u0434\u0435 \u0431\u044b \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443, \u043d\u043e \u043d\u0435\u0442. \u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0448\u044c \u0442\u0435\u0441\u0442 \u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0448\u044c: <pre><code>inventory_entity,Class=9,MfgName=cisco,ModelName=WIC-2T\\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n</code></pre> \u0427\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f, \u0442\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 LimitNOFILE \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0432 /lib/systemd/system/telegraf.service. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0442\u044c metric_buffer_limit \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0430\u0433\u0435\u043d\u0442\u0430 \u0432 /etc/telegraf/telegraf.conf, \u043a\u043e\u0433\u0434\u0430 \u0432 \u043b\u043e\u0433\u0430\u0445 \u043f\u043e\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0434\u0440\u043e\u043f\u0430\u0445. \u0420\u0430\u0437\u043c\u0435\u0440 \u044d\u0442\u043e\u0433\u043e \u043a\u044d\u0448\u0430 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0432\u0440\u0435\u043c\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0431\u0430\u0437\u044b. \u0411\u0435\u0434\u0430, \u043a\u043e\u0433\u0434\u0430 \u043d\u0443\u0436\u0435\u043d \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u043d\u0435 \u043c\u0435\u0442\u0440\u0438\u043a, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432 \u043a\u0430\u0436\u0434\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u0439, \u043a\u043e\u0433\u0434\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0440\u044f\u0434 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f. \u0422\u0443\u0442 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u0432\u0438\u0434\u0435\u043e\u043a\u043e\u0434\u0435\u043a\u043e\u0432 polycom, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e snmp \u043e\u0442\u0434\u0430\u044e\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u0435\u0430\u043d\u0441\u0430 \u0432\u0438\u0434\u0435\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0441\u0432\u044f\u0437\u0438. \u0421\u0442\u0440\u0430\u043d\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0432\u0441\u0435 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u044b\u0435 oid'\u044b \u043d\u0438\u0436\u0435 - \u044d\u0442\u043e \u0441\u0442\u0440\u043e\u043a\u0438. \u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u0437\u0430\u043f\u0443\u0441\u043a \u0431\u0435\u0437 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 \u0447\u0438\u0441\u043b\u043e \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u0442\u043e\u043c\u0443, \u0447\u0442\u043e field \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442, \u0435\u0441\u043b\u0438 \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u0443\u0441\u0442\u0430\u044f. \u041d\u043e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u0435\u043b\u0430\u0435\u0442 \u0438\u0437 \u043f\u0443\u0441\u0442\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 0i \u0438 \u0432\u0441\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0438\u0448\u0443\u0442\u0441\u044f \u0432 \u0431\u0430\u0437\u0443, \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0440\u044f\u0434 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043d\u0435 \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f. \u0421 \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c \u0434\u043b\u044f snmp_exporter'\u0430 \u0442\u0430\u043a \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f. <pre><code>[[inputs.snmp]]\n  interval = \"1m\"\n  agents = [ \"polycom\" ]\n  version = 2\n  community = \"public\"\n\n  name = \"polycom\"\n  [[inputs.snmp.field]]\n   name = \"PercentPacketLoss\"\n   oid = \"1.3.6.1.4.1.2684.1.1.21.0\"\n   conversion = \"int\"\n\n  [[inputs.snmp.field]]\n   name = \"Jitter\"\n   oid = \"1.3.6.1.4.1.2684.1.1.22.0\"\n   conversion = \"int\"\n\n  [[inputs.snmp.field]]\n   name = \"Latency\"\n   oid = \"1.3.6.1.4.1.2684.1.1.23.0\"\n   conversion = \"int\"\n</code></pre></p>"},{"location":"monitoring/telegraf_vmagent/","title":"Telegraf vs vmagent","text":"<p>\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u0434\u0432\u0443\u0445 \u0440\u0435\u0448\u0435\u043d\u0438\u0439 \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u043f\u043e snmp \u0432 \u043f\u043e\u043b\u044c\u0437\u0443 vmagent, \u043d\u043e \u043e\u0442 telegraf \u0441\u043e\u0432\u0441\u0435\u043c \u043e\u0442\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0435 \u043d\u0443\u0436\u043d\u043e, \u0442.\u043a. \u043e\u043d \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043a\u0430\u043a \u0441 victoria-metrics, \u0442\u0430\u043a \u0438 \u0441 clickhouse. Vmagent \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 snmp_exporter'\u043e\u043c.</p> telegraf, snmp plugin vmagent, snmp_exporter \u041d\u0435\u0442 service discovery. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u0441\u043b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043f\u0438\u0441\u043a\u0430 \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u0434\u0435\u043b\u0430\u0442\u044c reload telegraf'\u0443. \u0415\u0441\u0442\u044c service discovery \u0438 file_sd \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043c\u043e\u0434\u0443\u043b\u044f \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0444\u0430\u0439\u043b \u0441\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0445\u043e\u0441\u0442\u043e\u0432 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438. \u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0435\u043b\u044c\u0437\u044f. \u041c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043b\u043e\u0433\u0438 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0430\u0445. \u0415\u0441\u0442\u044c \u0440\u0443\u0447\u043a\u0430 <code>curl http://vmagent-host:8429/targets</code> , \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0438 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 dashboard \u0434\u043b\u044f \u043d\u0438\u0445 \u0441 \u043a\u043e\u043b-\u0432\u043e\u043c targets up/down. metric_buffer_limit \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 telegraf \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0440\u0430\u0437\u043c\u0435\u0440 \u043a\u044d\u0448\u0430 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043c\u0435\u0442\u0440\u0438\u043a \u043f\u0440\u0438 \u043e\u043f\u0440\u043e\u0441\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432. \u041f\u0440\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0431\u0430\u0437\u044b \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432 \u043a\u044d\u0448\u0435 \u0438 \u043f\u0440\u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u0432\u044f\u0437\u0438 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f. \u041f\u0440\u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0435 telegraf'\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0438\u0437-\u0437\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0430\u0434\u0440\u0435\u0441\u0430 \u0431\u0430\u0437\u044b, \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b. remoteWrite.tmpDataPath \u0443 vmagent \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0431\u0430\u0437\u044b. \u041d\u0430 \u0445\u043e\u0441\u0442\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0442\u044c \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f snmp, \u043c\u0438\u0431\u044b, telegraf. \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043e\u0434\u043d\u0430 \u0438\u043b\u0438 \u0434\u0432\u0435 \u0431\u0430\u0437\u044b, \u043a\u0443\u0434\u0430 \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043c\u0435\u0442\u0440\u0438\u043a\u0438. \u0422\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u0438 \u043c\u0435\u0442\u0440\u0438\u043a influxdb, \u0430 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 - victoria-metrics, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 influx-\u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u041d\u0430 \u0445\u043e\u0441\u0442\u0435 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f snmp_exporter, vmagent. \u041c\u0438\u0431\u044b \u043d\u0443\u0436\u043d\u044b \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 \u0441 \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 snmp.yml. \u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u043f\u0440\u043e\u0441\u0430 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435, \u043b\u0438\u0431\u043e \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e. \u0418\u043c\u0435\u0435\u0442 \u0441\u043c\u044b\u0441\u043b \u0434\u0435\u043b\u0430\u0442\u044c \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0444\u0430\u0439\u043b\u043e\u0432, \u0442.\u043a. \u0435\u0441\u043b\u0438 \u043f\u043b\u0430\u0433\u0438\u043d \u043d\u0435 \u0443\u0441\u043f\u0435\u0435\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b, \u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043e \u0432\u0441\u0435\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b. \u041a\u043e\u0433\u0434\u0430 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u043a\u0430\u044f-\u0442\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430, \u0442\u043e \u043f\u043e\u0442\u0435\u0440\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u0434\u0435\u043b\u0430\u0435\u0442 \u0431\u0435\u0441\u0441\u043c\u044b\u0441\u043b\u0435\u043d\u043d\u044b\u043c \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c, \u0447\u0442\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043e\u0442\u0432\u0435\u0447\u0430\u044e\u0442 \u043f\u043e snmp \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e \u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u043a\u043e\u043c\u043f\u0440\u043e\u043c\u0438\u0441 \u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043e\u043f\u0440\u043e\u0441\u0430. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043e\u0434\u0438\u043d \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043c\u0435\u0442\u0440\u0438\u043a. 1 \u043c\u0438\u043d\u0443\u0442\u0430 - \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u043f\u0440\u043e\u0441\u0430 \u0432\u0441\u0435\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043f\u043e snmp. \u0415\u0441\u043b\u0438  \u0435\u0441\u0442\u044c \u0447\u0442\u043e \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u0437\u0430 \u0441\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u044b\u043c \u043a\u0430\u043d\u0430\u043b\u043e\u043c \u0441\u0432\u044f\u0437\u0438, \u0442\u043e \u0438\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u043d\u0430\u0434\u043e \u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430. \u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u0435\u0442 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 vmagent \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u0440\u043e\u0441 \u043a snmp_exporter'\u0443 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u0430\u0434\u0440\u0435\u0441\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0438 \u043c\u043e\u0434\u0443\u043b\u044f. \u041d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043d\u0435 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043e\u043f\u0440\u043e\u0441\u0430 \u043e\u0442 \u0434\u0440\u0443\u0433\u0438\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u0435\u043d\u0434\u043e\u0440\u0430 \u0438\u043b\u0438 \u043c\u043e\u0434\u0435\u043b\u0438 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0434\u043b\u044f snmp \u043f\u043b\u0430\u0433\u0438\u043d\u0430 \u0432 /etc/telegraf/telegraf.d/. \u0423 snmp_exporter \u043e\u0434\u0438\u043d \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u0435\u043d\u0434\u043e\u0440\u0430 \u0438\u043b\u0438 \u043c\u043e\u0434\u0435\u043b\u0438 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043c\u043e\u0434\u0443\u043b\u044c. \u0412 vmagent'\u0435 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043c\u043e\u0434\u0443\u043b\u044f \u0441\u0432\u043e\u0439 job. \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u0433\u043e\u0432 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0438\u043d\u0434\u0435\u043a\u0441\u0430\u0446\u0438\u0438 \u0438 \u043f\u043e\u0438\u0441\u043a\u0430. \u041c\u0435\u0442\u0440\u0438\u043a\u0430 \u0441 \u0434\u0440\u0443\u0433\u0438\u043c \u043d\u0430\u0431\u043e\u0440\u043e\u043c \u043b\u0435\u0439\u0431\u043b\u043e\u0432 - \u044d\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0440\u044f\u0434. \u0412 grafana \u0435\u0441\u0442\u044c \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0434\u043b\u044f influxdb, \u0433\u0434\u0435 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0442\u0435\u0433\u0438. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u043d\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u0438 promql \u0434\u043b\u044f \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0432 \u0431\u0430\u0437\u0443, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0435 \u0434\u043b\u044f \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043b\u0435\u0439\u0431\u043b\u044b. \u0424\u0443\u043d\u043a\u0446\u0438\u0438 derivative() \u0438\u043b\u0438 non_negative_derivative() \u0438\u0441\u043f\u043e\u043b\u044c\u0443\u044e\u0442\u0441\u044f \u0432 grafana \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u0432 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432. \u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u0445 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u043e\u043c \u043e\u043f\u0440\u043e\u0441\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432. \u0424\u0443\u043d\u043a\u0446\u0438\u0438 rate() \u0438 increase() \u0434\u043b\u044f \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 (counters) 32 \u0438 64 \u0431\u0438\u0442\u043d\u044b\u0445. \u0412 \u0431\u0430\u0437\u0435 prometheus \u0434\u043b\u044f rate() \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e 2.3 \u0442\u043e\u0447\u043a\u0438 \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0435. \u0422.\u0435. \u043f\u0440\u0438 \u043e\u043f\u0440\u043e\u0441\u0435 \u0440\u0430\u0437 \u0432 \u043c\u0438\u043d\u0443\u0442\u0443 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0434\u0430\u0442\u044c rate(metric[5m]), \u043d\u043e \u043d\u0435 rate(metric[1m]). \u0412 victoria-metrics \u0442\u0430\u043a\u043e\u0433\u043e \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u043d\u0435\u0442. \u0417\u0430\u043f\u0438\u0448\u0435\u0442 \u0432\u0441\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (value) \u0442\u0435\u043a\u0441\u0442, \u0447\u0438\u0441\u043b\u0430, \u043d\u0435\u043e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043c\u0443\u0441\u043e\u0440 \u0432 \u0431\u0430\u0437\u0443 influxdb \u043a\u0430\u043a \u043e\u0434\u043d\u0443 \u043c\u0435\u0442\u0440\u0438\u043a\u0443 (measurement) \u0441 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0438 \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 (tag). \u0415\u0441\u0442\u044c \u043c\u0438\u0431\u044b, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u043e\u0442 polycom, \u0433\u0434\u0435 \u0447\u0438\u0441\u043b\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u044b \u043a\u0430\u043a \u0441\u0442\u0440\u043e\u043a\u0438. \u0422\u0430\u043a\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 conversion = \"int\". \u0412 victoria-metrics \u0438 prometheus \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0438\u0441\u043b\u043e\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0430 \u0442\u0435\u043a\u0441\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0438\u043d\u0434\u0435\u043a\u0441\u044b/\u043b\u0435\u0439\u0431\u043b\u044b. \u041e\u0434\u043d\u043e\u0439 \u043c\u0435\u0442\u0440\u0438\u043a\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043e\u0434\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441 \u043d\u0430\u0431\u043e\u0440\u043e\u043c \u043b\u0435\u0439\u0431\u043b\u043e\u0432. snmp_exporter \u0443\u043c\u0435\u0435\u0442 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u044b\u0432\u0430\u0442\u044c string \u0447\u0435\u0440\u0435\u0437 overrides. \u041b\u0438\u0448\u043d\u0438\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u0432 oid \u043c\u043e\u0436\u043d\u043e \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 oid_index_length \u0432 inputs.snmp.table.field. \u041c\u043e\u0436\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e \u0447\u0435\u0440\u0435\u0437 fieldpass, tagexclude, inputs.snmp.tagdrop \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043f\u043b\u0430\u0433\u0438\u043d\u0430. \u0412 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 vmagent'\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c labeldrop \u0432 metric_relabel_configs. \u0415\u0441\u0442\u044c drop_source_indexes \u0432 lookup \u0438 ignore overrides \u0432 snmp_exporter. \u0412 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c oid \u0431\u0435\u0437 \u043c\u0438\u0431\u043e\u0432 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435  inputs.snmp.field. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0431\u0435\u0437 \u043c\u0438\u0431\u0430 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0432\u0441\u0435 \u0438\u043d\u0434\u0435\u043a\u0441\u044b - \u044d\u0442\u043e \u043b\u0435\u0439\u0431\u043b\u044b. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u043c\u0438\u0431\u044b, \u0442.\u043a \u043f\u043b\u0430\u0433\u0438\u043d \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 snmptranslate \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435 \u0438 \u0434\u0435\u043b\u0430\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 oid \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446 inputs.snmp.table \u0447\u0442\u043e \u044d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0430. \u041c\u0438\u0431\u044b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0438 \u043d\u0435 \u043d\u0443\u0436\u043d\u044b \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 \u0433\u0434\u0435 \u0437\u0430\u043f\u0443\u0449\u0435\u043d exporter."},{"location":"network/cisco_r/","title":"Router cisco","text":""},{"location":"network/cisco_r/#_1","title":"\u0441\u043e\u0432\u0435\u0442","text":"<p>\u0412\u043e\u0442 \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 Guide to Harden Cisco IOS Devices. \u0422\u0430\u043c \u0438 vstack \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0434\u043b\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432.</p>"},{"location":"network/cisco_r/#aux","title":"aux","text":"<p>\u041d\u0430\u0432\u0435\u0440\u043d\u043e\u0435, \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0435 cisco \u0442\u0430\u043a\u043e\u0439 \u043f\u043e\u0440\u0442 \u0435\u0441\u0442\u044c \u0438 \u043e\u043d \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u043d\u0441\u043e\u043b\u044c \u0434\u0440\u0443\u0433\u043e\u0435 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043d\u0443\u0436\u0435\u043d \u043f\u0430\u0447\u043a\u043e\u0434\u0440 \u043e\u0431\u0436\u0430\u0442\u044b\u0439 \u0441 \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u0432 \u043e\u0431\u0440\u0430\u0442\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435. \u041d\u0443, \u0432 \u043e\u0431\u0449\u0435\u043c, rj45 \u043a\u043e\u043d\u043d\u0435\u043a\u0442\u043e\u0440 \u043f\u0435\u0440\u0435\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0438 \u043e\u0431\u0436\u0430\u0442\u044c. \u0421\u043a\u043e\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u043f\u0440\u043e\u0449\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c, \u043d\u043e \u0432\u043e\u0442 \u0441\u0442\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043c\u0430\u043d\u0434 \u0432 \u043b\u0438\u043d\u0438\u0438 \u0441\u0435\u0439\u0447\u0430\u0441: <pre><code>line aux 0\n session-timeout 5 \n exec-timeout 5 0\n absolute-timeout 60\n modem InOut\n no exec\n transport preferred telnet\n transport input all\n</code></pre> \u0423\u0437\u043d\u0430\u0442\u044c \u043f\u043e\u0440\u0442 \u043b\u0438\u043d\u0438\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 <code>sh line</code>. \u041d\u0430\u043f\u0440\u043e\u0442\u0438\u0432 AUX \u0431\u0443\u0434\u0435\u0442 \u043d\u043e\u043c\u0435\u0440 \u0438 \u0447\u0430\u0449\u0435 \u044d\u0442\u043e 1. \u0420\u0435\u0436\u0435 65. \u0422.\u043e. \u043d\u0430\u0434\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c telnet \u043d\u0430 \u043f\u043e\u0440\u0442 2001 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430. \u0421\u0431\u0440\u043e\u0441 \u043b\u0438\u043d\u0438\u0438 <code>clear line aux 0</code></p>"},{"location":"network/cisco_r/#aaa-tacacs","title":"aaa \u0434\u043b\u044f tacacs","text":"<p>\u0414\u043b\u044f \u0432\u0435\u0440\u0441\u0438\u0438 IOS 15.7 <pre><code>aaa new-model\n!\n!\naaa authentication login default group tacacs+ local\naaa authentication enable default group tacacs+ enable none\naaa authorization console\naaa authorization exec default group tacacs+ local \naaa accounting commands 15 default\n action-type start-stop\n group tacacs+\n!\naaa accounting network default\n action-type start-stop\n group tacacs+\n!\naaa accounting connection default\n action-type start-stop\n group tacacs+\n!\naaa accounting system default\n action-type start-stop\n group tacacs+\n</code></pre> \u0421\u0430\u043c tacacs \u0442\u043e\u0436\u0435 \u043d\u0430\u0434\u043e \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c. \u0415\u0441\u0442\u044c \u043b\u0435\u0433\u0430\u0441\u0438 <code>tacacs-server host ...</code>, \u0435\u0441\u0442\u044c \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0441 \u0433\u0440\u0443\u043f\u043f\u0430\u043c\u0438.</p> <p>\u0414\u043b\u044f IOS XE \u0432\u0441\u0435 \u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u0438\u0432\u044b\u0447\u043d\u043e \u043a\u0430\u043a \u0431\u044b\u043b\u043e \u0432 12 \u0432\u0435\u0442\u043a\u0435 ios. <pre><code>aaa new-model\n!\n!\naaa authentication login default group tacacs+ local\naaa authentication enable default group tacacs+ enable none\naaa authorization console\naaa authorization exec default group tacacs+ local \naaa accounting commands 15 default start-stop group tacacs+\naaa accounting network default start-stop group tacacs+\naaa accounting connection default start-stop group tacacs+\naaa accounting system default start-stop group tacacs+\n</code></pre></p>"},{"location":"network/cisco_r/#logging","title":"logging","text":"<p>\u041f\u0440\u043e aux \u043f\u0438\u0441\u0430\u043b \u0432\u044b\u0448\u0435. \u0415\u0441\u043b\u0438 \u043e\u0441\u0442\u0430\u043b\u0441\u044f \u043a\u0430\u0431\u0435\u043b\u044c, \u0442\u043e \u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435 \u043d\u0430\u0434\u043e \u0432\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u044c. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0432 \u043b\u043e\u0433\u0430\u0445 \u0442\u0430\u043a\u0430\u043a\u0441\u0430 \u0431\u0443\u0434\u0435\u0442 \u043c\u043d\u043e\u0433\u043e \u0447\u0435\u0433\u043e \u043f\u043e\u0447\u0438\u0442\u0430\u0442\u044c. <pre><code>no logging console\n</code></pre> \u0412 \u043a\u043e\u043d\u0441\u043e\u043b\u0438 \u0438 vty \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c <pre><code>line con 0\n logging synchronous\nline vty 0 4\n logging synchronous\n</code></pre> \u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0442\u0440\u0430\u043d\u0441\u0438\u0432\u0435\u0440 \u043b\u0435\u0432\u044b\u0439 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0443, \u0447\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e\u0442 \u0448\u0430\u0441\u0441\u0438 \u0432 \u043b\u043e\u0433\u0430\u0445 <pre><code>%SFF8472-5-THRESHOLD_VIOLATION: Te1/2: Temperature low alarm; Operating value: -127.2 C, Threshold value:   -4.0 C.\n%SFF8472-5-THRESHOLD_VIOLATION: Te1/2: Temperature high alarm; Operating value:  118.0 C, Threshold value:   74.0 C.\n</code></pre> <pre><code>logging discriminator FIX mnemonics drops THRESHOLD_VIOLATION \nlogging buffered discriminator FIX\nlogging host 10.9.8.1 discriminator FIX\n</code></pre> \u041f\u043e <code>sh logging</code> \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0434\u0438\u0441\u043a\u0440\u0438\u043c\u0438\u043d\u0430\u0442\u043e\u0440\u044b \u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0434\u0440\u043e\u043f\u043e\u0432 <code>message lines dropped-by-MD</code>.</p> <p>\u0412\u0440\u0435\u043c\u044f \u0432 \u043b\u043e\u0433\u0430\u0445: <pre><code>service timestamps debug datetime msec localtime\nservice timestamps log datetime msec localtime\n</code></pre></p>"},{"location":"network/cisco_r/#cisco-4321-throughput","title":"cisco 4321 throughput","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u043f\u0440\u043e\u0431\u043d\u043e\u0433\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f throughput \u043b\u0438\u0446\u0435\u043d\u0437\u0438\u0438 \u0432 4321 (16.9.4), \u043e\u043d\u0430 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f Life time \u0438 RightToUse. <pre><code>license accept end user agreement\nplatform hardware throughput level 100000\n</code></pre> \u042d\u0442\u043e \u043d\u0430 \u043f\u0440\u0438\u0435\u043c \u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0443. \u041a\u0430\u043a \u043c\u0430\u043b\u043e. <pre><code>c4321#sh ver | in throughput\nThe current throughput level is 100000 kbps\nc4321#sh lic | beg throughput\nIndex 9 Feature: throughput\n        Period left: Life time\n        License Type: RightToUse\n        License State: Active, In Use\n        License Count: Non-Counted\n</code></pre></p>"},{"location":"network/cisco_r/#output-service-policy","title":"output service-policy","text":"<p>\u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0440\u0430\u0444\u0438\u043a \u043d\u0430 \u0441\u0430\u0431\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043f\u043e\u043b\u043e\u0441\u044b <pre><code>policy-map myservice\n class Voip\n  priority 128\n class class-default\n  fair-queue\n</code></pre> \u041f\u043e\u043f\u044b\u0442\u043a\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c. <pre><code>router(config-subif)#service-policy output myservice\nCBWFQ : Not supported on subinterfaces\n</code></pre> \u041d\u0430\u0434\u043e \u043f\u0435\u0440\u0435\u0434\u0435\u043b\u0430\u0442\u044c \u0438 \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0443 \u0432 \u0448\u0435\u0439\u043f\u0435\u0440 \u0434\u0435\u0444\u043e\u043b\u0442\u043e\u0432\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u0430. \u0418 \u0443\u0436\u0435 \u044d\u0442\u0443 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0443 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c. <pre><code>policy-map 512k\n class class-default\n  shape average 512000\n  service-policy myservice\n\nrouter(config-subif)#service-policy output 512k\n</code></pre></p>"},{"location":"network/cisco_r/#eem","title":"eem","text":"<p>\u041f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u043f\u043e\u0442\u043e\u043a\u043e\u043c \u04151 \u043d\u0430 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u043c \u0448\u043b\u044e\u0437\u0435 Cisco. C\u043a\u0440\u0438\u043f\u0442, \u0432\u044b\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u0439 \u043d\u043e\u0447\u044c\u044e D-\u043a\u0430\u043d\u0430\u043b. <pre><code>event manager session cli username \"operator\"\nevent manager applet restartd\n event timer cron cron-entry \"26 4 * * *\" maxrun 120\n action 1.0 syslog msg \"restart d-channel\"\n action 2.0 cli command \"enable\"\n action 3.0 cli command \"conf t\"\n action 4.0 cli command \"voice-port 0/0/0:15\"\n action 5.0 cli command \"shutdown\"\n action 6.0 wait 30\n action 7.0 cli command \"no shutdown\"\n action 8.0 cli command \"end\"\n</code></pre></p>"},{"location":"network/cisco_r/#kron","title":"kron","text":"<p>\u041f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044e <pre><code>kron occurrence reboot at 4:00 13 recurring\n policy-list reboot\n!\nkron policy-list reboot\n cli reload\n</code></pre></p>"},{"location":"network/cisco_r/#tcp-mss","title":"tcp-mss","text":"<p>\u041e\u043f\u0438\u0441\u0430\u043d\u043e \u0432 /network/tcp_mss/ <pre><code>ip tcp adjust-mss &lt;\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&gt;\n</code></pre></p>"},{"location":"network/cisco_r/#frame-relay-rtp-compression","title":"frame-relay, rtp compression","text":"<p>\u0412 \u0446\u0435\u043b\u043e\u043c, \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439:</p> <ul> <li>Frame-relay \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u0430\u043d\u0430\u043b\u044b \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 \u043e\u0434\u043d\u043e\u0433\u043e \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430. \u0418\u043d\u043a\u0430\u043f\u0441\u0443\u043b\u044f\u0446\u0438\u0438 HDLC, PPP \u0442\u0430\u043a\u043e\u0433\u043e \u043d\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442;</li> <li>\u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0434\u0435\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u043e\u0441\u0443, \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c QoS;</li> <li>\u041e\u0434\u0438\u043d \u0438\u0437 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432 bridge-\u0433\u0440\u0443\u043f\u043f\u0443 \u0441 ethernet'\u043e\u043c, \u043a \u043f\u0440\u0438\u043c\u0435\u0440\u0443;</li> <li>\u041c\u043e\u0436\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c frame-relay switching \u0438 \u0442\u0430\u043a \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u0435\u0436\u0434\u0443 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u043a\u0430\u043d\u0430\u043b\u0430\u043c\u0438;</li> <li>\u0423 VoFR \u0441\u0430\u043c\u043e\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u043e\u0441\u044b \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 \u0433\u043e\u043b\u043e\u0441\u0430;</li> <li>MFR \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043b\u0443\u0447\u0448\u0435 Multilink PPP. \u041c\u0435\u043d\u044c\u0448\u0435 rtt, \u0441\u0443\u0431\u044a\u0435\u043a\u0442\u0438\u0432\u043d\u043e \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u0435\u0435.</li> </ul> <p>\u0420\u0430\u043d\u044c\u0448\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u043b\u0430\u0441\u044c \u043f\u043e \u043e\u0447\u0435\u043d\u044c \u0434\u043e\u0440\u043e\u0433\u0438\u043c \u0441\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u044b\u043c \u043a\u0430\u043d\u0430\u043b\u0430\u043c \u0438\u043b\u0438 \u0434\u043e\u0440\u043e\u0433\u0438\u043c \u0446\u0438\u0444\u0440\u043e\u0432\u044b\u043c \u043c\u0435\u0436\u0434\u0443\u0433\u043e\u0440\u043e\u0434\u043d\u0438\u043c/\u043c\u0435\u0436\u0434\u0443\u043d\u0430\u0440\u043e\u0434\u043d\u044b\u043c \u043a\u0430\u043d\u0430\u043b\u0430\u043c \u0441\u0432\u044f\u0437\u0438. \u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \"\u0433\u043e\u043b\u043e\u0441\u0430\" \u0438 \u0440\u0430\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u043e\u0441\u044b \u0437\u0430 \u0441\u0447\u0435\u0442 \u043c\u0443\u043b\u044c\u0442\u0438\u043f\u043b\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u0430\u043d\u0430\u043b\u043e\u0432 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u043b\u0438 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430\u043c \u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043c\u0443\u043b\u044c\u0442\u0438\u0441\u0435\u0440\u0432\u0438\u0441\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 \u0441\u0432\u044f\u0437\u0438. \u041a\u043e\u043c\u043f\u0440\u0435\u0441\u0441\u0438\u044f \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 WAN \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445 \u0441 PPP,HDLC,FR-\u0438\u043d\u043a\u0430\u043f\u0441\u0443\u043b\u044f\u0446\u0438\u0435\u0439. \u041f\u0440\u0438\u043c\u0435\u0440: <pre><code>interface Serial0/2/0:0.100 point-to-point\nip unnumbered Loopback0\nframe-relay interface-dlci 100\nframe-relay ip rtp header-compression\n\ninterface Serial0/1/0\nip unnumbered Loopback0\nip rtp header-compression\nencapsulation ppp\n</code></pre> \u0418\u0437 \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430: <pre><code>Codec Bit Rate 8 kbps = (Codec Sample Size * 8) / (Codec Sample Interval)\nCodec Sample Size 10 bytes size of each individual codec sample\nCodec Sample Interval 10 msec the time it takes for a single sample\n\nCodec: g729_All_Variants\nVoice Payload Size: 20 bytes\nVoice Protocol: VoIP\nCompression: Not Applicable\nMedia Access: Ethernet\nTunnel/Security/Misc: None\nNumber of Calls: 1\n\nTotal Bandwidth (including Overhead) 32.76 kbps\n\nCodec: g729_All_Variants\nVoice Payload Size: 20 bytes\nVoice Protocol: VoIP\nCompression: off\nMedia Access: Frame-Relay\nTunnel/Security/Misc: None\nNumber of Calls: 1\n\nTotal Bandwidth (including Overhead) 28.14 kbps\n\nCodec: g729_All_Variants\nVoice Payload Size: 20 bytes\nVoice Protocol: VoIP\nCompression: on\nMedia Access: Frame-Relay\nTunnel/Security/Misc: None\nNumber of Calls: 1\n\nTotal Bandwidth (including Overhead) 12.18 kbps\n\n\nCodec: g729_All_Variants\nVoice Payload Size: 30 bytes\nVoice Protocol: VoFR\nMedia Access: Not Applicable\nTunnel/Security/Misc: Not Applicable\nNumber of Calls: 1\n\nCisco IOS Total Bandwidth Needed for 1.0 Calls 10 kbps\n</code></pre></p>"},{"location":"network/cisco_r/#acl","title":"acl","text":"<p>\u0411\u044b\u043b\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0430\u043c\u044f\u0442\u043a\u0438 \u043e\u0442\u043a\u0443\u0434\u0430-\u0442\u043e. \u041a\u0430\u043a \u0440\u0430\u0437 \u0434\u043b\u044f \u0441\u043b\u0443\u0447\u0430\u0435\u0432, \u043a\u043e\u0433\u0434\u0430 \"permit ip any any\" \u043f\u043e\u0447\u0435\u043c\u0443-\u0442\u043e \"\u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\".</p> <p>Here\u2019s a handy list of ACL entries to allow your devices to speak routing protocols, availability protocols, and some other stuff. We\u2019ll assume you have ACL 101 applied to your Ethernet inbound; your Ethernet has an IP of 192.168.0.1.</p> <p>BGP : Runs on TCP/179 between the neighbors <pre><code>access-list 101 permit tcp any host 192.168.0.1 eq 179\n</code></pre> EIGRP : Runs on its own protocol number from the source interface IP to the multicast address of 224.0.0.10 <pre><code>access-list 101 permit eigrp any host 224.0.0.10\n</code></pre> OSPF : Runs on its own protocol number from the source interface IP to the multicast address of 224.0.0.5; also talks to 224.0.0.6 for DR/BDR routers <pre><code>access-list 101 permit ospf any host 224.0.0.5\naccess-list 101 permit ospf any host 224.0.0.6\n</code></pre> HSRP : Runs on UDP from the source interface IP to the multicast address of 224.0.0.2. I\u2019ve seen in the past that it runs on UDP/1985, but I didn\u2019t find any evidence of that in a quick Google for it. Can someone verify? <pre><code>access-list 101 permit udp any host 224.0.0.2\n</code></pre> RIP : Runs on UDP/520 from the source interface IP to the multicast address of 224.0.0.9 <pre><code>access-list 101 permit udp any host 224.0.0.9 eq 520\n</code></pre> VRRP : Runs on its own protocol number from the source interface IP to the multicast address of 224.0.0.18 <pre><code>access-list 101 permit 112 any host 224.0.0.18\n</code></pre> GLBP : Runs on UDP from the source interface IP to the multicast address of 224.0.0.102 <pre><code>access-list 101 permit udp any host 224.0.0.102\n</code></pre> DHCPD (or bootps) : Runs on UDP/67 from 0.0.0.0 (since the client doesn\u2019t have an address yet) to 255.255.255.255 (the broadcast). <pre><code>access-list 101 permit udp any host 255.255.255.255 eq 67\n</code></pre></p>"},{"location":"network/cisco_r/#session-mib","title":"session mib","text":"<p>\u042d\u0442\u043e \u0432\u043e\u043e\u0431\u0449\u0435 \u0432\u0440\u0435\u043c\u0435\u043d \u0434\u0438\u0430\u043b\u0430\u043f\u0430 \u0438 \u043f\u0440\u043e\u0447\u0435\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430, \u043a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438\u0441\u044c cisco \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 AS \u0438 BRAS. \u0422\u0430\u043a \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 Cisco AS5350 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 \u0446\u0438\u0444\u0440\u043e\u0432\u044b\u0445 \u043c\u043e\u0434\u0435\u043c\u043e\u0432 \u0438 \u0442\u0435\u043c \u0441\u0430\u043c\u044b\u043c \u0441\u0443\u0434\u0438\u0442\u044c \u043e \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043c\u043e\u0434\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u0443\u043b\u0430: <pre><code>cmSystemInstalledModem      1.3.6.1.4.1.9.9.47.1.1.1.0\ncmSystemModemsInUse         1.3.6.1.4.1.9.9.47.1.1.6.0 \ncmSystemModemsAvailable     1.3.6.1.4.1.9.9.47.1.1.7.0\ncmSystemModemsUnavailable   1.3.6.1.4.1.9.9.47.1.1.8.0 \ncmSystemModemsOffline       1.3.6.1.4.1.9.9.47.1.1.9.0\ncmSystemModemsDead          1.3.6.1.4.1.9.9.47.1.1.10.0\n</code></pre> \u041c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e, \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0434\u0430\u043b\u0435\u0435 \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443 \u0434\u043e\u0441\u0442\u0443\u043f\u0430. \u041d\u0443\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u0434\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043a\u0430\u043a\u0438\u043c-\u043d\u0438\u0431\u0443\u0434\u044c \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u043d\u043e\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e <pre><code>cpmActiveLocalPhoneNumber 1.3.6.1.4.1.9.10.19.1.3.1.1.13\n</code></pre> \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e PPPoE-\u0441\u0435\u0441\u0441\u0438\u0439 <pre><code>cPppoeSystemCurrSessions 1.3.6.1.4.1.9.9.194.1.1.1\n</code></pre> \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e PPtP-\u0441\u0435\u0441\u0441\u0438\u0439 <pre><code>cvpdnSystemSessionTotal  1.3.6.1.4.1.9.10.24.1.1.4.1.3\n</code></pre> \u0427\u0442\u043e\u0431\u044b \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c \u0441\u0435\u0441\u0441\u0438\u0438 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 snmp \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u0445 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 <pre><code>aaa session-mib disconnect\n</code></pre> \u0418 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c MIB: CISCO-AAA-SESSION-MIB. \u0412\u043e\u0442 \u0448\u0430\u0431\u043b\u043e\u043d, \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043d\u0443\u0436\u043d\u044b\u0439 shell-\u0441\u043a\u0440\u0438\u043f\u0442: <pre><code>export MIBS=+CISCO-AAA-SESSION-MIB\n#\u0441\u043f\u0438\u0441\u043e\u043a \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439\nsnmpwalk -v2c -c public $hostname casnUserId \nsnmpwalk -v2c -c public $hostname casnUserId.$session_id\n# \u0432\u044b\u0432\u043e\u0434 .. = \"login\"\n# \u0441\u0431\u0440\u043e\u0441 \u0441\u0435\u0441\u0441\u0438\u0438. \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f community \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c\nsnmpset -v2c -c private $hostname casnDisconnect.$session_id i 1\n# \u0432\u044b\u0432\u043e\u0434 .. = INTEGER: true(1)\n</code></pre></p>"},{"location":"network/cisco_r/#backup-interface","title":"backup interface","text":"<p>\u0424\u0438\u0447\u0430 backup interface \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0433\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0441\u043b\u0443\u0447\u0430\u0435, \u043a\u043e\u0433\u0434\u0430 \u0430\u0441\u0441\u0438\u043c\u0435\u0442\u0440\u0438\u044f \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u0430, \u043a\u0430\u043a \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440 \u043c\u0435\u0436\u0441\u0435\u0442\u0435\u0432\u044b\u0445 \u044d\u043a\u0440\u0430\u043d\u043e\u0432 asa, \u0433\u0434\u0435 flow \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u043e\u0434\u0438\u043d \u0438 \u0442\u043e\u0442 \u0436\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0432 \u043e\u0431\u0435 \u0441\u0442\u043e\u0440\u043e\u043d\u044b. \u041f\u0438\u0441\u0430\u043b \u043e\u0431 \u044d\u0442\u043e\u043c \u0442\u0443\u0442. \u042d\u0442\u043e \u0431\u044b\u043b \u0435\u0434\u0438\u043d\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0440\u0430\u0437 \u043a\u043e\u0433\u0434\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b \u043f\u0440\u0438\u0433\u043e\u0434\u0438\u043b\u0441\u044f. <pre><code>interface GigabitEthernet0/0\n description asa1-eth1\n ip address 10.1.1.97 255.255.255.252\n!\ninterface GigabitEthernet0/1\n description asa2-eth1\n ip address 10.1.1.109 255.255.255.252\n!\ninterface GigabitEthernet0/2\n description r2-gi0/2\n backup interface GigabitEthernet0/1\n ip address 10.1.1.104 255.255.255.254\n ip ospf network point-to-point\n\nr1#sh int desc  \nInterface                      Status         Protocol Description\nEm0/0                          admin down     down     \nGi0/0                          up             up       asa1-eth1\nGi0/1                          standby mode   down     asa2-eth1\nGi0/2                          up             up       r2-gi0/2\n</code></pre></p>"},{"location":"network/cisco_r/#object-group","title":"object group","text":"<p>\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432 acl, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043f\u043e\u0442\u043e\u043c \u0432 PBR.</p>"},{"location":"network/cisco_r/#acl-for-default-route","title":"acl for default route","text":"<p>\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u043b\u0438\u0441\u0442 <pre><code>access-list 10 permit 0.0.0.0\n</code></pre> \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0439 \u043b\u0438\u0441\u0442 <pre><code>access-list 100 permit ip host 0.0.0.0 host 0.0.0.0\n</code></pre> \u041f\u0440\u0435\u0444\u0438\u043a\u0441 \u043b\u0438\u0441\u0442 <pre><code>ip prefix-list 1 permit 0.0.0.0/0\n</code></pre></p>"},{"location":"network/cisco_r/#copp","title":"copp","text":"<p>\u041e\u0442\u043a\u0440\u044b\u0442\u044b\u0435 \u043f\u043e\u0440\u0442\u044b, \u0441\u0435\u0441\u0441\u0438\u0438: <pre><code>show control-plane host open-ports\n</code></pre></p> <p>\u0411\u044b\u043b\u0430 \u0443\u044f\u0437\u0432\u0438\u043c\u043e\u0441\u0442\u044c \u043d\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430\u0445, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043b\u0438 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c copp. \u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u0441 \u0434\u0440\u043e\u043f\u0430\u043c\u0438, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u0441\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0435 \u0432 acl \u043a\u0430\u043a permit \u0431\u0443\u0434\u0435\u0442 \u0434\u0440\u043e\u043f\u043d\u0443\u0442\u043e. \u0412 deny \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f ipsec \u043f\u0438\u0440\u044b, \u0435\u0441\u043b\u0438 \u0442\u0430\u043a\u0438\u0435 \u0438\u043c\u0435\u044e\u0442\u0441\u044f. \u0420\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u0442\u0441\u044f \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u0438\u0437 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0439 \u0441\u0435\u0442\u0438 10/8 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0431\u0435\u0437 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439. <pre><code>access-list 198 deny   tcp 10.0.0.0 0.255.255.255 any\naccess-list 198 permit tcp any any eq telnet\naccess-list 198 permit tcp any any eq bgp\naccess-list 198 permit tcp any any eq 161\n\naccess-list 199 permit udp any any eq 18999\naccess-list 199 deny   udp 10.0.0.0 0.255.255.255 any\naccess-list 199 deny   udp host ipsec-peer-ip any eq non500-isakmp\naccess-list 199 permit udp any any eq non500-isakmp\naccess-list 199 deny   udp host host ipsec-peer-ip any eq isakmp\naccess-list 199 permit udp any any eq isakmp\naccess-list 199 permit udp any any eq ntp\naccess-list 199 permit udp any any eq snmp\n\nclass-map match-all undesirable-tcp\n match access-group 198\nclass-map match-all undesirable-udp\n match access-group 199\n\npolicy-map copp\n class undesirable-udp\n  drop\n class undesirable-tcp\n  drop\n\ncontrol-plane\n service-policy input copp\n</code></pre> copp \u043e\u043f\u0438\u0441\u0430\u043d \u0441 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u043c\u0438 \u0432 rfc 2011 \u0433\u043e\u0434\u0430 rfc6192.</p>"},{"location":"network/cisco_r/#high-cpu-usage","title":"high cpu usage","text":"<p>\u0414\u043b\u044f \u0441\u043e\u0444\u0442\u043e\u0432\u044b\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u0432 \u043d\u0430\u0434\u043e \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u0442\u044c \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u044b\u0439 pps \u0438 \u0441\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0442\u044c \u0441 \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u043c \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 cpu. \u041f\u0440\u0438 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043d\u0430\u0434\u043e \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c <code>sh proc cpu history</code>, \u0433\u0434\u0435 \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0442\u0441\u044f \u043d\u0430 \u043f\u0441\u0435\u0432\u0434\u043e\u0433\u0440\u0430\u0444\u0438\u043a\u0430\u0445 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 cpu. \u041f\u0440\u0438 \u043f\u043e\u044f\u0432\u043b\u0435\u043d\u0438\u0438 override \u0438 ignored \u043e\u0448\u0438\u0431\u043e\u043a \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445 \u043c\u0435\u043d\u044f\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440 \u043d\u0430 \u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439, \u0435\u0441\u043b\u0438 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0430\u044f \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430. \u0415\u0441\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 cpu \u0432\u044b\u0440\u043e\u0441\u043b\u0430 \u0432\u043d\u0435\u0437\u0430\u043f\u043d\u043e, \u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u043b\u0438 cef. \u041e\u043d \u043c\u043e\u0436\u0435\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f, \u0435\u0441\u043b\u0438 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0430\u0441\u044c \u043f\u0430\u043c\u044f\u0442\u044c, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440.</p>"},{"location":"network/cisco_r/#netflow-ios","title":"netflow \u0434\u043b\u044f ios","text":"<p><pre><code>ip flow-cache timeout active 5\nip flow-export source Loopback0\nip flow-export version 5\nip flow-export destination &lt;ip&gt; &lt;port&gt;\nip flow-top-talkers\n top 50\n sort-by bytes\n</code></pre> \u041d\u0430 \u0432\u0441\u0435\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445 \u0441 ip-\u0430\u0434\u0440\u0435\u0441\u0430\u043c\u0438 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c <code>ip flow ingress</code>. \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445: <pre><code>show ip flow top-talkers\nshow ip cache flow\n</code></pre> \u0415\u0441\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0442\u043e\u0440\u044b \u0434\u043b\u044f netflow 5. \u0415\u0441\u043b\u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u044b \u043f\u043e\u0437\u0432\u043b\u044f\u044e\u0442, \u0442\u043e elastiflow. \u0421\u043b\u043e\u0436\u0438\u0442\u044c netflow \u0432 tsdb (ifluxdb) \u044d\u0442\u043e \u043e\u0447\u0435\u043d\u044c \u043f\u043b\u043e\u0445\u0430\u044f \u0438\u0434\u0435\u044f \u0438 \u0442\u0440\u0430\u0442\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u0438.</p>"},{"location":"network/cisco_r/#neflow-ios-xe","title":"neflow \u0434\u043b\u044f ios xe","text":"<p><pre><code>flow exporter DOH\n destination &lt;ip&gt;\n source Loopback0\n transport udp &lt;port&gt;\n export-protocol netflow-v5\n!\n!\nflow monitor DOH\n exporter DOH\n cache timeout active 60\n record netflow-original\n</code></pre> \u041d\u0430 \u0432\u0441\u0435\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445 \u0441 ip-\u0430\u0434\u0440\u0435\u0441\u0430\u043c\u0438 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c <code>ip flow monitor DOH input</code>. \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445: <pre><code>show flow monitor DOH statistics\nshow flow monitor DOH cache sort ipv4 tos format table\n</code></pre> \u0411\u0435\u0437 \u043a\u043e\u043b\u043b\u0435\u043a\u0442\u043e\u0440\u0430 \u043d\u0438\u043a\u0443\u0434\u0430.</p>"},{"location":"network/cisco_sw/","title":"Switch cisco","text":""},{"location":"network/cisco_sw/#spanning-tree","title":"spanning-tree","text":"<p>\u041d\u0435\u043b\u044c\u0437\u044f \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c stp, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0442\u0430\u043a. \u0418 loopback-detection \u043d\u0435\u0442 \u043d\u0430 \u0441\u0442\u0430\u0440\u043e\u043c \u0436\u0435\u043b\u0435\u0437\u0435. \u0412\u043e\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0435\u0434\u0430\u0432\u043d\u043e \u0433\u0434\u0435-\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043b\u0438.</p> <p>Bdpufilter \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u0442 \u0432 \u043e\u0431\u0435 \u0441\u0442\u043e\u0440\u043e\u043d\u044b, \u0442.\u0435. \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043e\u0442\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0435\u0442 \u0432\u0441\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 BPDU \u0438 \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 BPDU \u0432 \u043f\u043e\u0440\u0442. \u041b\u043e\u0433\u0438\u0447\u043d\u043e \u0444\u0438\u043b\u044c\u0442\u0440 \u043f\u043e\u0432\u0435\u0441\u0438\u0442\u044c \u043d\u0430 \u043f\u043e\u0440\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0438\u043a\u0430\u043a \u043d\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u044e\u0442 \u0432 \u043a\u043e\u043b\u044c\u0446\u0435\u0432\u043e\u0439 \u0442\u043e\u043f\u043e\u043b\u043e\u0433\u0438\u0438, \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u043f\u0440\u0438\u0434\u0435\u0442 BPDU, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043d\u0430 \u043f\u043e\u0440\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u043d\u0430 \u043f\u043e\u0440\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430, \u043d\u0430 \u0441\u0442\u044b\u043a \u0441 \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u043e\u043c. \u041e\u0441\u043e\u0431\u043e \u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 bpduguard \u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442 \u043f\u043e\u0440\u0442 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 bpdu \u043e\u0442 \u0432\u0430\u0448\u0435\u0433\u043e \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0430 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0441\u043a\u0438\u0445 \u0441\u0442\u044b\u043a\u0430\u0445 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0435\u0448\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 \u0432\u0441\u0435\u0433\u0434\u0430. \u0427\u0442\u043e\u0431\u044b \u043f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0442\u043e\u043f\u043e\u043b\u043e\u0433\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u0440\u0442\u044b \u043d\u0435 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u043b\u0438 \u0432\u0441\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u0444\u0430\u0437\u044b blocking, listening, learning, \u0430 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043b\u0438 \u0441\u0440\u0430\u0437\u0443 \u0432 forwarding, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c portfast. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0435\u0441\u0442\u044c, \u0447\u0442\u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0439 <code>spanning-tree portfast</code> \u043d\u0430 \u0442\u0440\u0430\u043d\u043a\u043e\u0432\u043e\u043c \u043f\u043e\u0440\u0442\u0443 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0435 \u0431\u0443\u0434\u0435\u0442. \u0422\u0443\u0442 \u043d\u0443\u0436\u0435\u043d <code>spanning-tree portfast trunk</code> \u0438\u043b\u0438 <code>spanning-tree portfast edge trunk</code> \u043a\u0430\u043a \u0432 \u044d\u0442\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435. <pre><code>interface GigabitEthernet1/0/1\n description Server\n switchport access vlan 100\n switchport mode access\n spanning-tree portfast edge\n spanning-tree bpdufilter enable\n\ninterface GigabitEthernet1/0/2\n description Router\n switchport trunk encapsulation dot1q\n switchport mode trunk\n spanning-tree portfast edge trunk\n spanning-tree bpdufilter enable\n\ninterface GigabitEthernet1/0/3\n description Internet\n switchport access vlan 5000\n switchport mode access\n spanning-tree portfast edge\n spanning-tree bpdufilter enable\n</code></pre> \u0412 \u044d\u0442\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435 bpduguard - \u043b\u0438\u0448\u043d\u044f\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430, \u0442\u0430\u043a \u043a\u0430\u043a \u043e\u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0432\u0448\u0435\u0433\u043e \u0440\u0430\u043d\u0435\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430. \u041d\u043e \u0442\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e \u0432 cisco. <pre><code>interface GigabitEthernet1/0/4\n spanning-tree bpdufilter enable\n spanning-tree bpduguard enable\n</code></pre> \u0412\u043e\u0442 \u0441\u0430\u043c\u044b\u0439 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440, \u043a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f bpduguard. \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b spanning-tree \u0446\u0438\u0441\u043a\u043e\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043b\u0430\u0442\u044c BPDU \u0432 \u043f\u043e\u0440\u0442 \u0438 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0435\u0433\u043e \u043f\u043e \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u043e\u0440\u0442.</p> <p><pre><code>interface GigabitEthernet1/0/5\n description User\n switchport access vlan 200\n switchport mode access\n spanning-tree portfast edge\n spanning-tree bpduguard enable\n</code></pre> \u0414\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u0440\u0442\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c errdisable. <pre><code>errdisable recovery cause bpduguard\nerrdisable recovery interval 120\n</code></pre></p> <p>\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u0447\u0442\u043e mstp \u0441\u043b\u043e\u0436\u0435\u043d \u0434\u043b\u044f \u0432\u043d\u0435\u0434\u0440\u0435\u043d\u0438\u044f, \u043d\u043e \u0435\u0441\u043b\u0438 \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0435\u0431\u0435 \u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u043e\u0441\u0442\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443 \u2013 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0430\u043d\u0430\u043b\u043e\u0433\u0430 RSTP, \u0442\u043e \u0432\u0441\u0435 \u0441\u0438\u043b\u044c\u043d\u043e \u0443\u043f\u0440\u043e\u0449\u0430\u0435\u0442\u0441\u044f. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0434\u043b\u044f \u0441\u0435\u0431\u044f \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u043e\u0432. \u041f\u0443\u0441\u0442\u044c \u0431\u0443\u0434\u0435\u0442 \u0432\u0441\u0435\u0433\u043e \u043e\u0434\u0438\u043d, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u0432\u043e\u043e\u0431\u0449\u0435 \u0432\u0441\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u0432\u043b\u0430\u043d\u044b. \u0422\u0430\u043a\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043c\u043e\u0436\u043d\u043e \u043d\u0435 \u0447\u0438\u0442\u0430\u0442\u044c \u043f\u0440\u043e \u043d\u043e\u043c\u0435\u0440\u0430 \u0440\u0435\u0432\u0438\u0437\u0438\u0439 \u0438 \u0442.\u043f. \u0417\u0434\u0435\u0441\u044c \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043d\u0443\u043b\u0435\u0432\u043e\u0433\u043e - cist, \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 mstp \u0431\u0443\u0434\u0435\u0442 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430\u043c\u0438, \u0430 \u0432 \u043f\u0435\u0440\u0432\u043e\u043c msti - \u0432\u0441\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u0432\u043b\u0430\u043d\u044b. \u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u0434\u043b\u044f 0 \u0438 1 \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u044b \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u044b. \u0411\u044b\u0432\u0430\u0435\u0442, \u0447\u0442\u043e \u0434\u043b\u044f 1-\u0433\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0448\u044c, \u0430 \u0434\u043b\u044f cist - \u043d\u0435\u0442. \u041f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 pvst bpdu \u043f\u043e\u0440\u0442 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0432 \u0440\u0435\u0436\u0438\u043c \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0438 mstp \u043f\u0435\u0440\u0435\u0441\u0442\u0430\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 pvst \u043d\u0430\u0434\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043b\u0438 \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043d\u0435\u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 cisco. <pre><code>spanning-tree mst configuration\n name acb\n revision 1\n instance 1 vlan 1-4094\nspanning-tree mode mst\nspanning-tree mst 0-1 priority 28672\n</code></pre> \u0413\u043e\u0432\u043e\u0440\u044f\u0442, cisco \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 RSTP, \u043d\u043e \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u044d\u0442\u043e RPVST+  \u0438\u043b\u0438 \u0434\u0430\u0436\u0435 PVRST+. \u041d\u043e \u044d\u0442\u043e \u0432\u0435\u0434\u044c \u043d\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 RSTP, \u0442\u0430\u043a \u043a\u0430\u043a \u0432 \u0446\u0438\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043b\u0430\u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u0441\u0432\u043e\u0439 \u0438\u043d\u0441\u0442\u0430\u043d\u0441, \u0440\u0430\u0441\u0441\u044b\u043b\u0430\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043b\u0430\u043d\u0430 BPDU. \u042d\u0442\u043e \u043d\u0435\u0443\u0434\u043e\u0431\u043d\u043e \u0434\u0430\u0436\u0435 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u0435\u0442\u044f\u0445 \u0441 \u0446\u0438\u0441\u043a\u0430\u043c\u0438:</p> <ul> <li>\u0423 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b \u0441 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435\u043c \u043f\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0432\u043b\u0430\u043d\u043e\u0432: 256 \u0438\u043b\u0438 1024.</li> <li>\u0415\u0441\u043b\u0438 \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 vtp \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0432\u043b\u0430\u043d\u043e\u0432, \u0442\u043e \u0435\u0441\u0442\u044c \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u043b\u0438\u043c\u0438\u0442\u0430, \u0438\u0437-\u0437\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0432\u043b\u0430\u043d\u043e\u0432 \u0438\u043d\u0441\u0442\u0430\u043d\u0441 stp \u0441\u043e\u0437\u0434\u0430\u043d \u043d\u0435 \u0431\u0443\u0434\u0435\u0442. \u042d\u0442\u043e 100% \u043a\u043e\u043b\u044c\u0446\u043e; \u043d\u0435\u0443\u0434\u043e\u0431\u043d\u043e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0443\u0447\u0443 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u043e\u0432;</li> <li>\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 cpu \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0442\u0435\u043c \u0432\u044b\u0448\u0435, \u0447\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u043e\u0432.</li> </ul> <p>\u0412 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u043c RSTP \u043d\u0438\u0447\u0435\u0433\u043e \u044d\u0442\u043e\u0433\u043e \u043d\u0435\u0442, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0441\u0430\u043c\u044b\u0439 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0442\u044c \u043d\u0430 \u0441\u0442\u0430\u0440\u044b\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 cisco \u2013 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c MSTP. \u041f\u043e\u0447\u0435\u043c\u0443 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b spanning-tree \u043d\u0435 \u0437\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043e\u0442 \u043f\u0435\u0442\u0435\u043b\u044c? \u041a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b BPDU, \u043f\u043e \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u043c \u043f\u0440\u0438\u0447\u0438\u043d\u0430\u043c \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0438 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u043c\u0438, \u0430 \u0434\u043b\u044f \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438 BPDU \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u043c\u0443\u043b\u044c\u0442\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441. \u041c\u0435\u0436\u0434\u0443 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u043c\u0438 \u043c\u043e\u0433\u0443\u0442 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f, \u0438\u0437-\u0437\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442 BPDU, \u043f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u0442 \u043f\u043e\u0440\u0442 \u0438\u0437 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f alternate \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 forwarding \u0445\u043e\u0442\u044c \u0438 \u043d\u0430 \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0432\u0440\u0435\u043c\u044f, \u043d\u043e \u044d\u0442\u043e\u0433\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u043f\u043e\u043b\u043d\u0435 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e. \u0422\u0430\u043a\u043e\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u043b\u0443\u0447\u0438\u0442\u044c\u0441\u044f \u043a\u043e\u0433\u0434\u0430:</p> <ul> <li>\u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0434\u043d\u043e\u0441\u0442\u043e\u0440\u043e\u043d\u043d\u044f\u044f \u0441\u0432\u044f\u0437\u044c \u043d\u0430 \u043e\u043f\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043b\u0438\u043d\u043a\u0430\u0445;</li> <li>\u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u043c\u0438 \u0432\u043a\u043b\u044e\u0447\u0438\u043b\u0441\u044f half-duplex, \u0447\u0442\u043e \u043f\u0440\u0438\u0432\u0435\u043b\u043e \u043a \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u043c \u043e\u0448\u0438\u0431\u043a\u0430\u043c \u0438 \u043f\u043e\u0442\u0435\u0440\u044f\u043c;</li> <li>\u043d\u0430 \u0432\u0430\u0448\u0435\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0439 \u0441\u0435\u0442\u0438 \u0438\u0437-\u0437\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442\u0441\u044f \u043c\u0443\u043b\u044c\u0442\u0438\u043a\u0430\u0441\u0442 \u0432 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0435;</li> <li>\u0447\u0435\u0440\u0435\u0437 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0441\u043a\u0438\u0435 \u0441\u0435\u0442\u0438 BPDU \u043f\u0435\u0440\u0435\u0441\u0442\u0430\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c\u0441\u044f, \u0435\u0441\u043b\u0438 \u0432\u043e\u043e\u0431\u0449\u0435 \u0445\u043e\u0442\u044c \u043a\u0442\u043e-\u0442\u043e \u043a\u043e\u0433\u0434\u0430-\u0442\u043e \u0438\u0437 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u0442\u0430\u043a\u043e\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u0442;</li> <li>\u0432\u044b \u043f\u0440\u043e\u0441\u0442\u043e \u043e\u0448\u0438\u0431\u043b\u0438\u0441\u044c \u0441 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f, \u043d\u0435 \u0441\u043c\u043e\u0433\u043b\u0438 \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u0430\u043a\u0438\u0445-\u0442\u043e \u043d\u044e\u0430\u043d\u0441\u043e\u0432, \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0447\u0430\u0449\u0435 \u0432\u0441\u0435\u0433\u043e.</li> </ul> <p>\u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 Cisco \u0441\u043b\u0435\u0434\u0443\u0435\u0442:</p> <ul> <li>\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0445\u0435\u043c\u0443 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043f\u043e \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 stp \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u043b\u0438 \u0432 \u0428\u0411\u0414 \u0442\u043e\u0447\u043a\u0430-\u043c\u043d\u043e\u0433\u043e\u0442\u043e\u0447\u043a\u0430, \u0445\u043e\u0442\u044f \u0434\u043b\u044f \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u043d\u0430\u0434\u043e p2p \u043b\u0438\u043d\u043a\u0438;</li> <li>\u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c Unidirectional Link Detection (UDLD) \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043b\u044f \u043e\u043f\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043b\u0438\u043d\u043a\u043e\u0432 \u043d\u0430 \u0441\u043b\u0443\u0447\u0430\u0439 \u043e\u0434\u043d\u043e\u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0435\u0439 \u0441\u0432\u044f\u0437\u0438;</li> <li>\u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c spanning-tree loopguard \u0434\u043b\u044f \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u043f\u043e\u0440\u0442\u0430 \u0434\u043e \u0441\u043e\u0441\u0435\u0434\u043d\u0435\u0433\u043e \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u043d\u0430 \u0441\u043b\u0443\u0447\u0430\u0439, \u043a\u043e\u0433\u0434\u0430 BPDU \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u043f\u043e \u043b\u044e\u0431\u043e\u0439 \u043f\u0440\u0438\u0447\u0438\u043d\u0435;</li> <li>\u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c Connectivity Fault Management (CFM), \u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 metro-\u0441\u0435\u0440\u0438\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432.</li> </ul> <p>\u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0438\u043b\u0438 \u043a\u0430\u043a\u043e\u0433\u043e-\u0442\u043e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0433\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043c\u0435\u0442\u0438\u0442\u044c, \u0447\u0442\u043e:</p> <ul> <li>UDLD \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u043c\u0438 cisco, \u0442\u0430\u043a \u043a\u0430\u043a \u044d\u0442\u043e \u0438\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430;</li> <li>\u0430\u043d\u0430\u043b\u043e\u0433\u0430 spanning-tree loopguard \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u043c\u043e\u0436\u0435\u0442 \u043d\u0435 \u0431\u044b\u0442\u044c;</li> <li>\u043d\u0430\u0434\u043e \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \"link-fault-management\" (802.3ah) \u0438\u043b\u0438 \u201cconnectivity-fault-management\" (802.3ag)</li> </ul> <p>\u0412\u044b\u0432\u043e\u0434\u044b:</p> <ul> <li>CFM 802.3ag \u043f\u043e\u043b\u0435\u0437\u0435\u043d \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043b\u0438\u043d\u043a\u0430;</li> <li>\u041f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0442\u043e\u043b\u044c\u043a\u043e loopguard \u0438\u0437 \u0432\u0441\u0435\u0433\u043e \u0432\u044b\u0448\u0435 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u0435\u0431\u044f \u043e\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u0438\u0442\u044c \u043e\u0442 \u043f\u043e\u0442\u0435\u0440\u0438 BPDU, \u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u043b\u0438\u043d\u043a\u0438 p2p \u0430 \u043d\u0435 \u0442\u043e\u0447\u043a\u0430-\u043c\u043d\u043e\u0433\u043e\u0442\u043e\u0447\u043a\u0430.</li> </ul>"},{"location":"network/cisco_sw/#save-config","title":"save config","text":"<p>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u0441 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u0432 \u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 cisco \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u043c\u0438: * \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c archive \u0438 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438, \u043b\u0438\u0431\u043e \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0432 \u043f\u0430\u043c\u044f\u0442\u044c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430; * \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c kron \u0438 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438; * \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c cisco event manager \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u043f\u043e \u043a\u0430\u043a\u043e\u043c\u0443-\u043b\u0438\u0431\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044e; * \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 write net .. \u0434\u0430\u043d\u043d\u043e\u0439 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0438\u043b\u0438 \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u043c \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430; * \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 sh startup-config | tee .. \u0434\u0430\u043d\u043d\u043e\u0439 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0438\u043b\u0438 \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u043c \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430; * \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c scp \u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435; * \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u043e tftp, \u043e\u0442\u0440\u0430\u0432\u0438\u0432 snmp-\u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c \u0441 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0430; * \u043b\u044e\u0431\u044b\u043c\u0438 \u0441\u043a\u0440\u0438\u043f\u0442\u0430\u043c\u0438 \u0438\u043b\u0438 ansible'\u043e\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c sh run \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432\u044b\u0432\u043e\u0434 \u0432 \u0444\u0430\u0439\u043b. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u043c \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u043c \u0431\u0443\u0434\u0435\u0442 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 ssh, \u043e\u0434\u043d\u0430\u043a\u043e \u043d\u0435 \u0432\u043e \u0432\u0441\u0435\u0445 \u0432\u0435\u0440\u0441\u0438\u044f\u0445 IOS \u043e\u043d \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442. \u041f\u0440\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0438 \u0443\u0436\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u043e\u0433\u043e ssh \u0432 IOS, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c scp: <pre><code>ip scp server enable\n</code></pre> \u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0444\u0430\u0439\u043b startup-config \u0441 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440: <pre><code>scp hostname:startup-config /backup/hostname\n</code></pre> \u0412 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f\u0445 \u043c\u043e\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043b\u0438\u0448\u043d\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0435 \u0442\u0430\u043a\u043e\u0439 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u044f\u044e\u0449\u0438\u0439\u0441\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440, \u043a\u0430\u043a ntp clock-period.</p>"},{"location":"network/cisco_sw/#dhcp-snooping","title":"dhcp-snooping","text":"<p>\u0422\u0443\u0442 \u043d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u043a\u0430\u043a \u043d\u0430 \u0434\u0436\u0443\u043d\u0438\u043f\u0435\u0440\u0430\u0445 \u0438 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 L3 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 dhcp-snooping \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442. \u0415\u0441\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043e\u0432\u0441\u0435\u043c \u0441\u0442\u0430\u0440\u044b\u0445 \u0444\u043b\u0435\u0448\u0435\u043a \u0441 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 Low End File System, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u0442 \u043e\u0447\u0438\u0441\u0442\u043a\u0443 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u043e\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \u0432\u0440\u0443\u0447\u043d\u0443\u044e. \u041d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f dhcp-snooping \u043e\u0447\u0435\u043d\u044c \u043f\u0440\u0438\u0432\u044b\u0447\u043d\u043e. <pre><code>ip dhcp snooping vlan [\u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d \u0438\u043b\u0438 \u0441\u043f\u0438\u0441\u043e\u043a \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e]\nno ip dhcp snooping information option\nip dhcp snooping database flash:/\u0438\u043c\u044f_\u0444\u0430\u0439\u043b\u0430\nip dhcp snooping\n</code></pre> \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u0440\u0442\u0430. <pre><code>interface GigabitEthernet0/1\n ip dhcp snooping trust\n</code></pre></p>"},{"location":"network/cisco_sw/#mls-qos","title":"mls qos","text":"<p>\u0411\u0435\u0437 \u043b\u0438\u0448\u043d\u0435\u0439 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c qos \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u043d\u0435 \u043d\u0443\u0436\u043d\u043e. \u042d\u0442\u043e \u043a\u0430\u0441\u0430\u0435\u0442\u0441\u044f \u0438 cisco voip autoqos, \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438. \u041a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0431\u0435\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0439 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u043c\u0438 \u0438\u043b\u0438 \u043a\u043e\u0434\u0435\u043a\u0430\u043c\u0438, \u0438\u043d\u0430\u0447\u0435 \u0431\u0443\u0434\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0445\u0443\u0436\u0435. \u0415\u0441\u043b\u0438 qos \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d:</p> <ul> <li>\u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c\u044e \u0434\u0440\u043e\u043f\u043e\u0432 \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u043d\u0435\u0442;</li> <li>\u0432\u0441\u0435 \u043f\u043e\u0440\u0442\u044b \u0434\u043e\u0432\u0435\u0440\u044f\u044e\u0442 \u043c\u0435\u0442\u043a\u0430\u043c cos \u0438 dscp \u043f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e;</li> <li>\u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043f\u043e\u0440\u0442\u043e\u0432 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0435 \u0438 \u043c\u0430\u043b\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439, \u0433\u0434\u0435 \u0434\u043b\u044f \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043e \u043e\u0442 90% \u043f\u043e\u043b\u043e\u0441\u044b \u0438 \u0431\u0443\u0444\u0435\u0440\u043e\u0432.\u0427\u0430\u0441\u0442\u044c \u0431\u0443\u0444\u0435\u0440\u043e\u0432 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0434\u043b\u044f network control. \u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u0440\u0430\u0437\u043d\u044b\u043c\u0438 \u043c\u0435\u0442\u043a\u0430\u043c\u0438 \u0447\u0435\u0440\u0435\u0437 \u043f\u043e\u0440\u0442 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0431\u043b\u0438\u0437\u043a\u043e\u0439 \u043a \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u043f\u043e\u0440\u0442\u0430, \u043d\u043e \u0437\u0430 \u0441\u0447\u0435\u0442 \u0431\u0443\u0444\u0435\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0432\u044b\u0440\u0430\u0441\u0442\u0438 jitter; \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u0434\u0440\u043e\u043f\u044b \u0432 \u0431\u0443\u0444\u0435\u0440\u0435 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0446\u0438\u0438, \u043d\u043e \u044d\u0442\u043e \u0443\u0436\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0447\u0438\u043f\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432. \u0412 \u0447\u0438\u043f\u0435 \u043c\u043e\u0436\u0435\u0442 \u043d\u0435 \u0445\u0432\u0430\u0442\u0438\u0442\u044c \u043f\u0430\u043c\u044f\u0442\u0438, \u043b\u0438\u0431\u043e \u043e\u043d \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u044d\u0442\u0443 \u043f\u0430\u043c\u044f\u0442\u044c \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0431\u044b\u0441\u0442\u0440\u043e, \u044f \u043d\u0435 \u0437\u043d\u0430\u044e \u043d\u0430\u0432\u0435\u0440\u043d\u044f\u043a\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 \u0441\u0435\u0442\u0438 \u043c\u043e\u0433\u0443\u0442 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0442\u044c \u0442.\u043d. \u043c\u0438\u043a\u0440\u043e\u0431\u0451\u0440\u0441\u0442\u044b - \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u043e\u0431\u044a\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0445, \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0445 \u0437\u0430 \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0432\u0440\u0435\u043c\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u0433\u0438\u0433\u0430\u0431\u0438\u0442\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0431\u0435\u0437 \u043f\u043e\u0442\u0435\u0440\u044c, \u043a \u043f\u0440\u0438\u043c\u0435\u0440\u0443, \u0430 \u043f\u0440\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0446\u0438\u0438 \u0432 100\u043c\u0431\u0438\u0442/\u0441 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441, \u043a\u0443\u0434\u0430 \u0432\u043a\u043b\u044e\u0447\u0435\u043d ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0438 \u041f\u041a, \u044d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b.</li> </ul> <p>\u0415\u0441\u043b\u0438 qos \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u0438 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u043d\u0435 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u043b\u043e\u0441\u044c:</p> <ul> <li>\u043f\u043e\u0440\u0442\u044b \u043d\u0435 \u0434\u043e\u0432\u0435\u0440\u044f\u044e\u0442 \u043c\u0435\u0442\u043a\u0430\u043c cos \u0438\u043b\u0438 dscp;</li> <li>\u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c 4 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0441 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u043c\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438. \u041f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0432\u0441\u0435 \u043c\u0435\u0442\u043a\u0438 \u0441\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f, \u0442\u043e \u0432\u0435\u0441\u044c \u0442\u0440\u0430\u0444\u0438\u043a \u043f\u043e\u043f\u0430\u0434\u0435\u0442 \u0432 \u043e\u0434\u043d\u0443 \u043e\u0447\u0435\u0440\u0435\u0434\u044c, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043f\u043e\u0447\u0442\u0438 \u0432 4 \u0440\u0430\u0437\u0430 \u043c\u0435\u043d\u044c\u0448\u0435 \u0442\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u044b\u043b\u0430 \u043f\u0440\u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u043e\u043c qos.</li> <li>\u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c\u044e \u043f\u043e\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0434\u0440\u043e\u043f\u044b \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445. \u0418\u0445 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 sh int counters errors \u0432 \u0441\u0442\u043e\u043b\u0431\u0446\u0435 OutDiscards;</li> <li>\u0441 \u0431\u0443\u0444\u0435\u0440\u043e\u043c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0446\u0438\u0438 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f \u043d\u0435 \u043f\u043e\u043c\u0435\u043d\u044f\u043b\u0430\u0441\u044c, \u043d\u043e \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043c\u0435\u0442\u043a\u0438 \u0441\u0431\u0440\u043e\u0441\u0438\u043b\u0438\u0441\u044c, \u0442\u043e \u0432\u0441\u0435 \u043f\u043e\u043f\u0430\u0434\u0430\u0435\u0442 \u0432 \u043e\u0434\u043d\u0443 \u0432\u0445\u043e\u0434\u044f\u0449\u0443\u044e \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u0438\u0437 \u0434\u0432\u0443\u0445.</li> </ul> <p>\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0441\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0442\u0430\u043a \u0438\u043b\u0438 \u0438\u043d\u0430\u0447\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 QoS.</p> <p>\u0414\u043b\u044f ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438 \u0438 \u0432\u0438\u0434\u0435\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0441\u0432\u044f\u0437\u0438 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f dscp:</p> dscp dec dscp class desc 46 ef \u043c\u0435\u0434\u0438\u0430 (rtp) 24 cs3 \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f (sip,h323,unistim) 32 cs4 \u0432\u0438\u0434\u0435\u043e c \u043a\u043e\u0434\u0435\u043a\u043e\u0432(rtp) 34 af41 \u0432\u0438\u0434\u0435\u043e \u0441 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u0441\u043e\u0444\u0442\u043e\u0432\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430, \u043a\u043e\u0434\u0435\u043a\u0430 (rtp) 0 be \u0432\u0435\u0441\u044c \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u0440\u0430\u0444\u0438\u043a \u0431\u0435\u0437 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438. <p>\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0437\u0443\u0447\u0438\u0442\u044c \u0432\u044b\u0432\u043e\u0434 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043a\u043e\u043c\u0430\u043d\u0434 \u0438 \u043f\u043e\u043d\u044f\u0442\u044c \u043a\u0430\u043a\u043e\u0439 \"dscp\" \u0432 \u043a\u0430\u043a\u0443\u044e \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u043f\u043e\u043f\u0430\u0434\u0435\u0442. 34 - 3 \u043f\u043e \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438, 4 \u043f\u043e \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438. \u0412 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0435\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u043e\u0447\u0435\u0440\u0435\u0434\u044c 4 \u0438 \u0442\u0440\u0435\u0448\u0445\u043e\u043b\u0434 1 <pre><code>SWITCH#sh mls qos maps dscp-input-q\n   Dscp-inputq-threshold map:\n     d1 :d2    0     1     2     3     4     5     6     7     8     9 \n     ------------------------------------------------------------\n      0 :    01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 \n      1 :    01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 \n      2 :    01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 \n      3 :    01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 \n      4 :    02-01 02-01 02-01 02-01 02-01 02-01 02-01 02-01 01-01 01-01 \n      5 :    01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 \n      6 :    01-01 01-01 01-01 01-01 \n\nSWITCH#sh mls qos maps dscp-output-q\n   Dscp-outputq-threshold map:\n     d1 :d2    0     1     2     3     4     5     6     7     8     9 \n     ------------------------------------------------------------\n      0 :    02-01 02-01 02-01 02-01 02-01 02-01 02-01 02-01 02-01 02-01 \n      1 :    02-01 02-01 02-01 02-01 02-01 02-01 03-01 03-01 03-01 03-01 \n      2 :    03-01 03-01 03-01 03-01 03-01 03-01 03-01 03-01 03-01 03-01 \n      3 :    03-01 03-01 04-01 04-01 04-01 04-01 04-01 04-01 04-01 04-01 \n      4 :    01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 04-01 04-01 \n      5 :    04-01 04-01 04-01 04-01 04-01 04-01 04-01 04-01 04-01 04-01 \n      6 :    04-01 04-01 04-01 04-01\n</code></pre> \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u0437\u0443\u0447\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439 \u043f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u0434\u0435\u0442\u0441\u044f \u043c\u0435\u043d\u044f\u0442\u044c \u0438\u043b\u0438 \u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u0412\u0445\u043e\u0434\u044f\u0449\u0430\u044f \u043e\u0447\u0435\u0440\u0435\u0434\u044c: <pre><code>SWITCH#sh mls qos input-queue \nQueue     :       1       2\n----------------------------------------------\nbuffers   :      90      10\nbandwidth :       4       4\npriority  :       0      10\nthreshold1:     100     100\nthreshold2:     100     100\n</code></pre> \u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0430\u044f \u043e\u0447\u0435\u0440\u0435\u0434\u044c: <pre><code>SWITCH#sh mls qos queue-set 1\nQueueset: 1\nQueue     :       1       2       3       4\n----------------------------------------------\nbuffers   :      25      25      25      25\nthreshold1:     100     200     100     100\nthreshold2:     100     200     100     100\nreserved  :      50      50      50      50\nmaximum   :     400     400     400     400\n</code></pre> \u0417\u0434\u0435\u0441\u044c \u0445\u043e\u0447\u0443 \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u0442\u0430\u043a\u0438\u0445 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0432\u0441\u0435\u0433\u043e \u0434\u0432\u0430 \u0438, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u0432\u044b\u0431\u043e\u0440 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d, \u0430 \u0437\u043d\u0430\u0447\u0438\u0442, \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u044b+\u041f\u041a, \u043d\u043e \u043d\u0438\u043a\u0430\u043a \u043d\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0432\u0438\u0434\u0435\u043e\u043d\u0430\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u044f, \u0421\u0425\u0414 \u0438 \u0442.\u043f. \u0415\u0441\u043b\u0438 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e Cisco \u0438 \u0435\u0435 autoqos, \u0442\u043e \u043c\u043e\u0436\u043d\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u043a\u0430\u043a \u043e\u0434\u0438\u043d \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u043f\u043e\u0440\u0442\u0430\u0445, \u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u2013 \u043d\u0430 \u0430\u043f\u043b\u0438\u043d\u043a\u0430\u0445/\u0442\u0440\u0430\u043d\u043a\u0430\u0445. \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0435 dscp \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0430\u044f qos \u043c\u043e\u0436\u043d\u043e.  \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c <code>sh mls qos interface &lt;ifname&gt; statistics</code> \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u0438\u043c\u0435\u043d\u0438 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0449\u0435\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430.</p> <p>\u0426\u0438\u0444\u0440\u044b \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u043e\u0434\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f, \u043d\u043e \u0437\u0430 \u043e\u0441\u043d\u043e\u0432\u0443 \u043c\u043e\u0436\u043d\u043e \u0431\u0440\u0430\u0442\u044c \u0442\u043e\u0442 \u0436\u0435 autoqos. \u041d\u0438\u043a\u0430\u043a\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u043f\u043e\u044f\u0441\u043d\u0435\u043d\u0438\u044f \u044f \u0434\u0430\u0442\u044c \u043d\u0435 \u043c\u043e\u0433\u0443. \u0411\u0443\u0434\u0443\u0442 \u0434\u0440\u043e\u043f\u044b \u2013 \u043d\u0430\u0434\u043e \u0431\u0443\u0434\u0435\u0442 \u043c\u0435\u043d\u044f\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b. \u041d\u0435 \u0431\u0443\u0434\u0435\u0442 \u2013 \u0432\u0441\u0435 \u0445\u043e\u0440\u043e\u0448\u043e. \u041d\u0438\u0436\u0435 \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043d\u0430\u044f \u043f\u0435\u0440\u0432\u0430\u044f \u043e\u0447\u0435\u0440\u0435\u0434\u044c, \u0432\u0442\u043e\u0440\u0430\u044f \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u0441 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u043c \u043e\u0431\u044a\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0445. \u0421\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e\u043f\u0430\u0434\u0435\u0442 \u0432 3-\u044e \u043e\u0447\u0435\u0440\u0435\u0434\u044c, \u0432\u0438\u0434\u0435\u043e - \u0432 4-\u044e. \u0412\u0442\u043e\u0440\u043e\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043e 60% \u0431\u0443\u0444\u0435\u0440\u0430. <pre><code>mls qos queue-set output 1 threshold 1 150 150 90 150\nmls qos queue-set output 1 threshold 2 400 400 100 400\nmls qos queue-set output 1 threshold 3 150 150 90 400\nmls qos queue-set output 1 threshold 4 150 150 50 400\nmls qos queue-set output 1 buffers 10 60 15 15\n</code></pre> Qos \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u043e\u0433\u0434\u0430, \u043a\u043e\u0433\u0434\u0430 \u0432\u0441\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u044b. \u0415\u0441\u043b\u0438 \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u044f\u0445 \u0431\u0443\u0434\u0443\u0442 \u0434\u0440\u043e\u043f\u044b, \u0442\u043e \u043d\u0443\u0436\u043d\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c qos, \u043f\u043e\u0434\u0443\u043c\u0430\u0442\u044c, \u0432\u043d\u0435\u0441\u0442\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0447\u0430\u0441\u0442\u044c dscp \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u043f\u043e \u0434\u0440\u0443\u0433\u0438\u043c \u043e\u0447\u0435\u0440\u0435\u0434\u044f\u043c, \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u0431\u0443\u0444\u0435\u0440\u044b \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439. \u0412\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 qos: <pre><code>SWITCH#(config)#mls qos\n</code></pre> \u041f\u0440\u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 qos \u0432\u0441\u0435 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0430 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043d\u0435 \u043d\u0443\u0436\u043d\u043e, \u043e\u043d\u0438 \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \"\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c\": <pre><code>SWITCH#(config)#no mls qos\n</code></pre> \u041f\u0435\u0440\u0435\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 dscp \u043f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u0438\u0442\u0438\u043a \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435. \u0415\u0441\u043b\u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u044d\u0442\u0443 \u043a\u043e\u043c\u0430\u043d\u0434\u0443, \u0442\u043e \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442. <pre><code>SWITCH#(config)#mls qos rewrite ip dscp\n</code></pre> \u041d\u0430 \u0432\u0441\u0435\u0445 \u0438\u043d\u0442\u0435\u0444\u0435\u0439\u0441\u0430\u0445 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c strict priority \u0434\u043b\u044f 1\u043e\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0438\u0437 dscp-output-q <pre><code>SWITCH#(config-if)# priority-queue out\n</code></pre> \u041f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0441 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u043c qos \u043d\u0435 \u0434\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043c\u0435\u0442\u043a\u0430\u043c. \u041d\u0430\u0434\u043e \u044d\u0442\u043e \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c. <pre><code>SWITCH#(config-if)# mls qos trust dscp\n</code></pre></p>"},{"location":"network/cisco_sw/#ip-pbx","title":"\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u043d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 IP-PBX","text":"<p>\u0415\u0441\u043b\u0438 \u043d\u0430\u0434\u043e \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0440\u0430\u0444\u0438\u043a, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0441 ip-pbx, \u0442\u043e \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f acl, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u043a\u043b\u0430\u0441\u0441\u0430\u0445, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 <pre><code>ip access-list extended rtp\npermit udp any range 10000 20000 any\nip access-list extended signaling\npermit tcp any any eq 5060\npermit udp any any eq 5060\npermit udp any eq 5060 any\npermit tcp any eq 5060 any\npermit udp any any eq 1720\npermit tcp any any eq 1720\n\nclass-map match-all MARK-SIGN\nmatch access-group name signaling\nclass-map match-all MARK-VOICE\nmatch access-group name rtp\n!\npolicy-map MARK-PBX\nclass MARK-VOICE\n  set dscp ef\nclass MARK-SIGN\n  set dscp cs3\nclass class-default\n</code></pre> \u041d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 ip-pbx \u043d\u0435\u0442 trust dscp. \u0422\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u0434\u043b\u044f \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u0442\u0440\u0430\u0444\u0438\u043a\u0430. <pre><code>SWITCH#sh run int gi1/0/22\ninterface GigabitEthernet1/0/22\ndescription IP-PBX\nswitchport access vlan 100\nswitchport mode access\npriority-queue out \nspanning-tree portfast edge\nspanning-tree bpdufilter enable\nservice-policy input MARK-PBX\n\nSWITCH#sh mls qos interface gi1/0/22\nGigabitEthernet1/0/22\nAttached policy-map for Ingress: MARK-PBX\ntrust state: not trusted\ntrust mode: not trusted\ntrust enabled flag: ena\nCOS override: dis\ndefault COS: 0\nDSCP Mutation Map: Default DSCP Mutation Map\nTrust device: none\nqos mode: port-based\n</code></pre> \u0412\u043e\u0442 \u0442\u0430\u043a \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0430\u043d\u0430\u043b\u0438\u0437 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u0438 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e, \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u0430\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u0435 \u0437\u0430 \u043e\u0447\u0435\u0440\u0435\u0434\u044f\u043c\u0438. \u041e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c, \u0447\u0442\u043e \u0432 \u044d\u0442\u043e\u043c \u0432\u044b\u0432\u043e\u0434\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u043d\u0443\u043c\u0435\u0440\u0443\u044e\u0442\u0441\u044f \u0441 0 ,\u0430 \u043d\u0435 \u0441 1. \u0412\u0438\u0434\u043d\u043e, \u0447\u0442\u043e \u043f\u043e \u0432\u0445\u043e\u0434\u0443 \u043d\u0435\u0442 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u0441 24 \u0438 46, \u0430 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0442\u0440\u0430\u0444\u0438\u043a (dscp 46) \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043f\u0440\u043e\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u0445 \u0438 \u043f\u043e\u043f\u0430\u0434\u0430\u0435\u0442 \u0432 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043d\u0443\u044e \u043e\u0447\u0435\u0440\u0435\u0434\u044c. <pre><code>SWITCH#sh mls qos interface gi1/0/22 statistics \nGigabitEthernet1/0/22 (All statistics are in packets)\n\n  dscp: incoming  \n-------------------------------\n\n  0 -  4 :     7510037            0            0            0            0  \n  5 -  9 :           0            0            0            0            0  \n 10 - 14 :           0            0            0            0            0  \n 15 - 19 :           0            0            0            0            0  \n 20 - 24 :           0            0            0            0            4  \n 25 - 29 :           0            0            0            0            0  \n 30 - 34 :           0            0            0            0            0  \n 35 - 39 :           0            0            0            0            0  \n 40 - 44 :           0            0            0            0            0  \n 45 - 49 :           0            2            0          114            0  \n 50 - 54 :         373            0          104            0         1479  \n 55 - 59 :           0            0            0            0            0  \n 60 - 64 :           0            0            0            0  \n  dscp: outgoing \n-------------------------------\n\n  0 -  4 :      125576            0            0            0            0  \n  5 -  9 :           0            0            0            0            0  \n 10 - 14 :           0            0       932963            0            0  \n 15 - 19 :           0            0            0            0            0  \n 20 - 24 :           0            0            0            0        31532  \n 25 - 29 :           0        32781            0            0            0  \n 30 - 34 :           0            0            0            0            0  \n 35 - 39 :           0            0            0            0            0  \n 40 - 44 :           0            0            0            0            0  \n 45 - 49 :           0      6364194            0          159            0  \n 50 - 54 :           0            0            0            0           94  \n 55 - 59 :           0            0            0            0            0  \n 60 - 64 :           0            0            0            0  \n  cos: incoming  \n-------------------------------\n\n  0 -  4 :     7512319            0            0            0            0  \n  5 -  7 :           0            0            0  \n  cos: outgoing \n-------------------------------\n\n  0 -  4 :      125883       932963            0        64313            0  \n  5 -  7 :     6364194          253          874  \n  output queues enqueued: \n\nqueue:    threshold1   threshold2   threshold3\n-----------------------------------------------\n queue 0:     6364193           0           0 \n queue 1:     1058845         121       23495 \n queue 2:       64272           0           0 \n queue 3:         253           0           0 \n\n  output queues dropped: \n queue:    threshold1   threshold2   threshold3\n-----------------------------------------------\n queue 0:           0           0           0 \n queue 1:           0           0           0 \n queue 2:           0           0           0 \n queue 3:           0           0           0 \n\nPolicer: Inprofile:            0 OutofProfile:            0\n</code></pre></p>"},{"location":"network/cisco_sw/#qos-4900m","title":"qos \u043d\u0430 4900M","text":"<p>\u041f\u043e\u043b\u0438\u0441\u0435\u0440\u044b \u0434\u043b\u044f \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438, \u043f\u043e\u043b\u0438\u0441\u0435\u0440\u044b \u0434\u043b\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u043e\u0441\u044b \u0432 \u043a\u043b\u0430\u0441\u0441\u0435 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438\u043d\u0430\u0447\u0435 <pre><code>vlan configuration 100\n  service-policy output MARK\nvlan configuration 200,300\n  service-policy input LIMIT\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <code>sh policy-map vlan</code></p>"},{"location":"network/cisco_sw/#eem-high-cpu","title":"eem high cpu","text":"<p>\u041e\u0442 cisco tac  <pre><code>process cpu threshold type total rising 60 interval 5\n\nevent manager applet HIGH_CPU\nevent syslog pattern \"CPURISINGTHRESHOLD\"\naction 0.0 syslog msg \"High CPU Detected\"\naction 0.1 cli command \"enable\"\naction 0.2 cli command \"show clock | append nvram:HIGHCPU.txt\"\naction 0.2 cli command \"show process cpu sort | append nvram:HIGHCPU.txt\"\naction 0.2 cli command \"debug platform packet all receive\"\naction 0.3 cli command \"show platform cpu packet buffered | append nvram:HIGHCPU.txt\"\naction 0.4 cli command \"show ip arp | append nvram:HIGHCPU.txt\"\naction 0.9 cli command \"show platform cpu packet statistics | append nvram:HIGHCPU.txt\"\naction 0.9 cli command \"undebug all\"\naction 1.1 cli command \"end\"\n</code></pre></p>"},{"location":"network/dhcpsnooping/","title":"DHCP snooping","text":"<p>\u0415\u0441\u0442\u044c \u0440\u044f\u0434 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u044b\u0445 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u043d\u043e\u0433\u0434\u0430 \u043d\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b dhcp-snooping \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445. \u042d\u0442\u0430\u043f\u044b \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f ip-\u0430\u0434\u0440\u0435\u0441\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u043c \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0432\u044b\u0433\u043b\u044f\u0434\u044f\u0442 \u043a\u0430\u043a-\u0442\u043e \u0442\u0430\u043a: <pre><code>CLIENT -&gt; DHCPDISCOVER\nSERVER -&gt; DHCPOFFER\nCLIENT -&gt; DHCPREQUEST\nSERVER -&gt; DHCPACK\n</code></pre></p> <p>Dhcp-snooping \u043d\u0443\u0436\u0435\u043d \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u0447\u0442\u043e\u0431\u044b:</p> <ul> <li>\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u0432\u0435\u0442\u044b dhcp-\u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 (DHCPOFFER) \u0441 \u043d\u0435\u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u0440\u0442\u043e\u0432;</li> <li>\u0441\u043b\u0435\u0434\u0438\u0442\u044c \u0437\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c\u0438 \u0441 \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u0440\u0442\u043e\u0432 \u0438 \u0432\u0441\u0435 \u043e\u0442\u0432\u0435\u0442\u044b \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0430\u0437\u0435 \u0441 \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u043e\u0439 \u043a \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c\u0443 \u043f\u043e\u0440\u0442\u0443, vlan'\u0443, \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c \u0438\u0437 \u0431\u0430\u0437\u044b \u043f\u0440\u0438 \u0438\u0441\u0442\u0435\u0447\u0435\u043d\u0438\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 leased time.</li> </ul> <p>\u0411\u0430\u0437\u0430 dhcp-snooping'\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0442\u0430\u043a\u0438\u0445 \u0444\u0438\u0447 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u043a\u0430\u043a:</p> <ul> <li>dynamic arp inspection (DAI). \u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 DAI \u0441 \u043d\u0435\u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u0440\u0442\u043e\u0432 \u0440\u0430\u0437\u0440\u0435\u0448\u0430\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e arp-\u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043e\u0442 \u0445\u043e\u0441\u0442\u0430, \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0435\u0441\u0442\u044c \u0432 \u0431\u0430\u0437\u0435. \u0415\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0442\u044c rate-limit \u0434\u043b\u044f arp \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u043f\u043e\u0440\u0442\u0443.</li> <li>ip source guard. \u041f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u0444\u0438\u0447\u0438 \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u0431\u0443\u0434\u0435\u0442 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 ip,mac,vlan \u0434\u0430\u043d\u043d\u044b\u043c \u0432 \u0431\u0430\u0437\u0435.</li> </ul> <p>\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043d\u0442\u0435\u0440\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b bootp, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u043e\u043c dhcp-snooping \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f. bootp \u0438 dhcp - \u0440\u0430\u0437\u043d\u044b\u0435 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u044b. \u0417\u0430\u043f\u0440\u043e\u0441\u044b bootp \u0432 \u0431\u0430\u0437\u0443 \u043d\u0435 \u043f\u043e\u043f\u0430\u0434\u0443\u0442 \u0438 \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u044b DAI, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c bootp \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u0435\u0442\u0435\u0432\u043e\u0433\u043e \u043f\u0440\u0438\u043d\u0442\u0435\u0440\u0430. \u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u041f\u041e \u0434\u043b\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430, \u0431\u0430\u0437\u0430 \u043c\u043e\u0436\u0435\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438 \u0438\u043b\u0438 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e \u0432 \u044d\u043d\u0435\u0440\u0433\u043e\u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438 (\u0444\u043b\u0435\u0448\u043a\u0435) \u0432 \u0432\u0438\u0434\u0435 \u0444\u0430\u0439\u043b\u0430, \u0438\u043b\u0438 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u043c tftp-\u0441\u0435\u0440\u0432\u0435\u0440\u0435. \u0415\u0441\u043b\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438, \u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044b dai \u0438 ip source guard \u043d\u0435\u043b\u044c\u0437\u044f, \u0442\u0430\u043a \u043a\u0430\u043a \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0431\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0431\u0443\u0434\u0435\u0442 \u043f\u0443\u0441\u0442\u0430 \u0438 \u0432\u0441\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0441 \u043d\u0435\u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u0440\u0442\u043e\u0432 dai \u0438 \u0441 \u043f\u043e\u0440\u0442\u043e\u0432, \u0433\u0434\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d ip source guard, \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u0431\u0440\u043e\u0448\u0435\u043d\u044b. \u0415\u0441\u043b\u0438 \u0431\u0430\u0437\u0430 \u043f\u0438\u0448\u0435\u0442\u0441\u044f \u043d\u0430 \u0444\u043b\u0435\u0448\u043a\u0443 \u0438\u043b\u0438 tftp, \u0442\u043e \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043c\u0435\u043d\u044c\u0448\u0435. \u041f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 dhcp-snooping,  dynamic arp inspection, ip source guard \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d \u0440\u0435\u0441\u0443\u0440\u0441 CPU \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430, \u0430\u043f\u043f\u0430\u0440\u0430\u0442\u043d\u044b\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b tcam, \u0442.\u043a \u0432\u0441\u0435 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0435 - \u044d\u0442\u043e acl.</p>"},{"location":"network/distkontrol/","title":"Device DistKontrol","text":"<p>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f v3. \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439. \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0435:</p> name data url http://www.distkontrol.ru/img/distkontrolusb.img verison 3.15.4 sha1 <code>91bedff9f168d4ac70be154b6c20865bbc943b69</code>"},{"location":"network/distkontrol/#usbip","title":"usbip","text":"<p>\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430 <pre><code>wget http://[usbip]/client/dkclientx86_64\n</code></pre></p> <p>\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 elrepo \u0432 centos 8 <pre><code>rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\nyum install https://www.elrepo.org/elrepo-release-8.el8.elrepo.noarch.rpm\n</code></pre></p>"},{"location":"network/eltex/","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 eltex 23xx","text":"<p>\u0432 2018-2020 \u0431\u044b\u043b\u043e \u0434\u0435\u043b\u043e</p>"},{"location":"network/eltex/#firmware-update","title":"firmware update","text":"<p>\u0414\u043b\u044f \u043c\u043e\u0434\u0435\u043b\u0435\u0439 23\u0445\u0445 \u0438 33\u0445\u0445 \u0441\u0435\u0439\u0447\u0430\u0441 \u0432\u044b\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043e\u0434\u043d\u0430 \u0432\u0435\u0440\u0441\u0438\u044f \u041f\u041e, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b. \u0414\u043b\u044f \u0441\u0442\u0435\u043a\u0430 \u0432\u0441\u0451 \u0442\u043e \u0436\u0435. <pre><code>boot system tftp://10.9.8.7/mes3300-4xx.ros\n</code></pre> \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e <code>sh bootvar</code>. \u041d\u043e\u0432\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0441\u043b\u0435 reload. \u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u044f \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u0442\u0430\u0440\u043e\u0439 \u0432\u0435\u0440\u0441\u0438\u0438, \u0430 \u043d\u0435 \u043d\u043e\u0432\u043e\u0439. \u041d\u0435 \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043d\u0430 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u044f, \u043a\u0430\u043a \u043d\u0430 \u0447\u0430\u0441\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f. \u041f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0447\u0435\u0440\u0435\u0437 \u0441\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u044b\u0439 \u043a\u0430\u043d\u0430\u043b \u043d\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u043c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0435\u0433\u043e \u0447\u0435\u0440\u0435\u0437 tftp \u0438\u043b\u0438 \u0432\u0435\u0431-\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441. \u041d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u043d\u0430\u0434\u0435\u0436\u043d\u044b\u043c \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u043c \u043e\u043a\u0430\u0437\u0430\u043b\u043e\u0441\u044c \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0438 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 2300-\u0441\u0435\u0440\u0438\u0438 \u043f\u043e ssh <pre><code>boot system scp://user:password@10.9.8.7/mes3300-4013-1R2.ros\n</code></pre> \u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 4 \u0447\u0430\u0441\u043e\u0432 \u0434\u043b\u044f rtt ~ 600ms. \u041a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 dual boot \u0438 \u0432\u043d\u043e\u0432\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0439 \u0441\u043e\u0444\u0442 \u0431\u0443\u0434\u0435\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439. \u0412 \u044d\u0442\u043e\u043c \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u043d\u0435 \u043e\u043f\u0430\u0441\u0430\u0442\u044c\u0441\u044f \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u0438\u0442\u0430\u043d\u0438\u044f \u043d\u0430 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0438 \u043e\u0431\u0440\u044b\u0432\u0430 \u0441\u0435\u0441\u0441\u0438\u0438 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u041f\u041e. \u0414\u043b\u044f \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f \u043d\u0438\u0436\u0435 \u0440\u0430\u0437\u043c\u0435\u0440 \u041f\u041e \u0432 \u0431\u0430\u0439\u0442\u0430\u0445 \u0434\u043b\u044f eltex \u0438 \u0434\u043b\u044f cisco 3850 <pre><code>25168175 mes3300-4013-1R2.ros\n404622964 cat3k_caa-universalk9.16.06.05.SPA.bin\n</code></pre></p>"},{"location":"network/eltex/#negotiation","title":"negotiation","text":"<p>\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u0440\u043e duplex mismatch \u043d\u0430 \u043e\u043f\u0442\u0438\u043a\u0435. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043e\u0448\u0438\u0431\u043a\u0438 \u043d\u0430 \u043b\u0438\u043d\u043a\u0435, \u0442.\u043a. \u043f\u043e\u043b\u0443\u0434\u0443\u043f\u043b\u0435\u043a\u0441 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 cisco 3560 \u0441 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u043c 100\u043c\u0431\u0438\u0442/\u0441 \u0442\u0440\u0430\u043d\u0441\u0438\u0432\u0435\u0440\u043e\u043c <pre><code>cisco3560#sh int GigabitEthernet0/1\nGigabitEthernet0/1 is up, line protocol is up (connected) \n  Hardware is Gigabit Ethernet, address is \n  Half-duplex, 100Mb/s, link type is auto, media type is 100BaseBX-10D SFP\n\u0421 \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u0441\u0442\u043e\u0438\u0442 Eltex, \u0443 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0442\u043e\u0436\u0435 \u043e\u0448\u0438\u0431\u043a\u0438 \u043d\u0430 \u043f\u043e\u0440\u0442\u0443.\n974395770 packets input, 234551040866 bytes received\n      1248389 broadcasts, 0 multicasts\n      6734584 input errors, 4459185 FCS, 0 alignment\n</code></pre> \u0421\u0442\u0430\u0442\u0443\u0441 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 eltex'\u0430 <pre><code>gigabitethernet 2/0/20 is up (connected)\n  Interface index is 176\n  Hardware is gigabitethernet, MAC address is\n  Interface MTU is 10218\n  Full-duplex, 100Mbps, link type is 100Mbps none-duplex, media type is 100M-Fiber\n</code></pre> \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u0440\u043e \u0430\u0432\u0442\u043e\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435, \u043a\u043e\u0433\u0434\u0430 SFP \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u0432 SFP+ \u043f\u043e\u0440\u0442 \u0432 \u043e\u0431\u043e\u0438\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 Eltex. \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u043e \u043f\u0440\u0438\u0435\u043c\u0443 \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442, \u043b\u0438\u043d\u043a\u0430 \u043d\u0435\u0442, \u043f\u043e\u0440\u0442 \u0444\u043b\u0430\u043f\u0430\u0435\u0442. \u0421\u0438\u0442\u0443\u0430\u0446\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0442\u0438 \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438. \u0413\u043e\u0432\u043e\u0440\u044f\u0442 \u043f\u043e\u043f\u0440\u0430\u0432\u0438\u043b\u0438. \u041a\u0430\u043a \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u044f\u043b: <pre><code>interface tengigabitethernet1/0/1\n speed 1000\n no negotiation bypass\n</code></pre> \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0445\u043e\u0436\u0435\u0435 \u0431\u044b\u043b\u043e \u043d\u0430 \u043b\u0438\u043d\u043a\u0435 \u0441 WDM SFP Dlink'\u0430 \u0432 des-3452 \u0432 SFP+ \u043f\u043e\u0440\u0442\u0443 \u0438 \u0441 WDM SFP \u0432 des-3600 \u0432 SFP+ \u043f\u043e\u0440\u0442\u0443. \u041f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 3452 \u043b\u0438\u043d\u043a \u043f\u0440\u043e\u043f\u0430\u043b, \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u043d\u0435\u0442 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043d\u0430 \u043f\u043e\u0440\u0442\u0443.</p> <p>\u0412\u044b\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0433\u0438\u0433\u0430\u0431\u0438\u0442\u043d\u043e\u043c \u043f\u043e\u0440\u0442\u0443 \u0430\u0432\u0442\u043e\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0434\u043b\u044f 10\u043c\u0431\u0438\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c. <pre><code>interface gigabitethernet1/0/1\n negotiation 10f\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>eltex#sh int gi1/0/1 | in link\n  Full-duplex, 10Mbps, link type is auto, media type is 1G-Copper\n  Advertised link modes: 10baseT/Full  \n</code></pre></p>"},{"location":"network/eltex/#trunk-access-qinq","title":"trunk, access, qinq","text":"<p>trunk, \u0432\u0441\u0435 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e <pre><code>interface tengigabitethernet1/0/2\n switchport mode trunk\n switchport forbidden default-vlan\n</code></pre> trunk, \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u044b \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 vlan \u0438 \u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 <pre><code>interface tengigabitethernet1/0/2\n switchport mode trunk\n switchport trunk allowed vlan add 10-20,110-120,200\n</code></pre> general, \u0433\u0434\u0435 120 - \u0431\u0435\u0437 \u0442\u0435\u0433\u0430, 110 \u0441 \u0442\u0435\u0433\u043e\u043c. \u0414\u043b\u044f voice vlan. <pre><code>interface gigabitethernet1/0/1\n switchport mode general\n switchport general allowed vlan add 110 tagged\n switchport general allowed vlan add 120 untagged\n switchport general pvid 120\n</code></pre> access <pre><code>interface gigabitethernet1/0/1\n switchport access vlan 10\n</code></pre> qinq \u043d\u0443\u0436\u0435\u043d mtu, \u0442.\u043a. \u0434\u043e\u043f \u0442\u0435\u0433 \u044d\u0442\u043e 4 \u0431\u0430\u0439\u0442\u0430. <pre><code>port jumbo-frame\n!\ninterface gigabitethernet1/0/1\n switchport mode customer\n switchport customer vlan 20\n</code></pre></p>"},{"location":"network/eltex/#vlan","title":"vlan","text":"<p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 <code>vlan 9 name nine</code> \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0432 \u0432\u0438\u0434\u0435 \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0448\u0435\u043d\u0430 <pre><code>interface vlan 9\n name nine\nexit\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <code>sh vlan tag 9</code>, <code>sh vlan</code></p>"},{"location":"network/eltex/#spanning-tree","title":"spanning-tree","text":"<p>mstp <pre><code>spanning-tree mode mst\nspanning-tree bpdu filtering\nspanning-tree mst configuration\n instance 1 vlan 1-4094\n name abc\n revision 1\nexit\nspanning-tree bpdu filtering\n</code></pre> \u0432\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u043e\u0432\u0441\u0435\u043c <pre><code>no spanning-tree\nspanning-tree bpdu filtering\n</code></pre> \u0415\u0441\u043b\u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442 pvst bpdu, \u0442\u043e \u043f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u0442 \u043f\u043e\u0440\u0442 \u0432 \u0440\u0435\u0436\u0438\u043c \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0441 pvst. pvst \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 63 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0430, \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0438 \u0432\u043e\u043e\u0431\u0449\u0435 \u0442\u0430\u043c \u043c\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439. \u041a\u043e\u043b-\u0432\u043e \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u043e\u0432 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 cpu. \u0415\u0441\u043b\u0438 \u043d\u0435\u0442 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u044b\u0445 \u043b\u0438\u043d\u043a\u043e\u0432 \u0441 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u043c cisco, \u0442\u043e stp \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 \u0432\u044b\u043a\u043b\u044e\u0447\u0430\u044e.</p> <p>bpdu filtering \u043d\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u0442 pvst bpdu, \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u0442 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 bpdu.</p> <p>bpdu guard \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e. \u0412\u043c\u0435\u0441\u0442\u043e \u044d\u0442\u043e\u0433\u043e \u0435\u0441\u0442\u044c loopback-detection, \u0430 \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 stp \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d. portfast \u043d\u0435 \u043d\u0443\u0436\u0435\u043d \u043f\u043e \u044d\u0442\u043e\u0439 \u0436\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0435.</p> <p>guard loop \u043d\u0430 \u043b\u0438\u043d\u043a\u0430\u0445 \u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u043c\u0438, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d mstp.</p>"},{"location":"network/eltex/#qos","title":"qos","text":"<p>\u0412 4-\u043e\u0439 \u0432\u0435\u0442\u043a\u0435 \u041f\u041e \u0438 \u0432 2324P, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \"\u0434\u043e\u0432\u0435\u0440\u044f\u0435\u0442\" \u043c\u0435\u0442\u043a\u0430\u043c dscp. <pre><code>eltex-2324#sh qos \nQos: Basic mode\nBasic trust: dscp\nCoS to DSCP mapping: disabled\nDSCP to CoS mapping: disabled\n</code></pre> \u0414\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0440\u0435\u0434\u043a\u0430\u044f \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u043d\u0435\u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432, \u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u043c\u0438\u043c\u043e \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e qos \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0435\u0449\u0435 \u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443. \"\u0421\u0442\u0430\u0440\u0430\u044f\" \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439 \u0442\u043e\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442. \u0414\u043b\u044f \u0435\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c map'\u044b, \u0442.\u043a. EF \u043f\u043e\u043f\u0430\u0434\u0430\u0435\u0442 \u0432 \u0440\u0430\u0437\u043d\u044b\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u043d\u0430\u0434\u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e. <pre><code>eltex-3324#sh qos map dscp-queue \nDscp-queue map:\n     d1 : d2 0  1  2  3  4  5  6  7  8  9\n     -------------------------------------\n      0 :   01 01 01 01 01 01 01 01 01 02\n      1 :   02 02 02 02 02 02 06 03 03 03\n      2 :   03 03 03 03 06 04 04 04 04 04\n      3 :   04 04 07 05 05 05 05 05 05 05\n      4 :   06 07 07 07 07 07 07 07 06 06\n      5 :   06 06 06 06 06 06 06 06 06 06\n      6 :   06 06 06 06\neltex-2324#sh qos map dscp-queue \nDscp-queue map:\n     d1 : d2 0  1  2  3  4  5  6  7  8  9\n     -------------------------------------\n      0 :   02 01 01 01 01 01 01 01 01 03\n      1 :   03 03 03 03 03 03 07 04 04 04\n      2 :   04 04 04 04 07 05 05 05 05 05\n      3 :   05 05 07 06 06 06 06 06 06 06\n      4 :   07 08 08 08 08 08 08 08 07 07\n      5 :   07 07 07 07 07 07 07 07 07 07\n      6 :   07 07 07 07\n</code></pre> \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 strict priority \u0434\u043b\u044f \u043a\u0440\u0430\u0439\u043d\u0435\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438, \u043a\u0443\u0434\u0430 \u043f\u043e\u043f\u0430\u0434\u0430\u0435\u0442 dscp 46 <pre><code>priority-queue out num-of-queues 1\n</code></pre> \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438, \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043a\u043e\u0442\u043e\u0440\u043e\u0439, \u043a\u0441\u0442\u0430\u0442\u0438, \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u043f\u043e snmp. \u0414\u043b\u044f 3324 \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 7, \u0430 \u0434\u043b\u044f 2324 \u0431\u0443\u0434\u0435\u0442 8. <pre><code>qos statistics queues 1 8 all all\nqos statistics queues 2 1 all all\n</code></pre> \u0427\u0442\u043e\u0431\u044b \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u043b\u0430\u0441\u044c \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0435\u0435. <pre><code>qos statistics interface\n</code></pre> \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u0435\u0440\u0432\u043e\u0435 \u0438 \u0432\u0442\u043e\u0440\u043e\u0435 <pre><code>eltex-2324#sh qos statistics \n\nPolicers \n-------- \n\n Interface   Policy map  Class Map In-profile bytes  Out-of-profile bytes \n----------- ------------ --------- ----------------- -------------------- \n\n\nAggregate Policers\n------------------ \n\n       Name         In-profile bytes  Out-of-profile bytes \n------------------- ----------------- -------------------- \n\n\nOutput Queues\n------------- \n\n  Interface      Queue      Dp    Total packets   TD packets   \n------------- ------------ ----- --------------- ------------- \n     All           8       Low      56729052           0       \n     All           1       Low      387446539          0       \n\neltex-2324#sh int te1/0/4\ntengigabitethernet1/0/4 is up (connected)\n  Interface index is 108\n  Hardware is tengigabitethernet, MAC address is e0:d9:e3:e7:59:5c\n  Interface MTU is 1500\n  Full-duplex, 1000Mbps, link type is 10000Mbps full-duplex, media type is 10G-Fiber\n  Link is up for 20 days, 23 hours, 29 minutes and 15 seconds\n  Flow control is off, MDIX mode is off\n  15 second input rate is 5561 Kbit/s\n  15 second output rate is 999 Kbit/s\n      753544120 packets input, 838942350541 bytes received\n      13645818 broadcasts, 16798613 multicasts\n      0 input errors, 0 FCS, 0 alignment\n      0 oversize, 0 internal MAC\n      0 pause frames received\n      384858748 packets output, 127715629000 bytes sent\n      1226637 broadcasts, 2273150 multicasts\n      0 output errors, 0 collisions\n      0 excessive collisions, 0 late collisions\n      0 pause frames transmitted\n      0 symbol errors, 0 carrier, 0 SQE test error\n  Output queues: (queue #: packets passed/packets dropped)\n      1: 418380/0\n      2: 1500378/0                                    \n      3: 0/0\n      4: 0/0\n      5: 0/0\n      6: 0/0\n      7: 24251/0\n      8: 0/0\n</code></pre></p>"},{"location":"network/eltex/#advanced-qos","title":"advanced qos","text":"<p>\u041d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u0435\u0441\u0442\u044c \u0434\u0432\u0430 \u0440\u0435\u0436\u0438\u043c\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 qos: basic \u0438 advanced. \u041e \u0442\u043e\u043c, \u043a\u0430\u043a \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f qos \u043d\u0430 eltex mes \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 basic \u043f\u0438\u0441\u0430\u043b \u0440\u0430\u043d\u0435\u0435. \u0415\u0441\u043b\u0438 \u0441\u0442\u043e\u0438\u0442 \u0437\u0430\u0434\u0430\u0447\u0430 \u0440\u0430\u0441\u043a\u0440\u0430\u0441\u0438\u0442\u044c \u0442\u0440\u0430\u0444\u0438\u043a \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u043e\u0439, \u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 qos advanced \u0438 \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0430\u0440\u0443 \u0432\u0435\u0449\u0435\u0439:</p> <ul> <li>\u0412 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430\u0445 \u043d\u0435\u0442 class-default, \u043a\u0443\u0434\u0430 \u043f\u043e\u043f\u0430\u0434\u0430\u0435\u0442 \u0432\u0435\u0441\u044c \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u0440\u0430\u0444\u0438\u043a, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0435\u0433\u043e \u043d\u0430\u0434\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0430\u043c\u043e\u043c\u0443.</li> <li>\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u0440\u0435\u0436\u0438\u043c\u0430 advanced \u0432 basic \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044e \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a \u0438\u0437 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438.</li> <li>\u041a\u043e\u043c\u0430\u043d\u0434\u044b qos advanced ports-trusted \u0438 qos advanced \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0432\u0437\u0430\u0438\u043c\u043e\u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u043c\u0438, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u0432\u044b\u0432\u043e\u0434 show qos. <pre><code>qos advanced ports-trusted\nqos advanced-mode trust dscp\neltex2300#show qos\nQos: Advanced mode\nAdvanced mode trust type: dscp\nAdvanced mode ports state: Trusted\nCoS to DSCP mapping: disabled\nDSCP to CoS mapping: disabled\n</code></pre> Acl, \u043a\u043b\u0430\u0441\u0441\u044b \u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430. \u0412\u0441\u0435 \u043a\u0430\u043a \u0443 cisco, \u043a\u0440\u043e\u043c\u0435 class-default. \u041d\u0438\u0436\u0435 \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u043e\u0439 \u0431\u0443\u0434\u0435\u0442 \u043a\u0440\u0430\u0441\u0438\u0442\u0441\u044f \u0442\u0440\u0430\u0444\u0438\u043a \u0434\u043e \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0418\u043c\u044f \u043a\u043b\u0430\u0441\u0441\u0430 all \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u0432 \u043a\u0430\u0432\u044b\u0447\u043a\u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u043e\u043c, \u0442.\u043a. \u0441\u043a\u043e\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u044f \u0432\u044b\u0431\u0440\u0430\u043b \u043d\u0435\u0443\u0434\u0430\u0447\u043d\u043e\u0435. <pre><code>ip access-list extended mark\n permit tcp any any any 3389 ace-priority 20\nexit\n!\nip access-list extended \"all\"\n permit ip any any any any ace-priority 20\nexit\n!\nclass-map mark\n match access-group mark\nexit\n!\nclass-map all\n match access-group all\nexit\n!\npolicy-map mark\n class mark\n  set dscp 16\n exit\n class all\n exit\nexit\n</code></pre> \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043a \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443 <pre><code>interface gigabitethernet1/0/1\n service-policy input mark\n</code></pre> \u0427\u0442\u043e\u0431\u044b \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u043b\u0430\u0441\u044c \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0435\u0435. <pre><code>qos statistics interface\n</code></pre> \u041f\u0430\u043a\u0435\u0442 \u0441 dscp 16 \u043f\u043e\u043f\u0430\u0434\u0435\u0442 \u0432 7 \u043e\u0447\u0435\u0440\u0435\u0434\u044c <pre><code>eltex2300#sh qos map dscp-queue\nDscp-queue map:\n     d1 : d2 0  1  2  3  4  5  6  7  8  9\n     -------------------------------------\n      0 :   02 01 01 01 01 01 01 01 01 03\n      1 :   03 03 03 03 03 03 07 04 04 04\n      2 :   04 04 04 04 07 05 05 05 05 05\n      3 :   05 05 07 06 06 06 06 06 06 06\n      4 :   07 08 08 08 08 08 08 08 07 07\n      5 :   07 07 07 07 07 07 07 07 07 07\n      6 :   07 07 07 07\n\neltex2300#sh int gi1/0/24\ngigabitethernet1/0/24 is up (connected)\n[skip]\n  Output queues: (queue #: packets passed/packets dropped)\n      1: 13949119/0\n      2: 18046/0\n      3: 0/0\n      4: 0/0\n      5: 0/0\n      6: 9/0\n      7: 109083/0\n      8: 2442/0\n</code></pre></li> </ul>"},{"location":"network/eltex/#voice-vlan","title":"voice vlan","text":"<p>\u0412 4-\u043e\u0439 \u0432\u0435\u0442\u043a\u0435 \u041f\u041e \u0434\u043b\u044f 2324P \u043c\u0430\u043b\u043e \u0447\u0442\u043e \u043f\u043e\u043c\u0435\u043d\u044f\u043b\u043e\u0441\u044c \u0432 \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0438 \u0441 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u043f\u043e\u0440\u0442\u0430 \u0432 MES2124P. \u0412 4.0.10.1 \u0432\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e, \u043d\u043e \u043f\u043e\u0447\u0435\u043c\u0443-\u0442\u043e \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0434\u043e \u0441\u0438\u0445 \u043f\u043e\u0440 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e oui. \u041d\u0438\u0436\u0435 110 - \u044d\u0442\u043e \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0439 vlan, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0442\u0434\u0430\u0435\u0442\u0441\u044f \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0449\u0435\u043c\u0443 lldp-med. <pre><code>lldp med network-policy 1 voice vlan 110 vlan-type tagged\nlldp med network-policy 2 voice-signaling vlan 110 vlan-type tagged\nlldp med network-policy 3 video-conferencing vlan 110 vlan-type tagged\n\ninterface gigabitethernet1/0/1\n switchport mode general\n switchport general allowed vlan add 110 tagged\n switchport general allowed vlan add 100 untagged\n switchport general pvid 100                          \n lldp optional-tlv sys-cap\n lldp optional-tlv 802.1 pvid enable\n lldp optional-tlv 802.1 vlan-name add 110\n lldp med enable network-policy poe-pse\n lldp med network-policy add 1\n lldp med network-policy add 2\n lldp med network-policy add 3\n</code></pre> \u0415\u0441\u043b\u0438 \u043f\u043e \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u043f\u043e poe, \u0430 \u043a\u0430\u0431\u0435\u043b\u044c \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435, \u0442\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0438 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u0432 \u0442\u0435\u0445\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443. <pre><code>eltex-2324#sh power inline gi1/0/10\n\nInterface    Admin       Oper         Power (W)     Class     Device     Priority \n---------- ---------- ----------- ----------------- ----- -------------- -------- \ngi1/0/10   Auto       On          1.900             2                    low      \n\n\nPort Status:               Port is on. Valid resistor detected\nPort standard:             802.3AT\nAdmin power limit (for port power-limit mode): 30.0   watts\nTime range:\nLink partner standard:     802.3AF\nOperational power limit:   7.0   watts\nSpare pair:                Disabled\nNegotiated power:          0 watts (None)\nCurrent (mA):              35\nVoltage(V):                54.285\nOverload Counter:          0 \nShort Counter:             0 \nDenied Counter:            0 \nAbsent Counter:            0 \nInvalid Signature Counter: 511 \n</code></pre></p>"},{"location":"network/eltex/#copp","title":"copp","text":"<p>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0443 \u0445\u043e\u0440\u043e\u0448\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e. <pre><code>management access-list mgmt\n deny service http\n deny service https\n permit ip-source 10.9.8.0 mask 255.255.255.0 service snmp\n permit ip-source 10.9.8.0 mask 255.255.255.0 service telnet\n permit ip-source 10.9.8.0 mask 255.255.255.0 service ssh\nexit\n!\nmanagement access-class mgmt\n</code></pre></p>"},{"location":"network/eltex/#stack","title":"stack","text":"<p>\u0414\u043b\u044f \u0441\u0442\u0435\u043a\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0432\u0430 \u043f\u043e\u0440\u0442\u0430 \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435, dac-\u043a\u0430\u0431\u0435\u043b\u0438 \u0434\u043b\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u0440\u0442\u043e\u0432. <pre><code>console(config)#stack configuration links te 3-4\n</code></pre> \u0422\u043e\u0442 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0441\u0442\u0435\u0440\u043e\u043c, \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u043e\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 10 \u043c\u0438\u043d\u0443\u0442. \u041f\u043e\u0441\u043b\u0435 \u0447\u0435\u0433\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0438\u0442\u0430\u043d\u0438\u0435 \u043d\u0430 \u0432\u0442\u043e\u0440\u043e\u043c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0441\u0442\u0435\u043a\u0430 \u0438 \u043f\u043e\u0434\u043e\u0436\u0434\u0430\u0442\u044c \u043f\u043e\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0441\u043e\u0444\u0442 \u0441 \u043c\u0430\u0441\u0442\u0435\u0440\u0430. \u0423\u0434\u043e\u0431\u043d\u043e, \u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0442\u044c \u0432\u0435\u0440\u0441\u0438\u044e \u041f\u041e \u0434\u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0441\u0432\u0438\u0447\u0430 \u0432 \u0441\u0442\u0435\u043a. <pre><code>eltex-3324#sh stack \n\nTopology is Chain\n\nUnit Id     MAC Address       Role   \n------- ------------------- -------- \n   1     e0:d9:e3:d9:55:40   master  \n   2     e0:d9:e3:d9:6c:40   backup  \neltex-3324#sh stack links \n\nTopology is Chain\n\nUnit Id     Active Links        Neighbor Links    Operational     Down/Standby     \n                                                  Link Speed      Links            \n------- -------------------- -------------------- ----------- -------------------- \n1       te1/0/3-4            te2/0/3-4            10G                              \n2       te2/0/3-4            te1/0/3-4            10G                              \n</code></pre></p>"},{"location":"network/eltex/#span-qinq","title":"span, qinq","text":"<p>\u0414\u043b\u044f \u0432\u0435\u0440\u0441\u0438\u0438 4.\u0445. \u0412 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0435\u0441\u0442\u044c \u043f\u043e\u043d\u044f\u0442\u0438\u044f \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u0443\u0435\u043c\u043e\u0433\u043e \u0438 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e \u043f\u043e\u0440\u0442\u0430. \u041a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u0443\u044e\u0449\u0438\u0439, \u043a\u0443\u0434\u0430 \u0441\u043b\u0438\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 (MONITOR), \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u0438\u043d. \u041d\u0430\u0434\u043e \u0431\u043e\u043b\u044c\u0448\u0435 \u0447\u0435\u043c \u043e\u0434\u0438\u043d. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0435\u0441\u0442\u044c qinq. \u041f\u043e\u0440\u0442\u044b 1 \u0438 2 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u044b \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438 \u043a\u0430\u0431\u0435\u043b\u0435\u043c. \u0422.\u043a. qinq, \u0442\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c mtu <pre><code>port jumbo-frame\n!\nno mac address-table learning vlan 666\n!\ninterface gigabitethernet1/0/1\n description LOOP\n switchport mode customer\n switchport customer vlan 666\nexit\n!\ninterface gigabitethernet1/0/2\n description MONITOR\n port monitor vlan 2\n port monitor vlan 100\nexit\n!\ninterface gigabitethernet1/0/3\n description DST1\n switchport mode customer\n switchport customer vlan 666\nexit\n!\ninterface gigabitethernet1/0/4\n description DST2\n switchport mode customer\n switchport customer vlan 666\nexit\n\neltex#sh ports monitor \n\nPort monitor mode: monitor-only\n    RSPAN configuration\nRX: not configured\nTX: not configured\n\nSource Port Destination Port  Type     Status    RSPAN   \n----------- ---------------- ------- ---------- -------- \n  VLAN 2        gi1/0/2        N/A     active   Disabled \n VLAN 100       gi1/0/2        N/A     active   Disabled \n</code></pre></p>"},{"location":"network/eltex/#jumbo-frame","title":"jumbo frame","text":"<p>\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 <pre><code>port jumbo-frame\n</code></pre></p>"},{"location":"network/eltex/#aaa","title":"aaa","text":"<p>\u0422\u043e\u043b\u044c\u043a\u043e tacacs, \u0430 \u0435\u0441\u043b\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d, \u0442\u043e \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0443\u0447\u0435\u0442\u043a\u0430 <pre><code>aaa authentication mode break\n</code></pre> \u041e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0435 <pre><code>aaa accounting commands stop-only group tacacs+\naaa authentication login authorization default tacacs local\naaa authentication enable default tacacs enable\n</code></pre> \u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0435 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442\u0441\u044f \u0438\u0437 <code>tacacs-server host 10.9.9.9 key xx</code> \u0432 <pre><code>encrypted tacacs-server host 10.9.9.9 key &lt;hash&gt;\n</code></pre></p> <p>\u0414\u043b\u044f \u0440\u0430\u0434\u0438\u0443\u0441\u0430 <pre><code>radius-server key xx\nradius-server host 10.9.9.9\naaa authentication login authorization default radius local\n</code></pre></p>"},{"location":"network/eltex/#ntp","title":"ntp","text":"<p><pre><code>clock timezone KRSK +7\nclock source sntp\n!\nsntp client poll timer 60\nsntp unicast client enable\nsntp unicast client poll\nsntp server 10.9.9.9 poll\n</code></pre> \u0421\u043b\u0430\u0431\u043e \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f \u0441 \u0441 \u043d\u0435\u0441\u0432\u043e\u0435\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u0435\u0439 \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435. \u0411\u0430\u0437\u0430 dchp-snooping'\u0430 \u043f\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0441\u044f, DAI \u0438 source guard \u0432\u0441\u0435\u0445 \u0437\u0430\u0431\u0430\u043d\u044f\u0442. \u0418\u0437-\u0437\u0430 \u044d\u0442\u043e\u0433\u043e \u0432 security \u0444\u0438\u0447\u0430\u0445, \u043a\u0440\u043e\u043c\u0435 \u0441\u043d\u0443\u043f\u0438\u043d\u0433\u0430, \u043d\u0435\u0442 \u0441\u043c\u044b\u0441\u043b\u0430.</p>"},{"location":"network/eltex/#loopback-detection","title":"loopback-detection","text":"<p><code>loopback-detection enable</code> \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0438 \u0432 \u043f\u043e\u0440\u0442\u0430\u0445. \u0412 \u043f\u043e\u0440\u0442\u0430\u0445 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0430. <pre><code>eltex#sh loopback-detection \n\nLoopback detection: Enabled\nMode: broadcast-mac-addr\nLoopback detection interval: 30\nVLAN based mode: Disabled\nVLAN auto-recovery : Disabled\n\nInterface Loopback Detection Loopback Detection \n          Admin State        Operational State  \n--------- ------------------ ------------------ \ngi1/0/1   disabled           inactive           \ngi1/0/2   disabled           inactive\n</code></pre> vlan mode, \u0435\u0441\u043b\u0438 \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u043b\u0430\u043d\u0435 \u043f\u043e\u0440\u0442\u0430 \u0441\u043b\u0430\u0442\u044c. \u0415\u0441\u043b\u0438 \u0432 \u043d\u0430\u0442\u0438\u0432\u043d\u043e\u043c, \u0442\u043e \u0445\u0432\u0430\u0442\u0438\u0442 \u0434\u0435\u0444\u043e\u043b\u0442\u0430 port mode. <pre><code>interface gigabitethernet1/0/1\n loopback-detection enable\n spanning-tree disable\n</code></pre> \u0422\u0435\u043f\u0435\u0440\u044c <pre><code>Interface Loopback Detection Loopback Detection \n          Admin State        Operational State  \n--------- ------------------ ------------------ \ngi1/0/1   enabled            active\n</code></pre></p>"},{"location":"network/eltex/#port-security","title":"port security","text":"<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e lock mode. <pre><code>eltex(config-if)#port security mode \n  secure               Delete the current dynamic MAC addresses associated\n                       with the port. Learn up to the maximum addresses\n                       allowed on the port. Relearning and aging are disabled.\n  lock                 Keep the current dynamic MAC addresses associated with\n                       the port. Learning, relearning and aging are disabled.\n  max-addresses        Delete the current dynamic MAC addresses associated\n                       allowed on the port. Relearning and aging are enabled.\n</code></pre> \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0434\u043b\u044f 3 \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0431\u0435\u0437 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u0441 learning <pre><code> port security max 3\n port security mode max-addresses\n port security discard\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>eltex#sh ports security \n\n\nPort        status      Learning     Action     Maximum   Trap     Frequency \n---------  ---------  ------------ ----------- --------- --------  ----------\ngi1/0/1     Enabled Max-Addresses        Discard        3   Disabled          -\n</code></pre></p>"},{"location":"network/eltex/#dhcp-snooping-relay","title":"dhcp snooping, relay","text":"<p>\u041f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u044f\u044e\u0442\u0441\u044f vlan'\u044b, \u0433\u0434\u0435 \u0435\u0441\u0442\u044c dhcp-\u043a\u043b\u0438\u0435\u043d\u0442\u044b, \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0431\u0430\u0437\u044b \u043d\u0430 \u0444\u043b\u0435\u0448\u043a\u0435. \u041d\u0430 tftp \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0435\u043b\u044c\u0437\u044f. <pre><code>ip dhcp snooping\nip dhcp snooping database\nip dhcp snooping vlan 100\nip dhcp snooping vlan 200\n</code></pre> \u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435 \u043f\u043e\u0440\u0442\u044b, \u0442.\u0435. \u0442\u0435, \u0437\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f dhcp-\u0441\u0435\u0440\u0432\u0435\u0440, \u043b\u0438\u0431\u043e \u0442\u0435, \u0434\u0430\u043d\u043d\u044b\u0435 \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u0432 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0443\u044e \u0431\u0430\u0437\u0443 \u043d\u0435 \u043d\u0443\u0436\u043d\u043e. <pre><code>interface gigabitethernet 1/0/24\n ip dhcp snooping trust\n</code></pre> \u0414\u043b\u044f relay \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440 10.9.8.7  <pre><code>ip dhcp relay address 10.9.8.7\nip dhcp relay enable\n\ninterface vlan 100\n name user\n ip address 10.0.0.254 255.255.252.0\n ip dhcp relay enable\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>eltex#sh ip dhcp relay \nDHCP relay is Enabled\nOption 82 is Disabled\nMaximum number of supported VLANs without IP Address is 256\nNumber of DHCP Relays enabled on VLANs without IP Address is 0\nDHCP relay is not configured on any port.\nDHCP relay is enabled on Vlans: 100\nActive: 100\nInactive: \nServers: 10.9.8.7\n</code></pre></p>"},{"location":"network/eltex/#lacp","title":"lacp","text":"<p>\u041c\u043e\u0436\u043d\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u043f\u043e sh run \u0432\u044b\u0432\u0435\u0441\u0442\u0438. \u0412\u0438\u0434\u043d\u043e \u0447\u0442\u043e lacp \u043d\u0430 \u0441\u0442\u0435\u043a\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d. <pre><code>eltex#sh run int gigabitethernet1/0/5,gigabitethernet2/0/5,port2\ninterface gigabitethernet1/0/5\n description port1\n channel-group 2 mode auto\n!\ninterface gigabitethernet2/0/5\n description port2\n channel-group 2 mode auto\n!\ninterface Port-channel2\n description lacp\n spanning-tree disable\n switchport access vlan 123\n</code></pre></p>"},{"location":"network/eltex/#combo-ports","title":"combo ports","text":"<pre><code>interface gigabitethernet1/0/23\n media-type force-fiber\n</code></pre>"},{"location":"network/eltex/#ospf","title":"ospf","text":"<p>\u0412 \u0431\u0430\u0437\u0435 \u0435\u0441\u0442\u044c ospf. \u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0435\u043f\u0440\u0438\u0432\u044b\u0447\u043d\u043e. \u0417\u0434\u0435\u0441\u044c 10.0.1.x - p2p, 10.0.0.0/24 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u043d\u043e\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c. <pre><code>interface vlan 10\n name p2p_1\n ip address 10.0.1.238 255.255.255.252\nexit\n!\ninterface vlan 20\n name p2p_2\n ip address 10.0.1.234 255.255.255.252\nexit\n!\ninterface vlan 100\n name user\n ip address 10.0.0.254 255.255.252.0\n ip dhcp relay enable\n! \nrouter ospf 1\n network 10.0.1.234 area 0.0.0.0\n network 10.0.1.238 area 0.0.0.0\n network 10.0.0.254 area 0.0.0.0\n router-id 10.0.1.238\nexit\n!\ninterface ip 10.0.1.234\n ip ospf cost 15\n ip ospf network point-to-point\nexit\n!\ninterface ip 10.0.1.238\n ip ospf cost 20\n ip ospf network point-to-point\nexit\n!\ninterface ip 10.0.0.254\n ip ospf passive-interface\nexit\n</code></pre></p>"},{"location":"network/eltex/#21xx","title":"21xx \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u043a\u043e\u043d\u0441\u043e\u043b\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430","text":"<p>\u041a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0440\u0442 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d \u0441 \u0444\u0440\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430. \u0414\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u043e\u0431\u044b\u0447\u043d\u044b\u0439 \u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0439 \u043a\u0430\u0431\u0435\u043b\u044c \u0438 USB2COM \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043d\u0438\u043a, \u0435\u0441\u043b\u0438 \u043d\u0430 \u043d\u043e\u0443\u0442\u0431\u0443\u043a\u0435 \u0438\u043b\u0438 \u041f\u041a \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 COM-\u043f\u043e\u0440\u0442. \u0412 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, PuTTY, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0432\u0443\u044e\u0449\u0438\u0439 serial-\u043f\u043e\u0440\u0442 \u0438 \u0432\u044b\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c 115200. \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u0443\u0447\u0435\u0442\u043d\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0438 \u0441\u0440\u0430\u0437\u0443 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0430\u0442\u044c \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435, \u043f\u0435\u0440\u0435\u0439\u0434\u044f \u0432 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 enable. \u041f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u0442\u0435 \u0432 \u0440\u0435\u0436\u0438\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 conf \u0438 \u0437\u0430\u0434\u0430\u0439\u0442\u0435 hostname. <pre><code>console&gt;\nconsole&gt;enable\nconsole#conf\nconsole(config)#hostname mes2124p\nmes2124p(config)#\n</code></pre></p>"},{"location":"network/eltex/#21xx_1","title":"21xx \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0438","text":"<p>\u041d\u0430 \u0441\u0430\u0439\u0442\u0435 eltex.nsk.ru \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u0435\u0441\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0440\u0445\u0438\u0432 \u0441 \u043a\u0440\u0430\u0439\u043d\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0435\u0439 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c. \u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043d\u0430 \u043d\u043e\u0443\u0442\u0431\u0443\u043a\u0435 tftp-\u0441\u0435\u0440\u0432\u0435\u0440, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, tftpd32. \u0420\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u0442\u044c \u0430\u0440\u0445\u0438\u0432 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0438 \u0432 \u043b\u044e\u0431\u043e\u0439 \u043a\u0430\u0442\u0430\u043b\u043e\u0433, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u043d \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u0433\u043e \u0434\u043b\u044f tftp-\u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0414\u0430\u043b\u0435\u0435 \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c ip-\u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430. <pre><code>mes2124p(config)#int gi1/0/23\nmes2124p(config-if)#ip address 1.0.0.2 255.0.0.0\nmes2124p(config-if)#exit\nmes2124p(config)#exit\n</code></pre> \u041f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c \u043d\u0430 \u043d\u043e\u0443\u0442\u0431\u0443\u043a\u0435 \u0430\u0434\u0440\u0435\u0441 \u0438\u0437 \u0442\u043e\u0439 \u0436\u0435 \u043f\u043e\u0434\u0441\u0435\u0442\u0438 1.0.0.1 255.0.0.0, \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u043f\u043e\u0440\u0442 \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c. <pre><code>mes2124p#ping 1.0.0.1\nPinging 1.0.0.1 with 18 bytes of data:\n\n18 bytes from 1.0.0.1: icmp_seq=1. time=7 ms\n18 bytes from 1.0.0.1: icmp_seq=2. time=1 ms\n18 bytes from 1.0.0.1: icmp_seq=3. time=8 ms\n</code></pre> \u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0443 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440. <pre><code>copy tftp://1.0.0.1/mes2000-1145.ros image\n</code></pre> \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0443 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438. <pre><code>mes2124p#sh bootvar\nImage  Filename   Version               Date                    Status\n-----  ---------  -------------------   ---------------------   -----------\n1      image-1    1.1.36                17-Feb-2015  16:46:12   Active*\n2      image-2    1.1.45[5bb753fb]      30-May-2016  12:24:53   Not active\n\n\"*\" designates that the image was selected for the next boot\n\nmes2124p#boot system image-2\nmes2124p#sh bootvar\nImage  Filename   Version               Date                    Status\n-----  ---------  -------------------   ---------------------   -----------\n1      image-1    1.1.36                17-Feb-2015  16:46:12   Active\n2      image-2    1.1.45[5bb753fb]      30-May-2016  12:24:53   Not active*\n\n\"*\" designates that the image was selected for the next boot\n</code></pre> \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 write \u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 reload. !! \u0422\u043e\u0436\u0435 \u0441\u0430\u043c\u043e\u0435 \u0432 \u043c\u043e\u0434\u0435\u043b\u044f\u0445 23\u0445\u0445 \u0438 \u0432\u0435\u0440\u0441\u0438\u044f\u0445 4.\u0445 \u043d\u043e\u0432\u0430\u044f \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0430 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0441\u043b\u0435 \u0440\u0435\u043b\u043e\u0430\u0434\u0430. \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u0438\u0442\u0430\u043d\u0438\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e</p>"},{"location":"network/eltex/#21xx_2","title":"21xx \u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043d\u043e\u0432\u043e\u0439 \u0432\u0435\u0440\u0441\u0438\u0438 \u041f\u041e","text":"<p>\u0437\u0430\u0447\u0435\u043c \u044f \u044d\u0442\u043e \u043a\u043e\u043f\u0438\u0440\u0443\u044e \u0432 2020?</p> <p>\u041d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 \u0432\u0435\u0440\u0441\u0438\u0438 1.1.40 \u0434\u043b\u044f MES2124P \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435/\u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0442\u043e\u0440\u043e\u0432 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u043e\u0433\u043e \u0434\u0430\u0442\u0447\u0438\u043a\u0430. \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u043e\u0440\u043e\u0433\u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b: &lt;=50: \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0442\u043e\u0440\u044b \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u044b; 45-60: \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u043f\u0440\u0430\u0432\u044b\u0439 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0442\u043e\u0440;</p> <p>=55: \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u043e\u0431\u0430 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0442\u043e\u0440\u0430. \u0414\u043b\u044f MES2124P revB \u0438 revC \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0442\u043e\u0440\u043e\u0432 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b.</p>"},{"location":"network/eltex/#21xx_3","title":"21xx \u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0443 \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0432 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u0441\u0435\u0442\u044c","text":"<p>\u041f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u0432\u0441\u0435 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b \u0432 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0439 \u0441\u0435\u0442\u0438 \u0443\u0436\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b, \u0432 \u0441\u0435\u0442\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d MSTP, \u043f\u043e\u0440\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u044b \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b \u041b\u0412\u0421 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 trunk. \u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f MSTP, \u0433\u0434\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u043e\u0432 \u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u044b \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430, \u043a \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c\u0441\u044f eltex mes. <pre><code>spanning-tree mode mst\nspanning-tree bpdu filtering\nspanning-tree mst configuration\n instance 1 vlan 1-4094\n name abc\n revision 1\nexit\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f vlan \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u0438 \u043f\u0440\u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438. \u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0441\u0435\u0442\u0438 vlan \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0434\u0438\u043d \u0434\u043b\u044f \u0432\u0441\u0435\u0433\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f. <pre><code>mes2124p(config)#vlan database\nmes2124p(config-vlan)#vlan 111 name management\nmes2124p(config-vlan)#exit\nmes2124p(config)#int vlan 111\nmes2124p(config-if)#ip address 192.168.10.100 255.255.255.0\nmes2124p(config-if)#exit\nmes2124p(config)#ip default-gateway 192.168.10.1\n</code></pre> \u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0442\u0440\u0430\u043d\u043a\u043e\u0432\u044b\u0439 \u043f\u043e\u0440\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u043c eltex mes \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c\u0441\u044f \u043a \u0432\u044b\u0448\u0435\u0441\u0442\u043e\u044f\u0449\u0435\u043c\u0443 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0443. \u0412 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u044d\u0442\u043e 24 \u043c\u0435\u0434\u043d\u044b\u0439 \u043f\u043e\u0440\u0442, \u043d\u043e \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u044e\u0431\u044b\u0435, \u0432 \u0442\u043e\u043c \u0447\u0438\u0441\u043b\u0435 \u0438 combo-\u043f\u043e\u0440\u0442\u044b. <pre><code>mes2124p(config)#int gi1/0/24\nmes2124p(config-if)#switchport mode trunk\nmes2124p(config-if)#switchport trunk allowed vlan add all\nmes2124p(config-if)#description uplink\n</code></pre> \u041f\u0440\u0438\u043d\u0446\u0438\u043f\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 \u043e\u0442 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 cisco \u0432 \u0442\u043e\u043c, \u0442\u043e \u0432 IOS \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \"switchport mode trunk\" \u0438 \u0441\u0440\u0430\u0437\u0443 \u0432 \u043f\u043e\u0440\u0442\u0443 \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u044b \u0432\u0441\u0435 vlan \u0431\u0435\u0437 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f. \u0417\u0434\u0435\u0441\u044c \u0436\u0435 \u0432 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u0441\u0442\u0440\u043e\u043a\u0438 \"switchport trunk allowed vlan add\" \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0432\u044b\u0439 (1) vlan, \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u043d\u0435\u0442\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0444\u0440\u0435\u0439\u043c\u044b. \"all\" \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u0440\u0442\u0430 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043d\u0430 \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 vlan'\u043e\u0432. \u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u0434\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 mstp \u0438 \u0443\u0431\u0435\u0434\u0438\u0442\u044c\u0441\u044f \u0447\u0442\u043e \u0440\u043e\u043b\u044c \"Root\" \u0435\u0441\u0442\u044c \u043d\u0430 \u0430\u043f\u043b\u0438\u043d\u043a\u0435. <pre><code>mes2124p#sh spanning-tree active\n\n*********************************** Process 0 ***********************************\n\nSpanning tree enabled mode MSTP\nDefault port cost method:  long\nLoopback guard:   Disabled\n\n\nGathering information ..........\n###### MST 0 Vlans Mapped:\n\nCST Root ID    Priority    28672\n               Address     00:15:63:00:5d:80\n               The IST ROOT is the CST ROOT\n               Root Port   gi1/0/24\n               Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec\nIST Master ID  Priority    28672\n               Address     00:15:63:00:5d:80\n               Path Cost   220000\n               Rem hops    18\nBridge ID      Priority    32768\n               Address     a8:f9:4b:a6:4a:c0\n               Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec\n               Max hops    20\n  Name     State   Prio.Nbr   Cost    Sts   Role PortFast       Type\n--------- -------- -------- -------- ------ ---- -------- -----------------\ngi1/0/23  enabled  128.71   200000   Frw    Desg No       P2P Intr\ngi1/0/24  enabled  128.72   200000   Frw    Root No       P2P Intr\n\n###### MST 1 Vlans Mapped: 1,111\n\nRoot ID        Priority    28672\n               Address     00:15:63:00:5d:80\n               Path Cost   220000\n               Root Port   gi1/0/24\n               Rem hops    18\n\n\nBridge ID      Priority    32768\n               Address     a8:f9:4b:a6:4a:c0\nInterfaces\nName       State     Prio.Nbr   Cost      Sts  Role  PortFast  Type\n--------   --------  --------   --------- ---- ----  --------  ----------\ngi1/0/23   enabled   128.71     200000    Frw  Desg  No        P2P Inter\ngi1/0/24   enabled   128.72     200000    Frw  Root  No        P2P Inter\n</code></pre> \u0415\u0441\u043b\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 MSTP \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0438\u043c\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u043d\u0430 \u0441\u043e\u0441\u0435\u0434\u043d\u0435\u043c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0438\u043b\u0438 \u043e\u043d\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043e \u0432 \u0434\u0440\u0443\u0433\u043e\u043c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0435 (abc \u043d\u0435 \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u043e ABC), \u0442\u043e \u0441\u0442\u0430\u0442\u0443\u0441 \u0431\u0443\u0434\u0435\u0442 \u043a\u0430\u043a \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0435\u0440\u0435\u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043d\u0430 \u0441\u043e\u0441\u0435\u0434\u043d\u0438\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445. <pre><code>mes2124p#sh spanning-tree active\n\n*********************************** Process 0 ***********************************\n\nSpanning tree enabled mode MSTP\nDefault port cost method:  long\nLoopback guard:   Disabled\n\n\nGathering information ..........\n###### MST 0 Vlans Mapped:\n\nCST Root ID    Priority    28672\n               Address     00:15:63:00:5d:80\n               Path Cost   200000\n               Root Port   gi1/0/24\n               This switch is the IST master\n               Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec\nBridge ID      Priority    32768\n               Address     a8:f9:4b:a6:4a:c0\n               Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec\n               Max hops    20\n  Name     State   Prio.Nbr   Cost    Sts   Role PortFast       Type\n--------- -------- -------- -------- ------ ---- -------- -----------------\ngi1/0/23  enabled  128.71   200000   Frw    Desg No       P2P Intr\ngi1/0/24  enabled  128.72   200000   Frw    Root No       P2P Bound (RSTP)\n\n###### MST 1 Vlans Mapped: 1,111\n\nRoot ID        Priority    32768\n               Address     a8:f9:4b:a6:4a:c0\n               This switch is the regional Root\nInterfaces\nName       State     Prio.Nbr   Cost      Sts  Role  PortFast  Type\n--------   --------  --------   --------- ---- ----  --------  ----------\ngi1/0/23   enabled   128.71     200000    Frw  Desg  No        P2P Inter\ngi1/0/24   enabled   128.72     200000    Frw  Mstr  No        P2P Bound (RSTP)\n</code></pre> \u041e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0443\u0447\u0435\u0442\u043d\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439. \u0414\u043e \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0443\u0447\u0435\u0442\u043d\u044b\u043c\u0438 \u0437\u0430\u043f\u0438\u0441\u044f\u043c\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438. \u0415\u0441\u043b\u0438 \u0437\u0430\u0431\u0443\u0434\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u043e\u043b\u044c \u0438\u043b\u0438 \u0435\u0449\u0435 \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c, \u0442\u043e \u0432\u0441\u0435\u0433\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437. <pre><code>mes2124p(config)#username oper privilege 15 password gfhjkm\nmes2124p(config)#aaa authentication login default local\nmes2124p(config)#exit\nmes2124p#exit\n</code></pre> \u0415\u0441\u043b\u0438 \u0432\u0441\u0435 \u0441\u0434\u0435\u043b\u0430\u043d\u043e \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e, \u0442\u043e \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u043f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 <code>User Name:</code> \u0438 \u0443 \u0432\u0430\u0441 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430. \u041f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0435\u0449\u0435 \u0440\u0430\u0437 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e.</p>"},{"location":"network/eltex/#21xx-bpdufilter-bpduguard","title":"21xx bpdufilter \u0438 bpduguard","text":"<p>\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043d\u0438\u0436\u0435 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043b\u0430 \u043f\u043e\u0440\u0442, \u0442\u0430\u043a \u043a\u0430\u043a bpduguard \u043e\u0442\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0440\u0430\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u0444\u0438\u043b\u044c\u0442\u0440. \u0414\u0430 \u0438 \u0441\u0430\u043c \u0444\u0438\u043b\u044c\u0442\u0440 \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 bpdu. <pre><code>mes2124p#sh run int gi1/0/23\ninterface gigabitethernet 1/0/23\n switchport mode trunk\n spanning-tree bpdu filtering\n spanning-tree bpduguard enable\n</code></pre></p>"},{"location":"network/eltex/#21xx-dhcp-snooping","title":"21xx dhcp-snooping","text":"<p>\u041f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u044f\u044e\u0442\u0441\u044f vlan'\u044b, \u0433\u0434\u0435 \u0435\u0441\u0442\u044c dhcp-\u043a\u043b\u0438\u0435\u043d\u0442\u044b, \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0431\u0430\u0437\u044b \u043d\u0430 \u0444\u043b\u0435\u0448\u043a\u0435. \u041d\u0430 tftp \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0435\u043b\u044c\u0437\u044f. <pre><code>ip dhcp snooping\nip dhcp snooping database\nip dhcp snooping vlan 100\nip dhcp snooping vlan 200\n</code></pre> \u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435 \u043f\u043e\u0440\u0442\u044b, \u0442.\u0435. \u0442\u0435, \u0437\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f dhcp-\u0441\u0435\u0440\u0432\u0435\u0440, \u043b\u0438\u0431\u043e \u0442\u0435, \u0434\u0430\u043d\u043d\u044b\u0435 \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u0432 \u0431\u0430\u0437\u0443 \u043d\u0435 \u043d\u0443\u0436\u043d\u043e. <pre><code>interface gigabitethernet 1/0/24\n ip dhcp snooping trust\n</code></pre> \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043f\u043e\u0447\u043a\u0430 \u0438\u0437 \u0434\u0432\u0443\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432. \u0415\u0441\u043b\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u0440\u0442\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u043f\u043b\u0438\u043d\u043a\u0438 \u043e\u0431\u043e\u0438\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432, \u0442\u043e \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c\u0441\u044f \u0431\u0430\u0437\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043e\u0431\u043e\u0438\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432. \u042d\u0442\u043e \u043d\u0435 \u0441\u043c\u0435\u0440\u0442\u0435\u043b\u044c\u043d\u043e \u0432 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u043d\u043e \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0432\u0441\u0435\u0433\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u0430 \u043d\u0430 \u0444\u043b\u0435\u0448\u043a\u0435 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0441\u044f \u0438\u0437-\u0437\u0430 \u0432\u043e\u0437\u043d\u0438\u043a\u0448\u0435\u0439 \u043e\u0448\u0438\u0431\u043a\u0438, \u043a\u0430\u043a \u0443 \u043c\u0435\u043d\u044f \u0431\u044b\u043b\u043e \u0441 mes3124. <pre><code>mes2124p#dir\nDirectory of flash:\n\n     File Name      Permission Flash Size Data Size        Modified\n------------------- ---------- ---------- --------- -----------------------\ncopyhist                rw       65520       12      17-Feb-2015 16:46:38\ndhcpsn.prv              --       131040      --      05-Mar-2015 13:32:16\ndirectry.prv            --       65520       --      09-Aug-2011 10:35:05\nimage-1                 rw      6815744    6815744   25-Feb-2015 17:26:00\nimage-2                 rw      6815744    6815744   17-Feb-2015 16:54:01\nmirror-config           rw       131040     3596     01-Jun-2016 06:19:39\nsshkeys.prv             --       131040      --      11-Aug-2011 12:35:14\nstartup-config          rw       458640     86045    30-May-2016 18:19:59\nsyslog1.sys             r-       131072      --      31-May-2016 17:34:10\nsyslog2.sys             r-       131072      --      31-May-2016 17:34:10\n\nTotal size of flash: 16252928 bytes\nFree size of flash: 1376496 bytes\n</code></pre></p>"},{"location":"network/eltex/#21xx-voice-vlan","title":"21xx voice vlan","text":"<p>\u0421\u0435\u0439\u0447\u0430\u0441 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0441 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u043e\u0439 PoE Eltex MES2124P \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u0434\u0432\u0430 \u0441\u043f\u043e\u0441\u043e\u0431\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u0432, \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 voice vlan \u0438 \u0432 \u043e\u0431\u043e\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0447\u0430\u0441\u0442\u044c mac-\u0430\u0434\u0440\u0435\u0441\u0430 - oui. \u0426\u0438\u0442\u0430\u0442\u0430 \u0438\u0437 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438:</p> <p>Voice VLAN \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f VoIP-\u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0443\u044e VLAN. \u0414\u043b\u044f VoIP-\u0444\u0440\u0435\u0439\u043c\u043e\u0432 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u044b QoS-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0434\u043b\u044f \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0430\u0444\u0438\u043a\u0430. \u041a\u043b\u0430\u0441\u0441\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u0444\u0440\u0435\u0439\u043c\u043e\u0432, \u043e\u0442\u043d\u043e\u0441\u044f\u0449\u0438\u0445\u0441\u044f \u043a \u0444\u0440\u0435\u0439\u043c\u0430\u043c VoIP-\u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f, \u0431\u0430\u0437\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043d\u0430 OUI (Organizationally Unique Identifier \u2013 \u043f\u0435\u0440\u0432\u044b\u0435 24 \u0431\u0438\u0442\u0430 MAC-\u0430\u0434\u0440\u0435\u0441\u0430) \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f. \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 Voice VLAN \u0434\u043b\u044f \u043f\u043e\u0440\u0442\u0430 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 - \u043a\u043e\u0433\u0434\u0430 \u043d\u0430 \u043f\u043e\u0440\u0442 \u043f\u043e\u0441\u0442\u0443\u043f\u0430\u0435\u0442 \u0444\u0440\u0435\u0439\u043c \u0441 OUI \u0438\u0437 \u0442\u0430\u0431\u043b\u0438\u0446\u044b Voice VLAN. \u041a\u043e\u0433\u0434\u0430 \u043f\u043e\u0440\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f, \u043a\u0430\u043a \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0430\u0449\u0438\u0439 \u043a Voice VLAN \u2013 \u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u043e\u0440\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043e VLAN \u043a\u0430\u043a tagged. Voice VLAN \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c \u0434\u043b\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0441\u0445\u0435\u043c:</p> <ul> <li>VoIP-\u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0441\u0441\u044b\u043b\u0430\u0442\u044c \u0442\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b \u0441 Voice VLAN ID, \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u043c \u043d\u0430 MES2124.</li> <li>VoIP-\u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0430\u0441\u0441\u044b\u043b\u0430\u0435\u0442 \u043d\u0435\u0442\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 DHCP-\u0437\u0430\u043f\u0440\u043e\u0441\u044b. \u0412 \u043e\u0442\u0432\u0435\u0442\u0435 \u043e\u0442 DHCP-\u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043e\u043f\u0446\u0438\u044f 132, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0430\u044f VLAN ID, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 VoIP-\u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0441\u0435\u0431\u0435 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 VLAN \u0434\u043b\u044f \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 VoIP-\u0442\u0440\u0430\u0444\u0438\u043a\u0430 (Voice VLAN ID).</li> </ul> <p>\u0412 \u043e\u0431\u0449\u0435\u043c, \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043a\u0430\u043a \u043d\u0430\u0434\u043e, \u0442.\u0435. \u0441 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u0432 lldp, lldp-med \u0438 \u0431\u0435\u0437 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f oui. \u0421\u0440\u0430\u0437\u0443 \u0445\u043e\u0447\u0443 \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0434\u0438\u0442\u044c, \u0447\u0442\u043e \u0444\u0440\u0430\u0437\u0430 \"\u0434\u043b\u044f VoIP-\u0444\u0440\u0435\u0439\u043c\u043e\u0432 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u044b QoS-\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0434\u043b\u044f \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0437\u0430\u0446\u0438\u0438 \u0442\u0440\u0430\u0444\u0438\u043a\u0430\" \u0441\u043a\u043e\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043e \"up 5\", \u0430 \u043d\u0435 dscp. \u0422\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u043c, \u043a\u0430\u043a \u043e\u043a\u0430\u0437\u0430\u043b\u043e\u0441\u044c, \u0434\u043e \u043e\u0434\u043d\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 dscp, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u0447\u0435\u0440\u0435\u0437 lldp-med. \u041a\u0430\u043a \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 (provisioning) \u0443\u043a\u0430\u0437\u0430\u043d\u043e, \u0442\u0430\u043a \u0438 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c. \u0422\u0435\u043b\u0435\u0444\u043e\u043d\u044b \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0442 \u0432 \u0441\u0432\u043e\u0435\u043c \u0432\u044b\u0432\u043e\u0434\u0435 \u043f\u043e lldp \u0432\u043e\u043e\u0431\u0449\u0435 \u043f\u043e\u0433\u043e\u0434\u0443 \u043a\u0430\u043a\u0443\u044e-\u0442\u043e, \u0430 \u043d\u0435 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 qos \u0438 \u0442.\u0434, \u043d\u043e \u043b\u0443\u0447\u0448\u0435 \u043b\u0438\u0448\u043d\u0438\u0439 \u0440\u0430\u0437 \u043f\u0435\u0440\u0435\u0441\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u0440\u0430\u0444\u0438\u043a wireshark'\u043e\u043c. <pre><code>lldp med network-policy 1 voice vlan 203 vlan-type tagged up 5 dscp 46\n</code></pre> \u041d\u0430\u0447\u0430\u0442\u044c \u043d\u0443\u0436\u043d\u043e \u0441 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f network-policy, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 voice vlan \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438. <pre><code>no lldp med network-policy voice auto \n</code></pre> \u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f network-policy \u0432\u0440\u0443\u0447\u043d\u0443\u044e. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435 203 - \u044d\u0442\u043e \u043d\u043e\u043c\u0435\u0440 voice vlan'\u0430. \u0412\u0441\u0435\u0433\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u0442\u0441\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c 32 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435 \u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e \u0442\u0440\u0438 \u0448\u0442\u0443\u043a\u0438 \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u043d\u043e, \u043f\u043e\u043b\u0430\u0433\u0430\u044e, \u0441 \u043e\u0434\u043d\u043e\u0439 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0432\u043e\u0439 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e voice vlan \u043d\u0430 \u043e\u0434\u043d\u043e\u043c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0438 \u043e\u0431\u043e\u0439\u0442\u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u043f\u043e\u0441\u043e\u0431\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0434\u0440\u0430\u0437\u0443\u043c\u0435\u0432\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u0438\u043d voice vlan \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440. \u041a\u043e\u043c\u0430\u043d\u0434\u044b \u0432\u0432\u043e\u0434\u044f\u0442\u0441\u044f \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043d\u043e \u0432 \u0441\u0430\u043c\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0435 \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0438\u0445 \u043d\u0435\u043b\u044c\u0437\u044f. <pre><code>lldp med network-policy 1 voice vlan 203 vlan-type tagged\nlldp med network-policy 2 voice-signaling vlan 203 vlan-type tagged\nlldp med network-policy 3 video-conferencing vlan 203 vlan-type tagged\n</code></pre> \u0414\u043b\u044f \u0442\u0435\u0441\u0442\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b \u0442\u0440\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u0430\u0437\u043d\u044b\u0445 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439, \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u043b \u0442\u0440\u0438 \u043f\u043e\u0440\u0442\u0430 \u043a\u0430\u043a \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435. \u0422\u0443\u0442 203 - voice vlan (\u0442\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439), 555 - data (\u043d\u0435\u0442\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439). <pre><code>interface gigabitethernet 1/0/1\n switchport mode general\n switchport general allowed vlan add 203 tagged\n switchport general allowed vlan add 555 untagged\n description Users_and_IpPhones_with_LLDP-MED\n spanning-tree portfast auto\n spanning-tree bpduguard enable\n lldp optional-tlv sys-cap\n lldp optional-tlv 802.1 pvid enable\n lldp optional-tlv 802.1 vlan-name add 203\n lldp med enable network-policy poe-pse\n lldp med network-policy add 1\n lldp med network-policy add 2\n lldp med network-policy add 3\n switchport general pvid 555\n</code></pre> \u0412\u043e\u0442 \u0442\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0435 network-policy \u0438 \u0447\u0442\u043e \u0432\u043e\u043e\u0431\u0449\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043e \u043d\u0430 \u043f\u043e\u0440\u0442\u0443. <pre><code>mes2124p#sh lldp med configuration\n\nFast Start Repeat Count: 3.\nLLDP MED network-policy voice: manual\n\nNetwork policy 1\n-------------------\nApplication type: voice\nVLAN ID: 203 tagged\nLayer 2 priority: 0\nDSCP: 0\n\nNetwork policy 2\n-------------------\nApplication type: voiceSignaling\nVLAN ID: 203 tagged\nLayer 2 priority: 0\nDSCP: 0\n\nNetwork policy 3\n-------------------\nApplication type: videoconferencing\nVLAN ID: 203 tagged\nLayer 2 priority: 0\nDSCP: 0\n\n  Port     Capabilities   Network policy   Location  POE  Notifications  Inventory\n--------- -------------- ---------------- ---------- ---- -------------- ----------\ngi1/0/1        Yes             Yes            No     Yes     Disabled        No\ngi1/0/2        Yes             Yes            No     Yes     Disabled        No\ngi1/0/3        Yes             Yes            No     Yes     Disabled        No\ngi1/0/4         No              No            No      No     Disabled        No\n[\u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043e]\n</code></pre> \u0414\u0430\u043b\u0435\u0435 \u0432\u0441\u0435 \u043f\u0440\u043e\u0441\u0442\u043e. \u0412\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0438 \u0435\u0433\u043e \u0432\u0438\u0434\u043d\u043e \u043f\u043e lldp. \u042d\u0442\u043e, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c, \u0433\u043e\u0432\u043e\u0440\u0438\u0442 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u0440\u0430\u0437\u043d\u044b\u043c\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0435 lldp \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u0438 \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0435 \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0438 lldp-med \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f. <pre><code>mes2124p#sh lldp neighbors\n\nSystem capability legend:\nB - Bridge; R - Router; W - Wlan Access Point; T - telephone;\nD - DOCSIS Cable Device; H - Host; r - Repeater;\nTP - Two Ports MAC Relay; S - S-VLAN; C - C-VLAN; O - Other\n\n  Port        Device ID          Port ID         System Name    Capabilities  TTL\n--------- ----------------- ----------------- ----------------- ------------ -----\ngi1/0/1    01 0a 2e 21 42    3CCE73582D2B:P1  SEP3CCE73582D2B       B, T      157\ngi1/0/2    01 0a 2e 21 fa   00:15:65:9e:44:21    SIP-T21P_E2         T        151\ngi1/0/3    01 0a 2e 21 07   00:24:b5:64:39:81                       B, T      166\nmes2124p#sh lldp neighbors gi1/0/1\n\nDevice ID: 01:0a:2e:21:42:00\nPort ID: 3CCE73582D2B:P1\nCapabilities: Bridge, Telephone\nSystem Name: SEP3CCE73582D2B\nSystem description: Cisco IP Phone 7911G,V9, SIP11.8-5-3S\nPort description: SW PORT\nTime To Live: 159\n[\u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043e]\n\nmes2124p#sh lldp neighbors gi1/0/2\n\nDevice ID: 01:0a:2e:21:fa:00\nPort ID: 00:15:65:9e:44:21\nCapabilities: Telephone\nSystem Name: SIP-T21P_E2\nSystem description: 52.80.14.1\nPort description: WAN PORT\nTime To Live: 142\n[\u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043e]\n\nmes2124p#sh lldp neighbors gi1/0/3\n\nDevice ID: 01:0a:2e:21:07:00\nPort ID: 00:24:b5:64:39:81\nCapabilities: Bridge, Telephone\nSystem Name:\nSystem description: Nortel IP Telephone 1120E, Firmware:0624C7F\nPort description: Nortel IP Phone\nTime To Live: 150\n\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 mac-\u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0432 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u043c \u0432\u043b\u0430\u043d\u0435.\nmes2124p#sh mac address-table vlan 203 interface gi1/0/1\n\n  Vlan        Mac Address         Port       Type\n-------- --------------------- ---------- ----------\n  203      3c:ce:73:58:2d:2b    gi1/0/1    dynamic\n\nmes2124p#sh mac address-table vlan 203 interface gi1/0/2\n\n  Vlan        Mac Address         Port       Type\n-------- --------------------- ---------- ----------\n  203      00:15:65:9e:44:21    gi1/0/2    dynamic\n\nmes2124p#sh mac address-table vlan 203 interface gi1/0/3\n\n  Vlan        Mac Address         Port       Type\n-------- --------------------- ---------- ----------\n  203      00:24:b5:64:39:81    gi1/0/3    dynamic\n</code></pre> \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0447\u0442\u043e \u0441 PoE \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435. <pre><code>mes2124p#sh power inline\n\nClass based power-limit mode\n\n Power  Nominal Power   Consumed Power   Usage Threshold   Traps\n------- ------------- ------------------ --------------- ---------\n  On      350 Watts      7 Watts (2%)          95         Disable\n\n\n  Port      Powered Device         State          Status    Priority   Class\n-------- -------------------- ---------------- ------------ -------- ---------\ngi1/0/1                             Auto            On        low     class2\ngi1/0/2                             Auto            On        low     class2\ngi1/0/3                             Auto            On        low     class3\n\nmes2124p#sh power inline consumption\n\n   Port      Power[W]     Power Limit[W]  Current[mA]   Voltage[V]\n---------- ------------- ---------------- ------------ ------------\n gi1/0/1       2.806          30.000           53         52.006\n gi1/0/2       1.499          30.000           28         52.248\n gi1/0/3       3.487          30.000           67         51.898\n</code></pre></p>"},{"location":"network/eltex/#21xx-qos","title":"21xx \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 QoS","text":"<p>Speed mismatch \u0434\u043b\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 - \u044d\u0442\u043e \u0441\u0435\u0440\u044c\u0435\u0437\u043d\u0430\u044f \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0432\u0435\u0441\u0442\u0438 \u043a \u043f\u043e\u0442\u0435\u0440\u044f\u043c \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 \u0434\u0430\u043d\u043d\u044b\u0445. \u0415\u0441\u043b\u0438 \u0434\u0435\u043d\u0435\u0433 \u043d\u0435\u0442, \u0442\u043e \u043b\u0443\u0447\u0448\u0435 \u043b\u0438\u0448\u043d\u0438\u0439 \u0440\u0430\u0437 \u043f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \"\u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u043b\u0435 \u043d\u0430 xxx%\", \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u043a\u043e\u0433\u0434\u0430:</p> <ul> <li>\u0437\u0430\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u0441 \u0430\u043f\u043b\u0438\u043d\u043a\u043e\u043c 1\u0433\u0431\u0438\u0442/\u0441 \u0438 \u043f\u043e\u0440\u0442\u0430\u043c\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 100\u043c\u0431\u0438\u0442/\u0441 \u0438\u043b\u0438 \u0441 \u0430\u043f\u043b\u0438\u043d\u043a\u043e\u043c 10\u0433\u0431\u0438\u0442/\u0441 \u0438 \u043f\u043e\u0440\u0442\u0430\u043c\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 1\u0433\u0431\u0438\u0442/\u0441;</li> <li>\u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0432 \u0433\u0438\u0433\u0430\u0431\u0438\u0442\u043d\u044b\u0439 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u044b \u0441\u043e 100\u043c\u0431\u0438\u0442/\u0441 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u043c;</li> <li>\u0432\u043a\u043b\u044e\u0447\u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043f\u043e 10\u0433\u0435. \u0417\u0430\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e. \u0413\u043e\u0442\u043e\u0432\u044c\u0442\u0435\u0441\u044c \u043a\u0443\u043f\u0438\u0442\u044c \u0434\u043e\u0440\u043e\u0433\u043e\u0441\u0442\u043e\u044f\u0449\u0438\u0435 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b \u044f\u0434\u0440\u0430/\u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0438 \u0441 10\u0433\u0435, \u0447\u0442\u043e\u0431\u044b \u0432\u0441\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u043c\u0438\u043a\u0440\u043e\u0431\u0451\u0440\u0441\u0442\u044b \u0431\u0443\u0444\u0435\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u043e \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0431\u0435\u0437 \u043f\u043e\u0442\u0435\u0440\u044c.</li> </ul> <p>\u041e\u0434\u043d\u0438\u043c \u0438\u0437 \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u0432 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0438 \u043f\u0440\u0438 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0438 \u041b\u0412\u0421 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0431\u043e\u0440 \u0442\u0430\u043a\u0438\u0445 \u0440\u0435\u0448\u0435\u043d\u0438\u0439, \u0433\u0434\u0435 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u0441\u0435\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u0430, \u0430 \u0441\u0435\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u043d\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u0430.</p> <p>\u041a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b 1124 \u0438 2124 \u0438\u043c\u0435\u044e\u0442 \u043f\u043e 4 \u043e\u0447\u0435\u0440\u0435\u0434\u0438. 3124 - 8 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u0441\u0435\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b, \u043d\u043e \u043e\u0440\u0438\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043b\u0443\u0447\u0448\u0435 \u043d\u0430 \u043a\u0440\u0430\u0439\u043d\u0438\u0435 \u0432\u0435\u0440\u0441\u0438\u0438 \u043f\u0440\u043e\u0448\u0438\u0432\u043e\u043a, \u0442\u0430\u043a \u043a\u0430\u043a qos tail-drop \u043f\u043e\u044f\u0432\u0438\u043b\u0441\u044f \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0435\u0434\u0430\u0432\u043d\u043e. \u0412\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f qos \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439. <pre><code>mes2124p(config)#qos\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b qos \u0441 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. <pre><code>mes2124p#sh qos\nQos: Basic mode\nBasic trust: cos\n\nmes2124p#sh qos interface gi1/0/1\nEthernet gi1/0/1\nDefault CoS: 0\nTrust mode: enable\n</code></pre> \u0412\u043e\u0442, \u043a \u0441\u043b\u043e\u0432\u0443, eltex mes - \u043e\u0434\u043d\u0438 \u0438\u0437 \u043d\u0435\u043c\u043d\u043e\u0433\u0438\u0445 \u043d\u0435\u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438 \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u043f\u043e snmp \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u043f\u043e \u043e\u0447\u0435\u0440\u0435\u0434\u044f\u043c. \u0425\u043e\u0442\u044f \u043c\u043e\u0436\u043d\u043e \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u0442\u044c \u0432\u0441\u0435\u0433\u043e \u0434\u0432\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430, \u043d\u043e \u044d\u0442\u043e \u0443\u0436\u0435 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u0432\u0435\u0440\u044c\u0442\u0435, \u0435\u0441\u043b\u0438 \u0441\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0442\u044c \u0441 \u0433\u043b\u044e\u0447\u043d\u044b\u043c DCN (qtech,snr). \u0421\u0435\u0439\u0447\u0430\u0441 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0441\u0442\u043e\u0438\u0442 \u043d\u0430 \u0441\u0442\u043e\u043b\u0435, \u043a \u043d\u0435\u043c\u0443 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043c\u043e\u0435 \u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e \u0447\u0435\u0440\u0435\u0437 ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d. \u041d\u0430\u0441\u0442\u0440\u043e\u044e \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0440\u0442\u0430. 1\u044b\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a - \u044d\u0442\u043e \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043d\u0430\u044f \u043e\u0447\u0435\u0440\u0435\u0434\u044c, \u043a\u0443\u0434\u0430 \u043f\u043e\u043f\u0430\u0434\u0435\u0442 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u044f. 2 - \u043f\u0435\u0440\u0432\u0430\u044f \u043e\u0447\u0435\u0440\u0435\u0434\u044c, \u043a\u0443\u0434\u0430 \u043f\u043e\u043f\u0430\u0434\u0435\u0442 \u0432\u0435\u0441\u044c \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u0440\u0430\u0444\u0438\u043a. <pre><code>qos statistics queues 1 4 all gigabitethernet1/0/1\nqos statistics queues 2 1 all gigabitethernet1/0/1\n</code></pre> \u0426\u0438\u0442\u0430\u0442\u0430 \u0438\u0437 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u043f\u043e snmp-\u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0443 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 Eltex MES: <pre><code>1.3.6.1.4.1.89.88.35.4.1.10.1 \u0434\u043b\u044f 1 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430\n1.3.6.1.4.1.89.88.35.4.1.10.2 \u0434\u043b\u044f 2 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430\nsnmpwalk -v2c -c &lt;community&gt; &lt;IP address&gt; 1.3.6.1.4.1.89.88.35.4.1.10.{\u043d\u043e\u043c\u0435\u0440 tail drop \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430}\n</code></pre> \u0422.\u0435. \u0435\u0441\u043b\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432, \u0442\u043e \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u0441\u0435\u0433\u043e \u043e\u0434\u0438\u043d oid \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0434\u0440\u043e\u043f\u0430\u0445 \u0432 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043d\u043e\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u043d\u0430 \u0432\u0441\u0435\u0445 \u043f\u043e\u0440\u0442\u0430\u0445. \u041f\u0440\u0430\u0432\u0434\u0430, \u043f\u0440\u0438\u0434\u0435\u0442\u0441\u044f \u0438\u0441\u043a\u0430\u0442\u044c \u043f\u043e\u0442\u043e\u043c \u043d\u0430 \u043a\u0430\u043a\u043e\u043c \u043f\u043e\u0440\u0442\u0443 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e, \u043d\u043e \u044d\u0442\u043e \u043c\u0435\u043b\u043e\u0447\u0438 ;)  \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043f\u0430\u0434\u0430\u043d\u0438\u044f \u0432 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043d\u0443\u044e \u043e\u0447\u0435\u0440\u0435\u0434\u044c, \u0442\u0430\u043a \u043a\u0430\u043a \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u0430 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 Diffserv. <pre><code>mes2124p#sh qos statistics\nOutput Queues\n-------------\n\n  Interface      Queue      Dp    Total packets   TD packets\n------------- ------------ ----- --------------- -------------\n   gi1/0/1         4        All         1              0\n   gi1/0/1         1        All       6424             0\n\u0412\u043a\u043b\u044e\u0447\u0430\u044e trust dscp \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439. \u041d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u043f\u0440\u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u043d\u0435 \u043d\u0443\u0436\u043d\u043e.\nmes2124p(config)#qos trust dscp\n\nmes2124p#sh qos\nQos: Basic mode\nBasic trust: dscp\n</code></pre> \u0422\u0435\u043f\u0435\u0440\u044c \u0432\u0441\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e, \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0439 \u0442\u0440\u0430\u0444\u0438\u043a \u043f\u043e\u043f\u0430\u0434\u0430\u0435\u0442 \u0432 \u0441\u0432\u043e\u044e \u043e\u0447\u0435\u0440\u0435\u0434\u044c. \u041f\u043e\u0442\u0435\u0440\u044c \u0432 \u043f\u0435\u0440\u0432\u043e\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u043d\u0435\u0442, \u043d\u043e \u044d\u0442\u043e \u0435\u0449\u0435 \u0438\u0437-\u0437\u0430 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0435\u0439 \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0438 \u0430\u043f\u043b\u0438\u043d\u043a\u0435. <pre><code>mes2124p#sh qos statistics\n\nOutput Queues\n-------------\n\n  Interface      Queue      Dp    Total packets   TD packets\n------------- ------------ ----- --------------- -------------\n   gi1/0/1         4        All       1445             0\n   gi1/0/1         1        All       10909            0\n</code></pre> \u0412 \u0441\u0432\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u0431\u0440\u0430\u0442\u0438\u043b \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043f\u0440\u0438 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439 QoS \u043d\u0430 \u0442\u043e, \u0447\u0442\u043e \u0435\u0441\u0442\u044c \u043f\u043e\u0442\u0435\u0440\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0442\u0435\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 Eltex MES 3124, \u0433\u0434\u0435 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u043e\u0442\u043b\u0438\u0447\u0430\u044e\u0442\u0441\u044f. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, 10\u0433\u0435-1\u0433\u0435 \u0438 1\u0433\u0435-100\u043c\u0431\u0438\u0442/\u0441. \u0410 \u043d\u0430  \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0438 \u0441 \u0442\u043e\u043b\u044c\u043a\u043e \u0433\u0438\u0433\u0430\u0431\u0438\u0442\u043d\u044b\u043c\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f\u043c\u0438 \u043f\u043e\u0442\u0435\u0440\u044c \u043d\u0435 \u0431\u044b\u043b\u043e \u0432\u043e\u043e\u0431\u0449\u0435. \u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0431\u044b\u043b\u0430 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u0440\u0435\u0448\u0435\u043d\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0438 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u043e\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439.</p>"},{"location":"network/eltex/#_1","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0431\u0443\u0444\u0435\u0440\u043e\u0432 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439","text":"<p>\u0414\u043b\u044f \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u0440\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043c\u0435\u043d\u044c\u0448\u0443\u044e, \u0447\u0435\u043c \u0430\u043f\u043b\u0438\u043d\u043a. \u0415\u0441\u0442\u044c \u0434\u0432\u0430 \u0441\u043f\u043e\u0441\u043e\u0431\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0435\u0439 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043d\u0430 \u0432\u0441\u0435\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u0438 \u043e\u0431\u0430 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u043d\u044b \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435. \u041f\u0440\u0438\u043d\u0446\u0438\u043f\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u043f\u0435\u0440\u0432\u0430\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0432\u044b\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u043d\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442 \u0430\u0432\u0442\u043e\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435. \u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u043e\u0435 \u0430\u0432\u0442\u043e\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044f\u0445 10 \u0438 100\u043c\u0431\u0438\u0442/\u0441 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u0442\u043e\u043c\u0443, \u0447\u0442\u043e \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0441\u044f half-duplex. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u044d\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \"negotiation\". \u0415\u0441\u043b\u0438 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0446\u0438\u0441\u043a\u0443, \u0442\u043e \u0442\u0430\u043c \u044d\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439, \u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 auto, \u0442.\u0435. \"speed auto 10 100\". <pre><code>mes2124p(config)#int gi1/0/1\nmes2124p(config-if)#speed\n  10                   Force operation at 10 Mbps.\n  100                  Force operation at 100 Mbps.\n  1000                 Force operation at 1000 Mbps.\nmes2124p(config-if)#negotiation\n  10h                  Advertise 10 Half-Duplex.\n  10f                  Advertise 10 Full-Duplex.\n  100h                 Advertise 100 Half-Duplex.\n  100f                 Advertise 100 Full-Duplex.\n  1000f                Advertise 1000 Full-Duplex.\n\nmes2124p(config-if)#negotiation 10f\nmes2124p(config-if)#04-Jun-2016 13:02:53 %LINK-W-Down:  gi1/0/1\n04-Jun-2016 13:02:55 %LINK-I-Up:  gi1/0/1, 10Mbps FULL duplex\n</code></pre> \u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438, \u043f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c, \u043a\u0430\u0447\u043d\u0443\u0442\u044c \u0447\u0435\u0433\u043e-\u043d\u0438\u0431\u0443\u0434\u044c. \u0412 \u0432\u044b\u0432\u043e\u0434\u0435 \u043d\u0438\u0436\u0435 \u043f\u043e\u044f\u0432\u0438\u043b\u0438\u0441\u044c \u043f\u043e\u0442\u0435\u0440\u0438 \u0432 1 \u043e\u0447\u0435\u0440\u0435\u0434\u0438, 10\u043c\u0431\u0438\u0442/\u0441 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e. <pre><code>mes2124p#clear qos statistics\nmes2124p#sh qos statistics\n\nOutput Queues\n-------------\n\n  Interface      Queue      Dp    Total packets   TD packets\n------------- ------------ ----- --------------- -------------\n   gi1/0/1         4        All        566             0\n   gi1/0/1         1        All       20893           51\n\nmes2124p#sh int gi1/0/1\ngigabitethernet 1/0/1 is up (connected)\n  Interface index is 49\n  Hardware is gigabitethernet, MAC address is a8:f9:4b:a6:4a:c1\n  Description: Users_and_IpPhones_with_LLDP-MED\n  Interface MTU is 1500\n  Full-duplex, 10Mbps, link type is auto, media type is 1G-Copper\n  Link is up for 0 days, 0 hours, 2 minutes and 54 seconds\n  Advertised link modes: 10baseT/Full\n  Flow control is off, MDIX mode is on\n  15 second input rate is 283 Kbit/s\n  15 second output rate is 9849 Kbit/s\n</code></pre> \u0427\u0442\u043e \u0435\u0449\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u0435\u043b\u0430\u0442\u044c? \u0412 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 qos \u0441\u043e\u043e\u0431\u0449\u0430\u0435\u0442\u0441\u044f: \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u0432\u0441\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043f\u043e \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0443 \u00abstrict priority\u00bb. \u042f \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043d\u044f\u0442\u044c \u043d\u0435 \u0441\u043c\u043e\u0433, \u043f\u0440\u043e\u0441\u0442\u0438\u0442\u0435. \u041d\u0430\u0441\u0442\u0440\u043e\u044e strict priority \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0433\u043e\u043b\u043e\u0441\u0430. \u0412\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u044d\u0442\u043e \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043a\u0430\u043a \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0442\u0430\u043a\u0438\u0445 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439. \u041f\u043e\u043d\u0430\u0447\u0430\u043b\u0443 \u043f\u0443\u0442\u0430\u043b\u0441\u044f, \u043d\u043e \u043f\u043e\u0442\u043e\u043c \u043f\u043e\u0434\u0443\u043c\u0430\u043b, \u0447\u0442\u043e \u0435\u0441\u043b\u0438 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e 2124, \u0433\u0434\u0435 \u0432\u0441\u0435\u0433\u043e 4 \u043e\u0447\u0435\u0440\u0435\u0434\u0438, \u0430 \u0435\u0449\u0435 \u0438 3124, \u0433\u0434\u0435 \u0438\u0445 8 \u0448\u0442\u0443\u043a, \u0442\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0432 \u0442\u0430\u043a\u043e\u043c \u0432\u0438\u0434\u0435 \u0438\u043c\u0435\u0435\u0442 \u0441\u043c\u044b\u0441\u043b. <pre><code>mes2124p(config)#priority-queue out num-of-queues\n  &lt;0-4&gt;                Assign the number of queues to be expedite queues. The\n                       expedite queues would be the queues with higher indexes\n  0                    all queues are assured forwarding (WRR)\n  4                    all queues are expedite\nmes2124p(config)#priority-queue out num-of-queues 1\nmes2124p(config)#\n</code></pre> \u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u0434\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0431\u0443\u0444\u0435\u0440\u044b \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439, \u0447\u0442\u043e\u0431\u044b \u0442\u0430\u043a\u0438\u0445 \u0434\u0440\u043e\u043f\u043e\u0432, \u043a\u0430\u043a \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u0432\u044b\u0448\u0435, \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043f\u043e \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438. \u041d\u0438\u0436\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0431\u0443\u0444\u0435\u0440\u043e\u0432 \u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u041c\u0435\u043d\u044f \u043d\u0435 \u043f\u043e\u043a\u0438\u0434\u0430\u0435\u0442 \u043e\u0449\u0443\u0449\u0435\u043d\u0438\u0435 \u043d\u0435\u0434\u043e\u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438, \u043d\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u043d\u0430\u0434\u043e, \u0443\u0447\u0438\u0442\u044c\u0441\u044f \u0442\u043e\u0436\u0435 \u043d\u0430\u0434\u043e, \u0434\u0430\u0436\u0435 \u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0430\u0445 (\u043b\u0443\u0447\u0448\u0435 \u043d\u0430 \u0441\u0442\u0435\u043d\u0434\u0435). <pre><code>mes2124p#sh qos tail-drop\n  Physical buffers enqueued:   87        (limit 4032)\n  Total descriptors enqueued:  0         (limit 3854)\n  Total buffers enqueued:      0         (limit 262143)\n  MC descriptors enqueued:     0         (limit 896)\n  Shared descriptors enqueued: 0         (limit 1056)\n  Shared buffers enqueued:     0         (limit 1056)\n\nmes2124p#sh qos tail-drop interface gi1/0/1\nPort: gi1/0/1 is bound to default tail-drop profile\n  Port descriptors enqueued:           0         (limit 44)\n  Port buffers enqueued:               0         (limit 264)\n    Queue 1 descriptors enqueued:      0         (limit 12)\n            buffers enqueued:          0\n    Queue 2 descriptors enqueued:      0         (limit 12)\n            buffers enqueued:          0\n    Queue 3 descriptors enqueued:      0         (limit 12)\n            buffers enqueued:          0\n    Queue 4 descriptors enqueued:      0         (limit 12)\n            buffers enqueued:          0\n\u041f\u043e \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0438 \u0441 \u0446\u0438\u0441\u043a\u043e\u0432\u043a\u0438\u043c queue-set \u0442\u0443\u0442 \u0435\u0441\u0442\u044c tail-drop profile, \u043d\u043e \u0435\u0441\u043b\u0438 \u0443 \u0446\u0438\u0441\u043a\u0438 \u0432\u0441\u0435\u0433\u043e 2 \u043f\u0440\u043e\u0444\u0438\u043b\u044f, \u0442\u043e \u0442\u0443\u0442 \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c 4.\nmes2124p(config)#qos tail-drop profile 1\nmes2124p(config-tdprofile)#queue 1 limit\n  &lt;0-400&gt;              Queue limit in packets. Minimal recommended value is\n                       64 in case when WRTD is enabled. Check user manual for\n                       details.\nmes2124p(config-tdprofile)#queue 1 limit 400\nmes2124p(config-tdprofile)#queue 2 limit 150\nmes2124p(config-tdprofile)#queue 3 limit 150\nmes2124p(config-tdprofile)#queue 4 limit 150\n</code></pre> \u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043a \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443. <pre><code>mes2124p(config)#int gi1/0/1\nmes2124p(config-if)#qos tail-drop profile 1\nmes2124p(config-if)#exit\nmes2124p(config)#\nmes2124p#sh qos tail-drop interface gi1/0/1\nPort: gi1/0/1 is bound to tail-drop profile 1\n  Port descriptors enqueued:           0         (limit 44)\n  Port buffers enqueued:               0         (limit 264)\n    Queue 1 descriptors enqueued:      0         (limit 400)\n            buffers enqueued:          0\n    Queue 2 descriptors enqueued:      0         (limit 150)\n            buffers enqueued:          0\n    Queue 3 descriptors enqueued:      0         (limit 150)\n            buffers enqueued:          0\n    Queue 4 descriptors enqueued:      0         (limit 150)\n            buffers enqueued:          0\n</code></pre> \u041e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0439 \u0442\u0435\u0441\u0442 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u043f\u043e\u0442\u0435\u0440\u044c \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u044f\u0445. <pre><code>mes2124p#sh qos statistics\n\nOutput Queues\n-------------\n\n  Interface      Queue      Dp    Total packets   TD packets\n------------- ------------ ----- --------------- -------------\n   gi1/0/1         4        All         0              0\n   gi1/0/1         1        All      115571            0\n\nmes2124p#sh qos tail-drop\n  Physical buffers enqueued:   764       (limit 4032)\n  Total descriptors enqueued:  111       (limit 3854)\n  Total buffers enqueued:      665       (limit 262143)\n  MC descriptors enqueued:     0         (limit 896)\n  Shared descriptors enqueued: 0         (limit 1056)\n  Shared buffers enqueued:     0         (limit 1056)\n</code></pre></p>"},{"location":"network/errors/","title":"Interface Errors","text":"<p>\u041f\u043e snmp \u0441\u043d\u0438\u043c\u0430\u0442\u044c \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u0448\u0438\u0431\u043a\u0438. \u0412 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0435 ifInErrors \u0432\u0441\u0435 \u043f\u043e\u0434\u0440\u044f\u0434. \u0421\u0442\u0430\u0442\u0443\u0441 \u0434\u0443\u043f\u043b\u0435\u043a\u0441\u0430 \u0435\u0441\u0442\u044c \u0432 EtherLike-MIB \u043a\u0430\u043a \u0438 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432.</p>"},{"location":"network/errors/#input-errors-overrun","title":"input errors overrun","text":"<p>\u041d\u0430 \u0448\u0430\u0441\u0441\u0438 \u0441 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0439 \u0441\u0432\u0438\u0447\u0435\u0432\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0439. \u041e\u0448\u0438\u0431\u043a\u0438 overrun \u0432\u044b\u0437\u0432\u0430\u043d\u044b \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u0439 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c\u044e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430. \u041f\u0440\u0438\u0447\u0435\u043c \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043c\u043e\u0436\u043d\u043e \u0443\u0441\u0443\u0433\u0443\u0431\u0438\u0442\u044c. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0432 \u0442\u0430\u043a\u0438\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0432\u0438\u0447\u0435\u0432\u044b\u0435 \u043a\u0430\u0440\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u0442\u0440\u0430\u0444\u0438\u043a \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u043b\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 Ba0/3. C\u0443\u0434\u044f \u043f\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0435 iftable, \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043e\u0448\u0438\u0431\u043e\u043a \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0441\u0442\u0438 \u0431\u044b\u0441\u0442\u0440\u0435\u0435 \u043d\u0430 \u044d\u0442\u043e\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0441\u0432\u0438\u0447\u0435\u0432\u043e\u0439 \u043a\u0430\u0440\u0442\u044b \u0441 \u0433\u0438\u0433\u0430\u0431\u0438\u0442\u043d\u044b\u043c\u0438 \u043f\u043e\u0440\u0442\u0430\u043c\u0438. \u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u0432\u044b\u0432\u043e\u0434 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 \u0441 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 cisco 1921 <pre><code>cisco1921# sh int | in overr|^GigabitEthernet0/[01]\n     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored\nGigabitEthernet0/0 is up, line protocol is up\n     48677539 input errors, 0 CRC, 0 frame, 48677539 overrun, 0 ignored\nGigabitEthernet0/1 is up, line protocol is up\n     4533642 input errors, 0 CRC, 0 frame, 4533642 overrun, 0 ignored\n</code></pre></p>"},{"location":"network/errors/#input-errors-ignored","title":"input errors ignored","text":"<p>\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u0430\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c. \u041e\u0442 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0437\u0430\u0446\u0438\u0438 \u0442\u043e\u043b\u043a\u0443 \u043d\u0435\u0442, \u0431\u0443\u0434\u0443\u0442 \u0434\u0440\u043e\u043f\u044b \u0432 \u0433\u043e\u043b\u043e\u0441\u0435 \u0438 \u0432\u0438\u0434\u0435\u043e. <pre><code>98559 input errors, 0 CRC, 0 frame, 0 overrun, 98559 ignored\n</code></pre></p>"},{"location":"network/errors/#input-errors-unknown-protocol-drops","title":"input errors unknown protocol drops","text":"<p>\u0412\u0435\u0440\u043e\u044f\u0442\u043d\u043e LLDP \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u043c \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f. <pre><code>2238654 unknown protocol drops\n</code></pre></p>"},{"location":"network/errors/#input-errors-crc","title":"input errors CRC","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0444\u0438\u0437\u0438\u043a\u0443, \u0434\u0443\u043f\u043b\u0435\u043a\u0441. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0435 \u043a\u043e\u043b\u0432\u043e \u043e\u0448\u0438\u0431\u043e\u043a \u043f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430. <pre><code>59 input errors, 59 CRC, 0 frame, 0 overrun, 0 ignored\n</code></pre></p>"},{"location":"network/errors/#output-drops","title":"output drops","text":"<p>\u041f\u0440\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u043d\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430\u0445 \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u043c\u0430\u043b\u043e\u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u0435\u043d. <pre><code>Input queue: 0/75/1/0 (size/max/drops/flushes); Total output drops: 3354485\n</code></pre></p>"},{"location":"network/errors/#input-errors-runts","title":"input errors runts","text":"<p>\u041f\u043e\u0440\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u0432 access, \u0430 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u0439 \u0432 trunk \u0435\u0441\u043b\u0438 \u043e\u0448\u0438\u0431\u043a\u0438 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e \u0440\u0430\u0441\u0442\u0443\u0442. <pre><code>32 runts, 0 giants, 0 throttles\n32 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored\n</code></pre></p>"},{"location":"network/errors/#input-errors-fcs","title":"input errors FCS","text":"<p>\u041c\u0435\u043d\u044f\u0442\u044c SFP, \u043f\u043e\u0440\u0442 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0435. \u041d\u043e \u044d\u0442\u043e \u043d\u0435 \u0442\u043e\u0447\u043d\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442, \u0442.\u043a. \u0435\u0441\u043b\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 Cut-Through \u0440\u0435\u0436\u0438\u043c\u0435 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0446\u0438\u0438, \u0442\u043e \u0444\u0440\u0435\u0439\u043c \u0441 \u043e\u0448\u0438\u0431\u043a\u043e\u0439 \u043c\u043e\u0433 \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c\u0441\u044f \u0441 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0433\u043e \u0441\u0435\u0442\u0435\u0432\u043e\u0433\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0430\u0432\u0442\u043e\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u0443\u043f\u043b\u0435\u043a\u0441\u0430. \u041d\u0430 100\u043c\u0431\u0438\u0442 \u043e\u043f\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043b\u0438\u043d\u043a\u0430\u0445 \u044d\u0442\u043e \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e. /network/eltex/#negotiation</p>"},{"location":"network/errors/#input-errors-crc_1","title":"input errors CRC","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0444\u0438\u0437\u0438\u043a\u0443, \u0434\u0443\u043f\u043b\u0435\u043a\u0441. \u041d\u0430 \u043e\u043f\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043b\u0438\u043d\u043a\u0430\u0445 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u043f\u0440\u0438 \u0437\u0430\u043b\u043e\u043c\u0430\u0445 \u043f\u0430\u0447\u043a\u043e\u0440\u0434\u0430, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0435 \u043d\u0430\u0434\u043e \u0435\u0433\u043e \u043d\u0430\u043c\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u043d\u0430 \u043e\u0440\u0433\u0430\u043d\u0430\u0439\u0437\u0435\u0440\u044b. \u041e\u0448\u0438\u0431\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0442\u044c, \u0435\u0441\u043b\u0438 \u043d\u0430 \u043e\u0434\u043d\u043e\u043c\u043e\u0434\u043e\u0432\u043e\u043c \u0443\u0447\u0430\u0441\u0442\u043a\u0435 \u0432\u043e\u043b\u0441 \u0435\u0441\u0442\u044c \u043c\u043d\u043e\u0433\u043e\u043c\u043e\u0434\u043e\u0432\u044b\u0439 \u043f\u0430\u0442\u0447\u043a\u043e\u0440\u0434 \u0438\u043b\u0438 \u043f\u0438\u0433\u0442\u0435\u0439\u043b.</p>"},{"location":"network/errors/#output-discards","title":"output discards","text":"<ul> <li>\u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c qos, \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u0447\u0435\u0440\u0435\u0434\u0438, \u0431\u0443\u0444\u0435\u0440\u044b. \u0412\u043e\u0442 \u0442\u0443\u0442 \u0438 \u043d\u0430\u0447\u0438\u0430\u0435\u0448\u044c \u0446\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b \u0441\u043e \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430\u043c\u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439.</li> <li>speed mismatch (\u0430\u043f\u043b\u0438\u043d\u043a 1Gbit/s, downlink 100Mbit/s). \u041f\u043e\u0442\u0435\u0440\u0438 \u0438\u0437-\u0437\u0430 burst, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0435 \u0441\u043c\u043e\u0433 \u0431\u0443\u0444\u0435\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440. \u0411\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u043e \u0441\u0432\u0438\u0447\u0435\u0439 \u0441 shared \u0431\u0443\u0444\u0435\u0440\u043e\u043c \u043d\u0430 \u0432\u0441\u0435\u0445 \u043f\u043e\u0440\u0442\u0430\u0445.</li> </ul>"},{"location":"network/errors/#-","title":"\u0434\u0440\u043e\u043f\u044b \u0438\u0437-\u0437\u0430 \u043d\u0435\u0443\u0434\u0430\u0447\u043d\u043e\u0439 \u043c\u043e\u0434\u0435\u043b\u0438","text":"<p>\u041f\u0440\u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u043e\u043c \u043d\u0430 \u0432\u0441\u0435\u0445 \u043f\u043e\u0440\u0442\u0430\u0445 flowcontrol \u043d\u0430 \u0442\u0435\u0441\u0442\u0430\u0445 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432\u0441\u0435 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e. \u0421\u0447\u0435\u0442\u0447\u0438\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u043d\u0435\u0442. \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438 \u0441\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u043d\u0430 \u0430\u043f\u043b\u0438\u043d\u043a\u0435 \u0438 \u0434\u0430\u0443\u043d\u043b\u0438\u043a\u0435. \u0415\u0441\u043b\u0438 \u043d\u0435 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u043e, \u0442\u043e \u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0434\u0440\u0443\u0433\u0443\u044e \u043c\u043e\u0434\u0435\u043b\u044c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430.</p>"},{"location":"network/errors/#-_1","title":"\u0434\u0440\u043e\u043f\u044b \u0438\u0437-\u0437\u0430 \u043f\u0435\u0440\u0435\u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438","text":"<p>\u041d\u0430 \u043c\u043e\u0434\u0443\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043b\u0430\u0442 \u0441 \u043f\u0435\u0440\u0435\u043f\u043e\u0434\u043f\u0438\u0441\u043a\u043e\u0439 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u043e\u0448\u0438\u0431\u043a\u0438. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043f\u043e\u0440\u0442\u044b \u0441\u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0438 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u043e\u0432\u0430\u0442\u044c \u0447\u0430\u0441\u0442\u044c \u043f\u043e\u0440\u0442\u043e\u0432.</p>"},{"location":"network/esxi/","title":"Esxi","text":""},{"location":"network/esxi/#list","title":"list","text":"<pre><code>esxcli network nic list\n</code></pre>"},{"location":"network/esxi/#flowcontrol","title":"flowcontrol","text":"<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u043d\u0430 \u0432\u0441\u0435\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445 <pre><code>esxcli network nic pauseParams list\n</code></pre> \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 /etc/rc.local.d/local.sh <pre><code>/bin/esxcli network nic pauseParams set --nic-name=vmnicX --rx=false --tx=false\n</code></pre></p>"},{"location":"network/esxi/#rx-buffer","title":"rx buffer","text":"<p>Troubleshooting network receive traffic faults and other NIC errors in ESXi (50121760)</p> <p><pre><code>[root@exsi:~] esxcli network nic stats get -n vmnic2  | grep Receive\n   Receive packets dropped: 0\n   Receive length errors: 0\n   Receive over errors: 50571\n   Receive CRC errors: 0\n   Receive frame errors: 0\n   Receive FIFO errors: 748049\n   Receive missed errors: 0\n</code></pre> \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>esxcli network nic ring preset get -n vmnic2\nesxcli network nic ring current get -n vmnic2\n</code></pre> \u0414\u0440\u043e\u043f\u044b \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0432 \u0442.\u0447. \u0432 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430\u0445 ifInErrors, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u043e snmp.</p>"},{"location":"network/esxi/#snmp","title":"snmp","text":"<pre><code>esxcli system snmp set --communities public\nesxcli system snmp set --enable true\n</code></pre>"},{"location":"network/extreme/","title":"Switch extreme","text":"<p>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f extreme \u0438 ExtremeXOS 30.7 </p>"},{"location":"network/extreme/#reset","title":"reset","text":"<p>\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e. \u0421\u0440\u0430\u0437\u0443 \u043f\u043e\u0441\u043b\u0435 \u0432\u0432\u043e\u0434\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430.</p> <pre><code>unconfigure switch all\n</code></pre>"},{"location":"network/extreme/#vlan","title":"vlan","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c <pre><code>create vlan myvlan tag 10\n</code></pre> \u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u0442\u044c <pre><code>configure vlan myvlan name notmyvlan\n</code></pre> \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u043e\u0440\u0442 \u043d\u0435\u0442\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c. untagged \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e <pre><code>configure vlan myvlan add port 1 [untagged]\n</code></pre> \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c <pre><code>configure vlan myvlan add port 1 tagged\n</code></pre> \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 \u043a\u0430\u043a\u0438\u0445 \u043f\u043e\u0440\u0442\u0430\u0445 \u0432\u043b\u0430\u043d <pre><code>show vlan myvlan\n</code></pre> \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u0430\u043a\u0438\u0435 \u0432\u043b\u0430\u043d\u044b \u0432 \u043f\u043e\u0440\u0442\u0443 <pre><code>show port 1 vlan\n</code></pre></p>"},{"location":"network/extreme/#erps","title":"erps","text":"<p>\u041f\u0440\u043e\u043a\u043e\u0442\u043e\u043b \u0437\u0430\u0449\u0438\u0442\u044b \u043e\u0442 \u043f\u0435\u0442\u0435\u043b\u044c ERPS. \u0427\u0430c\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0432\u0437\u044f\u0442\u043e \u0441 \u0441\u0430\u0439\u0442\u0430 h3c ERPS configuration</p> <p>\u0421\u0432\u043e\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u043f\u0440\u043e \u043e\u0431\u044b\u0447\u043d\u043e\u0435 \u043a\u043e\u043b\u044c\u0446\u043e \u0431\u0435\u0437 interconnection nodes:</p> <ul> <li>RPL - ring protection links. \u042d\u0442\u043e \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u0430\u044f \u043e\u043f\u0442\u0438\u043a\u0430, \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043e\u0431\u044b\u0447\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f.</li> <li>RPL Owner - \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0441 \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0433\u043e \u043b\u0438\u043d\u043a\u0430.</li> <li>RPL Neighbor - \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0441 \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u043a\u043e\u043d\u0446\u0430 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0433\u043e \u043b\u0438\u043d\u043a\u0430 \u0434\u043e RPL owner</li> <li>Ring node - \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b \u0432 \u043a\u043e\u043b\u044c\u0446\u0435. </li> </ul> <p>\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043a\u043e\u043b\u044c\u0446\u0430 erps \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044f \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u043e \u043d\u0430 \u0432\u0441\u0435\u0445 \u043d\u043e\u0434\u0430\u0445:</p> <ul> <li>idle - \u0432\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u044b\u0439 \u043b\u0438\u043d\u043a \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f, \u0442.\u043a. \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f RPL Neighbor'\u043e\u043c</li> <li>protected - \u043e\u0431\u0440\u044b\u0432 \u043b\u0438\u043d\u043a\u0430 \u043c\u0435\u0436\u0434\u0443 \u043d\u043e\u0434\u0430\u043c\u0438, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043b\u0438\u043d\u043a RPL.</li> <li>pending - \u043b\u0438\u043d\u043a \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d, \u043d\u043e \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043d\u043e\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043d\u0430 \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u0430.</li> </ul> <p>\u041a\u0430\u043a \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c vlan \u0432 \u043a\u043e\u043b\u044c\u0446\u043e</p> <p>\u041d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 extreme, \u0433\u0434\u0435 \u0435\u0441\u0442\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0432\u0432\u043e\u0434\u0430 \u043a\u043e\u043c\u0430\u043d\u0434 \u0441 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c <pre><code>extreme # create vlan \"v100\"\n* extreme # configure vlan v100 tag 100\n* extreme # configure vlan v100 add ports 1,48 tagged\nMake sure v100 is protected by ERPS. Adding ERPS ring ports to a VLAN could cause a loop in the network.\nDo you really want to add these ports? (y/N) No\nOperation cancelled.\n* extreme # configure erps RING add protected vlan v100\nWarning: Ring ports already configured are not added to VLAN\n</code></pre></p> <p>\u0422.\u0435. \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c, \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 protected vlan, \u0430 \u043f\u043e\u0442\u043e\u043c \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c \u0432 \u043f\u043e\u0440\u0442\u044b \u043a\u043e\u043b\u044c\u0446\u0430. \u041d\u0430 \u0432\u0441\u0435\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u043a\u043e\u043b\u044c\u0446\u0430: <pre><code>extreme # create vlan \"v100\"\n* extreme # configure vlan v100 tag 100\n* extreme # configure erps RING add protected vlan v100\nWarning: Ring ports already configured are not added to VLAN\n</code></pre></p> <p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u043e\u0440\u0442\u044b \u043d\u0430 \u0432\u0441\u0435\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u043a\u043e\u043b\u044c\u0446\u0430. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u044d\u0442\u043e \u043f\u043e\u0440\u0442\u044b 1 \u0438 48 \u043d\u0430 \u0432\u0441\u0435\u0445 4 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445: <pre><code>extreme1 # configure vlan v100 add ports 1,48 tagged\nextreme2 # configure vlan v100 add ports 1,48 tagged\nextreme3 # configure vlan v100 add ports 1,48 tagged\nextreme4 # configure vlan v100 add ports 1,48 tagged\n</code></pre></p> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e <pre><code>* extreme1 # save\n* extreme2 # save\n* extreme3 # save\n* extreme4 # save\n</code></pre></p>"},{"location":"network/extreme/#redundant-port","title":"redundant port","text":"<p>\u041f\u0435\u0440\u0432\u044b\u0439 \u043f\u043e\u0440\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439, \u0432\u0442\u043e\u0440\u043e\u0439 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d. <pre><code>extreme #configure port 1 redundant 2 link off\n</code></pre></p> <p>\u041d\u0438\u0436\u0435 \u043d\u0435\u0442 \u043b\u0438\u043d\u043a\u0430 \u0441 1 \u043f\u043e\u0440\u0442\u043e\u043c, \u043f\u043e\u0442\u043e\u043c 1 \u043f\u043e\u0440\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f, \u0430 2 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u043e\u043c \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f. <pre><code>extreme # sh ports redundant\n\nPrimary: 1,             Redundant: *2,   Link on/off option: OFF\n        Flags: (*)Active, (!) Disabled, (g) Load Share Group\n\nextreme # sh ports redundant\n\nPrimary: *1,            Redundant: 2,    Link on/off option: OFF\n        Flags: (*)Active, (!) Disabled, (g) Load Share Group\n</code></pre></p>"},{"location":"network/extreme/#mtu","title":"mtu","text":"<pre><code>configure jumbo-frame-size 9216\nenable jumbo-frame ports all\nconfigure ip-mtu 9216 vlan p2p\nWarning: The IP-MTU size 9216 may be too large for jumbo-frame-size 9216\nconfigure ip-mtu 9194 vlan p2p\n</code></pre>"},{"location":"network/extreme/#forwarding","title":"forwarding","text":"<pre><code>enable ipforwarding\nenable ipforwarding p2p\n</code></pre>"},{"location":"network/extreme/#bgp","title":"bgp","text":"<p>How to enable Bidirectional Forwarding Detection (BFD) protection of BGP peering sessions \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c bgp, bfd, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0438\u0440\u0430. <pre><code>enable bfd vlan p2p\nconfigure bfd vlan p2p receive-interval 250 transmit-interval 250\n</code></pre></p> <p><pre><code>configure bgp AS-number 65010\nconfigure bgp routerid 10.10.10.10\nconfigure bgp maximum-paths 2\nconfigure bgp add network 10.10.10.10/32\nconfigure bgp add network 10.100.0.0/30\nconfigure bgp add network 10.200.0.0/30\ncreate bgp neighbor 10.100.0.1 remote-AS-number 65100\nconfigure bgp neighbor 10.100.0.1 bfd on\nenable bgp neighbor 10.100.0.1\ncreate bgp neighbor 10.200.0.1 remote-AS-number 65200\nconfigure bgp neighbor 10.200.0.1 bfd on\nenable bgp neighbor 10.200.0.1\nconfigure bgp neighbor 10.100.0.1 next-hop-self\nconfigure bgp neighbor 10.200.0.1 next-hop-self\nenable bgp\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>extreme # show bfd session\nNeighbor         Interface      Clients  Detection  Status       VR\n=============================================================================\n10.100.0.1       p2p_100        -b----     750      Up           VR-Default\n10.200.0.1       p2p_200        -b----     750      Up           VR-Default\n=============================================================================\nClients Flag: b - BGP, m - MPLS, o - OSPF, s - Static, t - OTM\nNOTE: All timers in milliseconds.\n</code></pre> \u041a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043b\u044f bgp <pre><code>show bgp neighbor\nshow bgp neighbor [peer_ip] received-routes all\nshow bgp neighbor [peer_ip] transmitted-routes all\n</code></pre></p>"},{"location":"network/extreme/#bgp-policy","title":"bgp policy","text":"<p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438 <pre><code>edit policy ibgp\n</code></pre> \u041e\u0442\u043a\u0440\u043e\u0435\u0442\u0441\u044f \u0444\u0430\u0439\u043b \u0432 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0435 vi <pre><code>entry limit {\nif match any {\n        nlri 10.0.6.0/24;\n        nlri 10.0.7.0/24;\n} then {\ndeny;\n}\n}\nentry permit {\nif match all {\n}\nthen {\n    permit;\n}\n}\n</code></pre> entry - \u044d\u0442\u043e \u043a\u0430\u043a term \u0432 junos, if = from, then = then. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u0437\u0430\u043f\u0440\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u0432. \u041a\u0430\u0436\u0434\u044b\u0439 \u0444\u0430\u0439\u043b \u043d\u0430\u0434\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c <pre><code>check policy ibgp\n</code></pre> \u041f\u043e\u0442\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c <pre><code>configure bgp neighbor 10.0.1.2 route-policy out ibgp\n</code></pre> \u041f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c <pre><code>refresh policy \"ibgp\"\n</code></pre></p>"},{"location":"network/extreme/#ecmp","title":"ecmp","text":"<p>\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c, \u0443\u043a\u0430\u0437\u0430\u0432 \u043d\u0443\u0436\u043d\u044b\u0439 vr <pre><code>enable iproute sharing vr VR-Default\n</code></pre></p>"},{"location":"network/extreme/#evpn","title":"evpn","text":"<p>The following are limitations for EVPN:</p> <ul> <li>EVPN functionality is not supported between switches running ExtremeXOS 30.2 and switches running earlier ExtremeXOS versions. The earlier versions rely on auto-creation of IBGP peers, which is disabled functionality in ExtremeXOS 30.2. However, the proprietary AFI are supported and can be used to establish tunnels to RTEPs so that native VXLAN functionality using data plane learning functions is supported.</li> <li>A maximum of 1,024 EVI instances are supported.</li> <li>IPv6 Type 2 routes are not supported.</li> <li>Stacking is not supported.</li> <li>ExtremeXOS only supports asymmetric routing model.</li> <li>Configuring VMANs as VXLAN tenant VLANs is not supported.</li> <li>Anycast gateway is not supported.</li> <li>ExtremeXOS does not advertise default gateway extended community.</li> <li>Multi-hop BFD is not supported.</li> <li>Peer-group configuration for L2VPN-EVPN address family is not supported.</li> <li>If silent hosts are expected, static ARP/FDB should be created on tenant VLANs for these hosts. To configure static ARP entries it is necessary to configure IP address on tenant VLANs.</li> </ul> <p>For Type 5 routes, the following are not supported: * Switching through a VXLAN tunnel to a remote L3 Anycast gateway. * Default VRs.</p> <p>EVPN with iBGP Configuration Example</p> <p>\u0414\u043b\u044f \u0441\u043b\u0443\u0447\u0430\u044f, \u043a\u043e\u0433\u0434\u0430 \u043d\u0430\u0434\u043e \u0442\u043e\u043b\u044c\u043a\u043e L2 \u0438 \u043d\u0435 \u043d\u0443\u0436\u0435\u043d mlag</p> <ul> <li><code>enable jumbo-frame ports all</code></li> <li>\u0441\u043e\u0437\u0434\u0430\u0442\u044c p2p \u0432\u043b\u0430\u043d\u044b, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0434\u043b\u044f \u043d\u0438\u0445 bfd</li> <li>\u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c ipforwarding \u0438 ecmp</li> <li><code>configure ip-mtu 9194 vlan p2p</code></li> <li>\u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c ospf + bfd</li> <li>\u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c ibgp \u0441 capability l2vpn-EVPN</li> <li>\u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0432\u043b\u0430\u043d tenant, ipaddress \u0434\u043b\u044f \u043d\u0435\u0433\u043e \u043d\u0435 \u043d\u0443\u0436\u0435\u043d</li> <li>\u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c igmp snooping \u0434\u043b\u044f tenant</li> <li><code>virtual-network local-endpoint ipaddress</code> \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u043b\u0443\u043f\u0431\u0435\u043a\u0435.</li> <li>\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c tenant \u0432 vni</li> <li><code>configure vlan tenant suppress arp-only</code> \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0441\u043b\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432 vni \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e</li> <li>\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c tenant \u0432 \u043f\u043e\u0440\u0442\u044b</li> </ul> <p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>show iproute\nshow ospf neighbor\nshow bgp neighbor\nshow bgp evpn evi\nshow bgp evpn mac\n</code></pre></p> <p>\u041d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e \u0441 mac-locking <pre><code>Error: The VLAN cannot be added to the virtual network due to the following incompatibilities:\nAt least one of the member ports has MAC Locking feature enabled\n</code></pre></p>"},{"location":"network/extreme/#vxlan-flood-mode","title":"vxlan flood mode","text":"<p>\u0426\u0438\u0442\u0430\u0442\u0430:</p> <p>In ExtremeXOS, a virtual network operates in one of the following flood modes:</p> <ul> <li>Flood mode standard (default)</li> <li>Flood mode explicit</li> </ul> <p>These modes determine the way the remote endpoints are created/learned, and the way the tenant BUM traffic is handled.</p> <p>Flood Mode Standard</p> <p>The remote endpoints dynamically are learned using OSPF VXLAN extensions (see OSPFv2 VXLAN Extensions) or Multiprotocol BGP (MBGP) support for VXLAN (see Multiprotocol Border Gateway Protocol (MBGP) Support for VXLAN). Alternately, remote endpoints can be statically configured and attached to a virtual network using the CLI. The tenant BUM traffic is head-end replicated to each of the configured/learned remote endpoints on that virtual network.</p> <p>Flood Mode Explicit</p> <p>The remote endpoints can only be statically configured by attaching them to BUM FDB entries using the CLI. The tenant BUM traffic is head-end replicated to each of the configured remote endpoints for the corresponding FDB entry. By explicitly adding BUM FDB entries, this mode provides flexibility in splitting the BUM entries to individual broadcast, unknown unicast, and unknown multicast entries.</p> <p>\u0422\u043e\u0447\u043a\u0430 \u0410 <pre><code>create virtual-network \"vni2\" flooding explicit-remotes\nconfigure virtual-network \"vni2\" vxlan vni 101\nconfigure virtual-network \"vni2\" add vlan tenant_a_b\ncreate fdb broadcast vlan tenant_a_b vxlan ipaddress 10.0.0.\u0411\ncreate fdb unknown-multicast vlan tenant_a_b vxlan ipaddress 10.0.0.\u0411\ncreate fdb unknown-unicast vlan tenant_a_b vxlan ipaddress 10.0.0.\u0411\n</code></pre> \u0422\u043e\u0447\u043a\u0430 \u0411 <pre><code>create virtual-network \"vni2\" flooding explicit-remotes\nconfigure virtual-network \"vni2\" vxlan vni 101\nconfigure virtual-network \"vni2\" add vlan tenant_a_b\ncreate fdb broadcast vlan tenant_a_b vxlan ipaddress  10.0.0.\u0410\ncreate fdb unknown-multicast vlan tenant_a_b vxlan ipaddress 10.0.0.\u0410\ncreate fdb unknown-unicast vlan tenant_a_b vxlan ipaddress 10.0.0.\u0410\n</code></pre></p>"},{"location":"network/extreme/#packet-drops","title":"packet drops","text":"<pre><code>show port congestion\n</code></pre> <p>Prevent packet drops</p>"},{"location":"network/extreme/#edp","title":"edp","text":"<p>\u041f\u043e\u043c\u0438\u043c\u043e cdp \u0438 lldp \u0435\u0441\u0442\u044c \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b edp, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043e\u0441\u0435\u0434\u0435\u0439 (ports all), \u0430 \u0442\u0430\u043a \u0436\u0435 \u0441\u043f\u0438\u0441\u043e\u043a vlan, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u043d\u044b \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u043c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 extreme (ports 1 detail). <pre><code>show edp ports all\nshow edp ports 1 detail\n</code></pre></p>"},{"location":"network/extreme/#mac-lock","title":"mac-lock","text":"<p>\u041f\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u043a\u043e\u043b-\u0432\u043e \u043c\u0430\u043a-\u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u043d\u0430 \u043f\u043e\u0440\u0442\u0443, \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u043a\u043e\u0439 \u043d\u0443\u0436\u043d\u044b\u0439</p> <pre><code>enable mac-locking\nenable mac-locking ports 5\nconfigure mac-locking ports 5 first-arrival limit-learning 0\nconfigure mac-locking ports 5 static add station d4:ca:6d:88:f5:50\n</code></pre>"},{"location":"network/extreme/#elrp","title":"elrp","text":"<p>\u041f\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0443 \u0430\u043f\u043b\u0438\u043d\u043a\u043e\u0432 ( \u043f\u043e\u0440\u0442 1 ), \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443 \u0444\u0440\u0435\u0439\u043c\u043e\u0432 \u0434\u043b\u044f \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u0438\u0435 \u043f\u0435\u0442\u043b\u0438 \u0432 10 \u0432\u043b\u0430\u043d\u0435</p> <pre><code>enable elrp-client\nconfigure elrp-client periodic vlan VLAN-10 ports 5 disable-port duration 30\nconfigure elrp-client disable-port exclude 1\n</code></pre>"},{"location":"network/extreme/#passwd","title":"passwd","text":"<p>\u0414\u043b\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u0447\u0442\u043e \u043f\u043e\u0434\u043e\u0431\u043d\u043e\u0435 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f <pre><code>configure account all password-policy lockout-on-login-failures off\nconfigure account all password-policy char-validation none\nconfigure account all password-policy min-length none\n</code></pre> \u0414\u043b\u044f \u0441\u043c\u0435\u043d\u044b \u043f\u0430\u0440\u043e\u043b\u044f \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u043d\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c, \u043b\u0438\u0431\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0443\u0447\u0435\u0442\u043a\u0443 \u0446\u0435\u043b\u0438\u043a\u043e\u043c. \u041f\u0440\u0438 \u044d\u0442\u043e\u043c \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0434\u043e\u043b\u0436\u043d\u0430 \u0434\u043e \u044d\u0442\u043e\u0433\u043e \u0431\u044b\u0442\u044c \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0435\u0449\u0435 \u043e\u0434\u043d\u0430 \u0443\u0447\u0435\u0442\u043a\u0430 \u0441 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u043c\u0438 \u043f\u0440\u0430\u0432\u0430\u043c\u0438. <pre><code>extreme# configure account admin\nCurrent user's password:\nNew password:\nReenter password:\n</code></pre></p>"},{"location":"network/extreme/#radius","title":"radius","text":"<p><pre><code>configure radius mgmt-access primary server [radius-ip] 1812 client-ip [my-ip] vr VR-Default\n</code></pre> \u0412\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447 <pre><code>configure radius mgmt-access primary shared-secret\nNote: Shared secrets created with this version of EXOS are not compatible with EXOS 21.x and earlier.\nSecret:\nReenter Secret:\n</code></pre> \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0430\u0434\u0438\u0443\u0441 \u0434\u043b\u044f mgmt-access <pre><code>enable radius mgmt-access\n</code></pre></p>"},{"location":"network/extreme/#ntp","title":"ntp","text":"<p>\u0427\u0435\u0440\u0435\u0437 \u043a\u0430\u043a\u043e\u0439 \u0432\u043b\u0430\u043d \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d ntp \u0441\u0435\u0440\u0432\u0435\u0440. \u041f\u0440\u043e\u0449\u0435 \u0447\u0435\u0440\u0435\u0437 \u0432\u0441\u0435</p> <pre><code>enable ntp vlan all\nconfigure ntp server add [ntp1-ip] vr VR-Default\nconfigure ntp server add [ntp2-ip] vr VR-Default\n</code></pre>"},{"location":"network/extreme/#sntp","title":"sntp","text":"<pre><code>configure sntp-client primary [ntp1-ip] vr VR-Default\nconfigure sntp-client secondary [ntp2-ip] vr VR-Default\nenable sntp-client\n</code></pre>"},{"location":"network/extreme/#ansible","title":"ansible","text":"<p>Manage Extreme Networks EXOS</p> <p>\u0418\u043d\u0432\u0435\u043d\u0442\u043e\u0440\u0438 \u0444\u0430\u0439\u043b inventory <pre><code>[extreme:vars]\nansible_network_os=exos\nansible_become=no\nansible_connection=network_cli\nansible_python_interpreter=~/base/bin/python\n\n[extreme]\nextreme_switch1 ansible_host=10.9.8.7\n</code></pre> Playbook \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0440\u0430\u0437\u043d\u043e\u0433\u043e \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u0430. <pre><code>---\n- name: must have configuration\n  hosts: extreme\n  gather_facts: false\n\n  tasks:\n\n    - name: sntp clinet\n      community.network.exos_config:\n        lines:\n          - configure sntp-client primary 10.0.0.1 vr VR-Default\n          - configure sntp-client secondary 10.0.0.2 vr VR-Default\n          - enable sntp-client\n\n    - name: timezone\n      community.network.exos_config:\n        lines: configure timezone name MSK 3 autodst\n\n    - name: Save running to startup when modified\n      community.network.exos_config:\n        save_when: changed\n</code></pre></p> <p><code>gather_facts: false</code> \u0442.\u043a. \u0435\u0441\u043b\u0438 true, \u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0432\u043b\u0430\u043d\u044b \u0438 \u0442\u043f.</p>"},{"location":"network/extreme/#stacking","title":"stacking","text":"<p><code>disable stacking-support</code> \u0447\u0442\u043e\u0431 2 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0430 40ge \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0431\u044b\u043b\u043e.</p> <p>\u0415\u0441\u043b\u0438 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0442\u044c \u0441\u0442\u0435\u043a, \u0442\u043e \u044d\u0442\u043e \u0441\u0431\u0440\u043e\u0441\u0438\u0442 \u0441\u0432\u0438\u0447 \u0432 \u0434\u0435\u0444\u043e\u043b\u0442. <pre><code>disable stacking node-address [node-mac]\nreboot node-address [node-mac]\n</code></pre> \u0414\u043b\u044f 670v \u0441 \u043c\u043e\u0434\u0443\u043b\u0435\u043c vim4-40g4x \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u043b\u043e\u0441\u044c \u0440\u0430\u0441\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u0435\u043a, \u0447\u0442\u043e\u0431\u044b \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0440\u0442\u044b. \u0422.\u0435. \u0435\u0441\u043b\u0438 Yes, \u0430 \u043d\u0435 No \u043a\u0430\u043a \u043d\u0438\u0436\u0435 <pre><code># show stacking-support\n\nStack    Available Ports\nPort    Native  Alternate  Configured  Current\n-----   -----------------  ----------  ----------\n1       Yes *   47         Native      Native      \n2       Yes *   48         Native      Native      \nstacking-support:          Enabled     Enabled   \n</code></pre> \u0442\u043e <pre><code>unconfigure stacking-support\n</code></pre></p>"},{"location":"network/extreme/#acl","title":"acl","text":"<p>ACL_Solutions_Guide ACL \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 \u0432 \u0434\u0435\u0442\u0430\u043b\u044f\u0445 ACL:\u0421\u043f\u0438\u0441\u043a\u0438 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 Extreme</p> <p>\u0417\u0430\u0432\u0435\u0440\u0448\u0430\u044e\u0449\u0435\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u043e - permit. \u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430\u043c\u0438/acl \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 vim, \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438: cp, ls \u0438 \u0442\u043f. <pre><code>vi [filenameIn.pol]\ncp [filenameIn.pol] [filenameOut.pol]\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441. aclname - \u0438\u043c\u044f \u043b\u0438\u0441\u0442\u0430 \u0431\u0435\u0437 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f .pol <pre><code>check policy [aclname]\ncheck policy [aclname] access-list\n</code></pre></p> <p>\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0443/acl \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 <pre><code>configure access-list [filename1] ports [num] egress\nconfigure access-list [filename2] ports [num] ingress\n</code></pre> \u041f\u043e\u0441\u043b\u0435 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0443\u0436\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u043d\u043e\u0433\u043e acl \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e <pre><code>refresh policy [aclname]\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 <pre><code>sh access-list counter ingress\nsh access-list counter egress\n</code></pre> \u0423\u0434\u0430\u043b\u0438\u0442\u044c acl \u0441 \u043f\u043e\u0440\u0442\u0430 <pre><code>unconfigure access-list [aclname]\n</code></pre></p>"},{"location":"network/extreme/#40g","title":"40G","text":"<p>\u0412 480g2-48x-4q <pre><code>configure port 49 partition 1x40G\nconfigure port 52 partition 1x40G\nconfigure port 57 partition 1x40G\nconfigure port 61 partition 1x40G\n</code></pre></p>"},{"location":"network/extreme/#software-upgrade","title":"software upgrade","text":"<p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0432\u0435\u0440\u0441\u0438\u0438</p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u0441\u043a\u0430\u0447\u0430\u0442\u044c \u0441 http \u0438 \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c</p> <pre><code>download url http://[ip-address]/firmware/summitX-16.2.5.4-patch1-29.xos vr \"VR-Default\" inactive\n</code></pre> <p>How to upgrade EXOS using SCP <pre><code>scp2 vr VR-Default user@[ip-address]:firmware/summitX-31.1.1.3-patch1-1.xos summitX-31.1.1.3-patch1-1.xos\n</code></pre> \u0418\u043dc\u0442\u0430\u043b\u043b \u0432 primary. \u0415\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e \u0438\u043d\u043e\u0435, \u0442\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0432 \u043a\u043e\u043d\u0446\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c. <pre><code>install image summitX-31.1.1.3-patch1-1.xos\n</code></pre></p>"},{"location":"network/extreme/#vlan-translation","title":"vlan translation","text":"<p>Basic VLAN Translation <pre><code>extreme# configure vlan A vlan-translation add member-vlan B\nError: VLAN translation services can't be added to virtual-network associated VLAN A\n</code></pre></p>"},{"location":"network/extreme/#debug","title":"debug","text":"<p>\u041a\u043e\u0433\u0434\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 cpu system \u0432\u044b\u0448\u0435 20%, \u0442\u043e\u0433\u0434\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b. \u041d\u0443\u0436\u0435\u043d \u0430\u043b\u0435\u0440\u0442 <code>extremeCpuMonitorSystemUtilization1min &gt; 15</code>.</p> <p>\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 cpu. <pre><code>sh cpu-monitoring\n</code></pre> \u0415\u0441\u043b\u0438 <code>top</code>, \u0442\u043e \u044d\u0442\u043e extrRx0</p> <pre><code>debug hal show device port-info system unit 0 | include cpu\n</code></pre> <p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0433\u0434\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u0440\u0430\u0444\u0438\u043a\u0430. \u0415\u0441\u043b\u0438 0, \u0442\u043e \u044d\u0442\u043e \u0431\u0440\u043e\u0430\u0434\u043a\u0430\u0441\u0442 \u0438\u043b\u0438 ipv6. \u041d\u0430 L3 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u0441 evpn \u0431\u0443\u0434\u0435\u0442 3, \u0447\u0442\u043e \u0437\u043d\u0430\u0447\u0438\u0442 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c fdb \u0438 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 rt \u0432 \u0432\u044b\u0432\u043e\u0434\u0435 <code>show bgp evpn evi</code></p> <pre><code>Queue 0 : Broadcast and IPv6 packets\nQueue 1 : sFlow packets\nQueue 2 : vMAC destined packets (VRRP MAC and ESRP MAC)\nQueue 3 : L3 Miss packets (ARP request not resolved) or L2 Miss packets (Software MAC learning)\nQueue 4 : Multicast traffic not hitting hardware ipmc table (224.0.0.0/4 normal IP multicast packets neither IGMP nor PIM)\nQueue 5 : ARP reply packets or packets destined for switch itself\nQueue 6 : IGMP or PIM packets\nQueue 7 : Packets whose TOS field is \"0xc0\" and Ethertype is \"0x0800\", or STP, EAPS, EDP, OSPF packets\n</code></pre> <p>\u0414\u043b\u044f 0 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0430\u043a\u0435\u0442\u044b \u0432 \u0444\u0430\u0439\u043b <code>/usr/local/tmp/&lt;date-time&gt;.pcap</code> <pre><code>debug packet capture on interface Broadcom count 1000\n</code></pre> \u041f\u043e scp \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0431\u0435 \u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c tshark'\u043e\u043c <pre><code> tshark -r &lt;date-time&gt;_rx_tx.pcap\n</code></pre> \u0412 \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0442\u0430\u043c \u0431\u0443\u0434\u0443\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0430\u043a\u0435\u0442\u044b Extreme-ESRP</p>"},{"location":"network/flowcontrol/","title":"Flowcontrol","text":""},{"location":"network/flowcontrol/#flowcontrol","title":"\u041f\u043e\u043b\u044c\u0437\u0430 \u043e\u0442 flowcontrol","text":"<p>\u041a\u043e\u0433\u0434\u0430 \u0431\u0443\u0444\u0435\u0440 \u0441\u0435\u0442\u0435\u0432\u043e\u0439 \u043a\u0430\u0440\u0442\u044b \u0438\u043b\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u0435\u043d, \u0432 \u0441\u0435\u0442\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0444\u0440\u0435\u0439\u043c PAUSE \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u0430\u044f \u0441\u0442\u043e\u0440\u043e\u043d\u0430 \u043f\u0440\u0435\u043a\u0440\u0430\u0449\u0430\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0443 \u0434\u0430\u043d\u043d\u044b\u0445, \u043d\u0430\u043a\u0430\u043f\u043b\u0438\u0432\u0430\u0435\u0442 \u0432 \u0441\u0432\u043e\u0435\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0434\u0430\u043d\u043d\u044b\u0435.</p> <p></p> <p>\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0439 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 flowcontrol \u0438\u043b\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0435\u0433\u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044e \u043e\u0442 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u043c\u043e\u0433\u0443\u0442 \u043a\u043e\u0441\u0432\u0435\u043d\u043d\u043e \u0441\u0432\u0438\u0434\u0435\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043e\u0431 \u0430\u043f\u043f\u0430\u0440\u0430\u0442\u043d\u044b\u0445 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u0445 \u0441\u0435\u0442\u0435\u0432\u043e\u0433\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, flowcontrol \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043f\u043e\u0442\u0435\u0440\u0438 \u0434\u0430\u043d\u043d\u044b\u0445. Dell \u0434\u043b\u044f iSCSI \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b \u0441 \u0431\u0443\u0444\u0435\u0440\u043e\u043c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 9MB \u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f flow-control rx.</p> <p>dell : Using Ethernet Pause Frames for Flow Control </p> <p>Ethernet Pause Frames allow for a temporary stop in data transmission. A situation may arise where a sending device may transmit data faster than a destination device can accept it. The destination sends a PAUSE frame back to the source, stopping the sender\u2019s transmission for a period of time. An Ethernet interface starts to send pause frames to a sending device when the transmission rate of ingress traffic exceeds the egress port speed. The interface stops sending pause frames when the ingress rate falls to less than or equal to egress port speed. The globally assigned 48-bit Multicast address 01-80-C2-00-00-01 is used to send and receive pause frames. To allow full-duplex flow control, stations implementing the pause operation instruct the MAC to enable reception of frames with destination address equal to this multicast address. The PAUSE frame is defined by IEEE 802.3x and uses MAC Control frames to carry the PAUSE commands. Ethernet pause frames are supported on full duplex only. If a port is over-subscribed, Ethernet Pause Frame flow control does not ensure no-loss behavior. Restriction: Ethernet Pause Frame flow control is not supported if PFC is enabled on an interface.</p>"},{"location":"network/flowcontrol/#flowcontrol_1","title":"\u0412\u0440\u0435\u0434 \u043e\u0442 flowcontrol","text":"<p>\u0415\u0449\u0435 \u0441\u0442\u0430\u0440\u044b\u0439 cisco 3550 \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0430\u043b \u043e\u0431 \u044d\u0442\u043e\u043c: <pre><code>cat3550(config)#mls qos\nQoS: ensure flow-control on all interfaces are OFF for proper operation.\n</code></pre> QoS \u0438 flowcontrol - \u044d\u0442\u043e \u0432\u0437\u0430\u0438\u043c\u043e\u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0435\u0442\u0435\u0432\u043e\u0433\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f. \u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0432\u0435\u0441\u0442\u0438 \u043a \u0434\u0435\u0433\u0440\u0430\u0434\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0447\u0438\u0445 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432, \u0435\u0441\u043b\u0438 \u043e\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0447\u0442\u043e \u0431\u0443\u0444\u0435\u0440\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e.</p>"},{"location":"network/flowcontrol/#monitoring","title":"monitoring","text":"<p>EtherLike-MIB::dot3PauseTable. \u041d\u0435 \u0432\u043e \u0432\u0441\u0435\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u0435\u0441\u0442\u044c \u044d\u0442\u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438. \u041f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 pause \u043e\u0442 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0447\u0435\u0442\u0447\u0438\u043a dot3InPauseFrames \u0438 dot3HCInPauseFrames</p>"},{"location":"network/flowcontrol/#netapp","title":"\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 netapp","text":"<p>vmware-netapp-and-vmware-vsphere-storage-best-practices.pdf \u0441\u0442\u0440 25. </p> <p>For modern network equipment, especially 10GbE equipment, NetApp recommends turning off flow control and allowing congestion management to be performed higher in the network stack. For older equipment, typically GbE with smaller buffers and weaker buffer management, NetApp recommends configuring the endpoints, ESX servers, and NetApp arrays with the flow control set to \"send.\"</p> <p>Configuring your network for best performance</p> <p>Connect the host and storage ports to the same network. It is best to connect to the same switches. Routing should never be used.</p> <p>Select the highest speed ports available, and dedicate them to iSCSI. 10 GbE ports are best. 1 GbE ports are the minimum.</p> <p>Disable Ethernet flow control for all ports. You should see the ONTAP 9 Network Management Guide for using the CLI to configure Ethernet port flow control.</p> <p>Enable jumbo frames (typically MTU of 9000). All devices in the data path, including initiators, targets, and switches, must support jumbo frames. Otherwise, enabling jumbo frames actually reduces network performance substantially.</p> <p>\u041f\u0440\u0435\u0434\u043f\u043e\u043b\u043e\u0436\u0443 \u0447\u0442\u043e \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0430\u0437\u043c\u0435\u0449\u0430\u0442\u044c \u0438\u043d\u0438\u0446\u0438\u0430\u0442\u043e\u0440\u043e\u0432 \u0438 \u0442\u0430\u0440\u0433\u0435\u0442 \u0432 \u043e\u0434\u043d\u043e\u043c \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0435 \u0431\u044b\u043b\u043e \u0432\u044b\u0437\u0432\u0430\u043d\u043e \u043a\u0430\u043a \u0440\u0430\u0437 \u043d\u0430\u043b\u0438\u0447\u0438\u0435\u043c \u0433\u0438\u0433\u0430\u0431\u0438\u0442\u043d\u044b\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0432\u043a\u043b\u044e\u0447\u0435\u043d, flow-control. \u0411\u0435\u0437 \u043d\u0435\u0433\u043e \u0441\u0435\u0442\u044c \u0431\u044b\u043b\u0430 \u0431\u044b \u043d\u0435\u0440\u0430\u0431\u043e\u0442\u043e\u0441\u043f\u043e\u0441\u043e\u0431\u043d\u0430. \u041a\u043e\u0433\u0434\u0430 \u0438\u043d\u0438\u0446\u0438\u0430\u0442\u043e\u0440\u044b \u0438 \u0442\u0430\u0440\u0433\u0435\u0442\u044b \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u043f\u043e\u0434\u0441\u0435\u0442\u0438\u044f\u0445, \u043a\u043e\u0433\u0434\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b 10\u0433\u0435, \u0442\u043e \u0438\u043c\u0435\u0435\u0442 \u0441\u043c\u044b\u0441\u043b \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c flowcontrol, \u0442.\u043a. \u0444\u0440\u0435\u0439\u043c\u044b pause \u0440\u0430\u0441\u0441\u044b\u043b\u0430\u044e\u0442\u0441\u044f \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 l2 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430 \u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043d\u0438\u043a\u043e\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0435\u0433\u043e \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0438\u043d\u0438\u0446\u0438\u0430\u0442\u043e\u0440\u0430\u043c \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u043e\u0434\u0441\u0435\u0442\u044f\u0445. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \"turning off flow control and allowing congestion management to be performed higher in the network stack\".</p>"},{"location":"network/flowcontrol/#vmware","title":"vmware","text":"<p>Note: By default, flow control is enabled on all network interfaces in VMware ESXi and ESX.</p>"},{"location":"network/huawei/","title":"Switch huawei s57","text":""},{"location":"network/huawei/#vlan","title":"vlan","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c <pre><code>vlan 2\nvlan batch 3 4\n</code></pre></p>"},{"location":"network/huawei/#port-mode","title":"port mode","text":"<p>access <pre><code>interface GigabitEthernet0/0/1\n port link-type access\n port default vlan 2\n</code></pre></p> <p>trunk <pre><code>interface GigabitEthernet0/0/2\n port link-type trunk\n port trunk allow-pass vlan 2 3 4\n</code></pre> \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0442\u0430\u043a\u043e\u0439 \u0436\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439, \u0430 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0447\u0435\u0440\u0435\u0437 <code>undo port trunk allow-pass vlan [vid]</code></p> <p>routed <pre><code>interface GigabitEthernet0/0/23\n undo portswitch\n ip address 10.9.8.7 255.255.255.254\n</code></pre></p>"},{"location":"network/huawei/#selective-qinq","title":"selective qinq","text":"<p>\u041d\u0435 \u043d\u0443\u0436\u0435\u043d dot1q-tunnel, \u0442.\u043a. \u043d\u0435 \u043d\u0430\u0434\u043e \u0432\u0441\u0435 \u043f\u0430\u043a\u043e\u0432\u0430\u0442\u044c. \u0412\u043b\u0430\u043d 100 \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0435\u0441\u0442\u044c, \u0430 \u0432\u043e \u0432\u043b\u0430\u043d 99 \u043f\u0430\u043a\u0443\u0435\u0442\u0441\u044f 10 20 30. \u041f\u0430\u043a\u043e\u0432\u0430\u0442\u044c 99 \u0432 99 \u043d\u0435\u043b\u044c\u0437\u044f. <pre><code>interface GigabitEthernet0/0/1\n port link-type hybrid\n qinq vlan-translation enable\n port hybrid tagged vlan 100\n port hybrid untagged vlan 99\n port vlan-stacking vlan 10 stack-vlan 99\n port vlan-stacking vlan 20 stack-vlan 99\n port vlan-stacking vlan 30 stack-vlan 99\n</code></pre></p>"},{"location":"network/huawei/#qos","title":"qos","text":"<p>\u0412\u0441\u0435 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u0441 \u043e\u0447\u0435\u0440\u0435\u0434\u044f\u043c\u0438, \u043d\u043e \u043d\u0430 \u0438\u043d\u0442\u0435\u0444\u0435\u0439\u0441\u0430\u0445 \u043d\u0430\u0434\u043e <code>trust dscp</code>, \u0430 \u043d\u0430 routed \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0435\u0449\u0435 <code>undo qos phb marking enable</code></p>"},{"location":"network/huawei/#dhcp-snooping-relay","title":"dhcp snooping, relay","text":"<pre><code>dhcp enable\ndhcp snooping enable\n\nvlan 110 configuration\n description LAN\n dhcp snooping enable\n\ndhcp server group 0\n dhcp-server [dhcp-server] 0\n\ninterface Vlanif110\n ip address 10.0.0.254 255.255.255.0\n dhcp select relay\n dhcp relay server-select 0\n</code></pre> <p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u043d\u0435\u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 <code>dhcp snooping trusted</code> \u0442\u0430\u043c \u0433\u0434\u0435 \u043d\u0443\u0436\u043d\u043e.</p>"},{"location":"network/huawei/#pvst-huawei","title":"\u0424\u0438\u043b\u044c\u0442\u0440 pvst \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 huawei","text":"<p>\u0424\u0440\u0435\u0439\u043c\u044b BPDU pvst \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430 \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u043c\u0438, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d pvst. \u041f\u043e\u044d\u0442\u043e\u043c\u0443, \u043a\u043e\u0433\u0434\u0430 \u0432 \u0441\u0435\u0442\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b mstp, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e pvst \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0445 \u043e\u0442 cisco. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u0442\u044c \u0441\u0445\u0435\u043c\u0430, \u0433\u0434\u0435 root msti 0 \u0438 mst 1 - \u044d\u0442\u043e cisco. \u041a cisco \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 huawei \u0438 \u043d\u0430 \u043d\u0435\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d mstp \u043a\u0430\u043a \u0438 \u043d\u0430 cisco. \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043d\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 cisco \u043a \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0443 huawei, \u043d\u043e \u0435\u0433\u043e \u0434\u0435\u0444\u043e\u043b\u0442\u043e\u0432\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 stp \u043d\u0435 \u043c\u0435\u043d\u044f\u043b\u0438\u0441\u044c. \u0422.\u043e. \u0447\u0435\u0440\u0435\u0437 \u0432\u043d\u043e\u0432\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u043a\u043e\u0432\u044b\u0439 \u043f\u043e\u0440\u0442 \u0432 \u043d\u0430\u0442\u0438\u0432\u043d\u043e\u043c \u0432\u043b\u0430\u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442\u0441\u044f pvst bpdu \u0447\u0435\u0440\u0435\u0437 huawei \u0434\u0430\u043b\u0435\u0435 \u043d\u0430 root'\u0430. Root (Cisco) \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0438\u0442 \u043f\u043e\u0440\u0442 \u0438\u0437 \u0440\u0435\u0436\u0438\u043c\u0430 P2p \u0432 \u0440\u0435\u0436\u0438\u043c \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0441 pvst, \u0447\u0442\u043e \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043a\u0430\u043a P2p Bound(PVST). Root \u043e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0435\u0436\u043d\u0438\u043c \u0434\u043b\u044f msti 0 (cist), \u043d\u043e \u043d\u0435 \u0434\u043b\u044f msti 1. \u0412 \u0438\u0442\u043e\u0433\u0435 huawei \u0432 msti 1 \u043e\u0441\u0442\u0430\u043b\u0441\u044f \u0431\u0435\u0437 root'\u0430. \u041f\u0440\u0438 \u043a\u043e\u043b\u044c\u0446\u0435\u0432\u043e\u0439 \u0442\u043e\u043f\u043e\u043b\u043e\u0433\u0438\u0438 \u0442\u0430\u043a\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043c\u043e\u0433\u0443\u0442 \u0438\u043c\u0435\u0442\u044c \u043f\u0435\u0447\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 pvst \u043d\u0430\u0434\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c. \u0412\u0437\u044f\u0442\u043e \u0441 https://forum.huawei.com/enterprise/en/how-to-filter-pvst-bpdus/thread/394511-861. <pre><code>acl number 4000\n rule 10 permit destination-mac 0100-0ccc-cccd\n\ntraffic classifier c1 operator or\n if-match acl 4000\n\ntraffic policy p1 match-order config\n classifier c1 behavior b1\n\ntraffic-policy p1 global inbound\n</code></pre></p>"},{"location":"network/huawei/#cisco-7940","title":"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u0432 cisco 7940","text":"<p>\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u044b \u0431\u0435\u0437 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0438 \u0441 lldp \u0438 \u0441 poe \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u044b, \u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442\u0441\u044f. \u0414\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 voice vlan \u0435\u0441\u0442\u044c \u043a\u043e\u0441\u0442\u044b\u043b\u0438 \u0434\u043b\u044f \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0441 cdp. \u041a\u043e\u043c\u0430\u043d\u0434\u044b <code>voice-vlan legacy enable</code> \u0438 <code>poe legacy enable</code> <pre><code>interface GigabitEthernet0/0/11\n port link-type hybrid\n voice-vlan 110 enable\n voice-vlan legacy enable\n port hybrid pvid vlan 520\n port hybrid tagged vlan 110\n port hybrid untagged vlan 520\n poe legacy enable\n lldp compliance cdp txrx\n lldp compliance cdp receive\n\n&gt;display cdp neighbor brief\nLocal Intf    Neighbor Dev             Neighbor Intf             Exptime(s)\nGE0/0/1      SEP081FF363712B          Port 1                    134\n</code></pre></p>"},{"location":"network/huawei/#sflow","title":"sflow","text":"<p>\u0414\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 tos, topN \u0438 \u0442\u043f <pre><code>sflow collector 1 ip [collector]\nsflow agent ip [switch]\n\ninterface GigabitEthernet0/0/1\n sflow counter-sampling collector 1\n sflow flow-sampling collector 1\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>&gt;disp sflow statistics\nsFlow Version 5 statistic Information:\n--------------------------------------------------------------------------\nCollector 1 Current sample sequence:\n--------------------------------------------------------------------------\nPort on slot 0 statistic Information:\n\nInterface: GE0/0/1\n</code></pre></p>"},{"location":"network/huawei/#nqa","title":"nqa","text":"<p>\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0441 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430, \u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 snmp. \u041c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043e\u043b-\u0432\u043e \u043f\u0438\u043d\u0433\u043e\u0432 \u0438 % \u043f\u043e\u0442\u0435\u0440\u044c <pre><code>nqa test-instance 1 1\n test-type icmp\n destination-address ipv4 [dst-ip]\n source-address ipv4 [src-ip]\n records result 1\n records history 0\n threshold rtd 100\n description [some text]\n tos 96\n fail-percent 20\n frequency 60\n probe-count 10\n start now\n</code></pre></p>"},{"location":"network/huawei/#snmp","title":"snmp","text":"<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u0434\u0430\u0442\u044c public, \u0442.\u043a. \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043f\u0440\u043e\u0441\u0442\u043e <pre><code>snmp-agent\nsnmp-agent acl 2222\nsnmp-agent community complexity-check disable\nsnmp-agent community read public\nsnmp-agent sys-info contact [contact]\nsnmp-agent sys-info location [location]\nsnmp-agent sys-info version v2c v3\n</code></pre> acl \u0434\u043b\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 <pre><code>acl number 2222\n rule 10 permit source [nms-ip] 0\n</code></pre></p>"},{"location":"network/huawei/#traffic-policy","title":"traffic policy","text":"<p>\u0414\u043b\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u0432 \u0442\u0447, \u0430 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043f\u043e snmp. \u041d\u0443\u0436\u0435\u043d bps \u043f\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043f\u043e\u0434\u0441\u0435\u0442\u0438 \u043f\u0440\u0438\u0435\u043c/\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0430. \u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043e\u043f\u0438\u0441\u0430\u0442\u044c acl</p> <pre><code>acl number 3100\n rule 10 permit ip destination 10.0.0.0 0.0.0.255\nacl number 3500\n rule 10 permit ip source 10.0.0.0 0.0.0.255\n</code></pre> <p>\u041a\u043b\u0430\u0441\u0441\u044b <pre><code>traffic classifier 3100 operator or\n if-match acl 3100\ntraffic classifier 3500 operator or\n if-match acl 3500\n\ntraffic behavior tbstat\n statistic enable\n permit\n</code></pre></p> <p>\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0438, \u0433\u0434\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u0430. <pre><code>traffic policy 31 match-order config\n classifier 3100 behavior tbstat\ntraffic policy 35 match-order config\n classifier 3500 behavior tbstat\n</code></pre></p> <p>\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043a \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443 <pre><code>interface GigabitEthernet0/0/1\n traffic-policy 31 inbound\n traffic-policy 35 outbound\n</code></pre></p> <p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0447\u0442\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b <pre><code>&gt;disp traffic-policy applied-record\n#\n-------------------------------------------------\n  Policy Name:   31\n  Policy Index:  2\n     Classifier:3100     Behavior:tbstat\n-------------------------------------------------\n *interface GigabitEthernet0/0/1\n    traffic-policy 31 inbound\n      slot 0    :  success\n-------------------------------------------------\n  Policy total applied times: 1.\n#\n-------------------------------------------------\n  Policy Name:   35\n  Policy Index:  3\n     Classifier:3500     Behavior:tbstat\n-------------------------------------------------\n *interface GigabitEthernet0/0/1\n    traffic-policy 35 outbound\n      slot 0    :  success\n-------------------------------------------------\n  Policy total applied times: 1.\n</code></pre></p> <p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0432 \u043a\u043b\u0430\u0441\u0441\u0430\u0445 <pre><code>&gt;disp traffic policy statistics interface g0/0/1 inbound verbose classifier-base class 3100\n\n Interface: GigabitEthernet0/0/1\n Traffic policy inbound: 31\n Rule number: 6\n Current status: success\n Statistics interval: 150\n---------------------------------------------------------------------\n Classifier: 3100 operator or\n Behavior: tbstat\n Board : 0\n---------------------------------------------------------------------\n Matched          |      Packets:                 8,426,225,438\n                  |      Bytes:               4,237,940,385,174\n                  |      Rate(pps):                         853\n                  |      Rate(bps):                   3,305,096\n---------------------------------------------------------------------\n   Passed         |      Packets:                 8,426,225,438\n                  |      Bytes:               4,237,940,385,174\n                  |      Rate(pps):                         853\n                  |      Rate(bps):                   3,305,096\n---------------------------------------------------------------------\n   Dropped        |      Packets:                             0\n                  |      Bytes:                               0\n                  |      Rate(pps):                           0\n                  |      Rate(bps):                           0\n---------------------------------------------------------------------\n     Filter       |      Packets:                             0\n                  |      Bytes:                               0\n---------------------------------------------------------------------\n     Car          |      Packets:                             0\n                  |      Bytes:                               0\n---------------------------------------------------------------------\n</code></pre></p>"},{"location":"network/huawei/#rate-limit","title":"rate limit","text":"<p>\u041d\u0430 \u0433\u0438\u0433\u0430\u0431\u0438\u0442\u043d\u043e\u043c \u043b\u0438\u043d\u043a\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u043f\u043e\u043b\u043e\u0441\u0443 100\u043c\u0431\u0438\u0442, \u0430 \u0434\u043b\u044f \u0434\u0435\u0444\u043e\u043b\u0442\u043e\u0432\u043e\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435</p> <pre><code>interface GigabitEthernet0/0/1\n qos lr outbound cir 100000 cbs 12500000\n qos queue 0 shaping cir 60000 pir 80000\n</code></pre>"},{"location":"network/juniper_ex/","title":"\u041f\u0440\u043e juniper ex","text":""},{"location":"network/juniper_ex/#vlan-trunk-access","title":"vlan, trunk, access","text":"<p>\u0413\u0440\u0443\u043f\u043f\u044b \u0443\u0434\u043e\u0431\u043d\u044b. \u041d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u043f\u043e\u0440\u0442 \u0432 \u0442\u0440\u0430\u043d\u043a \u0431\u0435\u0437 \u0432\u043b\u0430\u043d\u043e\u0432 \u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u0432\u043e \u0432\u0441\u0435 \u0432\u043b\u0430\u043d\u044b. \u0415\u0441\u043b\u0438 \u0443\u043a\u0430\u0437\u0430\u043d \u0441\u043f\u0438\u0441\u043e\u043a, \u0442\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043d\u0438\u0445. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0435\u0441\u0442\u044c vlan default, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c acl \u0434\u0440\u043e\u043f\u0430\u0435\u0442 \u0432\u0441\u0435. <pre><code>groups {\n    trunk {\n        interfaces {\n            &lt;*&gt; {\n                mtu 9216;\n                ether-options {\n                    no-flow-control;\n                }\n                unit 0 {\n                    family ethernet-switching {\n                        port-mode trunk;\n                        vlan {\n                            members default;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    access {\n        interfaces {\n            &lt;*&gt; {\n                mtu 9216;\n                ether-options {\n                    no-flow-control;\n                }\n                unit 0 {\n                    family ethernet-switching {\n                        port-mode access;\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre> \u041d\u0443\u0436\u0435\u043d access <pre><code>set interfaces ge-0/0/0 apply-groups access\n</code></pre> \u041d\u0443\u0436\u0435\u043d trunk <pre><code>set interfaces ge-0/0/1 apply-groups trunk\n</code></pre> \u0424\u0438\u043b\u044c\u0442\u0440 \u0434\u043b\u044f vlan default <pre><code>&gt; show configuration vlans default    \nvlan-id 1;\nfilter {\n    input Drop;\n}\n\n{master:0}\n&gt; show configuration firewall family ethernet-switching \nfilter Drop {\n    term all {\n        then discard;\n    }\n}\n\n{master:0}\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u0442\u044c vlan. \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0432\u0441\u0435\u0433\u0434\u0430 \u0441 \u0431\u0443\u043a\u0432\u044b \u0438 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u044b \u043f\u0438\u0448\u0443 \u0442\u0430\u043a, \u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0438. <pre><code>set vlans v30 vlan-id 30 desciption \"dmz_1\"\nset vlans v40 vlan-id 40 desciption \"dmz_2\"\n</code></pre> \u0414\u043b\u044f access \u043f\u043e\u0440\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u0436\u0435 \u0432 \u0433\u0440\u0443\u043f\u043f\u0435 access. \u0412\u043b\u0430\u043d\u044b \u0447\u0438\u0441\u043b\u0430\u043c\u0438 \u0443\u0434\u043e\u0431\u043d\u0435\u0435. <pre><code>set interfaces ge-0/0/0 unit 0 family ethernet-switching vlan members 30\n</code></pre> \u0414\u043b\u044f \u043f\u043e\u0440\u0442\u0430 \u0432 \u0433\u0440\u0443\u043f\u043f\u0435 trunk <pre><code>set interfaces ge-0/0/1 unit 0 family ethernet-switching vlan members 30\nset interfaces ge-0/0/1 unit 0 family ethernet-switching vlan members 40\n</code></pre></p>"},{"location":"network/juniper_ex/#lacp","title":"lacp","text":"<p>\u0413\u0440\u0443\u043f\u043f\u044b \u043c\u043e\u0436\u043d\u043e \u0434\u0435\u043b\u0430\u0442\u044c, \u043d\u043e \u0442\u0443\u0442 \u043f\u0440\u043e\u0449\u0435 \u0440\u0443\u043a\u0430\u043c\u0438. \u041d\u0443\u0436\u043d\u043e \u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e aggregated-devices \u0443\u043a\u0430\u0437\u0430\u0442\u044c, \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0432 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 ae, \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c ae. \u0417\u0430\u0431\u0435\u0433\u0430\u044f \u0432\u043f\u0435\u0440\u0435\u0434, \u0434\u043b\u044f dhcp-snooping ae \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u043c \u043f\u043e\u0440\u0442\u043e\u043c \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. <pre><code>&gt; show configuration chassis                 \naggregated-devices {\n    ethernet {\n        device-count 6;\n    }\n}\nalarm {\n    management-ethernet {\n        link-down ignore;\n    }\n}\n\n{master:0}\n&gt; show configuration interfaces ge-0/0/10 \nether-options {\n    802.3ad ae0;\n}\n\n{master:0}\n&gt; show configuration interfaces ae0          \nmtu 9216;\naggregated-ether-options {\n    no-flow-control;\n    lacp {\n        active;\n        periodic slow;\n    }\n}\nunit 0 {\n    family ethernet-switching {\n        port-mode trunk;\n        vlan {\n            members default;\n        }\n    }\n}\n\n{master:0}\n&gt; show lacp interfaces \nAggregated interface: ae0\n    LACP state:       Role   Exp   Def  Dist  Col  Syn  Aggr  Timeout  Activity\n      ge-0/0/10      Actor    No   Yes    No   No   No   Yes     Slow    Active\n      ge-0/0/10    Partner    No   Yes    No   No   No   Yes     Fast   Passive\n      ge-1/0/10      Actor    No   Yes    No   No   No   Yes     Slow    Active\n      ge-1/0/10    Partner    No   Yes    No   No   No   Yes     Fast   Passive\n    LACP protocol:        Receive State  Transmit State          Mux State \n      ge-0/0/10           Port disabled     No periodic           Detached\n      ge-1/0/10           Port disabled     No periodic           Detached\n\n{master:0}\n</code></pre></p>"},{"location":"network/juniper_ex/#virtual-chassis","title":"virtual-chassis","text":"<p>\u0412 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c \u0441\u0442\u0435\u043a\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 sfp+ \u043f\u043e\u0440\u0442\u044b 2300 \u0438 3300, \u043b\u0438\u0431\u043e \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0434\u043d\u044b\u0435 \u0432 ex2200. \u0411\u044b\u0432\u0430\u044e\u0442 stack \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0443 4200 \u0441\u0435\u0440\u0438\u0438. \u0427\u0438\u0442\u0430\u0439\u0442\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u043d\u0430 \u043c\u043e\u0434\u0435\u043b\u044c. \u0414\u043b\u044f 2200 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043e \"We recommend that you physically cable the ports as the final step of this procedure.\" \u0422.\u0435. \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043f\u043e\u0440\u0442\u044b, vc, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a\u0430\u0431\u0435\u043b\u0438. \u041a\u0430\u043a \u0443\u0434\u043e\u0431\u043d\u043e \u0432 cisco \u0438 eltex. \u0412 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c \u0434\u0430\u0436\u0435 \u0441\u043e\u0444\u0442 \u043d\u0430\u043a\u0430\u0442\u0438\u0442 \u0434\u043e \u0432\u0435\u0440\u0441\u0438\u0438 \u043c\u0430\u0441\u0442\u0435\u0440\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u043e\u043c. \u041d\u0438\u0436\u0435 \u043f\u043e\u0440\u0442\u044b 3 \u0438 4 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b \u043a\u0430\u043a vcp \u0438 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0438\u0445 \u043d\u0435\u0442 \u043d\u0438 \u0432 \u043a\u0430\u043a\u043e\u043c \u0432\u0438\u0434\u0435.</p> <pre><code>&gt; show virtual-chassis vc-port    \nfpc0:\n--------------------------------------------------------------------------\nInterface   Type              Trunk  Status       Speed        Neighbor\nor                             ID                 (mbps)       ID  Interface\nPIC / Port\n0/3         Configured          5    Up           1000         1   vcp-255/0/3\n0/4         Configured          5    Up           1000         1   vcp-255/0/4\n\nfpc1:\n--------------------------------------------------------------------------\nInterface   Type              Trunk  Status       Speed        Neighbor\nor                             ID                 (mbps)       ID  Interface\nPIC / Port\n0/3         Configured          5    Up           1000         0   vcp-255/0/4\n0/4         Configured          5    Up           1000         0   vcp-255/0/4\n\n{master:0}\n&gt; show configuration virtual-chassis \npreprovisioned;\nno-split-detection;\nmember 0 {\n    role routing-engine;\n    serial-number CW0218430000;\n}\nmember 1 {\n    role routing-engine;\n    serial-number CW0218430001;\n}\n\n{master:0}\n</code></pre>"},{"location":"network/juniper_ex/#software-add","title":"software add","text":"<p>\u0412 \u0431\u0430\u0437\u0435 \u0437\u043d\u0430\u043d\u0438\u0439 \u0441\u043e\u0432\u0435\u0442\u0443\u044e \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u0441 EX/SRX Recovering from file system corruption during a system reboot, NAND media utility checks for bad blocks in the NAND flash memory \u0438 EX Switch boots from backup root patition after file system corruption on the primary root partition.</p>"},{"location":"network/juniper_ex/#_1","title":"\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u043a \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044e","text":"<p>\u0414\u043b\u044f ex4200 c\u0442\u0430\u043b \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0448\u0435\u043b\u0435 \u0432 /var/tmp/. \u0415\u0441\u043b\u0438 \u0434\u0435\u043b\u0430\u0442\u044c \u0438\u0437 cli \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c /var/tmp/ \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0442\u043e \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0440\u0430\u0437\u0434\u0435\u043b \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043c\u0435\u0441\u0442\u0430 \u043d\u0435\u0442, \u0430 \u043f\u043e\u0442\u043e\u043c \u044f\u043a\u043e\u0431\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u0443\u0434\u0435\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432 /var/tmp/. \u041d\u0438\u0436\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0430 \u043e\u0447\u0438\u0441\u0442\u043a\u0430 \u0444\u043b\u0435\u0448\u043a\u0438 \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u0430 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0430\u0445. <pre><code>ex2200&gt; request system storage cleanup    \nPlease check the list of files to be deleted using the dry-run option. i.e.\nrequest system storage cleanup dry-run\nDo you want to proceed ? [yes,no] (no) yes   \n\nfpc0:\n--------------------------------------------------------------------------\n\nList of files to delete:\n[\u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043e]\n   708B Dec 17  2012 /var/lost+found/#00045\n[\u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043e]\n\n\nex2200&gt; start shell\n\n% df -h | grep -v mnt\nFilesystem       Size    Used   Avail Capacity  Mounted on\n/dev/da0s1a      184M    105M     64M    62%    /\ndevfs            1.0K    1.0K      0B   100%    /dev\n/dev/md9         126M     12K    116M     0%    /tmp\n/dev/da0s3e      123M    3.2M    110M     3%    /var\n/dev/da0s3d      369M    132K    339M     0%    /var/tmp\n/dev/da0s4d       62M    274K     57M     0%    /config\n/dev/md10         59M     17M     37M    31%    /var/rundb\nprocfs           4.0K    4.0K      0B   100%    /proc\n%\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u044c \u0444\u043b\u0435\u0448\u043a\u0438. <pre><code>% su\nPassword:\nroot@ex2200:RE:0% nand-mediack -C\nMedia check on da0 on ex platforms\nroot@ex2200:RE:0%exit \n% exit\nexit\n\n{master:0}\n</code></pre> \u041e\u0448\u0438\u0431\u043e\u043a \u043d\u0435\u0442. \u041d\u0430 \u0432\u0441\u044f\u043a\u0438\u0439 \u0441\u043b\u0443\u0447\u0430\u0439 \u0435\u0449\u0435 \u0440\u0430\u0437 \u043f\u0435\u0440\u0435\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438. <pre><code>ex2200&gt; request system snapshot slice alternate \nfpc0:\n--------------------------------------------------------------------------\nFormatting alternate root (/dev/da0s2a)...\nCopying '/dev/da0s1a' to '/dev/da0s2a' .. (this may take a few minutes)\nThe following filesystems were archived: /\n</code></pre> \u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0441 ftp \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c md5 <pre><code>% cd /var/tmp/\n% fetch ftp://999.1.1.1/junos/jinstall-ex-2200-12.3R12.4-domestic-signed.tgz\njinstall-ex-2200-12.3R12.4-domestic-signed.tgz  3% of   95 MB  643 kBps\n% md5 jinstall-ex-2200-12.3R12.4-domestic-signed.tgz\nMD5 (jinstall-ex-2200-12.3R12.4-domestic-signed.tgz) = 73759d24a949181dcfe6111c0df20d1d\n</code></pre> \u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441 usb-\u0444\u043b\u0435\u0448\u043a\u0438 <pre><code>% clear\n% mount_msdosfs /dev/da1s1 /mnt\n% cp /mnt/jinstall-ex-2200-12.3R3.4-domestic-signed.tgz /var/tmp/\n% umount /mnt\n</code></pre></p>"},{"location":"network/juniper_ex/#_2","title":"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435","text":"<p>\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432 cli \u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 \u0441 \u043a\u043b\u044e\u0447\u0435\u043c force. \u041a\u0430\u043a-\u0442\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u043b \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 ex4200, \u0430 \u043e\u043d \u0432 \u043d\u0435\u043f\u043e\u043d\u044f\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0432\u044b\u0432\u0430\u043b\u0438\u043b\u0441\u044f \u0431\u0435\u0437 \u0447\u0430\u0441\u0442\u0438 \u0444\u0430\u0439\u043b\u043e\u0432 \u0438 \u0445\u043e\u0440\u043e\u0448\u043e \u0435\u0449\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e \u0441\u043c\u043e\u0433\u043b\u0438 \u043a\u043e\u043d\u0441\u043e\u043b\u044c\u044e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441 \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e \u0441\u043b\u0430\u0439\u0441\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 <code>request system reboot slice alternate</code>. \u0421\u043e \u0432\u0442\u043e\u0440\u043e\u0439 \u043f\u043e\u043f\u044b\u0442\u043a\u0438 \u0438 \u0441 \u043a\u043b\u044e\u0447\u0435\u043c force \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u0441\u044f \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c. <pre><code>ex2200&gt; request system software add no-copy delay-restart force /var/tmp/jinstall-ex-2200-12.3R12.4-domestic-signed.tgz\n</code></pre> \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f. <pre><code>ex2200&gt; show system uptime\n</code></pre> \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0441\u044f \u0447\u0435\u0440\u0435\u0437 840 \u043c\u0438\u043d\u0443\u0442. <pre><code>ex2200&gt; request system reboot in 840 \n</code></pre> \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u0435\u0441\u043b\u0438 \u043d\u0435 \u0443\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442 \u0432\u0440\u0435\u043c\u044f. <pre><code>ex2200&gt;clear system reboot\n</code></pre> \u041f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0438 \u0434\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f(!) \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u044b: <pre><code>ex2200&gt; request system snapshot slice alternate \nfpc0:\n--------------------------------------------------------------------------\nFormatting alternate root (/dev/da0s2a)...\nCopying '/dev/da0s1a' to '/dev/da0s2a' .. (this may take a few minutes)\nThe following filesystems were archived: /\n</code></pre></p>"},{"location":"network/juniper_ex/#autosnapshot","title":"autosnapshot","text":"<p>\u041f\u0440\u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0438 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441 \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0441\u043b\u0430\u0439\u0441\u0430 \u0431\u0443\u0434\u0435\u0442 \u0441\u0434\u0435\u043b\u0430\u043d \u0441\u043d\u0430\u043f\u0448\u043e\u0442. \u041e\u0434\u043d\u0430\u043a\u043e, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u044f \u0434\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0441\u0434\u0435\u043b\u0430\u0435\u0442 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043d\u0435\u0440\u0430\u0431\u043e\u0442\u043e\u0441\u043f\u043e\u0441\u043e\u0431\u043d\u044b\u043c, \u0442.\u043a. \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0441\u0442\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u0441\u043d\u0430\u043f\u0448\u043e\u0442\u0430 \u043d\u0435\u0442. <pre><code>set system auto-snapshot\n\nex&gt; show system auto-snapshot    \nAuto-snapshot Configuration:   Enabled\nAuto-snapshot State:  Disabled\n</code></pre></p>"},{"location":"network/juniper_ex/#snmp","title":"snmp","text":"<p>\u0412 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 EX-\u0441\u0435\u0440\u0438\u0438 \u043f\u043e snmp \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ifName (1.3.6.1.2.1.31.1.1.1.1) \u043e\u0442\u0432\u0435\u0442\u044b \u0432 \u0442\u043e\u043c \u0447\u0438\u0441\u043b\u0435 \u0441 \u044e\u043d\u0438\u0442\u0430\u043c\u0438. \u041c\u043e\u0436\u043d\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c \u044e\u043d\u0438\u0442\u044b \u0438 \u043f\u0440\u043e\u0447\u0438\u0435 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b. <pre><code>ex&gt; show configuration snmp filter-interfaces \ninterfaces {\n    lsi;\n    bme;\n    dsc;\n    ipip;\n    mtun;\n    pimd;\n    pime;\n    tap;\n    lt;\n    \"^ge-[0-9]+/[0-9]+/[0-9]+.0$\";\n    \"^xe-[0-9]+/[0-9]+/[0-9]+.0$\";\n    \"^ae[0-9]+.0$\";\n}\n</code></pre></p>"},{"location":"network/juniper_ex/#tacacs","title":"tacacs","text":"<pre><code>system {\n   authentication-order [ tacplus password ];\n    tacplus-server {\n        10.8.7.6 {\n            secret \"key\";\n            single-connection;\n        }\n    }\n    accounting {\n        events [ login interactive-commands ];\n        destination {\n            tacplus {\n                server {\n                    10.8.7.6 {\n                        secret \"key\";\n                        single-connection;\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"network/juniper_ex/#dhcp-snooping-juniper-ex-ex9200","title":"dhcp-snooping \u043d\u0430 Juniper EX, \u043a\u0440\u043e\u043c\u0435 EX9200","text":"<p>\u0427\u0435\u043c \u0447\u0440\u0435\u0432\u0430\u0442\u044b \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 dhcp-snooping'\u0430 \u043d\u0430 \u0434\u0436\u0443\u043d\u0438\u043f\u0435\u0440\u0430\u0445:</p> <ul> <li>\u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0434\u043b\u044f vlan'\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0434\u0430\u043d\u043d\u044b\u043c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u043c, \u0442.\u0435. \u0438\u043c\u0435\u0435\u0442\u0441\u044f RVI \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d dhcp-relay.</li> <li>\u041d\u0430 ex9200 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432\u0440\u043e\u0434\u0435, \u043d\u043e \u044f \u0437\u0430\u0431\u044b\u043b \u0443\u0436\u0435. \u0422\u0430\u043c \u0437\u0430\u0442\u043e \u0431\u044b\u043b \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u044b\u0439 \u043a\u043e\u0441\u044f\u043a \u0441 dhcp-relay, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0440\u0430\u0437\u0430 \u0434\u0432\u0430 \u043c\u0438\u043d\u0438\u043c\u0443\u043c. \u041f\u0440\u043e\u0441\u0442\u043e \u043f\u0435\u0440\u0435\u0441\u0442\u0430\u0432\u0430\u043b \u0440\u0435\u043b\u0430\u0438\u0442\u044c \u0438 \u043f\u0440\u0438\u0432\u0435\u0442;</li> <li>\u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0443\u044e \u0431\u0430\u0437\u0443 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0435\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e, \u0442\u0430\u043a \u043a\u0430\u043a \u043f\u0440\u0438 \u0432\u043d\u0435\u043f\u043b\u0430\u043d\u043e\u0432\u043e\u0439 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043e\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0438\u0437-\u0437\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441 \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0430. \u042d\u0442\u043e \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430 junos;</li> <li>\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u043c\u0438 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0432\u0441\u0435 \u0442\u0440\u0430\u043d\u043a\u043e\u0432\u044b\u0435 \u043f\u043e\u0440\u0442\u044b, \u0430 \u043d\u0435\u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u043c\u0438 - access-\u043f\u043e\u0440\u0442\u044b. \u041d\u0438\u0433\u0434\u0435 \u043d\u0435 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u0442\u0440\u0430\u043d\u043a\u043e\u0432\u044b\u0439 \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 (ae) \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u0435\u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u043c \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u0412 \u0441\u043b\u0443\u0447\u0430\u0435, \u043a\u043e\u0433\u0434\u0430 \u0432 \u0442\u0430\u043a\u043e\u0439 \u043f\u043e\u0440\u0442 \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u043d vlan \u0441 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u043e\u0439 dot1q-tunneling, \u0442\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043f\u043e\u0440\u0442 ae \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u043c \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f. \u041f\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u043f\u0440\u043e EX/QFX Error message: DHCP trusted configuration cannot be specified on a dot1q tunneled interfaces. \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u0430\u043a\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0438\u043a\u0435\u0442\u0430 \u044f \u0441\u043e\u0432\u0441\u0435\u043c \u043d\u0435 \u043e\u0436\u0438\u0434\u0430\u043b. \u041d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0438 \u0432\u0441\u0451.</li> </ul> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 vlan. \u0414\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435 \u043f\u043e\u0440\u0442\u044b \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e - \u044d\u0442\u043e \u0432\u0441\u0435 \u0442\u0440\u0430\u043d\u043a\u0438, \u043a\u0440\u043e\u043c\u0435 ae. <pre><code>ex2200&gt; show configuration ethernet-switching-options secure-access-port \nvlan all {\n    examine-dhcp;\n}\ndhcp-snooping-file {\n    location /\u043f\u0443\u0442\u044c/\u0438\u043c\u044f_\u0444\u0430\u0439\u043b\u0430;\n    write-interval 300;\n    timeout 10;\n}\n</code></pre></p>"},{"location":"network/juniper_ex/#cos-ex2200","title":"CoS EX2200","text":"<p>\u0420\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0437\u0430\u0446\u0438\u044f \u0442\u0440\u0430\u0444\u0438\u043a\u0430 ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438 \u0438 \u0432\u0438\u0434\u0435\u043e\u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0441\u0432\u044f\u0437\u0438 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 EX2200 \u043f\u0443\u0442\u0435\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0434\u0435\u0444\u043e\u043b\u0442\u043e\u0432\u044b\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a class-of-service (CoS). \u041a \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0443 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u044b ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u044b. \u0414\u043b\u044f \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 ip-\u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u043e\u0442 ip-PBX \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f dscp:</p> dscp dec dscp class desc 46 ef \u043c\u0435\u0434\u0438\u0430 (rtp) 24 cs3 \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f (sip,h323,unistim) 32 cs4 \u0432\u0438\u0434\u0435\u043e c \u043a\u043e\u0434\u0435\u043a\u043e\u0432(rtp) 34 af41 \u0432\u0438\u0434\u0435\u043e \u0441 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u0441\u043e\u0444\u0442\u043e\u0432\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430, \u043a\u043e\u0434\u0435\u043a\u0430 (rtp) 0 be \u0432\u0435\u0441\u044c \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u0440\u0430\u0444\u0438\u043a \u0431\u0435\u0437 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438."},{"location":"network/juniper_ex/#ex2200-cos","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 EX2200 \u0441 \u0434\u0435\u0444\u043e\u043b\u0442\u043e\u0432\u044b\u043c CoS","text":"<p>\u0411\u0435\u0437 \u043b\u0438\u0448\u043d\u0435\u0439 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c qos \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u043d\u0435 \u043d\u0443\u0436\u043d\u043e. \u041a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0431\u0435\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0439 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u043c\u0438 \u0438\u043b\u0438 \u043a\u043e\u0434\u0435\u043a\u0430\u043c\u0438, \u0438\u043d\u0430\u0447\u0435 \u0431\u0443\u0434\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0445\u0443\u0436\u0435. \u0415\u0441\u043b\u0438 qos \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u043b\u0441\u044f:</p> <ul> <li>\u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c\u044e \u0434\u0440\u043e\u043f\u043e\u0432 \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u043d\u0435\u0442;</li> <li>\u0432\u0441\u0435 \u043f\u043e\u0440\u0442\u044b \u0434\u043e\u0432\u0435\u0440\u044f\u044e\u0442 \u043c\u0435\u0442\u043a\u0430\u043c cos \u0438 dscp \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e;</li> <li>\u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043f\u043e\u0440\u0442\u043e\u0432 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439, \u0433\u0434\u0435 \u0434\u043b\u044f \u0432\u0441\u0435\u0433\u043e \u0442\u0440\u0430\u0444\u0438\u043a\u0430, \u043a\u0440\u043e\u043c\u0435 network control \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043e 95% \u0431\u0443\u0444\u0435\u0440\u043e\u0432.</li> </ul> <p>\u0420\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043f\u043e \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0435, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 CoS \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. <pre><code>ex2200&gt; show class-of-service forwarding-class \nForwarding class                    ID                      Queue  Policing priority    SPU priority\n  best-effort                             0                       0           normal           low    \n  expedited-forwarding                    1                       5           normal           low    \n  assured-forwarding                      2                       1           normal           low    \n  network-control                         3                       7           normal           low   \n\nex2200&gt; show class-of-service interface ge-0/0/1  \nPhysical interface: ge-0/0/1, Index: 130\nQueues supported: 8, Queues in use: 4\n  Scheduler map: , Index: 2\n  Congestion-notification: Disabled\n\n  Logical interface: ge-0/0/1.0, Index: 70\nObject                  Name                   Type                    Index\nClassifier              ieee8021p-default      ieee8021p                  11\n\nex2200&gt; show class-of-service classifier name ieee8021p-default \nClassifier: ieee8021p-default, Code point type: ieee-802.1, Index: 11\n  Code point         Forwarding class                    Loss priority\n  000                best-effort                         low         \n  001                best-effort                         low         \n  010                best-effort                         low         \n  011                best-effort                         low         \n  100                best-effort                         low         \n  101                best-effort                         low         \n  110                network-control                     low         \n  111                network-control                     low          \nex2200&gt; show class-of-service classifier name dscp-default   \nClassifier: dscp-default, Code point type: dscp, Index: 7\n  Code point         Forwarding class                    Loss priority\n  000000             best-effort                         low         \n  000001             best-effort                         low         \n  000010             best-effort                         low         \n  000011             best-effort                         low         \n  000100             best-effort                         low         \n  000101             best-effort                         low         \n  000110             best-effort                         low         \n  000111             best-effort                         low         \n  001000             best-effort                         low         \n  001001             best-effort                         low         \n  001010             best-effort                         low         \n  001011             best-effort                         low         \n  001100             best-effort                         low         \n  001101             best-effort                         low         \n  001110             best-effort                         low         \n  001111             best-effort                         low         \n  010000             best-effort                         low         \n  010001             best-effort                         low         \n  010010             best-effort                         low         \n  010011             best-effort                         low         \n  010100             best-effort                         low         \n  010101             best-effort                         low         \n  010110             best-effort                         low         \n  010111             best-effort                         low         \n  011000             best-effort                         low         \n  011001             best-effort                         low         \n  011010             best-effort                         low         \n  011011             best-effort                         low         \n  011100             best-effort                         low         \n  011101             best-effort                         low         \n  011110             best-effort                         low         \n  011111             best-effort                         low         \n  100000             best-effort                         low         \n  100001             best-effort                         low         \n  100010             best-effort                         low         \n  100011             best-effort                         low         \n  100100             best-effort                         low         \n  100101             best-effort                         low         \n  100110             best-effort                         low         \n  100111             best-effort                         low         \n  101000             best-effort                         low         \n  101001             best-effort                         low         \n  101010             best-effort                         low         \n  101011             best-effort                         low         \n  101100             best-effort                         low         \n  101101             best-effort                         low         \n  101110             best-effort                         low         \n  101111             best-effort                         low         \n  110000             network-control                     low         \n  110001             network-control                     low         \n  110010             network-control                     low         \n  110011             network-control                     low         \n  110100             network-control                     low         \n  110101             network-control                     low         \n  110110             network-control                     low         \n  110111             network-control                     low         \n  111000             network-control                     low         \n  111001             network-control                     low         \n  111010             network-control                     low         \n  111011             network-control                     low         \n  111100             network-control                     low         \n  111101             network-control                     low         \n  111110             network-control                     low         \n  111111             network-control                     low         \n\nex2200&gt; show class-of-service code-point-aliases dscp\nCode point type: dscp\n  Alias              Bit pattern\n  af11               001010         \n  af12               001100         \n  af13               001110         \n  af21               010010         \n  af22               010100         \n  af23               010110         \n  af31               011010         \n  af32               011100         \n  af33               011110         \n  af41               100010         \n  af42               100100         \n  af43               100110         \n  be                 000000         \n  cs1                001000         \n  cs2                010000         \n  cs3                011000         \n  cs4                100000         \n  cs5                101000         \n  cs6                110000         \n  cs7                111000         \n  ef                 101110         \n  nc1                110000         \n  nc2                111000         \n\nex2200&gt; show class-of-service scheduler-map    \nScheduler map: , Index: 2\n\n  Scheduler: , Forwarding class: best-effort, Index: 21\n    Transmit rate: 95 percent, Rate Limit: none, Buffer size: 95 percent, Buffer Limit: none, Priority: low\n    Excess Priority: low\n    Drop profiles:\n      Loss priority   Protocol    Index    Name\n      High            non-TCP         1          \n      High            TCP             1          \n\n  Scheduler: , Forwarding class: network-control, Index: 23\n    Transmit rate: 5 percent, Rate Limit: none, Buffer size: 5 percent, Buffer Limit: none, Priority: low\n    Excess Priority: low\n    Drop profiles:\n      Loss priority   Protocol    Index    Name\n      High            non-TCP         1          \n      High            TCP             1          \n</code></pre></p>"},{"location":"network/juniper_ex/#os-ex2200","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0421oS \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 EX2200","text":"<p>\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e dscp ef \u0438 af \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0441 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u043c\u0438 \u043a\u043b\u0430\u0441\u0441\u0430\u043c\u0438 expedited-forwarding \u0438 assured-forwarding. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0442.\u043d. classifiers. \u041c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0438 \u043d\u043e\u0432\u044b\u0435 \u043a\u043b\u0430\u0441\u0441\u044b, \u043d\u043e \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043f\u0443\u0441\u0442\u044c \u0431\u0443\u0434\u0435\u0442 \u0442\u0430\u043a. \u041f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u044f\u0442\u044c \u0432\u0441\u0435 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0431\u0438\u0442\u044b dscp, \u043a\u0430\u043a \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043d\u043e \u0432 \u043a\u043b\u0430\u0441\u0438\u0444\u0438\u0440\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u0441\u043c\u044b\u0441\u043b\u0430 \u043d\u0435\u0442. <pre><code>ex2200&gt; show configuration class-of-service classifiers \ndscp custom-dscp {\n    forwarding-class network-control {\n        loss-priority low code-points [ cs6 cs7 ];\n    }\n    forwarding-class expedited-forwarding {\n        loss-priority low code-points ef;\n    }\n    forwarding-class assured-forwarding {\n        loss-priority low code-points [ cs3 cs4 af41 ];\n    }\n}\n</code></pre> \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0448\u0435\u0434\u0443\u043b\u0435\u0440\u044b: <pre><code>ex2200&gt; show configuration class-of-service schedulers  \nsc-ef {\n    buffer-size percent 10;\n    priority strict-high;\n}\nsc-af {\n    shaping-rate 20m;\n    buffer-size percent 10;\n}\nsc-nc {\n    buffer-size percent 5;\n    priority strict-high;\n}\nsc-be {\n    shaping-rate percent 80;\n    buffer-size {\n        remainder;\n    }\n}\n</code></pre> \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0432\u044b\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u043e, \u0430 \u043f\u0440\u043e\u0446\u0435\u043d\u0442 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0431\u0443\u0444\u0435\u0440\u043e\u0432 - \u043f\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u043d\u043e\u0441\u0442\u044f\u043c. \u0414\u043b\u044f \u0448\u0435\u0434\u0443\u043b\u0435\u0440\u043e\u0432 sc-ef \u0438 sc-nc \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c strict-priority. \u0414\u043b\u044f \u0448\u0435\u0434\u0443\u043b\u0435\u0440\u0430 sc-af \u043f\u043e\u043b\u043e\u0441\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f 20\u043c\u0431\u0438\u0442/\u0441, \u0430 \u0434\u043b\u044f sc-be - 80% \u043e\u0442 \u043f\u043e\u043b\u043e\u0441\u044b \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430. \u0414\u0430\u043b\u0435\u0435 \u0448\u0435\u0434\u0443\u043b\u0435\u0440\u044b \u043d\u0430\u0434\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0441 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u043c\u0438 \u043a\u043b\u0430\u0441\u0441\u0430\u043c\u0438: <pre><code>ex2200&gt; show configuration class-of-service scheduler-maps    \ncustom-maps {\n    forwarding-class network-control scheduler sc-nc;\n    forwarding-class expedited-forwarding scheduler sc-ef;\n    forwarding-class assured-forwarding scheduler sc-af;\n    forwarding-class best-effort scheduler sc-be;\n}\n</code></pre> \u0412 \u0438\u0442\u043e\u0433\u0435, scheduler-map \u0438 classifier \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e \u0432\u0441\u0435\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u043c, \u043e\u043f\u0438\u0441\u0430\u0432 \u0438\u0445 \u043a\u0430\u043a \u0448\u0430\u0431\u043b\u043e\u043d, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: <pre><code>ex2200&gt; show configuration class-of-service interfaces \nge-* {\n    scheduler-map custom-maps;\n    unit 0 {\n        classifiers {\n            dscp custom-dscp;\n        }\n    }\n}\nae* {\n    scheduler-map custom-maps;\n    unit 0 {\n        classifiers {\n            dscp custom-dscp;\n        }\n    }\n}\n</code></pre> \u041d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0435 \u0438\u043b\u0438 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438, \u0442.\u0435. \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 scheduler \u0438 scheduler-maps \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432. \u0412 \u044d\u0442\u043e\u043c \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b juniper \u043b\u0443\u0447\u0448\u0435, \u0447\u0435\u043c cisco 2960/3750, \u0433\u0434\u0435 \u0432\u0441\u0435\u0433\u043e \u0434\u0432\u0430 queue-set. \u0418\u0442\u043e\u0433\u043e\u0432\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u0432\u043e\u0442 \u0442\u0430\u043a: <pre><code>ex2200&gt; show configuration class-of-service \nclassifiers {\n    dscp custom-dscp {\n        forwarding-class network-control {\n            loss-priority low code-points [ cs6 cs7 ];\n        }\n        forwarding-class expedited-forwarding {\n            loss-priority low code-points ef;\n        }\n        forwarding-class assured-forwarding {\n            loss-priority low code-points [ cs3 cs4 af41 ];\n        }\n    }\n}\nhost-outbound-traffic {\n    forwarding-class network-control;\n}\ninterfaces {\n    ge-* {\n        scheduler-map custom-maps;\n        unit 0 {\n            classifiers {\n                dscp custom-dscp;\n            }\n        }\n    }\n    ae* {\n        scheduler-map custom-maps;\n        unit 0 {\n            classifiers {\n                dscp custom-dscp;\n            }\n        }\n    }                                   \n}\nscheduler-maps {\n    custom-maps {\n        forwarding-class network-control scheduler sc-nc;\n        forwarding-class expedited-forwarding scheduler sc-ef;\n        forwarding-class assured-forwarding scheduler sc-af;\n        forwarding-class best-effort scheduler sc-be;\n    }\n}\nschedulers {\n    sc-ef {\n        buffer-size percent 10;\n        priority strict-high;\n    }\n    sc-af {\n        shaping-rate 20m;\n        buffer-size percent 10;\n    }\n    sc-nc {\n        buffer-size percent 5;\n        priority strict-high;\n    }\n    sc-be {\n        shaping-rate percent 80;\n        buffer-size {\n            remainder;\n        }\n    }\n}\n</code></pre> \u041f\u0435\u0440\u0435\u0434 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0435\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 commit check. \u0423 \u043c\u0435\u043d\u044f \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u043b\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430: <pre><code>[edit class-of-service interfaces]\n  'ge-*'\n    One or more \"strict-high\" priority queues have lower queue-numbers than priority \"low\" queues in custom-maps for ge-*. Ifd ge-* supports strict-high priority only on higher numbered queues.\nerror: configuration check-out failed\n</code></pre> \u042d\u0442\u043e \u0431\u0443\u043a\u0432\u0430\u043b\u044c\u043d\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u043d\u0435\u043b\u044c\u0437\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c priority \"strict-high\" \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f 5\u043e\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438, \u043a\u043e\u0433\u0434\u0430 \u0443 7\u043e\u0439 \u043e\u0441\u0442\u0430\u043d\u0435\u0442\u0441\u044f priority \"low\". \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0442\u0443\u0442 \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043b\u0430\u0441\u0441\u044b \u0438 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u0443 network-control, \u043b\u0438\u0431\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0434\u043b\u044f network-control priority \"strict-high\", \u0447\u0442\u043e \u0438 \u0431\u044b\u043b\u043e \u0441\u0434\u0435\u043b\u0430\u043d\u043e. \u041f\u043e\u0441\u043b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0447\u0430\u0441\u0442\u044c \u0444\u0440\u0435\u0439\u043c\u043e\u0432 \u0431\u0443\u0434\u0435\u0442 \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u044f\u0445 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u0430, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0430\u0434\u043e \u043f\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0438 \u0441\u043f\u0443\u0441\u0442\u044f \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0434\u0440\u043e\u043f\u043e\u0432, \u0433\u0434\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u0442\u043b\u0438\u0447\u043d\u043e \u043e\u0442 \u043d\u0443\u043b\u044f. <pre><code>clear interfaces statistics all\nshow interfaces queue | match dropped | except \" 0$\"\n</code></pre> \u0415\u0441\u043b\u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 \u0434\u0440\u043e\u043f\u043e\u0432 \u043d\u0430\u0440\u0430\u0441\u0442\u0430\u044e\u0442, \u0442\u043e \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u043d\u0435 \u043e\u043f\u0438\u0441\u0430\u043d \u0432 class-of-service interfaces \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u043c \u0438\u043b\u0438 \u0432 \u044f\u0432\u043d\u043e\u043c \u0432\u0438\u0434\u0435, \u0442\u043e \u0442\u0440\u0430\u0444\u0438\u043a \u0432 \u043a\u043b\u0430\u0441\u0441\u0430\u0445 \u0434\u0440\u043e\u043f\u043d\u0435\u0442\u0441\u044f. \u041d\u0438\u0436\u0435 \u043f\u0440\u0438\u043c\u0435\u0440 \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0431\u0435\u0437 \u043f\u043e\u0442\u0435\u0440\u044c. <pre><code>ex2200&gt; show interfaces queue ge-0/0/22    \nPhysical interface: ge-0/0/22, Enabled, Physical link is Up\n  Interface index: 151, SNMP ifIndex: 531\nForwarding classes: 16 supported, 4 in use\nEgress queues: 8 supported, 4 in use\nQueue: 0, Forwarding classes: best-effort\n  Queued:\n  Transmitted:\n    Packets              :                320486\n    Bytes                :             145189648\n    Tail-dropped packets :                     0\n    RL-dropped packets   :                     0\n    RL-dropped bytes     :                     0\nQueue: 1, Forwarding classes: assured-forwarding\n  Queued:\n  Transmitted:\n    Packets              :                   317\n    Bytes                :                169479\n    Tail-dropped packets :                     0\n    RL-dropped packets   :                     0\n    RL-dropped bytes     :                     0\nQueue: 5, Forwarding classes: expedited-forwarding\n  Queued:\n  Transmitted:\n    Packets              :                   624\n    Bytes                :                138260\n    Tail-dropped packets :                     0\n    RL-dropped packets   :                     0\n    RL-dropped bytes     :                     0\nQueue: 7, Forwarding classes: network-control\n  Queued:\n  Transmitted:                          \n    Packets              :                   674\n    Bytes                :                243314\n    Tail-dropped packets :                     0\n    RL-dropped packets   :                     0\n    RL-dropped bytes     :                     0\n</code></pre> \u041a\u043b\u0430\u0441\u0441\u044b \u043c\u043e\u0436\u043d\u043e \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e snmp.</p>"},{"location":"network/juniper_ex/#spanning-tree","title":"spanning-tree","text":"<p>\u041d\u0430 \u0440\u0430\u0437\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u044f\u0445 \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u0432\u0435\u0440\u0441\u0438\u044f\u0445 \u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0432 2300 stp \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0445 \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u043f\u043e\u0440\u0442\u0430\u0445. \u0412 \u0441\u0442\u0430\u0440\u044b\u0445 \u0432\u0435\u0440\u0441\u0438\u044f\u0445 \u0438 \u043c\u043e\u0434\u0435\u043b\u044f\u0445 2200 3300 4200 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432\u0435\u0437\u0434\u0435, \u043d\u0430\u0434\u043e \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0435 \u043d\u0430\u043e\u0431\u043e\u0440\u043e\u0442 \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0442\u044c. <pre><code>&gt; show configuration protocols mstp \nconfiguration-name abc;\nrevision-level 1;\nbridge-priority 24k;\ninterface ge-0/0/1.0 {\n    disable;\n}\ninterface ge-0/0/2.0 {\n    mode point-to-point;\n}\nmsti 1 {\n    bridge-priority 24k;\n    vlan 1-4094;\n}\n\n{master:0}\n</code></pre></p>"},{"location":"network/juniper_ex/#bpdufilter-bpduguard","title":"bpdufilter, bpduguard","text":"<p>\u042f \u043d\u0435 \u0437\u043d\u0430\u044e, \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u044e\u0442 \u043b\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0438 \u0441\u0432\u043e\u0438\u043c\u0438 bpdufilter'\u0430\u043c\u0438 \u0446\u0438\u0441\u043a\u043e\u0432\u0441\u043a\u0438\u0439 01:00:0C:CC:CC:CD \u0438\u043b\u0438 \u043d\u0435\u0442. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u0434\u0432\u0443\u0445 \u043c\u0430\u043a-\u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0438 \u043f\u043e\u0432\u0435\u0441\u0438\u0442\u044c \u043f\u043e \u0432\u0445\u043e\u0434\u0443, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0442\u0430\u043a\u043e\u0439: <pre><code>firewall {\n    family inet {\n        filter bpdufilter {\n            term discard-bpdu {\n                from {\n                    destination-mac-address {\n                        01:80:c2:00:00:00/48;\n                        01:00:0c:cc:cc:cd/48;\n                    }\n                }\n                then {\n                    discard;\n                    count BPDU_FILTER;\n                }\n            }\n            term allow-other {\n                then accept;\n            }\n\n        }\n    }\n}\n</code></pre> \u0421\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u043d\u0430 \u043c\u0435\u043b\u043a\u0438\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445, \u043a\u0440\u043e\u043c\u0435 ex9200, \u043c\u043e\u0436\u043d\u043e \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 \u0434\u043b\u044f \u043f\u043e\u0440\u0442\u043e\u0432, \u0433\u0434\u0435 spanning-tree \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d spanning-tree \u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f bpdu, \u043d\u043e \u044d\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043b\u043e \u0432 \u0441\u0442\u0430\u0440\u044b\u0445 \u0432\u0435\u0440\u0441\u0438\u044f\u0445 junos. \u0412 12.3R12.4 \u043d\u0430\u0434\u043e \u0432 \u044f\u0432\u043d\u043e\u043c \u0432\u0438\u0434\u0435 \u0432 bpdu-block \u043f\u0440\u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b, \u0433\u0434\u0435 stp \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u0438\u043d\u0430\u0447\u0435 \u0437\u0430\u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u0442 bpdu \u043d\u0430 \u0432\u0441\u0435\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445. \u041d\u0435\u0436\u0434\u0430\u043d\u0447\u0438\u043a. <pre><code>ex2200&gt; show configuration protocols mstp                \nconfiguration-name abc;\nrevision-level 1;\nbridge-priority 28k;\ninterface all {\n    disable;\n}\nmsti 1 {\n    bridge-priority 28k;\n    vlan 1-4094;\n}\n\n{master:0}\nex2200&gt; show configuration ethernet-switching-options bpdu-block \ninterface ge-0/0/5.0 {\n    disable;\n}\n\ninterface xstp-disabled {\n    drop;\n}\n{master:0}\n</code></pre> \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c bpduguard \u043d\u0430 ex2200 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0432 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0435 \u043f\u043e\u0440\u0442\u044b \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u043e\u043c, \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430 stp \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0430 \u043f\u043e\u0440\u0442\u043e\u0432 \u0442\u0438\u043f edge \u0438 \u0442\u0430\u043c \u0436\u0435 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b bpdu-block-on-edge. <pre><code>ex2200# show | compare \n[edit interfaces]\n+   interface-range Users {\n+       member-range ge-0/0/20 to ge-0/0/30;\n+       unit 0 {\n+           family ethernet-switching {\n+               port-mode access;\n+               vlan {\n+                   members 200;\n+               }\n+           }\n+       }\n+   }\n[edit protocols mstp]\n+    interface Users {\n+        edge;\n+    }\n[edit protocols mstp]\n+   bpdu-block-on-edge;\n[edit ethernet-switching-options bpdu-block]\n+   disable-timeout 120;\n</code></pre></p>"},{"location":"network/juniper_ex/#igmp-snooping","title":"igmp-snooping","text":"<p>\u0415\u0441\u043b\u0438 \u043d\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0441\u0432\u044f\u0437\u0438, \u0442\u043e \u0432\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u043e\u0432\u0441\u0435\u043c. \u0415\u0441\u043b\u0438 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440, \u0442\u043e \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u0432\u043b\u0430\u043d\u043e\u0432 \u0438 \u0442\u043f. <pre><code>&gt; show configuration protocols igmp-snooping \nvlan all {\n    disable;\n}\n\n{master:0}\n</code></pre></p>"},{"location":"network/juniper_ex/#storm-control","title":"storm-control","text":"<p>\u0425\u043e\u0440\u043e\u0448\u0430\u044f \u0448\u0442\u0443\u043a\u0430, \u043d\u043e \u043d\u0430 \u0441\u0432\u043e\u0438\u0445 \u0430\u043f\u043b\u0438\u043d\u043a\u0430\u0445 \u043d\u0430\u0434\u043e \u0432\u044b\u043a\u043b\u044e\u0447\u0430\u0442\u044c <pre><code>ethernet-switching-options {\n    storm-control {\n        action-shutdown;\n        interface ge-1/0/1.0 {\n            no-broadcast;\n            no-unknown-unicast;\n            no-multicast;\n        }\n}\n</code></pre></p>"},{"location":"network/juniper_ex/#span","title":"SPAN","text":"<p>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e dst \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043e. \u041e\u0442 1 \u0432 \u0434\u043e 4. <pre><code>ethernet-switching-options {\n    analyzer span {\n        input {\n            ingress {\n                vlan 100;\n                vlan 200;\n                vlan 300;\n            }\n        }\n        output {\n            interface {\n                ge-0/0/47.0;\n            }\n        }\n    }\n\n}\n</code></pre></p>"},{"location":"network/juniper_mx/","title":"Router juniper","text":""},{"location":"network/juniper_mx/#arp-policer","title":"arp policer","text":"<p>Example: Configuring ARP Policer</p> <p>NOTE: A default arp policer named default_arp_policer is used and shared by all ethernet interfaces with family inet configured, by default.</p> <p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0432 \u0434\u0435\u0444\u043e\u043b\u0442\u043e\u0432\u043e\u043c \u043f\u043e\u043b\u0438\u0441\u0435\u0440\u0435. \u041d\u0430 \u0431\u043e\u0440\u0434\u0435\u0440\u0430\u0445, \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0445 \u043a \u0442\u043e\u0447\u043a\u0430\u043c \u043e\u0431\u043c\u0435\u043d\u0430, \u0435\u0433\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c <pre><code>&gt; show policer\nPolicers:\nName                                                Bytes              Packets\n__default_arp_policer__                       74695272896           1656698750\n</code></pre></p> <p>\u041f\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440, \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043a \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443, \u043f\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438 <code>clear firewall</code>. \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437 \u0438 \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c. <pre><code>&gt; show policer\nPolicers:\nName                                                Bytes              Packets\n__default_arp_policer__                                 0                    0\narp_limit-xe-0/0/0.100-inet-arp                        46                    1\n</code></pre></p>"},{"location":"network/juniper_mx/#ddos","title":"ddos","text":"<pre><code>show ddos-protection protocols statistics terse\nshow ddos-protection protocols culprit-flows\nshow ddos-protection protocols violations\n</code></pre>"},{"location":"network/juniper_mx/#sflow","title":"sflow","text":"<p>Example: Configuring sFlow Technology to Monitor Network Traffic on MX Series Routers </p> <p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 c \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0448\u0435\u043d\u0430\u043c\u0438, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0445 \u0432 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 <code>annotate interfaces ..</code> <pre><code>show snmp mib walk ifAlias | match =\n</code></pre> \u0415\u0441\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0432 \u043e\u0434\u0438\u043d \u0441\u0430\u0431\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u043d\u0430 \u043e\u0434\u0438\u043d \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441. <pre><code>&gt; show configuration protocols sflow\npolling-interval 60;\nsample-rate {\n    ingress 2048;\n    egress 2048;\n}\nsource-ip 10.9.8.7;\ncollector 10.0.0.1 {\n    forwarding-class best-effort;\n}\n/* 550.peer1 */\ninterfaces xe-0/1/1.100;\n/* 560.peer2 */\ninactive: interfaces xe-0/1/1.200;\n/* 570.peer3 */\ninactive: interfaces xe-0/1/1.300;\n/* 580.peer4 */\ninterfaces xe-0/1/2.100;\n</code></pre></p> <p>\u0412 20.2 <pre><code>Alarm cleared: License id=0, color=YELLOW, class=CHASSIS, reason=Secure Flow usage requires a license\nAlarm set: License id=0, color=YELLOW, class=CHASSIS, reason=Secure Flow usage requires a license\n</code></pre></p>"},{"location":"network/juniper_mx/#load-balancing","title":"load-balancing","text":"<p>You can configure Junos OS so that, for the active route, all next-hop addresses for a destination are installed in the forwarding table. This feature is called per-packet load balancing. The naming may be counter-intuitive. However, Junos per-packet load balancing is functionally equivalent to what other vendors may term per-flow load balancing. You can use load balancing to spread traffic across multiple paths between routers.</p> <p>To enable per-flow load balancing, you must set the load-balance per-packet action in the routing policy configuration.</p> <p>\u041f\u043e\u043b\u0438\u0441\u0438 <pre><code>&gt; show configuration policy-options policy-statement balance\nfrom protocol bgp;\nthen {\n    load-balance per-packet;\n}\n&gt; show configuration routing-options forwarding-table\nexport balance;\n</code></pre> \u0412 \u0433\u0440\u0443\u043f\u043f\u0443 bgp peer-\u043e\u0432 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c <code>multipath multiple-as</code> <pre><code>&gt; show configuration protocols bgp group upstream\ntype external;\nmultipath {\n    multiple-as;\n}\n...\n</code></pre></p>"},{"location":"network/juniper_mx/#pic","title":"pic","text":"<p>pic-mode Port Checker Port Speed</p>"},{"location":"network/juniper_mx/#_1","title":"\u0426\u041c\u0423","text":"<p>\u0414\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0426\u041c\u0423. \u041d\u0430\u043f\u0438\u0441\u0430\u043b \u043d\u0438\u0436\u0435 cmo, \u043f\u0435\u0440\u0435\u0434\u0435\u043b\u044b\u0432\u0430\u0442\u044c \u0443\u0436\u0435 \u043d\u0435 \u0441\u0442\u0430\u043d\u0443. \u0410\u0434\u0440\u0435\u0441 \u0426\u041c\u0423 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0437 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438. \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0432 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0435 \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 <code>as1234</code>.</p> <p>\u0414\u043b\u044f snmp \u0445\u043e\u0442\u044f\u0442:</p> <p>IP-\u0430\u0434\u0440\u0435\u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u044b (\u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0426\u041c\u0423) \u0434\u043b\u044f SNMP  (\u043e\u0442 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0430\u0434\u0440\u0435\u0441\u0430 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u044b);77.95.132.140 \u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043d\u0430 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442-\u043d\u044b\u0439 \u043f\u043e\u0440\u0442 (161). \u041e\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u044e\u0442\u0441\u044f IF-MIB, IP-FORWARD-MIB,  BGP4-MIB,  SNMPv2-MIB. \u041f\u0435\u0440\u0438\u043e-\u0434\u0438\u0447\u043d\u043e\u0441\u0442\u044c \u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 60 \u043c\u0438\u043d\u0443\u0442 (\u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430).</p> <p><pre><code>set snmp view CMO oid 1.3.6.1.2.1.2.2 include\nset snmp view CMO oid 1.3.6.1.2.1.15 include\nset snmp view CMO oid 1.3.6.1.6.3.1 include\nset snmp view CMO oid 1.3.6.1.2.1.4.24 include\nset snmp community cmo view CMO\nset snmp community cmo authorization read-only\nset snmp community cmo routing-instance as1234 clients 77.95.132.140/32\nset snmp community cmo routing-instance as1234 clients [test-ip]/32\nset snmp routing-instance-access\n</code></pre> \u0421 \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0445\u043e\u0441\u0442\u0430 \u0441 \u0430\u0434\u0440\u0435\u0441\u043e\u043c <code>test-ip</code> \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c <pre><code>snmpwalk -c as1234@cmo -v2c router\n</code></pre></p> <p>\u0414\u043b\u044f bgp \u0445\u043e\u0442\u044f\u0442:</p> <p>IP-\u0430\u0434\u0440\u0435\u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u044b (\u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0426\u041c\u0423) \u0434\u043b\u044f BGP \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439; \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c eBGP Multihop \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435. \u0415\u0441\u043b\u0438 \u0434\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f BGP \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u041d\u0415 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f MD5 (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f), \u0434\u043b\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441: 77.95.132.140 \u0415\u0441\u043b\u0438 \u0434\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f BGP \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f MD5 (\u041d\u0415 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f), \u0430\u0434\u0440\u0435\u0441 \u0434\u043b\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0438 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0441 \u0426\u041c\u0423 (\u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d \u0430\u0434\u0440\u0435\u0441 \u0438\u0437 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0430 185.224.228.0/24) \u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412 \u0441\u0432\u044f\u0437\u0438 \u0441 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044f\u043c\u0438 \u0426\u041c\u0423 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0441\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c \u0431\u0443\u0434\u0435\u0442 \u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f. \u0412 \u0441\u0432\u044f\u0437\u0438 \u0441 \u044d\u0442\u0438\u043c, \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0443 \u0426\u041c\u0423 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u0430 \u043c\u043e\u043c\u0435\u043d\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044b  IP-\u0430\u0434\u0440\u0435\u0441\u0441. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u041f\u041e \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0426\u041c\u0423 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u043c, \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043e \u0437\u0430 \u043c\u0435\u0436\u0441\u0435\u0442\u0435\u0432\u044b\u043c \u044d\u043a\u0440\u0430\u043d\u043e\u043c \u0438 NAT \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u0435\u0439, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0441\u0435\u0441-\u0441\u0438\u0438 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u043d\u0438\u0446\u0438\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043e \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u0426\u041c\u0423, \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 179 \u043f\u043e\u0440\u0442 \u0441 \u043f\u043e\u0440\u0442\u0430 \u0438\u0437 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0430 &gt;1024. \u0411\u043e\u043b\u044c\u0448\u0430\u044f \u043f\u0440\u043e\u0441\u044c\u0431\u0430 \u0443\u0447\u0438\u0442\u044b-\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043f\u0440\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0441\u0435\u0441\u0441\u0438\u0438 BGP \u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432 (ACL) \u043d\u0430 \u0412\u0430\u0448\u0435\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0435. \u0415\u0441-\u043b\u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u043c, \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438-\u0440\u0443\u0439\u0442\u0435 \u0441\u0435\u0441\u0441\u0438\u044e \u0441 \u0426\u041c\u0423 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 passive. \u041d\u043e\u043c\u0435\u0440 AS \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u0426\u041c\u0423   \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 65211 \u043b\u0438\u0431\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043b\u044e\u0431\u044b\u043c, \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 Private Space Number.</p> <pre><code>set routing-instances as1234 protocols bgp group cmo type external\nset routing-instances as1234 protocols bgp group cmo neighbor 77.95.132.140 multihop\nset routing-instances as1234 protocols bgp group cmo neighbor 77.95.132.140 local-address [local-ip]\nset routing-instances as1234 protocols bgp group cmo neighbor 77.95.132.140 passive\nset routing-instances as1234 protocols bgp group cmo neighbor 77.95.132.140 import RF-reject\nset routing-instances as1234 protocols bgp group cmo neighbor 77.95.132.140 export RF-default-export\nset routing-instances as1234 protocols bgp group cmo neighbor 77.95.132.140 peer-as 65211\n</code></pre> <p>\u0425\u043e\u0442\u044f\u0442 netflow. \u0415\u0441\u0442\u044c sflow \u0441 PR1487876. \u0412 20.2 \u0445\u043e\u0447\u0435\u0442 \u043b\u0438\u0446\u0435\u043d\u0437\u0438\u044e \u043a\u0430\u043a\u0443\u044e-\u0442\u043e, \u0447\u0435\u0433\u043e \u0432 18 \u0438 \u0432 19 \u043d\u0435\u0442.</p> <pre><code>Alarm cleared: License id=0, color=YELLOW, class=CHASSIS, reason=Secure Flow usage requires a license\nAlarm set: License id=0, color=YELLOW, class=CHASSIS, reason=Secure Flow usage requires a license\n</code></pre> <p>77.95.132.140. \u041f\u043e\u0440\u0442 UDP 9080</p> <pre><code>set protocols sflow polling-interval 60\nset protocols sflow sample-rate ingress 10000\nset protocols sflow sample-rate egress 10000\nset protocols sflow source-ip [local-ip]\nset protocols sflow collector 77.95.132.140 udp-port 9080\nset protocols sflow interfaces xe-0/1/4\n</code></pre> <p>By default, Junos will use the default routing instance to send sFlow packets.  <pre><code>set routing-options static route 77.95.132.140/32 next-table as1234.inet.0\n</code></pre></p> <p>\u0424\u0438\u043b\u044c\u0442\u0440 \u0441 \u043a\u0430\u0443\u043d\u0442\u0435\u0440\u043e\u043c \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 flows <pre><code>set firewall family inet filter cmo term cmo from destination-address 77.95.132.140/32\nset firewall family inet filter cmo term cmo from destination-port 9080\nset firewall family inet filter cmo term cmo then count cmo\nset firewall family inet filter cmo term cmo then accept\nset firewall family inet filter cmo term all then accept\n</code></pre></p>"},{"location":"network/juniper_mx/#ipfix","title":"ipfix","text":"<p>sampling \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u0445 <pre><code>set interfaces xe-1/0/0.0 family inet sampling input\nset interfaces xe-1/0/0.0 family inet sampling output\n</code></pre></p> <p>\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u0430\u043a \u0441 \u043a\u0435\u043d\u0442\u0438\u043a\u0430 <pre><code>set services flow-monitoring version-ipfix template ipv4 flow-active-timeout 60\nset services flow-monitoring version-ipfix template ipv4 flow-inactive-timeout 15\nset services flow-monitoring version-ipfix template ipv4 template-refresh-rate packets 30\nset services flow-monitoring version-ipfix template ipv4 template-refresh-rate seconds 60\nset services flow-monitoring version-ipfix template ipv4 option-refresh-rate packets 30\nset services flow-monitoring version-ipfix template ipv4 option-refresh-rate seconds 30\nset services flow-monitoring version-ipfix template ipv4 ipv4-template\n\nset forwarding-options sampling instance sample-ins input rate 1\nset forwarding-options sampling instance sample-ins family inet output flow-server 10.0.0.2 port 20013\nset forwarding-options sampling instance sample-ins family inet output flow-server 10.0.0.2 autonomous-system-type origin\nset forwarding-options sampling instance sample-ins family inet output flow-server 10.0.0.2 version-ipfix template ipv4\nset forwarding-options sampling instance sample-ins family inet output inline-jflow source-address 10.0.0.1\n\nset chassis fpc 0 sampling-instance sample-ins\n</code></pre></p>"},{"location":"network/juniper_mx/#junos-upgrade","title":"junos upgrade","text":"<p>VM Host Overview, vm-host-operations-management,  installation_upgrade</p> <p>\u0421 17.x \u0434\u043e 20.2 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u0441\u044f \u0441\u0440\u0430\u0437\u0443 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f. <pre><code>ERROR: estimate of space required: 4035098 Kbytes, available: 3994154 Kbytes\n</code></pre> \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441 17.x \u0434\u043e 19.4 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043d\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u0431\u0443\u0442 \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0432\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 19.4. <pre><code>Chassis control process: &lt;xnm:warning xmlns=\"http://xml.juniper.net/xnm/1.1/xnm\" xmlns:xnm=\"http://xml.juniper.net/xnm/1.1/xnm\"&gt;\nChassis control process: &lt;source-daemon&gt;chassisd&lt;/source-daemon&gt;\nChassis control process: &lt;edit-path&gt;[edit groups junos-defaults]&lt;/edit-path&gt;\nChassis control process: &lt;statement&gt;chassis&lt;/statement&gt;\nChassis control process: &lt;message&gt;Chassis configuration for network services has been changed. A system reboot is mandatory.  Please reboot *ALL* routing engines NOW. &gt;\nChassis control process: &lt;/xnm:warning&gt;\n</code></pre> \u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043a\u043e\u043f\u0438\u044f \u0432 /var/tmp/ <pre><code>file copy http://[host]/fw/junos/junos-vmhost-install-mx-x86-64-19.4R3-S2.2.tgz /var/tmp/\n</code></pre> \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439 <pre><code>request vmhost software add no-validate reboot /var/tmp/junos-vmhost-install-mx-x86-64-19.4R3-S2.2.tgz\n</code></pre> \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 RE \u043f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u0432\u044b\u0448\u0435 <pre><code>request vmhost reboot\n</code></pre> \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441 19.4 \u0434\u043e 20.2 \u0448\u0442\u0430\u0442\u043d\u043e <pre><code>request vmhost software add no-validate http://[host]/fw/junos/junos-vmhost-install-mx-x86-64-20.2R2-S2.6.tgz\n</code></pre> \u041f\u043e\u0441\u043b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <pre><code>A REBOOT IS REQUIRED TO LOAD THIS SOFTWARE CORRECTLY.\nUse the 'request vmhost reboot' command to reboot the system.\n</code></pre></p> <p>\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 OOBM \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435, \u0442.\u043a. \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0431\u0443\u0434\u0443\u0442 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0438\u0437-\u0437\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u043b\u0438\u043d\u0435\u0439\u043d\u044b\u0445 \u043a\u0430\u0440\u0442. \u042d\u0442\u043e \u0436\u0435 \u043a\u0430\u0441\u0430\u0435\u0442\u0441\u044f mx204, \u0433\u0434\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u0438\u043d\u0443\u0442 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c <code>xe-</code> \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b.</p>"},{"location":"network/juniper_mx/#vmhost-rollback","title":"vmhost rollback","text":"<pre><code>mx&gt; show vmhost version\nCurrent root details,           Device sda, Label: jrootp_P, Partition: sda3\nCurrent boot disk: Primary\nCurrent root set: p\nUEFI    Version: CBEP_P_SUM1_00.13.01\n\nPrimary Disk, Upgrade Time: Wed Mar 17 12:30:11 UTC 2021\n\nVersion: set p\nVMHost Version: 5.2268\nVMHost Root: vmhost-x86_64-20.2R2-S1-20201210_1323_builder\nVMHost Core: vmhost-core-x86-64-20.2R2-S2.6\nkernel: 4.8.28-rt10-WR9.0.0.24_ovp\nJunos Disk: junos-install-mx-x86-64-20.2R2-S2.6\n\nVersion: set b\nVMHost Version: 5.2225\nVMHost Root: vmhost-x86_64-19.4R3-S2-20210118_0229_builder\nVMHost Core: vmhost-core-x86-64-19.4R3-S2.2\nkernel: 4.8.28-rt10-WR9.0.0.20_ovp\nJunos Disk: junos-install-mx-x86-64-19.4R3-S2.2\n</code></pre> <pre><code>request vmhost software rollback\n</code></pre> <pre><code>mx&gt; show vmhost version\nCurrent root details,           Device sda, Label: jrootb_P, Partition: sda4\nCurrent boot disk: Primary\nCurrent root set: b\nUEFI    Version: CBEP_P_SUM1_00.13.01\n\nPrimary Disk, Upgrade Time: Wed Mar 17 12:30:11 UTC 2021\n\nVersion: set p\nVMHost Version: 5.2268\nVMHost Root: vmhost-x86_64-20.2R2-S1-20201210_1323_builder\nVMHost Core: vmhost-core-x86-64-20.2R2-S2.6\nkernel: 4.8.28-rt10-WR9.0.0.24_ovp\nJunos Disk: junos-install-mx-x86-64-20.2R2-S2.6\n\nVersion: set b\nVMHost Version: 5.2225\nVMHost Root: vmhost-x86_64-19.4R3-S2-20210118_0229_builder\nVMHost Core: vmhost-core-x86-64-19.4R3-S2.2\nkernel: 4.8.28-rt10-WR9.0.0.20_ovp\nJunos Disk: junos-install-mx-x86-64-19.4R3-S2.2\n\nmx&gt; show version\nModel: mx204\nJunos: 19.4R3-S2.2\n</code></pre>"},{"location":"network/mds/","title":"Switch cisco mds","text":"<p>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043d\u0430 6.2\u0445 Cisco MDS 9000 Family NX-OS Fabric Configuration Guide</p>"},{"location":"network/mds/#nxos","title":"\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 nxos","text":"<p>Cisco MDS 9000 Series Release Notes for Cisco MDS NX-OS Release 6.2(29) \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0439 \u0440\u0435\u043b\u0438\u0437 \u0438\u0437 \u0442\u043e\u0433\u043e \u0447\u0442\u043e \u0435\u0441\u0442\u044c </p> file md5 m9100-s3ek9-mz.6.2.29.bin <code>md5 60891b50b773222ecfef778f263f0af3</code> m9100-s3ek9-kickstart-mz.6.2.29.bin <code>md5 227276a329ffca6cbabd5264df40762d</code> <p>Cisco MDS 9000 NX-OS Software Upgrade and Downgrade Guide</p> <p>If your switch is running software that is earlier than Cisco NX-OS Release 5.2(x), you must upgrade to Release 6.2(x). Follow this upgrade path:</p> <ul> <li>Release 5.0(x): upgrade to 5.2(x), and then upgrade to 6.2(x).</li> <li>Release 4.1(x) or release 4.2(x): upgrade to Release 5.0(x), upgrade to Release 5.2(x) and then upgrade to Release 6.2(x).</li> <li>Release 3.3(2), Release 3.3(3), Release 3.3(4x), and Release 3.3(5x), upgrade to release 4.1(x) or Release 4.2(x), then upgrade to Release 5.0(x), and then upgrade to Release 5.2(x), and then upgrade to 6.2(x).</li> <li>Release 3.3(1c), all Release 3.2(x), all Release 3.1(x), and all Release 3.0(x), upgrade to release 3.3(5b), then upgrade to release 4.1(x) or release 4.2(x), then upgrade to Release 5.0(x), and then upgrade to Release 5.2(x), and then upgrade to 6.2(x).</li> </ul> <p>\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c scp-server \u043d\u0430 mds <pre><code>feature scp-server\n</code></pre></p> <p>\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b \u043f\u043e scp <pre><code>C:\\&gt;pscp.exe -scp m9100-s3ek9-kickstart-mz.6.2.29.bin user@mds_ip:/\nKeyboard-interactive authentication prompts from server:\n| Password:\nEnd of keyboard-interactive prompts from server\nm9100-s3ek9-kickstart-mz. | 21361 kB | 5340.3 kB/s | ETA: 00:00:00 | 100%\n\nC:\\&gt;pscp.exe -scp m9100-s3ek9-mz.6.2.29.bin user@mds_ip:/\nKeyboard-interactive authentication prompts from server:\n| Password:\nEnd of keyboard-interactive prompts from server\nm9100-s3ek9-mz.6.2.29.bin | 73713 kB | 3204.9 kB/s | ETA: 00:00:00 | 100%\n</code></pre> \u0412 5 \u0432\u0435\u0440\u0441\u0438\u0438 \u043d\u0435\u0442 scp-server \u043d\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441 \u043b\u044e\u0431\u043e\u0433\u043e \u0445\u043e\u0441\u0442\u0430, \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0432\u0448\u0438\u0441\u044c \u043a \u043d\u043e\u0443\u0442\u0443 \u0447\u0435\u0440\u0435\u0437 mgmt \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 <pre><code>copy scp://username@192.168.1.181/home/v98765/soft/m9100-s3ek9-kickstart-mz.6.2.29.bin bootflash:/\ncopy scp://username@192.168.1.181/home/v98765/soft/m9100-s3ek9-mz.6.2.29.bin bootflash:/\n</code></pre></p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c md5 \u0438 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0441\u0442\u044c. <pre><code>mds# show file m9100-s3ek9-kickstart-mz.6.2.29.bin md5sum\n227276a329ffca6cbabd5264df40762d\nmds# show file m9100-s3ek9-mz.6.2.29.bin md5sum\n60891b50b773222ecfef778f263f0af3\n</code></pre></p> <p>\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0435\u0440\u0435\u0434 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u043e\u0439 <pre><code>mds# show install all impact kickstart m9100-s3ek9-kickstart-mz.6.2.29.bin system 9100-s3ek9-mz.6.2.29.bin\n</code></pre></p> <p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 <pre><code>mds# install all kickstart  m9100-s3ek9-kickstart-mz.6.2.29.bin system m9100-s3ek9-mz.6.2.29.bin\n</code></pre></p>"},{"location":"network/mds/#_1","title":"\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u043e\u0440\u0442\u043e\u0432","text":"<p>\u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043d\u0435 \u043d\u0443\u0436\u043d\u043e, \u043d\u043e \u043f\u043e\u0440\u0442\u044b \u0441 fc \u043a\u0430\u0440\u0442\u0430\u043c\u0438 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u043a\u0430\u043a <code>F</code>, \u0430 \u043b\u0438\u043d\u043a \u0434\u043e \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 san - <code>E</code>. \u0415\u0441\u043b\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0421\u0425\u0414 \u0441 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 pwwn, \u043d\u043e \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c <code>feature npiv</code>. <pre><code>interface fc1/1\n  switchport mode F\n  switchport description \"[hostname]\"\n  switchport trunk mode off\n\ninterface fc1/48\n  switchport description \"[another fc switch]\"\n  switchport mode E\n</code></pre></p>"},{"location":"network/mds/#zone-zoneset","title":"zone, zoneset","text":"<p>\u0417\u043e\u043d\u044b \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c\u0438, \u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0435 \u0432 zoneset \u0437\u043e\u043d\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u044b \u043d\u0430 \u0432\u0441\u0435\u0439 \u0441\u0435\u0442\u0438. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0433\u043e \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u0432\u044b\u0432\u0435\u0441\u0442\u0438 <code>show zoneset</code> \u0438\u043b\u0438 <code>show zoneset brief</code> \u0442.\u043a \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0442\u043e\u0436\u0435 \u0432\u0430\u0436\u0435\u043d \u0438 \u0434\u043e\u0431\u0438\u0442\u044c\u0441\u044f \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u0432\u044b\u0432\u043e\u0434\u0430 \u0432\u043f\u043b\u043e\u0442\u044c \u0434\u043e \u043f\u043e\u0440\u044f\u0434\u043a\u0430 \u0441\u0442\u0440\u043e\u043a pwwn \u043d\u0430 \u0432\u043d\u043e\u0432\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u043e\u043c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435. \u0412 \u044d\u0442\u043e\u043c \u043f\u043e\u043c\u043e\u0436\u0435\u0442 <code>vimdiff</code>, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440. \u041f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u0441 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c\u0438 zoneset, \u043a\u043e\u0433\u0434\u0430 merge \u0437\u043e\u043d \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d, \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u043b\u0438\u043d\u043a\u0430 \u0441\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u043c <code>isolated</code> \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438 \u0432 \u043b\u043e\u0433\u0430\u0445.</p>"},{"location":"network/mds/#netapp","title":"netapp","text":"<p>Physical WWPNs (beginning with 50:0a:09:8x) do not present a SCSI target service and should not be included in any zone configurations on the FC fabric, though they show as logged in to the fabric. Instead, use only virtual WWPNs (WWPNs  starting  with 20:)</p>"},{"location":"network/mds/#single-initiator-and-single-targets","title":"single initiator and single targets","text":"<p>\u0426\u0438\u0442\u0430\u0442\u0430 \u0441 cisco:</p> <p>The preferred number of members per zone is 2, and the maximum recommended limit is 50.</p> <p>\u0422.\u043a. \u0437\u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u043c\u043d\u043e\u0433\u043e, \u0442\u043e \u043d\u0430\u0441\u0442\u0430\u0438\u0432\u0430\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438. \u0415\u0441\u0442\u044c \u043c\u043e\u0434\u0443\u043b\u044c zone_zoneset \u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 cisco.nxos. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043e\u043f\u0438\u0441\u0430\u043d task, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0430\u0441\u0442\u044c\u044e playbook'\u0430. \u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u0433\u0435\u0440\u0435\u043d\u0430\u0446\u0438\u0438 playbook'\u0430 cisco-1i-1t-zoning \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043c\u043e\u0434\u0443\u043b\u044f. \u041c\u043e\u0434\u0443\u043b\u044c \u043d\u0435 \u0438\u0434\u0435\u043c\u043f\u043e\u0442\u0435\u043d\u0442\u043d\u044b\u0439, \u0442.\u0435. \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u0438 \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f zoneset. \u0412 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0438\u0436\u0435 \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 handler'\u0430, \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0449\u0435\u0433\u043e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0444\u0430\u0431\u0440\u0438\u043a\u0438. \u041a\u0430\u043a \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c ansible \u0438 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u043e\u043f\u0438\u0441\u0430\u043d\u043e \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 work/venv.</p> <p>\u0412 \u0440\u0430\u0431\u043e\u0447\u0435\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0430\u0439\u043b <code>ansible.cfg</code>.</p> <p><pre><code>[defaults]\nhost_key_checking = False\ninventory=./inventory\n[ssh_connection]\npipelining = true\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0430\u0439\u043b \u0434\u043b\u044f \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 \u0444\u0430\u0431\u0440\u0438\u043a <code>inventory</code>.</p> <p><pre><code>[all:vars]\n\nansible_network_os=nxos\nansible_become=no\nansible_connection=network_cli\nansible_python_interpreter=~/base/bin/python\n\n[fabric_a]\nmdsA ansible_host=10.0.0.1\n[fabric_b]\nmdsB ansible_host=10.0.0.2\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043f\u043e ssh \u0441 \u0445\u043e\u0441\u0442\u0430. <code>-k</code> \u0434\u043b\u044f \u0432\u0432\u043e\u0434\u0430 \u043f\u0430\u0440\u043e\u043b\u044f. <code>-vv</code> \u0434\u043b\u044f \u043e\u0442\u043b\u0430\u0434\u043a\u0438. <code>all</code> - \u0432\u0441\u0435 \u0445\u043e\u0441\u0442\u044b \u0432 inventory. <pre><code>ansible all -m ping -u [username] -k -vv\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0430\u0439\u043b <code>fabric-A.yml</code>. \u0412 <code>[]</code> \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c \u0432 \u044d\u0442\u043e\u043c \u043c\u0435\u0441\u0442\u0435. \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437 \u043f\u0440\u0438\u043c\u0435\u0440 task'\u0430 \u0432 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u043c\u043e\u0434\u0443\u043b\u044f \u0432 \u0441\u0441\u044b\u043b\u043a\u0435 \u0432\u044b\u0448\u0435. <pre><code>---\n- name: configure zoneset on A\n  hosts: fabric_a\n  gather_facts: false\n\n  tasks:\n  - name: task configure zoneset on A\n    cisco.nxos.nxos_zone_zoneset:\n      zone_zoneset_details:\n      - mode: enhanced\n        vsan: 1\n        zone:\n        - members:\n          - pwwn: [netapp pwwn]\n          - pwwn: [esxi pwwn]\n          name: [zone name]\n        zoneset:\n        - action: activate\n          members:\n          - name: [zone name]\n          name: [zoneset name]\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 <pre><code>ansible-playbook fabric-A.yml --syntax-check\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0444\u0430\u0431\u0440\u0438\u043a\u0438 <pre><code>ansible-playbook fabric-A.yml -u [username] -k --check\n</code></pre> \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0431\u0435\u0437 <code>--check</code></p> <p>\u0414\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043a\u043e\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 playbook <code>mds-save.yml</code> <pre><code>---\n- name: save configuration\n  hosts: all\n  gather_facts: false\n\n  tasks:\n    - name: copy running-config startup-config\n      cli_command:\n        command: copy running-config startup-config\n</code></pre> \u0417\u0430\u043f\u0443\u0441\u043a <pre><code>ansible-playbook mds-save.yml -u [username] -k\n</code></pre></p>"},{"location":"network/mds/#single-initiator-and-multiple-targets","title":"single initiator and multiple targets","text":"<p>\u0414\u043b\u044f \u0441\u043b\u0443\u0447\u0430\u044f, \u043a\u043e\u0433\u0434\u0430 \u0437\u043e\u043d\u044b \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u043f\u043e \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0443 single initiator and multiple targets.</p> <p>\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0443 \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 <pre><code>show flogi database\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u0442\u044c fcalias \u0434\u043b\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u0442\u043e\u0440\u0430. <pre><code>fcalias name [init] vsan 1\n member pwwn [pwwn]\n</code></pre> \u0415\u0441\u043b\u0438 \u044d\u0442\u043e \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435, \u0442\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0441\u0435 \u0435\u0433\u043e pwwn \u0432 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0430\u043b\u0438\u0430\u0441 \u0442\u0430\u0440\u0433\u0435\u0442\u043e\u0432. <pre><code>fcalias name [targets] vsan 1\n member pwwn [pwwn]\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0437\u043e\u043d\u0443 <pre><code>zone name [init_and_targets] vsan 1\n member fcalias [init]\n member fcalias [targets]\n</code></pre> \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u043e\u043d\u0443 \u0432 zoneset <pre><code>zoneset name [zonesetname] vsan 1\n member [init_and_targets]\n</code></pre> \u0410\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f. \u041a\u0441\u0442\u0430\u0442\u0438, <code>show</code> \u0442\u043e\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0438 \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0442\u044c\u0441\u044f \u0438\u0437 \u0440\u0435\u0436\u0438\u043c\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f. <pre><code>MDS(config)# zoneset activate name [zonesetname] vsan 1\n</code></pre> \u041a\u043e\u0433\u0434\u0430 \u043d\u043e\u043c\u0435\u0440 vsan \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f, \u0442\u043e \u043f\u043e\u043c\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0435\u0433\u043e \u043d\u043e\u043c\u0435\u0440\u0430 \u0432 \u0437\u043e\u043d\u0430\u0445, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u043e\u043e\u0442\u0432 \u043f\u043e\u0440\u0442 \u0432 \u043d\u0443\u0436\u043d\u044b\u0439 vsan. <pre><code>vsan database\n vsan 2 interface fc1/33\n</code></pre></p>"},{"location":"network/mds/#_2","title":"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<p>\u0427\u0442\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043e <pre><code>show flogi database\n</code></pre> \u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043d\u0438\u0446\u0438\u0430\u0442\u043e\u0440\u043e\u0432 \u0438 \u0442\u0430\u0440\u0433\u0435\u0442\u043e\u0432. \u0415\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0442\u043e \u0441 <code>local</code>. \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0443, \u0435\u0441\u043b\u0438 \u043d\u043e\u043c\u0435\u0440\u0430 vsan \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0435 \u043e\u0442 1. <pre><code>show fcns database\n</code></pre> \u041f\u0440\u043e\u043f\u0438\u0441\u0430\u043d \u043b\u0438 pwwn. \u041f\u0443\u0441\u0442\u043e, \u0435\u0441\u043b\u0438 \u043d\u0435 \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u043d. <pre><code>show zone member pwwn [pwwn]\n</code></pre> \u0413\u0434\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e <pre><code>MDS# show fcns database fcid 0x693c00 detail vsan 1\n------------------------\nVSAN:1     FCID:0x693c00\n------------------------\nport-wwn (vendor)           :21:00:00:24:ff:33:55:ee\nnode-wwn                    :20:00:00:24:ff:33:55:ee\nclass                       :3\nnode-ip-addr                :0.0.0.0\nipa                         :ff ff ff ff ff ff ff ff\nfc4-types:fc4_features      :scsi-fcp:init\nsymbolic-port-name          :\nsymbolic-node-name          :QLE2562 FW:v5 DVR:v1\nport-type                   :N\nport-ip-addr                :0.0.0.0\nfabric-port-wwn             :20:16:00:05:73:ee:11:55\nhard-addr                   :0x000000\npermanent-port-wwn (vendor) :21:00:00:24:ff:33:55:ee\nconnected interface         :fc1/22\nswitch name (IP address)    :MDS (10.9.8.7)\n\nTotal number of entries = 1\n</code></pre></p>"},{"location":"network/mds/#smart-zoning","title":"smart zoning","text":"<p>\u0420\u0435\u0448\u0435\u0448\u0438\u0435 \u043e\u0442 cisco smart zoning \u043f\u043e\u0434\u0440\u0430\u0437\u0443\u043c\u0435\u0432\u0430\u0435\u0442 \u043e\u0434\u043d\u0443 \u0437\u043e\u043d\u0443, \u043d\u043e \u0441 \u0444\u0443\u043d\u043a\u0438\u043e\u043d\u0430\u043b\u043e\u043c Single Initiator and Single Targets.</p> <p>\u041c\u0438\u0433\u0440\u0430\u0446\u0438\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043f\u0440\u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 interoperability \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u0444\u0430\u0431\u0440\u0438\u043a\u0438. \u041a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b Brocade \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b, \u043b\u0438\u0431\u043e \u043f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043d\u044b \u0432 \u0440\u0435\u0436\u0438\u043c access gateway. <pre><code>vsan database\n  no vsan 1 interop\n</code></pre> \u0415\u0441\u043b\u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043e, \u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e <pre><code>MDS# show vsan 1\nvsan 1 information\n         name:VSAN0001  state:active\n         interoperability mode:default\n         loadbalancing:src-id/dst-id/oxid\n         operational state:up\n</code></pre></p> <p>\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0432\u043d\u0435\u0441\u0435\u043d\u0438\u044f pwwn \u0438\u043c\u0435\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u043e\u0432\u044b\u0435 \u0442\u0430\u0440\u0433\u0435\u0442\u044b \u0438 \u0438\u043d\u0438\u0446\u0438\u0430\u0442\u043e\u0440\u044b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0432 \u043a\u043e\u043d\u0435\u0446. \u0412 \u0442\u0430\u0441\u043a\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043c\u043e\u0434\u0443\u043b\u044c zone_zoneset <pre><code>---\n- name: configure smart-zoning\n  hosts:\n    - mdsA\n  gather_facts: false\n\n  tasks:\n\n  - name: task configure zoneset on fabric_a\n    cisco.nxos.nxos_zone_zoneset:\n      zone_zoneset_details:\n        - mode: basic\n          smart_zoning: true\n          vsan: 1\n          zone:\n          - members:\n            - devtype: initiator\n              pwwn: 21:00:00:24:ff:50:82:79\n            - devtype: initiator\n              pwwn: 21:00:00:24:ff:50:81:b1\n            - devtype: initiator\n              pwwn: 21:00:00:24:ff:32:cf:e8\n            - devtype: initiator\n              pwwn: 21:00:00:24:ff:49:b9:6e\n            - devtype: target\n              pwwn: 29:00:74:3a:65:ea:50:8f\n            - devtype: target\n              pwwn: 21:00:74:3a:65:ea:50:8f\n            name: smartzoneA\n          zoneset:\n          - action: activate\n            members:\n            - name: smartzoneA\n            name: smartsetA\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0430. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 Interop \u0432 \u0442.\u0447. <pre><code>MDS# show zone status\nVSAN: 1 default-zone: permit distribute: active only Interop: default\n    mode: basic merge-control: allow\n    session: none\n    hard-zoning: enabled broadcast: unsupported\n    smart-zoning: enabled\n    rscn-format: fabric-address\n    activation overwrite control: disabled\nDefault zone:\n    qos: none broadcast: unsupported ronly: unsupported\nFull Zoning Database :\n    DB size: 106104 bytes\n    Zonesets:2  Zones:1066 Aliases: 78\nActive Zoning Database :\n    DB size: 1076 bytes\n    Name: smartsetA  Zonesets:1  Zones:2\nCurrent Total Zone DB Usage: 107180 / 2097152 bytes (5 % used)\nPending (Session) DB size:\n    Full DB Copy size: n/a\n    Active DB Copy size: n/a\nSFC size: 107180 / 2097152 bytes (5 % used)\nStatus: Activation completed at 23:36:57 MSK May 24 2021\n</code></pre> \u041f\u0440\u043e\u0441\u0442\u043e \u0438 \u043f\u043e\u043d\u044f\u0442\u043d\u043e \u0441\u0442\u0430\u043b\u043e <pre><code>MDS# show zoneset active\nzoneset name smartsetA vsan 1\n  zone name smartzoneA vsan 1\n  * fcid 0x101b00 [pwwn 21:00:00:24:ff:50:82:79]  init\n  * fcid 0x100e00 [pwwn 21:00:00:24:ff:50:81:b1]  init\n  * fcid 0x100c00 [pwwn 21:00:00:24:ff:32:cf:e8]  init\n  * fcid 0x100d00 [pwwn 21:00:00:24:ff:49:b9:6e]  init\n  * fcid 0x691500 [pwwn 29:00:74:3a:65:ea:50:8f]  target\n  * fcid 0x691800 [pwwn 21:00:74:3a:65:ea:50:8f]  target\n</code></pre></p>"},{"location":"network/mds/#_3","title":"\u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b","text":"<p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u043a\u0440\u0430\u0442\u043a\u043e <pre><code>show int bri\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0430 \u043d\u0430 \u043f\u0440\u0435\u0434\u043c\u0435\u0442 \u043e\u0448\u0438\u0431\u043e\u043a (errors), \u043a\u043e\u0433\u0434\u0430 \u0441\u043a\u043e\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043e \u043d\u0430\u0434\u043e \u043c\u0435\u043d\u044f\u0442\u044c \u0442\u0440\u0430\u043d\u0441\u0438\u0432\u0435\u0440. \u0418\u0437-\u0437\u0430 \u0431\u0438\u0442\u043e\u0432\u044b\u0445 \u043e\u0448\u0438\u0431\u043e\u043a \u043f\u043e\u0440\u0442 \u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u0438 \u0432 \u0441\u0442\u0430\u0442\u0443\u0441\u0435 \u0431\u0443\u0434\u0435\u0442 <code>errdisabled</code> <pre><code>show int fc1/1\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u0430\u043a\u043e\u0439 \u0442\u0440\u0430\u043d\u0441\u0438\u0432\u0435\u0440 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d. \u0422.\u043a. \u043e\u043d\u0438 \u043f\u0435\u0440\u0435\u0448\u0438\u0432\u0430\u044e\u0442\u0441\u044f, \u0442\u043e \u043d\u0435 \u0444\u0430\u043a\u0442 \u0447\u0442\u043e \u044d\u0442\u043e \u043f\u043e\u043b\u0435\u0437\u043d\u043e. <pre><code>show port internal info interface fc1/1\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u043d\u0435\u0445\u0432\u0430\u0442\u043a\u0435 rxbbcredits \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043e\u0448\u0438\u0431\u043a\u0430\u0445. \u042d\u0442\u0430 \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0432 MDS 9148 Slow Drain Counters and Commands <pre><code>show logging onboard error-stats\n</code></pre> \u0412 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u043d\u0435\u0445\u0432\u0430\u0442\u043a\u0430 \u0431\u0443\u0444\u0435\u0440\u043e\u0432 \u044d\u0442\u043e FCP_CNTR_RX_WT_AVG_B2B_ZERO</p> <p>This counter increments when the remaining Rx B2B value is at zero for 100ms or more. This typically indicates the switch is withholding R_RDYs (B2B credits) from the attached device due to upstream congestion (congestion away from this port).</p>"},{"location":"network/mds/#snmp-monitoring","title":"snmp monitoring","text":"<p>Appendix D: Cisco MDS 9000 Family Slow-Drain\u2013Specific SNMP MIBs</p> SNMP Object Description fcIfTxWaitCount (1.3.6.1.4.1.9.9.289.1.2.1.1.15) TxWait counter fcHCIfBBCreditTransistionFromZero (1.3.6.1.4.1.9.9.289.1.2.1.1.40) Tx B2B credit transition to zero. Tx B2B credit transition to zero indicates that the port on the other end of the link is not returning R_RDY. fcIfBBCreditTransistionToZero (1.3.6.1.4.1.9.9.289.1.2.1.1.41) Rx B2B credit transition to zero. Rx B2B credit transition to zero indicates that the port is not able to return R_RDY to the device on the other end of the link. This may happen if frames cannot be switched to another port on the same switch fast enough. fcIfTxWtAvgBBCreditTransitionToZero (1.3.6.1.4.1.9.9.289.1.2.1.1.38) Credit unavailability at 100 ms fcIfCreditLoss (1.3.6.1.4.1.9.9.289.1.2.1.1.37) Credit Loss (recovery) fcIfTimeOutDiscards (1.3.6.1.4.1.9.9.289.1.2.1.1.35) Timeout discards fcIfOutDiscard (1.3.6.1.4.1.9.9.289.1.2.1.1.36) Total number of frames discarded in egress direction, which includes timeout discards fcIfLinkResetIns (1.3.6.1.4.1.9.9.289.1.2.1.1.9) Number of link reset protocol errors received by the FC port from the attached FC port fcIfLinkResetOuts (1.3.6.1.4.1.9.9.289.1.2.1.1.10) Number of link reset protocol errors issued by the FC port to the attached FC port. fcIfSlowportCount (1.3.6.1.4.1.9.9.289.1.2.1.1.44) Duration for which Tx B2B credits were unavailable on a port fcIfSlowportOperDelay (1.3.6.1.4.1.9.9.289.1.2.1.1.45) Number of times for which Tx B2B credits were unavailable on a port for a duration longer than the configured admin-delay value in slowport-monitor <p>fcHCIfBBCreditTransistionFromZero \u0438 fcIfBBCreditTransistionToZero \u044d\u0442\u043e \u0447\u0442\u043e-\u0442\u043e \u0432\u0440\u043e\u0434\u0435 flow-control Check Transitions to Zero counters \u043b\u0438\u0441\u0442 164</p> <p>\u0412 \u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u043e\u0440\u0442 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u0421\u0425\u0414 \u0438 \u0442\u0443\u0442 \u0440\u043e\u0441\u0442 <code>Rx B2B credit transition to zero</code>. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435. <pre><code>MDS# show interface fc1/1 counters | in transitions\n     852 Transmit B2B credit transitions to zero\n     308015715 Receive B2B credit transitions to zero\n</code></pre> \u042d\u0442\u043e \u0430\u043f\u043b\u0438\u043d\u043a. \u0422\u0443\u0442 \u0440\u043e\u0441\u0442 <code>Tx B2B credit transition to zero</code>. \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435. <pre><code>MDS# show interface fc1/48 counters | in transitions\n     50532726 Transmit B2B credit transitions to zero\n     845047928 Receive B2B credit transitions to zero\n</code></pre></p>"},{"location":"network/mds/#port-channel","title":"port channel","text":"<p>Configuring Port Channels</p> <p>\u0412 \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u043e\u0434\u0435\u043b\u0438 \u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e forwarding engines (Table 4. Ports to Forwarding Engines Mapping) \u0438 \u0443 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u0432\u043e\u0439 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d \u043f\u043e\u0440\u0442\u043e\u0432. \u0412\u044b\u0431\u043e\u0440 \u043f\u043e\u0440\u0442\u043e\u0432 \u0446\u0435\u043b\u0438\u043a\u043e\u043c \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043c\u043e\u0434\u0435\u043b\u0438. \u0414\u043b\u044f 9148 \u0432\u044b\u0431\u0440\u0430\u043b \u043f\u043e\u0440\u0442\u044b 23,35</p> <pre><code>mds(config)# int fc1/23\nmds(config-if)# channel-group 1 force\nfc1/23 added to port-channel 1 and disabled\nplease do the same operation on the switch at the other end of the port-channel,\nthen do \"no shutdown\" at both ends to bring it up\nmds(config)# int fc1/35\nmds(config-if)#channel-group 1 force\n\nmds# sh port-channel database\nport-channel1\n    Administrative channel mode is on\n    Operational channel mode is on\n    Last membership update succeeded\n    2 ports in total, 0 ports up\n    Ports:   fc1/35   [down]\n             fc1/23   [down]\n\nmds# sh port-channel summary\n------------------------------------------------------------------------------\nInterface                 Total Ports        Oper Ports        First Oper Port\n------------------------------------------------------------------------------\nport-channel 1                 2                 0                  --\n</code></pre> <p>\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0438 \u043e\u0442 \u0446\u0438\u0441\u043a\u0438. Consequently, most of the best practices followed for the F and TF port channels should be followed to ensure that TCAM is utilized as efficiently as possible for the following purposes:</p> <ul> <li>Distribute port-channel member interfaces into different forwarding engines, especially on fabric switches.</li> <li>Distribute member interfaces into different linecards on director-class switches.</li> <li>Distribute member interfaces into forwarding engines with lower TCAM zoning region usage.</li> <li>Use single-initiator zones, single-target zones, or Smart Zoning.</li> </ul> <p>\u042d\u0442\u043e \u043f\u0440\u043e brocade. To avoid congestion ISL Trunking can be used. With ISL Trunking several ISLs are grouped into a logical ISL. When using Brocade switches, a license has to be installed on all switches, that use ISL Trunking. An ISL Trunk is automatically formed, when two or more (up to 8) adjacent ports are used to connect two switches. The adjacent ports must belong to the same port group. That\u2019s the cause why you can\u2019t add more than 8 ports to an ISL Trunk. Instead of using an exchange-based distribution, a frame-based distribution is used for ISL Trunks. This method is more finer and allows a better distribution. The Ports, that belongs to an ISL Trunk, are known as trunking members. One port of the trunking members is the trunking master. This port has a special function, because it assigns traffic to the other trunking members. Even if an ISL Trunk is an logical ISL, it preserves \u201cin-order delivery\u201d of frames.</p>"},{"location":"network/mds/#fspf","title":"FSPF","text":"<p>FSPF: \u201cFabric shortest path first\u201d is a routing protocol used in Fibre Channel fabrics. It\u2019s used to establish routes accross the fabric and to re-calculate this routes, if a topology change occurs (e.g. link failures).</p> <p>ISL: An ISL is an inter-switch link. It\u2019s a connection between two Fibre Channel switches.</p> <p>\u041a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u0440\u0442\u0430. \u041d\u0438\u0436\u0435 cost is 125 \u0434\u043b\u044f 8Gb \u043f\u043e\u0440\u0442\u0430, \u0430 cost is 62 \u0434\u043b\u044f port-channel \u0438\u0437 \u0434\u0432\u0443\u0445 \u043f\u043e\u0440\u0442\u043e\u0432 8Gb</p> <pre><code>mds# show fspf interface\nFSPF interface fc1/48 in VSAN 1\nFSPF routing administrative state is active\nInterface cost is 125\nTimer intervals configured, Hello 20 s, Dead 80 s, Retransmit 5 s\nFSPF State is FULL\nNeighbor Domain Id is 0x01(1)\nNeighbor Interface is Port 23  (0x00000017 )\n\nStatistics counters :\n   Number of packets received : LSU  10385  LSA  3464  Hello 311486  Error packets 0\n   Number of packets transmitted : LSU  3464  LSA  10385  Hello 311492  Retransmitted LSU  0\n  Number of times inactivity timer expired for the interface = 0\n\nFSPF interface port-channel1 in VSAN 1\nFSPF routing administrative state is active\nInterface cost is 62\nTimer intervals configured, Hello 20 s, Dead 80 s, Retransmit 5 s\nFSPF State is FULL\nNeighbor Domain Id is 0x69(105)\nNeighbor Interface is port-channel1 (0x00040000 )\n\nStatistics counters :\n   Number of packets received : LSU  3  LSA  3  Hello 3  Error packets 0\n   Number of packets transmitted : LSU  3  LSA  3  Hello 3  Retransmitted LSU  0\n  Number of times inactivity timer expired for the interface = 0\n</code></pre>"},{"location":"network/nexus3k/","title":"Switch cisco nexus3k","text":"<p>\u0414\u0430\u043b\u0435\u0435 \u043f\u043e cisco nexus 3000 \u043c\u043e\u0434\u0435\u043b\u0438</p>"},{"location":"network/nexus3k/#_1","title":"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u041f\u041e","text":"<p>\u0421\u0441\u044b\u043b\u043a\u0438:</p> <ul> <li>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u041f\u041e. \u042d\u0442\u043e 7.0(3)I7(7) \u0441\u0435\u0439\u0447\u0430\u0441.</li> <li>Cisco Nexus 3000 Series NX-OS Software Upgrade and Downgrade Guide, Release 7.x</li> </ul> <p>If you have a Cisco Nexus 3000 release prior to Release 7.0(3)I2(1), upgrade to Cisco Nexus 3000 Release 6.0.2.U6(3) first.</p> <p>\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c 6.0.2.U6(3), \u043a\u043e\u0433\u0434\u0430 \u0441\u043e\u0444\u0442 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0441\u0442\u0430\u0440\u044b\u0439 <pre><code>witch# show file n3000-uk9-kickstart.6.0.2.U6.3a.bin md5\nf0b67d113c1d9adafc16349e7ae36cd4\nswitch# show file n3000-uk9.6.0.2.U6.3a.bin md5\ncde4522663172733c15a15855d90d303\nswitch# install all system n3000-uk9.6.0.2.U6.3.bin kickstart n3000-uk9-kickstart.6.0.2.U6.3.bin\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 <pre><code>switch# show file bootflash:nxos.7.0.3.I7.7.bin md5sum\na9d40fbfaf43c214c3d97cb290788d06\nswitch# show install all impact nxos bootflash:nxos.7.0.3.I7.7.bin\n</code></pre> \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u043e\u0439 \u0432\u0435\u0440\u0441\u0438\u0438 \u0432 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0435 Guidelines for Upgrading in Non-Fast Reload Scenarios <pre><code>switch# install all nxos bootflash:nxos.7.0.3.I7.7.bin\n</code></pre></p> <p>\u041a\u043e\u0433\u0434\u0430 \u043c\u0435\u0441\u0442\u0430 \u043d\u0435\u0442, \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 image 7 \u0432\u0435\u0440\u0441\u0438\u0438 \u043d\u0435\u043b\u044c\u0437\u044f <pre><code>Switch is booted with 'nxos.7.0.3.I4.7.bin'. Overwriting/deleting this image is not allowed\n</code></pre> \u0415\u0441\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 compact \u0434\u043b\u044f \u0442\u0430\u043a\u043e\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u044f. <pre><code>switch# install all nxos bootflash:nxos.7.0.3.I4.7.bin compact\nInstaller will perform compatibility check first. Please wait.\nCompacting currently loaded image bootflash:/nxos.7.0.3.I4.7.bin\n..................................................\nCompact bootflash:/nxos.7.0.3.I4.7.bin done\n</code></pre> \u0414\u043e <pre><code>Usage for bootflash://\n  798937088 bytes used\n  849686528 bytes free\n 1648623616 bytes total\n</code></pre> \u041f\u043e\u0441\u043b\u0435 <pre><code>Usage for bootflash://\n  514617344 bytes used\n 1134006272 bytes free\n 1648623616 bytes total\n</code></pre></p> <p>\u0418\u043d\u043e\u0433\u0434\u0430 \u043f\u0440\u043e\u0449\u0435 \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c usb \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u043e\u043c\u043f\u0430\u043a\u0442\u043d\u044b\u0439 \u0438\u043c\u0430\u0434\u0436 \u0442\u0430\u043c <pre><code>install all nxos usb1:nxos.7.0.3.I4.7.bin compact\n</code></pre> \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0432 \u0438\u0442\u043e\u0433\u0435 \u0441\u043e\u0444\u0442 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e 400\u0433\u0431 \u0438 \u0441\u043f\u043e\u043a\u043e\u0439\u043d\u043e \u0441\u043a\u043e\u043f\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043d\u0430 bootflash <pre><code>copy usb1:nxos.7.0.3.I4.7.bin bootflash:compactnxos.7.0.3.I4.7.bin\n</code></pre> \u041a\u0430\u043a \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0441\u044f \u0441 \u0444\u043b\u0435\u0448\u043a\u0438 \u043f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043f\u0438\u0442\u0430\u043d\u0438\u044f <pre><code>Press  ctrl L to go to loader prompt in 2 secs\n\nUser break into bootloader\n\nloader&gt; boot usb1:nxos.7.0.3.I7.7.bin\n</code></pre></p>"},{"location":"network/nexus3k/#nx-os","title":"\u0440\u0430\u0431\u043e\u0442\u0430 \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438 nx-os \u043d\u0430 \u0444\u043b\u0435\u0448\u043a\u0435","text":"<p>\u0412\u0437\u044f\u0442\u043e \u0437\u0430 \u043e\u0441\u043d\u043e\u0432\u0443 \u044d\u0442\u0430 \u0437\u0430\u043c\u0435\u0442\u043a\u0430 \u0433\u0434\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f winscp \u0434\u043b\u044f \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u043e\u0432 \u043d\u0430 nexus. \u0412 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 winscp Enviroment\\Directories \u0443\u043a\u0430\u0437\u0430\u0442\u044c Remote directory <code>/bootflash</code>, \u0432 Enviroment\\SCP/Shell \u0443\u043a\u0430\u0437\u0430\u0442\u044c Shell <code>run bash</code>. \u042d\u0442\u0438 \u043f\u0443\u043d\u043a\u0442\u044b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043f\u043e SCP \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 \u043a \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u043c\u0443 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0443.</p> <p>\u041d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441\u044b <pre><code>feature bash-shell\nfeature s\u0441p-server\n</code></pre></p> <p>\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0444\u0430\u0439\u043b , \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c MD5 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 cisco (\u043a\u043b\u0438\u043a \u043d\u0430 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430) <pre><code>a9d40fbfaf43c214c3d97cb290788d06 nxos.7.0.3.I7.7.bin\n</code></pre></p> <p>\u0412 powershell (windows) \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c md5 <pre><code>Get-FileHash C:\\Soft\\nx-os\\nxos.7.0.3.I7.7.bin -Algorithm MD5 | Format-List\nAlgorithm : MD5\nHash      : A9D40FBFAF43C214C3D97CB290788D06\nPath      : C:\\Soft\\nx-os\\nxos.7.0.3.I7.7.bin\n</code></pre> \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u0430 \u043d\u0430 \u0444\u043b\u0435\u0448\u043a\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 <code>dir</code> \u0438 \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0430\u0440\u044b\u0435 \u0432\u0435\u0440\u0441\u0438\u0438, \u043e\u0441\u0442\u0430\u0432\u0438\u0432 \u0442\u0435\u043a\u0443\u0449\u0443\u044e. \u041f\u043e\u0441\u043b\u0435 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f nx-os \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c md5 <pre><code>switch# show file bootflash:nxos.7.0.3.I7.7.bin md5sum\na9d40fbfaf43c214c3d97cb290788d06\n</code></pre></p>"},{"location":"network/nexus3k/#703i79","title":"\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e 7.0(3)I7(9)","text":"<p>Cisco Nexus 3000 Series NX-OS Release Notes, Release 7.0(3)I7(9)</p> <p>MD5 <pre><code>d31d5b556cc4d92f2ff2d83b5df7b943  nxos.7.0.3.I7.9.bin\n</code></pre></p> <p>\u0412 RelNotes \u0441\u0440\u0430\u0437\u0443 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c compact image. \u0415\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043d\u0430 \u043d\u0435\u043a\u0441\u0443\u0441\u0435 <pre><code>switch# install all nxos usb1:nxos.7.0.3.I7.9.bin compact\nInstaller will perform compatibility check first. Please wait.\nCompacting usb1:/nxos.7.0.3.I7.9.bin\n...................................................\nCompact usb1:/nxos.7.0.3.I7.9.bin done\nswitch# move usb1:nxos.7.0.3.I7.9.bin usb1:cnxos.7.0.3.I7.9.bin\nswitch# copy usb1:cnxos.7.0.3.I7.9.bin bootflash:\nCopy progress 100% 473665KB                                                     \nCopy complete, now saving to disk (please wait)...                              \nCopy complete.\n</code></pre></p> <p>\u0420\u0435\u0437\u0435\u0440\u0432\u043d\u0430\u044f \u043a\u043e\u043f\u0438\u044f \u0438 \u0441\u0431\u0440\u043e\u0441 <pre><code>copy running-config bootflash:bck.cfg\nCopy complete, now saving to disk (please wait)...                              \nCopy complete.                                                                  \nS0017_fabA# write erase                                                         \nWarning: This command will erase the startup-configuration.                     \nDo you wish to proceed anyway? (y/n)  [n] y                                     \nswitch# reload\n\nwrite erase\n</code></pre></p> <p>Change the switching-mode from cut-through to store-and-forward and then reload the switch: <pre><code>switch#show switching-mode\nConfigured switching mode: Cut through\n\nModule Number                   Operational Mode\n     1                          Cut-Through\nswitch# configure terminal\nswitch(config)# switching-mode store-forward\n</code></pre></p> <p>\u0414\u043b\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0440\u0435\u0436\u0438\u043c\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u043e\u0440\u0442\u043e\u0432 \u0442\u043e\u0436\u0435 \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u0441\u044f \u0441\u0431\u0440\u043e\u0441 \u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u0412\u043e\u0442 \u043a\u0443\u0441\u043e\u043a \u0438\u0437 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438.</p> <pre><code>switch# configure terminal\nswitch(config)# copy running-config bootflash:my-config.cfg\nswitch(config)# write erase\nswitch(config)# reload\nWARNING: This command will reboot the system\nDo you want to continue? (y/n) [n] y\nswitch(config)# hardware profile portmode 48x10g+4x40g\nWarning: This command will take effect only after saving the configuration and reload!\nPort configurations could get lost when port mode is changed!\nswitch(config)# copy running-config startup-config\nswitch(config)# reload\nWARNING: This command will reboot the system\nDo you want to continue? (y/n) [n] y\n</code></pre> <p>The following limitations are applicable when you upgrade from Releases 7.0(3)I7(2) or later to the NX-OS Release 7.0(3)I7(9): You must run the setup script after you upgrade to Cisco NX-OS Release 7.0(3)I7(9).</p> <p>\u041a\u0430\u043a \u0432\u0438\u0434\u043d\u043e \u0438\u0437 \u0441\u0442\u0440\u043e\u043a \u0432\u044b\u0448\u0435, \u043f\u043e\u0441\u043b\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e \u043d\u0430\u0434\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c setup \u0441\u043a\u0440\u0438\u043f\u0442. \u041e\u043d \u0441\u043e\u0437\u0434\u0430\u0441\u0442 \u043a\u0430\u043a\u0443\u044e-\u0442\u043e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0438 \u0432 \u0438\u0442\u043e\u0433\u0435 \u0437\u0430\u043f\u0438\u0448\u0435\u0442 \u0435\u0435 \u0432 startup. \u0415\u0441\u043b\u0438 \u044d\u0442\u043e\u0433\u043e \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0438 \u0432\u044b\u0431\u0440\u0430\u0442\u044c skip, \u0442\u043e \u0438\u0437-\u0437\u0430 \"\u0444\u0438\u0447\u0438\" \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u043f\u043e\u0441\u043b\u0435 <code>hardware profile portmode 48x10g+4x40g</code> \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f</p> <pre><code>Abort Power On Auto Provisioning [yes - continue with normal setup, skip - bypad\nyes\nDisabling POAP.......Disabling POAP\n\n\n\n         ---- System Admin Account Setup ----\n\n\nDo you want to enforce secure password standard (yes/no): no\n\n  Enter the password for \"admin\":\n  Confirm the password for \"admin\":\n\n         ---- Basic System Configuration Dialog ----\n\nThis setup utility will guide you through the basic configuration of\nthe system. Setup configures only enough connectivity for management\nof the system.\n\nPlease register Cisco Nexus 3000 Family devices promptly with your\nsupplier. Failure to register may affect response times for initial\nservice calls. Nexus devices must be registered to receive entitled\nsupport services.\n\nPress Enter at anytime to skip a dialog. Use ctrl-c at anytime\nto skip the remaining dialogs.\n\nWould you like to enter the basic configuration dialog (yes/no):\n\n....\n\n  Enable the telnet service? (yes/no) [n]:\n\n  Enable the ssh service? (yes/no) [y]:\n\n    Type of ssh key you would like to generate (dsa/rsa) :\n\n  Configure the ntp server? (yes/no) [n]:\n\n  Configure default interface layer (L3/L2) [L2]:\n\n  Configure default switchport interface state (shut/noshut) [noshut]: shut\n\n  Configure CoPP System Policy Profile ( default / l2 / l3 ) [default]:\n\nThe following configuration will be applied:\n  switchname switch\n  no telnet server enable\n  system default switchport\n  system default switchport shutdown\n  policy-map type control-plane copp-system-policy ( default )\n\nWould you like to edit the configuration? (yes/no) [n]:\n</code></pre>"},{"location":"network/nexus3k/#snmp","title":"snmp","text":"<p>acl \u0441 \u0430\u0434\u0440\u0435\u0441\u043e\u043c nms. \u0412 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u0441\u044f \u0438\u043d\u0430\u0447\u0435. <pre><code>ip access-list snmp-acl\n  permit udp host [snmp-ip] any eq snmp\n</code></pre> community public <pre><code>snmp-server community public group network-operator\nsnmp-server community public use-ipv4acl snmp-acl\n</code></pre></p>"},{"location":"network/nexus3k/#password-recovery","title":"password recovery","text":"<p>\u041f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043f\u0438\u0442\u0430\u043d\u0438\u044f \u0436\u0430\u0442\u044c crtl ] \u0438\u043b\u0438 ctrl+c <pre><code>switch(boot)# config terminal\nswitch(boot)(config)# admin-password [newpass]\nswitch(boot)# load-nxos\n</code></pre> \u041b\u0438\u0431\u043e \u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0432 \u0434\u0435\u0444\u043e\u043b\u0442 \u0432 \u044d\u0442\u043e\u043c \u0436\u0435 \u0440\u0435\u0436\u0438\u043c\u0435, \u0435\u0441\u043b\u0438 \u0441\u043e\u0444\u0442 \u0441\u0442\u0430\u0440\u044b\u0439 <pre><code>write erase\nreload\n</code></pre></p>"},{"location":"network/nexus3k/#logging","title":"logging","text":"<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0439 \u043d\u043e \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439 <pre><code>logging level authpriv 6\nlogin on-success log\n</code></pre></p>"},{"location":"network/nexus3k/#ecmp","title":"ecmp","text":"<p>Configuring ECMP for Host Routes</p> <p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430, \u043e \u0447\u0435\u043c \u0431\u0443\u0434\u0435\u0442 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043e \u043f\u043e\u0441\u043b\u0435 \u043a\u0430\u0436\u0434\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0441 \u043d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0435\u043c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e. <pre><code>system urpf disable\nhardware profile unicast enable-host-ecmp\n</code></pre> \u0411\u044b\u043b\u043e \u0432 <code>show hardware profile status</code> <pre><code>Total LPM Entries = 8191.\nUsed Host Entries in LPM (Total) = 0.\nUsed Host Entries in Host (Total) = 139.\n</code></pre> \u0421\u0442\u0430\u043b\u043e <pre><code>Total LPM Entries = 16383.\nUsed Host Entries in LPM (Total) = 116.\nUsed Host Entries in Host (Total) = 0.\n</code></pre></p>"},{"location":"network/nexus3k/#mtu","title":"mtu","text":"<pre><code>policy-map type network-qos jumbo-nq\n  class type network-qos class-default\n    mtu 9216\nsystem qos\n  service-policy type network-qos jumbo-nq\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c <pre><code>switch# sh queuing interface eth1/2 | in MTU\nHW MTU of Ethernet1/2 : 9216 bytes\n</code></pre> \u041f\u043e sh int \u0431\u0443\u0434\u0435\u0442 \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e 1500 \u0438 \u043f\u043e cdp \u0431\u0443\u0434\u0443\u0442 \u0432\u0438\u0434\u0435\u0442\u044c 1500</p>"},{"location":"network/nexus3k/#_2","title":"\u0441\u0431\u0440\u043e\u0441 \u0432 \u0434\u0435\u0444\u043e\u043b\u0442","text":"<pre><code>write erase\n</code></pre>"},{"location":"network/nexus3k/#bfd","title":"bfd","text":"<p><pre><code>feature bfd\ninterface Ethernet1/1\n  no switchport\n  bfd interval 250 min_rx 250 multiplier 3\n  no ip redirects\n  ip address 10.0.0.1/30\n</code></pre> bfd \u0441\u0435\u0441\u0441\u0438\u044f \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043a\u043e\u0433\u0434\u0430 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u043e\u0442\u0432. \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0432 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0438</p>"},{"location":"network/nexus3k/#vlan","title":"vlan","text":"<p>\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u0444\u0438\u0447\u0430 <code>feature interface-vlan</code></p>"},{"location":"network/nexus3k/#bgp","title":"bgp","text":"<p><pre><code>router bgp 65000\n router-id 10.10.10.10\n  log-neighbor-changes\n  address-family ipv4 unicast\n    network 10.0.0.0/8\n  neighbor 10.0.0.2 remote-as 65001\n    bfd\n    address-family ipv4 unicast\n      route-map test-map out\n      next-hop-self\n      soft-reconfiguration inbound\n</code></pre> \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0441\u0440\u0430\u0437\u0443 \u043f\u043e \u0444\u0430\u043a\u0442\u0443 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f route-map</p>"},{"location":"network/nexus9k/","title":"Switch cisco nexus9k","text":"<p>\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e n9k \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0432 \u0441\u0445\u0435\u043c\u0430\u0445 Multi-site evpn. \u041f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u0444\u0430\u0431\u0440\u0438\u043a\u0430 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0442\u0430\u043a\u0438\u0445 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432 \u043a\u0430\u043a:</p> <ul> <li>Nexus Dashboard, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u0439 \u0432 \u0441\u0435\u0431\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u044b \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u043d\u0438\u0436\u0435</li> <li>DataCenter Network Manager (DCNM)</li> <li>Multi-Site Orcestrator (MSO)</li> </ul> <p>\u0412\u0435\u0431\u0438\u043d\u0430\u0440\u044b \u043d\u0430 \u0442\u0435\u043c\u0443 Cisco EVPN. \u041f\u0430\u0440\u043e\u043b\u044c \u0442\u0430\u043c \u0433\u0434\u0435 \u043f\u0440\u043e\u0441\u0438\u0442 <code>Engage2021</code>. \u041a\u0430\u043a\u0438\u0435-\u0442\u043e \u0441\u0441\u044b\u043b\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043d\u0435\u0440\u0430\u0431\u043e\u0447\u0438\u043c\u0438. \u0426\u041e\u0414: \u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u043e\u0449\u043d\u043e\u0441\u0442\u0438, \u0441\u0435\u0442\u044c \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435</p>"},{"location":"network/nexus9k/#_1","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b","text":"<ul> <li>Cisco Nexus 9000 Series NX-OS VXLAN Configuration Guide, Release 9.3(x)</li> <li>Cisco Nexus 9000 Series NX-OS Layer 2 Switching Configuration Guide, Release 9.3(x)</li> <li>VXLAN BGP EVPN  based Multi-Site Extended</li> <li>VXLAN EVPN Multi-Site Design and Deployment White Paper</li> </ul>"},{"location":"network/nexus9k/#dcnm","title":"DCNM","text":"<p>\u0410\u043f\u043b\u0430\u0435\u043d\u0441 \u0441 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0441\u0430\u0439\u0442\u0435 \u0432 OOBM \u0441\u0435\u0442\u044c. \u041f\u0440\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c tshoot \u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u043f\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438.</p> <p>Enable Bootstrap - Select this check box to enable the bootstrap feature. Bootstrap allows easy day-0 import and bring-up of new devices into an existing fabric. Bootstrap leverages the NX-OS POAP functionality.</p>"},{"location":"network/nexus9k/#storm-control","title":"storm-control","text":"<p>\u041d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 9.3.6 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0438\u043d\u0430\u0447\u0435. \u0411\u043e\u043b\u0435\u0435 \u043d\u0435 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b <code>fabric-tracking</code>. \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0441\u044f, \u043a\u043e\u0433\u0434\u0430 \u0441\u0443\u043c\u043c\u0430 \u0440\u0435\u0439\u0442\u0430 \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0431\u0440\u043e\u0430\u0434\u043a\u0430\u0441\u0442\u0430 \u043f\u043e \u0442\u0440\u0435\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430\u043c \u0441 <code>dci-tracking</code> \u0437\u0430 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b 3.9\u043c\u0441 \u043f\u0440\u0435\u0432\u044b\u0441\u0438\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0435\u0448\u0445\u043e\u043b\u0434.</p> <p>Cisco NX-OS Release 9.3(6) and later releases optimize rate granularity and accuracy. Bandwidth is calculated based on the accumulated DCI uplink bandwidth, and only interfaces tagged with DCI tracking are considered. (Prior releases also include fabric-tagged interfaces.) In addition, granularity is enhanced by supporting two digits after the decimal point. These enhancements apply to the Cisco Nexus 9300-EX, 9300-FX/FXP/FX2/FX3, and 9300-GX platform switches.</p>"},{"location":"network/nexus9k/#_2","title":"\u0422\u0430\u0439\u043c\u0435\u0440\u044b","text":"<p>\u0415\u0441\u0442\u044c \u0442\u0430\u0439\u043c\u0435\u0440 vp\u0441 <code>delay restore interface-vlan</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 <code>show vpc brief</code>. \u0415\u0441\u0442\u044c <code>Multi-Site delay-restore</code> \u0442\u0430\u0439\u043c\u0435\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u043b\u044f BGW \u0432 <code>show nve interface nve 1 detail</code> <pre><code>Multi-Site delay-restore time: 180 seconds\nMulti-Site delay-restore time left: 0 seconds\n</code></pre></p>"},{"location":"network/nexus9k/#hmm","title":"hmm","text":"<p>host mobility manager (hmm). ?</p> <p>Chapter: Configuring VXLAN BGP EVPN \u041f\u0440\u0438\u043c\u0435\u0440 \u0435\u0441\u0442\u044c \u0432 \u0431\u043e\u043b\u0435\u0435 \u0441\u0442\u0430\u0440\u043e\u0439 \u0432\u0435\u0440\u0441\u0438\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438: <pre><code>/*** Advertise host tenant routes as evpn type-5 routes for interoperability. ***/\nswitch(config)# route-map permitall permit 10 \nswitch(config)# router bgp 1001\nswitch(config-router)# vrf vni-491830\nswitch(config-router-vrf)# address-family ipv4 unicast\nswitch(config-router-vrf-af)# advertise l2vpn evpn\nswitch(config-router-vrf-af)# redistribute hmm route-map permitall\n</code></pre></p>"},{"location":"network/nexus9k/#bgw-backup","title":"bgw backup","text":"<p>\u0415\u0441\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f border gateway (BGW), \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u0435\u043b\u0430\u0442\u044c backup \u0447\u0435\u0440\u0435\u0437 vpc peer-link</p> <p>Ensure the system nve infra-vlans command is in place on Nexus 9000 platforms with CloudScale ASIC (Tahoe) like the Nexus 9300 Switches which end in EX, FX and FX2 to specify the VLAN can act as an uplink and properly forward the frames with VXLAN encapsulation over the vPC peer-link.\"</p> <p>\u0412 \u043c\u0430\u043d\u0443\u0430\u043b\u0435 \u044d\u0442\u043e \u043a\u0440\u0430\u0442\u043a\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u043e \u043a\u0430\u043a Configuring Peer Link as Transport in Case of Link Failure, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0438 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0432 Guidelines and Limitations for VXLAN EVPN Multi-Site</p>"},{"location":"network/nlb/","title":"NLB","text":"<p>\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u044b\u0445 \u041e\u0421 Microsoft'\u0430 \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u0440\u0435\u0448\u0435\u043d\u0438\u0435 NLB \u0441 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0430\u0446\u0438\u044f\u043c\u0438 \u043f\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432. \u041f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u043c\u043e\u0436\u043d\u043e \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 Configuring network infrastructure to support the NLB operation mode.</p>"},{"location":"network/nlb/#cisco-3750-c-ios-15","title":"Cisco 3750 c \u0432\u0435\u0440\u0441\u0438\u0435\u0439 IOS 15.\u0445","text":"<p>\u0412\u0440\u043e\u0434\u0435 \u0432\u0441\u0451 \u0447\u0442\u043e \u043d\u0430\u0434\u043e \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f. \u0420\u0430\u0431\u043e\u0442\u0443 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 igmp multicast \u043f\u043e\u0434 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439 \u043d\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u043b. \u0412 \u0440\u0435\u0436\u0438\u043c\u0435 multicast \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u043d\u043e \u0442\u0430\u043a \u043a\u0430\u043a \u043c\u0443\u043b\u044c\u0442\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 03bf \u043d\u0435 \u043f\u043e\u043f\u0430\u0434\u0430\u0435\u0442 \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d \u043c\u0443\u043b\u044c\u0442\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0445 \u0430\u0434\u0440\u0435\u0441\u043e\u0432 igmp snooping'\u0430, \u0444\u0440\u0435\u0439\u043c\u044b \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0441\u0441\u044b\u043b\u0430\u0442\u044c\u0441\u044f \u0432\u043e \u0432\u0441\u0435 \u043f\u043e\u0440\u0442\u044b \u0434\u0430\u043d\u043d\u043e\u0433\u043e vlan'\u0430, \u0433\u0434\u0435 \u043f\u043e\u0434\u043e\u0431\u043d\u044b\u0445 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0441\u0442\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u043e\u0439 \u043d\u0430 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0439 \u0441\u0435\u0442\u0438, \u043d\u0430 blade \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u0432 \u0441\u043e\u0441\u0442\u0430\u0432\u0435 \u0448\u0430\u0441\u0441\u0438, \u0433\u0434\u0435 \u043a\u0430\u043a\u0438\u0435-\u043b\u0438\u0431\u043e \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442.</p> <pre><code>cisco3750(config)#arp  10.0.0.1 0100.5e7f.0001 arpa\ncisco3750(config)#arp  10.0.0.2 03bf.0a00.0002 arpa\ncisco3750(config)#^Z\ncisco3750#sh ip arp\nProtocol  Address          Age (min)  Hardware Addr   Type   Interface\nInternet  10.0.0.1                -   0100.5e7f.0001  ARPA\nInternet  10.0.0.2                -   03bf.0a00.0002  ARPA\nInternet  10.0.0.10               -   6400.f154.1bea  ARPA   Vlan10\n\ncisco3750#sh run | in static\nmac address-table static 03bf.0a00.0002 vlan 10 interface GigabitEthernet1/0/9 GigabitEthernet1/0/10\n\ncisco3750#sh mac address-table static | in 0002\n 10    03bf.0a00.0002    STATIC      Gi1/0/9 Gi1/0/10\n</code></pre>"},{"location":"network/nlb/#cisco-4900m","title":"Cisco 4900M","text":"<p>\u0412\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 igmp multicast,\u043d\u043e L3 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043d\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0434\u0435\u043b\u0430\u0442\u044c igmp querier'\u043e\u043c. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u0441\u044f \u0440\u044f\u0434\u043e\u043c \u0441\u0442\u043e\u044f\u0449\u0438\u0439 L2 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 cpu \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u043f\u043e\u0440\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0430 pps \u0434\u043e \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430. \u0415\u0441\u0442\u044c \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f, \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u043c\u043e\u0436\u043d\u043e \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f, \u0438\u0437\u0443\u0447\u0438\u0432 \u0441\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u0441\u0430\u0439\u0442 cisco. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, muticast mode \u0442\u043e\u0436\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 cpu \u043d\u0430 4500 \u0448\u0430\u0441\u0441\u0438, \u0432 VSS \u043d\u0430 4500\u0425 \u043c\u043e\u0436\u0435\u0442 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c NLB \u0438\u0437-\u0437\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u0432 \u041f\u041e.</p>"},{"location":"network/nlb/#juniper-ex2200","title":"Juniper EX2200","text":"<p>\u041f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u043a\u043e\u0439 mac-\u0430\u0434\u0440\u0435\u0441 \u0432 \u043f\u0430\u0440\u0443 \u043f\u043e\u0440\u0442\u043e\u0432 \u0434\u043b\u044f multicast mode \u043d\u0435 \u0432\u044b\u0439\u0434\u0435\u0442, \u0442.\u043a. \u043f\u0440\u0438 \u0432\u0442\u043e\u0440\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 \u0443\u0434\u0430\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0432\u0430\u044f \u0438 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043c\u0443\u043b\u044c\u0442\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0439 mac \u0442\u043e\u0436\u0435 \u043d\u0435\u043b\u044c\u0437\u044f. Arp-\u0437\u0430\u043f\u0438\u0441\u044c \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 igmp multicast \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u043e\u0436\u043d\u043e, \u043d\u043e \u0435\u0441\u0442\u044c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0441\u0445\u0435\u043c\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u0432 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b. \u041e\u043f\u0438\u0441\u0430\u043d\u044b \u0432 KB \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0430\u043c.</p> <pre><code>{master:0}[edit ethernet-switching-options static vlan v32 mac 03:bf:0a:00:00:01]\nuser@ex2200# show\nnext-hop ge-0/0/11.0;\n\n{master:0}[edit ethernet-switching-options static vlan v32 mac 03:bf:0a:00:00:01]\nuser@ex2200# set next-hop ge-0/0/10.0\n\n{master:0}[edit ethernet-switching-options static vlan v32 mac 03:bf:0a:00:00:01]\nuser@ex2200# show\nnext-hop ge-0/0/10.0;\n\n{master:0}[edit ethernet-switching-options static vlan v32 mac 03:bf:0a:00:00:01]\nuser@ex2200# commit check\n[edit ethernet-switching-options static vlan v32]\n  'mac 03:bf:0a:00:00:01'\n    multicast mac address 03:bf:0a:00:00:01 is not allowed\nerror: configuration check-out failed\n\nuser@ex2200# show | compare\n[edit interfaces vlan]\n+    unit 32 {\n+        family inet {\n+            address 10.0.0.10/24 {\n+                arp 10.0.0.1 multicast-mac 01:00:5e:7f:00:01;\n+            }\n+        }\n+    }\n[edit vlans v32]\n+   l3-interface vlan.32;\n\n{master:0}[edit]\nuser@ex2200# commit check\nconfiguration check succeeds\n\nuser@ex2200&gt; show arp\nMAC Address       Address         Name                      Interface           Flags\n01:00:5e:7f:00:01 10.0.0.1        10.0.0.1                  vlan.32             permanent\n</code></pre>"},{"location":"network/nlb/#eltex-2324","title":"Eltex 2324","text":"<p>\u0412 4.0.11 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0438\u0439 nlb \u0432 \u0440\u0435\u0436\u0438\u043c\u0430\u0445 multicast \u0438 igmp multicast. \u0414\u0430\u043b\u0435\u0435 \u043d\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u043b. <pre><code>eltex2324#sh run int vlan1\ninterface vlan 1\n ip address 10.0.0.10 255.255.255.0\n no ip address dhcp\n!\neltex2324#conf t\neltex2324(config)#arp 10.0.0.1 01:00:5e:7f:00:01 vlan 1\nARP MAC address must be Unicast address.\neltex2324(config)#\n\neltex2324(config)#$mac address-table static 03bf.0a00.0001 vlan 1 interface te1/0/2\nPort:te1/0/2 , MAC:03:bf:0a:00:00:01 : Illegal MAC address.\n</code></pre></p>"},{"location":"network/nlb/#huawei-5720ei","title":"Huawei 5720EI","text":"<p>\u041c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0432 arp-\u0430\u0445 \u043b\u044e\u0431\u043e\u0439 \u043c\u0443\u043b\u044c\u0442\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0439 mac, \u043d\u0435\u043b\u044c\u0437\u044f \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 mac-\u0430\u0434\u0440\u0435\u0441\u043e\u0432. \u0412\u0441\u0451 \u043a\u0430\u043a \u0432 Juniper EX2200, \u0432 \u043e\u0431\u0449\u0435\u043c. <pre><code>[huawei5720]display arp | include 10.0.0.\nIP ADDRESS      MAC ADDRESS     EXPIRE(M) TYPE        INTERFACE   VPN-INSTANCE\n                                          VLAN/CEVLAN\n------------------------------------------------------------------------------\n10.0.0.10       4cf9-5d79-aa12            I -         Vlanif1\n10.0.0.1        03bf-0a00-0001            S--\n10.0.0.2        0100-5e7f-0002            S--\n------------------------------------------------------------------------------\n[huawei5720]mac-address static 03bf-0a00-0001 GigabitEthernet0/0/4 vlan 1\nError: Multicast or broadcast does not support the configuration of the MAC address.\n</code></pre></p>"},{"location":"network/poe/","title":"PoE","text":"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442 IEEE \u043c\u0430\u043a\u0441, \u0432\u0442 802.3af 15.4 802.3at 30 \u041a\u043b\u0430\u0441\u0441 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043c\u043e\u0449\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u0432\u044b\u0445\u043e\u0434\u0435 \u043f\u0438\u0442\u0430\u044e\u0449\u0435\u0433\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043c\u043e\u0449\u043d\u043e\u0441\u0442\u0438 \u0443 \u043f\u0438\u0442\u0430\u0435\u043c\u043e\u0433\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 0 \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 15,4 \u0412\u0442 0,44 - 12,95 \u0412\u0442 1 \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e 4,0 \u0412\u0442 0,44 - 3,84 \u0412\u0442 2 \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e 7,0 \u0412\u0442 3,84 - 6,49 \u0412\u0442 3 \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e 15,4 \u0412\u0442 6,49 - 12,95 \u0412\u0442 4 \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e 30 \u0412\u0442 12,95 - 25,5 \u0412\u0442 <p>\u0414\u043b\u044f \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438 \u0432 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u043f\u043e\u0434\u043e\u0439\u0434\u0435\u0442 802.3af, \u0430 \u0434\u043b\u044f \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0434\u0432\u0443\u0445\u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u043d\u044b\u0445 \u0442\u043e\u0447\u0435\u043a wifi \u0438 \u0434\u043b\u044f \u043f\u043e\u0432\u043e\u0440\u043e\u0442\u043d\u044b\u0445 \u043a\u0430\u043c\u0435\u0440 \u0432\u0438\u0434\u0435\u043e\u043d\u0430\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c 802.3at. \u041f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 PoE \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043a\u043b\u0430\u0441\u0441\u0430 2 , \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043a\u0430\u043c\u0435\u0440 \u0432\u0438\u0434\u0435\u043e\u043d\u0430\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u044f, \u043a \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0443, \u0438\u043c\u0435\u044e\u0449\u0435\u043c\u0443 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u044b\u0439 \u0431\u044e\u0434\u0436\u0435\u0442 \u043f\u043e \u043c\u043e\u0449\u043d\u043e\u0441\u0442\u0438 \u0434\u043b\u044f PoE 380\u0412\u0442 \u043d\u0430 48 \u043f\u043e\u0440\u0442\u043e\u0432, \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043c\u043e\u0449\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u0432\u044b\u0445\u043e\u0434\u0435 \u0434\u043e 7\u0412\u0442 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043d\u043e. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e 24 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430. \u0421\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0430\u0431\u043e\u043d\u0435\u043d\u0442\u0441\u043a\u0438\u0435 PoE \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 (ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u044b) \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u043e\u0431\u043c\u0435\u043d \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043e \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u043e\u0439 \u043c\u043e\u0449\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 LLDP: LLDP-MED Power Via MDI TLV \u0438 LLDP-MED Extended Power Via MDI TLV. </p>"},{"location":"network/qos_switch/","title":"Switch QoS","text":"<p>QoS \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445</p>"},{"location":"network/qos_switch/#flow-control","title":"flow-control","text":"<p>\u041d\u0443\u0436\u043d\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0442\u044c flow-control \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0442\u0443\u0442.</p>"},{"location":"network/qos_switch/#cos-dscp","title":"cos \u0438\u043b\u0438 dscp","text":"<p>Dscp \u0434\u043b\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0438\u0440\u0443\u0435\u043c\u044b\u0445 \u0441\u0435\u0442\u0435\u0439, \u0442.\u043a. \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0430\u0441\u0442\u044c\u044e \u043f\u043e\u043b\u044f TOS \u0432 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0435 ip-\u043f\u0430\u043a\u0435\u0442\u0430. \u0421os \u0434\u043b\u044f L2 \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0438, \u0442.\u043a. \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0430\u0441\u0442\u044c\u044e L2 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430. \u041e\u0447\u0435\u0440\u0435\u0434\u0438 \u0434\u043b\u044f cos \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442\u0441\u044f, \u043a\u043e\u0433\u0434\u0430 \u0438\u0437-\u0437\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u043d\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c ip-\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a. \u0422\u0430\u043a\u043e\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u0437-\u0437\u0430 mpls, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440. \u0427\u0430\u0449\u0435 \u0432\u0441\u0435\u0433\u043e \u0445\u0432\u0430\u0442\u0430\u0435\u0442 dscp, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0442\u0430\u043c, \u0433\u0434\u0435 \u044d\u0442\u043e \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f, \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f dscp based qos.</p>"},{"location":"network/qos_switch/#dscp","title":"dscp \u0442\u0430\u0431\u043b\u0438\u0446\u0430","text":"DSCP Class DSCP (bin) DSCP (hex) DSCP (dec) ToS (dec) ToS (hex) none 000000 0\u00d700 0 0 0\u00d700 cs1 001000 0\u00d708 8 32 0\u00d720 af11 001010 0\u00d70A 10 40 0\u00d728 af12 001100 0\u00d70C 12 48 0\u00d730 af13 001110 0\u00d70E 14 56 0\u00d738 cs2 010000 0\u00d710 16 64 0\u00d740 af21 010010 0\u00d712 18 72 0\u00d748 af22 010100 0\u00d714 20 80 0\u00d750 af23 010110 0\u00d716 22 88 0\u00d758 cs3 011000 0\u00d718 24 96 0\u00d760 af31 011010 0\u00d71A 26 104 0\u00d768 af32 011100 0\u00d71C 28 112 0\u00d770 af33 011110 0\u00d71E 30 120 0\u00d778 cs4 100000 0\u00d720 32 128 0\u00d780 af41 100010 0\u00d722 34 136 0\u00d788 af42 100100 0\u00d734 36 144 0\u00d790 af43 100110 0\u00d726 38 152 0\u00d798 cs5 101000 0\u00d728 40 160 0xA0 ef 101110 0\u00d72E 46 184 0xB8 cs6 110000 0\u00d730 48 192 0xC0 cs7 111000 0\u00d738 56 224 0xE0"},{"location":"network/qos_switch/#_1","title":"\u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0438 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u044b","text":"<p>\u0423 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 4 \u0438\u043b\u0438 8 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439. \u041f\u0440\u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u043e\u043c qos \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u043e\u0431\u044b\u0447\u043d\u043e 2:</p> <ul> <li>\u043d\u0435\u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043d\u0430\u044f, \u0433\u0434\u0435 95-100% \u0431\u0443\u0444\u0435\u0440\u043e\u0432</li> <li>\u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043d\u0430\u044f</li> </ul> <p>\u0415\u0441\u0442\u044c \u0434\u0432\u0430 \u0440\u0435\u0436\u0438\u043c\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u0448\u0435\u0434\u0443\u043b\u0435\u0440\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439:</p> <ul> <li>Strict-Priority. \u042d\u0442\u043e \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u0434\u043d\u0430 \u043e\u0447\u0435\u0440\u0435\u0434\u044c (8\u0430\u044f), \u043e\u0442\u043a\u0443\u0434\u0430 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0432 \u043f\u0435\u0440\u0432\u0443\u044e \u043e\u0447\u0435\u0440\u0435\u0434\u044c.</li> <li>Weighted Round Robin (WRR). \u0412\u0441\u0435 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0438, \u043e\u0442\u043a\u0443\u0434\u0430 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0432 \u0441\u043e\u043e\u0442\u0432. \u0441 \u0432\u0435\u0441\u0430\u043c\u0438, \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u044f\u0432\u043d\u043e \u0438\u043b\u0438 \u0432 \u043f\u0440\u043e\u043f\u043e\u0440\u0446\u0438\u044f\u0445 \u043e\u0442 bandwidth.</li> </ul> <p>\u041f\u0440\u0438 \u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u043d\u0435\u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043d\u043e\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438, \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u0440\u043e\u043f\u0430\u044e\u0442\u0441\u044f, \u0447\u0442\u043e \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430\u0445. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c qos - \u0432\u044b\u0434\u0435\u043b\u0438\u0442\u044c \u0447\u0430\u0441\u0442\u044c \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0435\u043c\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u0443\u044e \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430, \u0433\u0434\u0435 \u043f\u043e\u0442\u0435\u0440\u044c \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442. \u0418\u0437-\u0437\u0430 \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u044f \u0431\u0443\u0444\u0435\u0440\u043e\u0432 \u0432 \u043d\u0435\u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043d\u043e\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0442\u0435\u0440\u044c \u0442\u0430\u043c \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u0441\u044f.</p> <p>Juniper EX <pre><code>ex2200&gt; show class-of-service scheduler-map\nScheduler map: , Index: 2\n\n  Scheduler: , Forwarding class: best-effort, Index: 21\n    Transmit rate: 95 percent, Rate Limit: none, Buffer size: 95 percent, Buffer Limit: none, Priority: low\n    Excess Priority: low\n    Drop profiles:\n      Loss priority   Protocol    Index    Name\n      High            non-TCP         1          \n      High            TCP             1          \n\n  Scheduler: , Forwarding class: network-control, Index: 23\n    Transmit rate: 5 percent, Rate Limit: none, Buffer size: 5 percent, Buffer Limit: none, Priority: low\n    Excess Priority: low\n    Drop profiles:\n      Loss priority   Protocol    Index    Name\n      High            non-TCP         1          \n      High            TCP             1          \n</code></pre> Extreme 670 <pre><code>extreme # show qosprofile\n    QP1    Weight =   1     Max Buffer Percent = 100\n    QP8    Weight =   1     Max Buffer Percent = 100\nextreme # show qosscheduler\n\nConfigured Scheduler (global) : Strict-Priority\n</code></pre> Cisco 3750 \u043f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u043e\u043c mls qos \u0441 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u0414\u0435\u043b\u043e\u043b\u0442\u043e\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043d\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>c3750#sh mls qos queue-set 1\nQueueset: 1\nQueue     :       1       2       3       4\n----------------------------------------------\nbuffers   :      25      25      25      25\nthreshold1:     100     200     100     100\nthreshold2:     100     200     100     100\nreserved  :      50      50      50      50\nmaximum   :     400     400     400     400\n</code></pre></p>"},{"location":"network/qos_switch/#_2","title":"\u0433\u0434\u0435 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c","text":"<p>\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u043a\u043e\u0440\u043f\u0441\u0435\u0442\u044f\u0445 \u043d\u0443\u0436\u043d\u043e \u043d\u0430 \u0441\u0430\u043c\u0438\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445. \u0414\u043b\u044f \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u0432 \u044d\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u043f\u0440\u043e\u0432\u0438\u0436\u0435\u043d\u0438\u043d\u0433, \u0430 \u0434\u043b\u044f \u0432\u0438\u0434\u0435\u043e\u043a\u043e\u0434\u0435\u043a\u043e\u0432 - \u0440\u0443\u043a\u0430\u043c\u0438. \u041d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f qos, \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 <code>trust dscp</code>, \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f mapping \u0438 \u0440\u0430\u0437\u043c\u0435\u0440 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439. \u0414\u043b\u044f \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u0441\u0435\u0442\u0438 \u0432\u043e\u0442 \u0442\u0430\u043a\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438:</p> dscp dec dscp class desc 46 ef \u043c\u0435\u0434\u0438\u0430 (rtp) 24 cs3 \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f (sip,h323,unistim) 32 cs4 \u0432\u0438\u0434\u0435\u043e c \u043a\u043e\u0434\u0435\u043a\u043e\u0432(rtp) 34 af41 \u0432\u0438\u0434\u0435\u043e \u0441 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u0441\u043e\u0444\u0442\u043e\u0432\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430, \u043a\u043e\u0434\u0435\u043a\u0430 (rtp) 0 be \u0432\u0435\u0441\u044c \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u0440\u0430\u0444\u0438\u043a \u0431\u0435\u0437 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438. <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0436\u0434\u0443 \u0441\u0435\u0440\u0432\u0435\u0440\u044b\u043c\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u043c\u0438, \u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u0433\u0438\u043f\u0435\u0440\u0432\u0438\u0437\u043e\u0440\u044b vmware esxi \u0441 TEP'\u0430\u043c\u0438 NSX'\u0430.</p> dscp dec dscp class desc 8 cs1 vmotion 24 cs3 iscsi 32 cs4 vxlan,geneve 0 be \u0432\u0435\u0441\u044c \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u0440\u0430\u0444\u0438\u043a \u0431\u0435\u0437 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 <p>\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u0433\u0438\u043f\u0435\u0440\u0432\u0438\u0437\u043e\u0440\u0435 \u043c\u043e\u0436\u0435\u0442 \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f, \u043d\u043e \u043d\u0435\u0442. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u043d\u0430 leaf-\u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u043f\u043e acl. \u041f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u043f\u043e\u0440\u0442\u044b vmware. iscsi, vmotion - \u044d\u0442\u043e tcp, a \u0442\u0443\u043d\u043d\u0435\u043b\u0438 vxlan,geneve - udp. udp \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u0431\u043e\u043b\u0435\u0435 \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442. \u0412 \u0441\u043b\u0443\u0447\u0430\u0435 vmotion \u043c\u043e\u0436\u043d\u043e \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u0435\u0440\u044f\u0442\u044c, \u043f\u043e\u0434\u043e\u0436\u0434\u0430\u0442\u044c.</p>"},{"location":"network/qos_switch/#_3","title":"\u043a\u043b\u0430\u0441\u0438\u0444\u0438\u0440\u044b","text":"<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043d\u0435 \u0432\u0441\u0435 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u044e\u0442 dscp \u0432 ip-\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430\u0445 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 \u043f\u043e\u043b\u0435\u043c cos. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0443 juniper ex <pre><code>ex2200&gt; show class-of-service interface ge-0/0/1  \nPhysical interface: ge-0/0/1, Index: 130\nQueues supported: 8, Queues in use: 4\n  Scheduler map: , Index: 2\n  Congestion-notification: Disabled\n\n  Logical interface: ge-0/0/1.0, Index: 70\nObject                  Name                   Type                    Index\nClassifier              ieee8021p-default      ieee8021p                  11\n</code></pre> \u041d\u0430 \u0441\u0442\u0430\u0440\u044b\u0445 cisco \u0438 \u043f\u0440\u043e\u0447\u0438\u0445 c \u043f\u043e\u0445\u043e\u0436\u0438\u043c cli \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u0432\u044b\u0431\u043e\u0440 \u043c\u0435\u0436\u0434\u0443 802.1p \u0438 dscp \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439, \u043f\u043e\u0445\u043e\u0436\u0435\u0439 \u043d\u0430 <code>trust qos dscp</code>. \u0412 extreme \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c 802.1p, \u0438\u043d\u0430\u0447\u0435 \u044d\u0442\u043e\u0442 \u0432\u044b\u0431\u043e\u0440 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043d\u0435\u0435, \u0447\u0435\u043c dscp <pre><code>disable dot1p examination ports all\nenable diffserv examination ports all\n</code></pre> \u0412 eltex \u0432\u043e\u0432\u0441\u0435 \u0434\u0435\u043b\u0430\u0442\u044c \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0443\u0436\u043d\u043e <pre><code>eltex-2324#sh qos \nQos: Basic mode\nBasic trust: dscp\nCoS to DSCP mapping: disabled\nDSCP to CoS mapping: disabled\n</code></pre> \u0412 huawei \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c <code>trust dscp</code>, \u0430 \u043d\u0430 routed-\u0438\u043d\u0442\u0435\u0444\u0435\u0439\u0441\u0430\u0445 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0435\u0449\u0435 <code>undo qos phb marking enable</code>.</p>"},{"location":"network/qos_switch/#dscp-mapping-to-queue","title":"dscp mapping to queue","text":"<p>\u041d\u0435\u0442 \u043a\u0430\u043a\u043e\u0433\u043e-\u0442\u043e \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u0432 \u0441\u043e\u043e\u0442\u0432. \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u043c dscp \u043c\u0430\u043f\u044f\u0442\u0441\u044f \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u0438. \u0423 \u0432\u0441\u0435\u0445 \u0432\u0435\u043d\u0434\u043e\u0440\u043e\u0432 \u044d\u0442\u043e \u0440\u0430\u0437\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043d\u0430 \u0440\u0430\u0437\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u044f\u0445. \u0414\u0435\u043b\u0430\u0442\u044c \u043f\u043e \u0441\u0432\u043e\u0435\u043c\u0443 \u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u044e. \u041f\u0440\u0438\u043c\u0435\u0440:</p> \u041e\u0447\u0435\u0440\u0435\u0434\u044c dot1p DSCP 1 0 0 2 1 8 3 2 16 4 3 24 5 4 32 6 5 40 7 6 48 8 7 56 <p>extreme 670 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <pre><code># show diffserv examination\nCodePoint-&gt;QOSProfile mapping:\n        00-&gt;QP1 01-&gt;QP1 02-&gt;QP1 03-&gt;QP1 04-&gt;QP1 05-&gt;QP1 06-&gt;QP1 07-&gt;QP1\n        08*&gt;QP1 09*&gt;QP1 10*&gt;QP1 11*&gt;QP1 12*&gt;QP1 13*&gt;QP1 14*&gt;QP1 15*&gt;QP1\n        16*&gt;QP1 17*&gt;QP1 18*&gt;QP1 19*&gt;QP1 20*&gt;QP1 21*&gt;QP1 22*&gt;QP1 23*&gt;QP1\n        24*&gt;QP1 25*&gt;QP1 26*&gt;QP1 27*&gt;QP1 28*&gt;QP1 29*&gt;QP1 30*&gt;QP1 31*&gt;QP1\n        32*&gt;QP1 33*&gt;QP1 34*&gt;QP1 35*&gt;QP1 36*&gt;QP1 37*&gt;QP1 38*&gt;QP1 39*&gt;QP1\n        40*&gt;QP1 41*&gt;QP1 42*&gt;QP1 43*&gt;QP1 44*&gt;QP1 45*&gt;QP1 46*&gt;QP1 47*&gt;QP1\n        48*&gt;QP1 49*&gt;QP1 50*&gt;QP1 51*&gt;QP1 52*&gt;QP1 53*&gt;QP1 54*&gt;QP1 55*&gt;QP1\n        56-&gt;QP8 57-&gt;QP8 58-&gt;QP8 59-&gt;QP8 60-&gt;QP8 61-&gt;QP8 62-&gt;QP8 63-&gt;QP8\n</code></pre> \u0422.\u0435. \u043d\u0435\u0442 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043f\u0440\u0435\u0434\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u0430\u0432\u0438\u043b, \u0434\u0430 \u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0432\u0441\u0435\u0433\u043e \u0434\u0432\u0435. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0438, \u043e\u043f\u0438\u0441\u0430\u0442\u044c mapping. <pre><code>create qosprofile \"qp2\"\ncreate qosprofile \"qp3\"\ncreate qosprofile \"qp4\"\nconfigure diffserv examination code-point 24 qosprofile qp3\nconfigure diffserv examination code-point 32 qosprofile qp4\nconfigure diffserv examination code-point 8 qosprofile qp2\n</code></pre> eltex <pre><code>eltex-3324#sh qos map dscp-queue\nDscp-queue map:\n     d1 : d2 0  1  2  3  4  5  6  7  8  9\n     -------------------------------------\n      0 :   01 01 01 01 01 01 01 01 01 02\n      1 :   02 02 02 02 02 02 06 03 03 03\n      2 :   03 03 03 03 06 04 04 04 04 04\n      3 :   04 04 07 05 05 05 05 05 05 05\n      4 :   06 07 07 07 07 07 07 07 06 06\n      5 :   06 06 06 06 06 06 06 06 06 06\n      6 :   06 06 06 06\neltex-2324#sh qos map dscp-queue\nDscp-queue map:\n     d1 : d2 0  1  2  3  4  5  6  7  8  9\n     -------------------------------------\n      0 :   02 01 01 01 01 01 01 01 01 03\n      1 :   03 03 03 03 03 03 07 04 04 04\n      2 :   04 04 04 04 07 05 05 05 05 05\n      3 :   05 05 07 06 06 06 06 06 06 06\n      4 :   07 08 08 08 08 08 08 08 07 07\n      5 :   07 07 07 07 07 07 07 07 07 07\n      6 :   07 07 07 07\n</code></pre> Juniper EX <pre><code>ex2200&gt; show class-of-service classifier name dscp-default\nClassifier: dscp-default, Code point type: dscp, Index: 7\n  Code point         Forwarding class                    Loss priority\n  000000             best-effort                         low\n  000001             best-effort                         low\n  000010             best-effort                         low\n  000011             best-effort                         low\n  000100             best-effort                         low\n  000101             best-effort                         low\n  000110             best-effort                         low\n  000111             best-effort                         low\n  001000             best-effort                         low\n  001001             best-effort                         low\n  001010             best-effort                         low\n  001011             best-effort                         low\n  001100             best-effort                         low\n  001101             best-effort                         low\n  001110             best-effort                         low\n  001111             best-effort                         low\n  010000             best-effort                         low\n  010001             best-effort                         low\n  010010             best-effort                         low\n  010011             best-effort                         low\n  010100             best-effort                         low\n  010101             best-effort                         low\n  010110             best-effort                         low\n  010111             best-effort                         low\n  011000             best-effort                         low\n  011001             best-effort                         low\n  011010             best-effort                         low\n  011011             best-effort                         low\n  011100             best-effort                         low\n  011101             best-effort                         low\n  011110             best-effort                         low\n  011111             best-effort                         low\n  100000             best-effort                         low\n  100001             best-effort                         low\n  100010             best-effort                         low\n  100011             best-effort                         low\n  100100             best-effort                         low\n  100101             best-effort                         low\n  100110             best-effort                         low\n  100111             best-effort                         low\n  101000             best-effort                         low\n  101001             best-effort                         low\n  101010             best-effort                         low\n  101011             best-effort                         low\n  101100             best-effort                         low\n  101101             best-effort                         low\n  101110             best-effort                         low\n  101111             best-effort                         low\n  110000             network-control                     low\n  110001             network-control                     low\n  110010             network-control                     low\n  110011             network-control                     low\n  110100             network-control                     low\n  110101             network-control                     low\n  110110             network-control                     low\n  110111             network-control                     low\n  111000             network-control                     low\n  111001             network-control                     low\n  111010             network-control                     low\n  111011             network-control                     low\n  111100             network-control                     low\n  111101             network-control                     low\n  111110             network-control                     low\n  111111             network-control                     low\n</code></pre> Cisco 3750, \u0433\u0434\u0435 4 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 (01..04) \u0438 \u0435\u0449\u0435 \u0443 \u043a\u0430\u0436\u0434\u043e\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0435\u0441\u0442\u044c \u043f\u0430\u0440\u0430 \u0442\u0440\u0435\u0448\u0445\u043e\u043b\u0434\u043e\u0432 <pre><code>SWITCH#sh mls qos maps dscp-output-q\n   Dscp-outputq-threshold map:\n     d1 :d2    0     1     2     3     4     5     6     7     8     9 \n     ------------------------------------------------------------\n      0 :    02-01 02-01 02-01 02-01 02-01 02-01 02-01 02-01 02-01 02-01 \n      1 :    02-01 02-01 02-01 02-01 02-01 02-01 03-01 03-01 03-01 03-01 \n      2 :    03-01 03-01 03-01 03-01 03-01 03-01 03-01 03-01 03-01 03-01 \n      3 :    03-01 03-01 04-01 04-01 04-01 04-01 04-01 04-01 04-01 04-01 \n      4 :    01-01 01-01 01-01 01-01 01-01 01-01 01-01 01-01 04-01 04-01 \n      5 :    04-01 04-01 04-01 04-01 04-01 04-01 04-01 04-01 04-01 04-01 \n      6 :    04-01 04-01 04-01 04-01\n</code></pre></p>"},{"location":"network/qos_switch/#_4","title":"\u043f\u0435\u0440\u0435\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430","text":"<p>\u041e\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u0438\u043b\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u0413\u0434\u0435-\u0442\u043e \u0435\u0435 \u043c\u043e\u0436\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043d\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u043f\u043e\u0440\u0442\u0430\u0445, \u0433\u0434\u0435-\u0442\u043e \u043e\u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e.</p> <p>\u041d\u0430 Cisco 3750 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430. \u0415\u0441\u043b\u0438 \u043d\u0435\u0442 \u043f\u043e\u043b\u0438\u0442\u0438\u043a \u0434\u043b\u044f \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u043f\u0430\u043a\u0435\u0442\u043e\u0432, \u0442\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c <pre><code>no mls qos rewrite ip dscp\n</code></pre> \u041d\u0430 extreme \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0430 <pre><code>disable dot1p examination ports all\n</code></pre> \u041d\u0430 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 cisco \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0432\u0441\u0435 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430\u043c\u0438, \u0430 \u043d\u0435 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u043c\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c\u0438, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u0440\u043e\u0449\u0435 \u0441\u0442\u0430\u043b\u043e \u0441 \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b. \u0414\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0432 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0435 \u0432\u044b\u0441\u0442\u0430\u0432\u0438\u0442\u044c <code>set dscp xx</code>. \u041f\u0435\u0440\u0435\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u043d\u0430 extreme \u043d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440\u0435, \u0433\u0434\u0435 \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u0434\u0435\u0444\u043e\u043b\u0442\u043e\u0432\u043e\u0439 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u043f\u043e\u0440\u0442\u0430 47 \u043f\u0435\u0440\u0435\u043c\u0430\u0440\u043a\u0438\u0440\u0443\u044e\u0442\u0441\u044f: <pre><code>configure diffserv replacement qosprofile qp1 code-point 0\nconfigure ports 47 qosprofile qp1\nenable diffserv replacement port 47\n</code></pre></p>"},{"location":"network/qos_switch/#1-nexus-3000","title":"\u043f\u0440\u0438\u043c\u0435\u0440 1 \u0434\u043b\u044f nexus 3000","text":"<p>Cisco Nexus 3000 Series NX-OS QoS Configuration Guide \u0412 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0441 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0433\u0438\u043f\u0435\u0440\u0432\u0438\u0437\u043e\u0440\u0430\u043c\u0438 vmware esxi. \u0414\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0432\u0438\u0434\u0435 \u0442\u0430\u0441\u043a\u043e\u0432 \u0430\u043d\u0441\u0438\u0431\u043b\u0430. \u041a\u043e\u043c\u0430\u043d\u0434\u044b \u0438 \u0442\u0430\u0441\u043a\u0438 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u0442\u043e\u043c \u0432\u0438\u0434\u0435 \u0438 \u0432 \u0442\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435, \u0432 \u043a\u0430\u043a\u043e\u043c \u043e\u043d\u0438 \u0435\u0441\u0442\u044c \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u044d\u0442\u043e \u0432\u043c\u0435\u0441\u0442\u043e \u043b\u0438\u0441\u0442\u0438\u043d\u0433\u0430 \u0442\u043e\u0436\u0435 \u043f\u043e\u0434\u043e\u0439\u0434\u0435\u0442. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u043f\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043d\u0438\u0436\u0435:</p> dscp dec dscp class qos-group bw,% desc 8 cs1 1 25 vmotion 24 cs3 3 10 iscsi 32 cs4 4 40 vxlan,geneve 0 be 0 25 other <p>\u0412\u0435\u0441\u044c \u0442\u0440\u0430\u0444\u0438\u043a \u043f\u0435\u0440\u0435\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u044b\u0432\u0430\u0435\u0442\u0441\u044f, \u0435\u043c\u0443 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0430\u044f qos-group'\u0430, \u0443 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u044b \u043f\u0440\u043e\u0446\u0435\u043d\u0442\u0430\u043c\u0438 \u043e\u0442 \u043f\u043e\u043b\u043e\u0441\u044b. <pre><code>---\n- name: configure qos for nexus\n  hosts: cisco_n3k\n  gather_facts: false\n  serial: 1\n\n  tasks:\n\n    - name: acl\n      ansible.netcommon.cli_config:\n        config: |\n          ip access-list acl-iscsi\n            10 permit tcp any 10.0.0.0/8 eq 3260\n            20 permit tcp 10.0.0.0/8 eq 3260 any\n          ip access-list acl-vmotion\n            10 permit tcp any 10.0.0.0/8 eq 8000\n            20 permit tcp 10.0.0.0/8 eq 8000 any\n          ip access-list acl-vxlan\n            10 permit udp any 10.0.0.0/8 eq 4789\n            20 permit udp any 10.0.0.0/8 eq 6081\n            30 permit udp 10.0.0.0/8 eq 4789 any\n            40 permit udp 10.0.0.0/8 eq 6081 any\n      notify:\n        - SAVE CONFIGURATION\n\n    - name: class-map qos\n      ansible.netcommon.cli_config:\n        config: |\n          class-map type qos match-all ISCSI\n            match access-group name acl-iscsi\n          class-map type qos match-all VXLAN\n            match access-group name acl-vxlan\n          class-map type qos match-all VMOTION\n            match access-group name acl-vmotion\n      notify:\n        - SAVE CONFIGURATION\n\n    - name: class-map type queuing\n      ansible.netcommon.cli_config:\n        config: |\n          class-map type queuing QG1\n            match qos-group 1\n          class-map type queuing QG3\n            match qos-group 3\n          class-map type queuing QG4\n            match qos-group 4\n      notify:\n        - SAVE CONFIGURATION\n\n    - name: policy-map type qos SET-QG\n      ansible.netcommon.cli_config:\n        config: |\n          policy-map type qos SET-QG\n            class ISCSI\n              set qos-group 3\n              set dscp 24\n            class VXLAN\n              set qos-group 4\n              set dscp 32\n            class VMOTION\n              set qos-group 1\n              set dscp 8\n            class class-default\n              set dscp 0\n      notify:\n        - SAVE CONFIGURATION\n\n    - name: policy-map type queuing DS (datastore iscsi)\n      ansible.netcommon.cli_config:\n        config: |\n          policy-map type queuing DS\n            class type queuing QG3\n              bandwidth percent 90\n            class type queuing class-default\n              bandwidth percent 10\n      notify:\n        - SAVE CONFIGURATION\n\n    - name: policy-map type queuing ESXI\n      ansible.netcommon.cli_config:\n        config: |\n          policy-map type queuing ESXI\n            class type queuing QG1\n              bandwidth percent 25\n            class type queuing QG3\n              bandwidth percent 10\n            class type queuing QG4\n              bandwidth percent 40\n            class type queuing class-default\n              bandwidth percent 25\n      notify:\n        - SAVE CONFIGURATION\n\n    - name: class-map type network-qos\n      ansible.netcommon.cli_config:\n        config: |\n          class-map type network-qos cn_1\n            match qos-group 1\n          class-map type network-qos cn_2\n            match qos-group 2\n          class-map type network-qos cn_3\n            match qos-group 3\n          class-map type network-qos cn_4\n            match qos-group 4\n          class-map type network-qos cn_5\n            match qos-group 5\n          class-map type network-qos cn_6\n            match qos-group 6\n          class-map type network-qos cn_7\n            match qos-group 7\n      notify:\n        - SAVE CONFIGURATION\n\n    - name: policy-map type network-qos cq_system\n      ansible.netcommon.cli_config:\n        config: |\n          policy-map type network-qos cq_system\n            class type network-qos cn_1\n              mtu 9216\n            class type network-qos cn_2\n              mtu 9216\n            class type network-qos cn_3\n              mtu 9216\n            class type network-qos cn_4\n              mtu 9216\n            class type network-qos cn_5\n              mtu 9216\n            class type network-qos cn_6\n              mtu 9216\n            class type network-qos cn_7\n              mtu 9216\n            class type network-qos class-default\n              mtu 9216\n      notify:\n        - SAVE CONFIGURATION\n\n    - name: system qos\n      ansible.netcommon.cli_config:\n        config: |\n          system qos\n            service-policy type qos input SET-QG\n            service-policy type queuing output ESXI\n            service-policy type network-qos cq_system\n      notify:\n        - SAVE CONFIGURATION\n\n    - name: clear counters\n      ansible.netcommon.cli_command:\n        command: clear counters\n\n    - name: clear qos statistics\n      ansible.netcommon.cli_command:\n        command: clear qos statistics\n\n  handlers:\n\n    - name: SAVE CONFIGURATION\n      cli_command:\n        command: copy running-config startup-config\n</code></pre></p>"},{"location":"network/qos_switch/#1-extreme-670","title":"\u043f\u0440\u0438\u043c\u0435\u0440 1 \u0434\u043b\u044f extreme 670","text":"<p>\u0412 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0441 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0433\u0438\u043f\u0435\u0440\u0432\u0438\u0437\u043e\u0440\u0430\u043c\u0438 vmware esxi. \u0414\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0432\u0438\u0434\u0435 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u0430\u043d\u0434. \u041d\u0435\u043f\u043e\u043d\u044f\u0442\u043d\u043e \u043a\u0430\u043a \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 acl. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u043f\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043d\u0438\u0436\u0435:</p> dscp dec dscp class qosprofile desc 8 cs1 2 vmotion 24 cs3 3 iscsi 32 cs4 4 vxlan,geneve 0 be 1 other <pre><code>create qosprofile \"qp2\"\ncreate qosprofile \"qp3\"\ncreate qosprofile \"qp4\"\nconfigure diffserv examination code-point 24 qosprofile qp3\nconfigure diffserv examination code-point 32 qosprofile qp4\nconfigure diffserv examination code-point 8 qosprofile qp2\nconfigure diffserv replacement qosprofile qp1 code-point 0\nconfigure diffserv replacement qosprofile qp2 code-point 8\nconfigure diffserv replacement qosprofile qp3 code-point 24\nconfigure diffserv replacement qosprofile qp4 code-point 32\ndisable dot1p examination ports all\nenable diffserv examination ports all\nenable diffserv replacement ports all\n</code></pre> <p>\u0412\u0435\u0441\u044c \u0442\u0440\u0430\u0444\u0438\u043a \u043f\u0435\u0440\u0435\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u043e\u0439, \u0435\u043c\u0443 \u043f\u0440\u0438\u0441\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u043e\u043e\u0442\u0432\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 qosprofile. \u0421\u043e\u0437\u0434\u0430\u0442\u044c acl/\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0443 <code>vi qacl.pol</code> <pre><code>entry QP2-vmotionsrc {\n    if {\n        source-address 10.0.0.0/8;\n        protocol tcp;\n        source-port 8000;\n    } then {\n        Qosprofile qp2;\n        replace-dscp;\n   }\n}\nentry QP2-vmotiondst {\n    if {\n        destination-address 10.0.0.0/8;\n        protocol tcp;\n        destination-port 8000;\n    } then {\n        Qosprofile qp2;\n        replace-dscp;\n   }\n}\nentry QP3-iscsisrc {\n    if {\n        source-address 10.0.0.0/8;\n        protocol tcp;\n        source-port 3260;\n    } then {\n        Qosprofile qp3;\n        replace-dscp;\n   }\n}\nentry QP3-iscsidst {\n    if {\n        destination-address 10.0.0.0/8;\n        protocol tcp;\n        destination-port 3260;\n    } then {\n        Qosprofile qp3;\n        replace-dscp;\n   }\n}\nentry QP4-vxlansrc {\n    if {\n        source-address 10.0.0.0/8;\n        protocol udp;\n        source-port 4789;\n    } then {\n        Qosprofile qp4;\n        replace-dscp;\n   }\n}\nentry QP4-vxlandst {\n    if {\n        destination-address 10.0.0.0/8;\n        protocol udp;\n        destination-port 4789;\n    } then {\n        Qosprofile qp4;\n        replace-dscp;\n   }\n}\nentry QP4-genevesrc {\n    if {\n        source-address 10.0.0.0/8;\n        protocol udp;\n        source-port 6081;\n    } then {\n        Qosprofile qp4;\n        replace-dscp;\n   }\n}\nentry QP4-genevedst {\n    if {\n        destination-address 10.0.0.0/8;\n        protocol udp;\n        destination-port 6081;\n    } then {\n        Qosprofile qp4;\n        replace-dscp;\n   }\n}\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043f\u043e\u0440\u0442\u043e\u0432 <pre><code>check policy qacl\nconfigure access-list qacl any\n</code></pre></p>"},{"location":"network/qos_switch/#2-extreme-670","title":"\u043f\u0440\u0438\u043c\u0435\u0440 2 \u0434\u043b\u044f extreme 670","text":"<p>\u041a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u0440\u0430\u043d\u0437\u0438\u0442\u043d\u044b\u043c. \u041f\u0435\u0440\u0435\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u043d\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0441\u044f, \u043a\u0440\u043e\u043c\u0435 \u043d\u0435\u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u0440\u0442\u043e\u0432, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043e\u043d\u0430 \u0441\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0432 0. \u0414\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0432\u0438\u0434\u0435 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u0430\u043d\u0434. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u043f\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043d\u0438\u0436\u0435:</p> dscp dec dscp class qosprofile 8 cs1 2 24 cs3 3 32 cs4 4 0 be 1 <pre><code>create qosprofile \"qp2\"\ncreate qosprofile \"qp3\"\ncreate qosprofile \"qp4\"\nconfigure diffserv examination code-point 24 qosprofile qp3\nconfigure diffserv examination code-point 32 qosprofile qp4\nconfigure diffserv examination code-point 8 qosprofile qp2\nconfigure diffserv replacement qosprofile qp1 code-point 0\ndisable dot1p examination ports all\nenable diffserv examination ports all\n</code></pre> <p>\u041d\u0435\u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0439 \u043f\u043e\u0440\u0442 <pre><code>configure ports 47 qosprofile qp1\nenable diffserv replacement port 47\n</code></pre></p>"},{"location":"network/sks/","title":"\u0421\u041a\u0421","text":""},{"location":"network/sks/#_1","title":"\u0432\u0438\u0442\u0430\u044f \u043f\u0430\u0440\u0430","text":"<p>\u0411\u044b\u0432\u0430\u0435\u0442 \u043e\u0434\u043d\u043e\u0436\u0438\u043b\u044c\u043d\u0430\u044f \u0438 \u043c\u043d\u043e\u0433\u043e\u0436\u0438\u043b\u044c\u043d\u0430\u044f \u0432\u0438\u0442\u0430\u044f \u043f\u0430\u0440\u0430. \u041f\u0435\u0440\u0432\u0430\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u0440\u043e\u043a\u043b\u0430\u0434\u043a\u0438 \u043e\u0442 \u043f\u0430\u0442\u0447\u043f\u0430\u043d\u0435\u043b\u0438 \u0432 \u0448\u043a\u0430\u0444\u0443 \u0434\u043e \u0440\u043e\u0437\u0435\u0442\u043a\u0438. \u0421 \u043e\u0431\u043e\u0438\u0445 \u0441\u0442\u043e\u0440\u043e\u043d \u043f\u0440\u043e\u0432\u043e\u0434\u0430 \u0437\u0430\u0431\u0438\u0432\u0430\u044e\u0442\u0441\u044f/\u0437\u0430\u0436\u0438\u043c\u0430\u044e\u0442\u0441\u044f \u0432 \u043f\u043b\u0438\u043d\u0442\u044b, \u0433\u0434\u0435 \u0434\u0432\u0435 \u043c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u043b\u0430\u0441\u0442\u0438\u043d\u043a\u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0430\u044f \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0437\u0430\u0436\u0438\u043c\u0430\u044e\u0442 \u043c\u0435\u0434\u044c \u0441 \u043e\u0431\u043e\u0438\u0445 \u0441\u0442\u043e\u0440\u043e\u043d. \u0412\u0442\u043e\u0440\u0430\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0438\u0437\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0442\u0447\u043a\u043e\u0440\u0434\u043e\u0432, \u043a\u043e\u0433\u0434\u0430 \u0441 \u043e\u0431\u043e\u0438\u0445 \u0441\u0442\u043e\u0440\u043e\u043d \u043a\u0430\u0431\u0435\u043b\u044c \u043e\u043a\u043e\u043d\u0435\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043a\u043e\u043d\u043d\u0435\u043a\u0442\u043e\u0440\u043e\u043c c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \"\u043e\u0431\u0436\u0438\u043c\u043a\u0438\". \u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u043d\u0435\u043a\u0442\u043e\u0440\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0430\u044e\u0442 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0434\u043e \u043f\u0443\u0447\u043a\u0430 \u043c\u0435\u0434\u043d\u044b\u0445 \u0436\u0438\u043b \u043a\u0430\u0431\u0435\u043b\u044f.</p>"},{"location":"network/sks/#rj45","title":"\u043a\u043e\u043d\u043d\u0435\u043a\u0442\u043e\u0440\u044b RJ45","text":"<p>\u0411\u044b\u0432\u0430\u044e\u0442 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0435, \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0436\u0438\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u0430\u0431\u0435\u043b\u044f, \u0434\u043b\u044f \u043c\u043d\u043e\u0433\u043e\u0436\u0438\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u0430\u0431\u0435\u043b\u044f.</p>"},{"location":"network/sks/#c","title":"c\u0445\u0435\u043c\u044b \u0440\u0430\u0441\u0448\u0438\u0432\u043a\u0438 \u043a\u0430\u0431\u0435\u043b\u044f","text":"<p>\u0421\u0445\u0435\u043c\u0430 \u0422568A \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f. \u041f\u0440\u0438\u0435\u043c  - \u0437\u0435\u043b\u0435\u043d\u0430\u044f \u043f\u0430\u0440\u0430. \u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 - \u043e\u0440\u0430\u043d\u0436\u0435\u0432\u0430\u044f \u043f\u0430\u0440\u0430. \u0422\u0430\u043a \u043e\u0431\u0436\u0438\u043c\u0430\u044e\u0442 \u043f\u0430\u0447\u043a\u043e\u0440\u0434 \u0441 \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b, \u0435\u0441\u043b\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \"\u043a\u0440\u043e\u0441\u0441\u043e\u0432\u0435\u0440\u043d\u044b\u0439\" \u043f\u0430\u0447\u043a\u043e\u0440\u0434 \u0434\u043b\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044f\u0445 10/100\u041c\u0431\u0438\u0442/\u0441.</p> <p>\u0421\u0445\u0435\u043c\u0430 T568B - \u0442\u043e, \u0447\u0442\u043e \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e. \u041f\u0440\u0438\u0435\u043c  - \u043e\u0440\u0430\u043d\u0436\u0435\u0432\u0430\u044f \u043f\u0430\u0440\u0430. \u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 - \u0437\u0435\u043b\u0435\u043d\u0430\u044f \u043f\u0430\u0440\u0430. \u0417\u0434\u0435\u0441\u044c \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u0432\u0432\u0438\u0434\u0443 \u043f\u0440\u0438\u0435\u043c \u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u043f\u043e\u0440\u0442\u0430 \u0430\u0431\u043e\u043d\u0435\u043d\u0442\u0441\u043a\u043e\u0433\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 (\u043f\u043e\u0440\u0442\u0443) \u0432 \u0442\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0438\u043f MDI. \u041b\u043e\u0433\u0438\u0447\u043d\u043e, \u0447\u0442\u043e \u043d\u0430 \u043a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0442\u043e\u0440\u0430/\u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 10/100 \u043f\u0440\u0438\u0435\u043c  -  \u0437\u0435\u043b\u0435\u043d\u0430\u044f \u043f\u0430\u0440\u0430,\u0430 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 - \u043e\u0440\u0430\u043d\u0436\u0435\u0432\u0430\u044f \u043f\u0430\u0440\u0430. \u041f\u043e\u0440\u0442\u0443 \u043a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0442\u043e\u0440\u0430/\u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0438\u043f MDIX. \u041c\u043d\u043e\u0433\u0438\u0435 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u044b 10/100/1000 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0430\u0432\u0442\u043e\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u044b \u0434\u043b\u044f \u043f\u0440\u0438\u0435\u043c\u0430/\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044f\u0445 10/100, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0438 \u0442\u0438\u043f \u0443 \u043d\u0438\u0445 Auto-MDIX.</p> <p>\u041d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044f\u0445 10/100\u043c\u0431\u0438\u0442/\u0441 1-2 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u043d\u0435\u043a\u0442\u043e\u0440\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u0440\u0438\u0435\u043c\u0430 (Rx), 3 \u0438 6 - \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 (Tx).</p> <p>\u041d\u0430 \u0433\u0438\u0433\u0430\u0431\u0438\u0442\u043d\u044b\u0445 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044f\u0445 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0434\u0443\u043f\u043b\u0435\u043a\u0441\u043d\u0430\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0432\u0441\u0435\u043c \u0447\u0435\u0442\u044b\u0440\u0435\u043c \u043f\u0430\u0440\u0430\u043c \u043a\u0430\u0431\u0435\u043b\u044f. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043a\u0440\u043e\u0441\u0441\u043e\u0432\u0435\u0440\u043d\u044b\u0435 \u043a\u0430\u0431\u0435\u043b\u0438 \u043c\u043e\u0436\u043d\u043e \u043d\u0435 \u0434\u0435\u043b\u0430\u0442\u044c \u0438 \u0437\u0430\u0431\u044b\u0442\u044c \u043f\u0440\u043e MDI/MDIX.</p>"},{"location":"network/sks/#_2","title":"\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438","text":"<p>5e \u0438 6-\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043a\u0430\u0431\u0435\u043b\u044f \u043e\u0442\u043b\u0438\u0447\u0430\u044e\u0442\u0441\u044f \u0434\u0438\u0430\u043c\u0435\u0442\u0440\u043e\u043c \u0436\u0438\u043b \u043c\u0435\u0434\u043d\u044b\u0445 \u0436\u0438\u043b. \u0414\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u0440\u0430\u0431\u043e\u0447\u0438\u0445 \u043c\u0435\u0441\u0442 \u043d\u0430 \u0433\u0438\u0433\u0430\u0431\u0438\u0442\u043d\u044b\u0445 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044f\u0445 \u0438\u043b\u0438 PoE \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e 5e \u043a\u0430\u0431\u0435\u043b\u044f. \u041f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 4 \u043a\u043b\u0430\u0441\u0441\u0430 \u043b\u0443\u0447\u0448\u0435 \u0437\u0430\u043b\u043e\u0436\u0438\u0442\u044c 6 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e, \u0442\u0430\u043a \u043a\u0430\u043a \u0442\u0435\u043f\u043b\u043e\u043e\u0442\u0434\u0430\u0447\u0430 \u043a\u0430\u0431\u0435\u043b\u044f \u0432\u044b\u0448\u0435 \u0433\u0434\u0435-\u0442\u043e \u043d\u0430 50%. \u041a\u0430\u0431\u0435\u043b\u044c 6 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u043b\u0449\u0435, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432 \u043b\u043e\u0442\u043a\u0430\u0445 \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442 \u043c\u0435\u0441\u0442\u0430 \u0431\u043e\u043b\u044c\u0448\u0435. \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0432\u0438\u0442\u043e\u0439 \u043f\u0430\u0440\u044b \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u0413\u041e\u0421\u0422 \u0420 53245-2008  - 90 \u043c\u0435\u0442\u0440\u043e\u0432 \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c. \u041f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 PoE \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u043b\u0443\u0447\u0448\u0435 \u043e\u0440\u0438\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 70 \u043c\u0435\u0442\u0440\u043e\u0432. \u0414\u043b\u044f \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u0438 \u043a\u0430\u0431\u0435\u043b\u0435\u0439 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0435 \u0438 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u0438. \u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u0432 \u043a\u0430\u0431\u0435\u043b\u0435 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 PoE \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u0430 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 50 \u0433\u0440\u0430\u0434\u0443\u0441\u043e\u0432 \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 5e. \u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u043e\u043b\u043e\u0447\u043a\u0430 \u043a\u0430\u0431\u0435\u043b\u044f \u0441\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c \u043d\u0435 \u0432\u044b\u0441\u043e\u0445\u043b\u0430 \u0438 \u043d\u0435 \u043d\u0430\u0447\u0430\u043b\u0430 \u0442\u0440\u0435\u0441\u043a\u0430\u0442\u044c\u0441\u044f \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043c\u0430\u043d\u0438\u043f\u0443\u043b\u044f\u0446\u0438\u0439 \u0441 \u043f\u0430\u0447\u043a\u043e\u0440\u0434\u0430\u043c\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440.</p>"},{"location":"network/sonic/","title":"switch mellanox \u0441 sonic community","text":""},{"location":"network/sonic/#readme","title":"readme","text":"<p>Sonic community \u044d\u0442\u043e \u0441\u043e\u0444\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u0441\u0432\u043e\u0439 \u0441\u0442\u0440\u0430\u0445 \u0438 \u0440\u0438\u0441\u043a. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u043e\u0439 \u0441\u0431\u043e\u0440\u043a\u0438 master \u0443\u0436\u0435 \u0440\u0438\u0441\u043a. \u041b\u0443\u0447\u0448\u0435 \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u0441\u0430\u043c\u043e\u043c\u0443 \u0434\u0440\u0443\u0433\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0441\u043e\u0444\u0442\u0430. \u0424\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0435\u0441\u0442\u044c \u0432 sonic enterpise \u043e\u0442 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f, \u0432 community \u0432\u0435\u0440\u0441\u0438\u0438 \u043d\u0435\u0442 \u0438 \u0441\u043a\u043e\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043e \u043d\u0435 \u0431\u0443\u0434\u0435\u0442. \u0427\u0438\u0442\u0430\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0432\u0435\u043d\u0434\u043e\u0440\u043e\u0432 \u0438 \u0438\u0441\u043a\u0430\u0442\u044c \u0442\u0430\u043a\u043e\u0439 \u0436\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, sonic-cli, SAG, VRRP \u0431\u0435\u0441\u0441\u043c\u044b\u0441\u043b\u0435\u043d\u043d\u043e. \u0424\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0442\u0430\u043a\u043e\u0439 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0441 sonic community \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0443, \u0433\u0434\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 FRR c BGP \u0438 \u0433\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e, \u0447\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0432 \u043b\u0438\u043d\u0443\u043d\u043a\u0441\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u043c\u0438 \u043f\u0430\u043a\u0435\u0442\u0430\u043c\u0438 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c \u0434\u043b\u044f debian.</p> <pre><code>https://opencomputeproject.github.io/onie/developers/building.html\nhttps://thedxt.ca/2023/08/onie-and-onyx-mlnx-os-install/\nhttps://github.com/sonic-net/sonic-buildimage/\nhttps://github.com/sonic-net/sonic-utilities/blob/master/doc/Command-Reference.md\nhttps://qiita.com/masru0714\nhttps://github.com/iMasaruOki/sonic-custom-build\nhttps://techblog.rtbhouse.com/2021/11/25/L2-EVPN-to-L3-concept-part2/\nhttps://github.com/sonic-net/SONiC/blob/master/doc/mgmt/sonic_stretch_management_vrf_design.md\nhttps://netbergtw.com/top-support/netberg-sonic/virtual-routing-and-forwarding-vrf/\n</code></pre>"},{"location":"network/sonic/#serial","title":"serial","text":"<p>speed: 115200, databit: 8m, stop: 1, parity:none, flowcontrol: none.</p>"},{"location":"network/sonic/#onie","title":"ONIE","text":"<p>\u041d\u0443\u0436\u0435\u043d \u0434\u043b\u044f \u0441\u043b\u0443\u0447\u0430\u0435\u0432, \u043a\u043e\u0433\u0434\u0430 \u043d\u0435\u0443\u0434\u0430\u0447\u043d\u043e\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u041e\u0421 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0443\u0434\u0430\u043b\u0438\u043b\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0447\u0438\u043a. \u0421\u043e\u0431\u0438\u0440\u0430\u0435\u0442\u0441\u044f \u043f\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c\u0438 \u0432 \u0434\u043e\u043a\u0435\u0440\u0435. \u041a\u0430\u043a\u0438\u0445-\u0442\u043e \u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u043c\u043e\u0436\u0435\u0442 \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0442\u044c, \u0438\u0445 \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u0441\u044f \u0443\u0441\u0442\u0440\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e <code>PATH</code>. \u0412 \u0438\u0442\u043e\u0433\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f \u0444\u0430\u0439\u043b <code>onie/build/images/onie-recovery-x86_64-mlnx_x86-r0.iso</code>. \u0415\u0433\u043e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043d\u0430 \u0444\u043b\u0435\u0448\u043a\u0443.</p>"},{"location":"network/sonic/#bios","title":"BIOS","text":"<p>\u0427\u0442\u043e\u0431\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0441\u044f \u0441 \u0444\u043b\u0435\u0448\u043a\u0438 \u0441 ONIE, \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u044c\u0441\u044f \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043d\u0430\u0436\u0430\u0442\u044c Ctrl+B, \u0432\u0432\u0435\u0441\u0442\u0438 \u043f\u0430\u0440\u043e\u043b\u044c bios <code>admin</code> \u0438 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u0441 \u0444\u043b\u0435\u0448\u043a\u0438 \u0432 \u043c\u0435\u043d\u044e Save \\ Boot Override. \u0414\u0430\u043b\u0435\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c ONIE: Embed ONIE \u0438 \u0434\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438.</p>"},{"location":"network/sonic/#build-sonic","title":"build sonic","text":"<p>\u041d\u0438\u0436\u0435 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u044f \u043a \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438, \u0442.\u043a \u043d\u0443\u0436\u043d\u0430 ubuntu 22.x, \u043d\u0435 20. \u041a\u0430\u043a-\u0442\u043e \u0431\u043e\u043b\u0435\u0435-\u043c\u0435\u043d\u0435\u0435 \u0435\u0449\u0435 \u0432\u0435\u0442\u043a\u0430 202305. \u0412 \u041e\u0421 \u0441\u043e\u0437\u0434\u0430\u043d \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c <code>sonic</code>.</p> <p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u043e\u043a\u0435\u0440 <pre><code>curl -fsSL https://get.docker.com -o install-docker.sh\nsudo sh install-docker.sh\nsudo gpasswd -a ${USER} docker\nsudo systemctl enable docker.service\nsudo systemctl enable containerd.service\nsudo reboot\n</code></pre></p> <p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c venv, j2cli <pre><code>sudo apt install python3-pip python3-venv\npython3 -m venv base\nsource base/bin/activate\npip3 install wheel j2cli\n</code></pre></p> <p>\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c <code>rules/config</code> \u0447\u0442\u043e\u0431\u044b \u0432\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u043e\u0435. <pre><code>diff --git a/rules/config b/rules/config\nindex 8ac564dea..3fd9b2e16 100644\n--- a/rules/config\n+++ b/rules/config\n@@ -55,7 +55,7 @@ DEFAULT_PASSWORD = YourPaSsWoRd\n # ENABLE_DHCP_GRAPH_SERVICE = y\n\n # ENABLE_ZTP - installs Zero Touch Provisioning support.\n-# ENABLE_ZTP = y\n+ENABLE_ZTP = n\n\n # INCLUDE_PDE - Enable platform development enviroment\n # INCLUDE_PDE = y\n@@ -92,8 +92,8 @@ ENABLE_ORGANIZATION_EXTENSIONS = y\n # as includes symbols information. Given that 'profiling' option is a superset\n # of 'debugging' one, user should only enable either one option or the other --\n # if both options are enabled, the 'profiling' one will prevail.\n-#SONIC_DEBUGGING_ON = y\n-#SONIC_PROFILING_ON = y\n+SONIC_DEBUGGING_ON = n\n+SONIC_PROFILING_ON = n\n\n # DEFAULT_KERNEL_PROCURE_METHOD - default method for obtaining kernel\n #   build:    build kernel from source\n@@ -129,13 +129,13 @@ DEFAULT_VS_PREPARE_MEM = yes\n INCLUDE_SYSTEM_EVENTD = y\n\n # INCLUDE_SYSTEM_TELEMETRY - build docker-sonic-telemetry for system telemetry support\n-INCLUDE_SYSTEM_TELEMETRY = y\n+INCLUDE_SYSTEM_TELEMETRY = n\n\n # INCLUDE_ICCPD - build docker-iccpd for mclag support\n INCLUDE_ICCPD = n\n\n # INCLUDE_SFLOW - build docker-sflow for sFlow support\n-INCLUDE_SFLOW = y\n+INCLUDE_SFLOW = n\n\n # ENABLE_SFLOW_DROPMON - support of drop packets monitoring feature for sFlow deamon\n ENABLE_SFLOW_DROPMON = n\n@@ -151,16 +151,16 @@ ENABLE_HOST_SERVICE_ON_START = y\n INCLUDE_RESTAPI = n\n\n # INCLUDE_NAT - build docker-nat for nat support\n-INCLUDE_NAT = y\n+INCLUDE_NAT = n\n\n # INCLUDE_DHCP_RELAY - build and install dhcp-relay package\n-INCLUDE_DHCP_RELAY = y\n+INCLUDE_DHCP_RELAY = n\n\n # INCLUDE_P4RT - build docker-p4rt for P4RT support\n INCLUDE_P4RT = n\n\n # ENABLE_AUTO_TECH_SUPPORT - Enable the configuration for event-driven techsupport &amp; coredump mgmt feature\n-ENABLE_AUTO_TECH_SUPPORT = y\n+ENABLE_AUTO_TECH_SUPPORT = n\n\n # ENABLE_TRANSLIB_WRITE - Enable translib write/config operations via the gNMI interface.\n # Uncomment to enable:\n@@ -171,7 +171,7 @@ ENABLE_AUTO_TECH_SUPPORT = y\n ENABLE_NATIVE_WRITE = y\n\n # INCLUDE_MACSEC - build docker-macsec for macsec support\n-INCLUDE_MACSEC = y\n+INCLUDE_MACSEC = n\n\n # INCLUDE_GBSYNCD - build docker-gbsyncd-* for gearbox support\n INCLUDE_GBSYNCD ?= y\n</code></pre></p> <p>\u041a\u043e\u0433\u0434\u0430 \u0432 \u0441\u043e\u0441\u0442\u0430\u0432\u0435 \u041e\u0421 \u043d\u0443\u0436\u043d\u044b \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b, \u0442\u043e \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c <code>build_debian.sh</code> <pre><code>diff --git a/build_debian.sh b/build_debian.sh\nindex f8de45c7f..ecaad2a51 100755\n--- a/build_debian.sh\n+++ b/build_debian.sh\n@@ -352,6 +352,7 @@ fi\n ## Note: don't install python-apt by pip, older than Debian repo one\n ## Note: fdisk and gpg are needed by fwutil\n sudo LANG=C DEBIAN_FRONTEND=noninteractive chroot $FILESYSTEM_ROOT apt-get -y install      \\\n+    keepalived              \\\n     file                    \\\n     ifmetric                \\\n     iproute2                \\\n@@ -557,6 +558,7 @@ sudo https_proxy=$https_proxy LANG=C chroot $FILESYSTEM_ROOT pip3 install 'docke\n\n # Install scapy\n sudo https_proxy=$https_proxy LANG=C chroot $FILESYSTEM_ROOT pip3 install 'scapy==2.4.4'\n+sudo https_proxy=$https_proxy LANG=C chroot $FILESYSTEM_ROOT pip3 install 'j2cli'\n</code></pre></p> <p>\u0421\u0431\u043e\u0440\u043a\u0430. <pre><code>sudo mkdir /var/cache/sonic\nsudo chown sonic /var/cache/sonic\ngit clone --recurse-submodules  https://github.com/sonic-net/sonic-buildimage.git -b 202305\ncd sonic-buildimage/\nsudo modprobe overlay\n\nmake init\nmake configure PLATFORM=mellanox\nmake SONIC_BUILD_JOBS=4 all\n</code></pre> \u0415\u0441\u043b\u0438 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0438 \u043d\u0435\u0443\u0434\u0430\u0447\u043d\u044b\u0435, \u0442\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0430\u0440\u043ee <code>sudo docker rmi -f $(docker images -a -q)</code></p>"},{"location":"network/sonic/#install-sonic","title":"install sonic","text":"<p>\u041a\u043e\u0433\u0434\u0430 \u041e\u0421 \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f ONIE-install. \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043c\u0435\u043d\u0435\u0434\u0436 \u0432 eth0, \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441 \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0441\u043e\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0441\u043e\u0444\u0442. <pre><code>ONIE:/ # onie-discovery-stop\nONIE:/ # ifconfig eth0 10.0.0.100 netmask 255.255.255.0\nONIE:/ # ip route add default via 10.0.0.1\nONIE:/ # onie-nos-install http://10.1.2.3/sonic-mellanox-202305.bin\n</code></pre></p>"},{"location":"network/sonic/#default-password","title":"default password","text":"<p>\u041b\u043e\u0433\u0438\u043d <code>admin</code> \u043f\u0430\u0440\u043e\u043b\u044c <code>YourPaSsWoRd</code>. \u0421\u043c\u0435\u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u044f \u0431\u0435\u0437 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043d\u0430 \u0441\u0438\u043c\u0432\u043e\u043b\u044b <code>sudo passwd admin</code></p>"},{"location":"network/sonic/#feature","title":"feature","text":"<p>\u041d\u0438\u0436\u0435 \u0435\u0441\u0442\u044c iccpd, \u0442.\u043a. \u044d\u0442\u043e \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u0441\u0431\u043e\u0440\u043a\u0438 \u0441 mclag <pre><code>$ sudo show feature status\nFeature         State            AutoRestart\n--------------  ---------------  --------------\nbgp             enabled          enabled\ndatabase        always_enabled   always_enabled\ndhcp_relay      disabled         enabled\neventd          enabled          enabled\niccpd           enabled          enabled\nlldp            enabled          enabled\nmgmt-framework  enabled          enabled\nmux             always_disabled  enabled\npmon            enabled          enabled\nradv            enabled          enabled\nsnmp            enabled          enabled\nswss            enabled          enabled\nsyncd           enabled          enabled\nteamd           enabled          enabled\n</code></pre></p>"},{"location":"network/sonic/#config-save","title":"config save","text":"<pre><code>sudo config save -y\n</code></pre>"},{"location":"network/sonic/#hostname","title":"hostname","text":"<p>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 <pre><code>sudo config hostname sonic01\n</code></pre></p>"},{"location":"network/sonic/#management","title":"management","text":"<pre><code>sudo config vrf add mgmt\nsudo config save -y\nsudo config interface ip add Ethernet0 172.18.0.10/24\nsudo config route add prefix vrf mgmt 0.0.0.0/0 nexthop 172.18.0.1\nshow mgmt-vrf\nshow mgmt-vrf routes\nsudo ip vrf exec mgmt ping 172.18.0.1\nsudo config save -y\n</code></pre>"},{"location":"network/sonic/#date-ntp","title":"date ntp","text":"<p>\u0414\u0430\u0442\u0430 \u0440\u0443\u043a\u0430\u043c\u0438 <pre><code>sudo config clock timezone Europe/Moscow\nsudo config clock date 2024-02-09 14:00:00\n</code></pre> ntp <pre><code>sudo config ntp add 10.0.0.10\nsudo config ntp add 10.0.1.10\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 vrf mgmt <pre><code>sudo  ip vrf exec mgmt ntpq -p\n</code></pre></p>"},{"location":"network/sonic/#monitorig","title":"monitorig","text":"<pre><code>https://github.com/tynany/frr_exporter\nhttps://github.com/mehdy/keepalived-exporter\nhttps://github.com/vinted/sonic-exporter\n</code></pre> <p>\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c frr_exporter \u0432 \u0434\u043e\u043a\u0435\u0440 <pre><code>root@sonic:/etc/sonic/frr# docker cp /tmp/frr_exporter 70113ad4f31b:/usr/local/bin/\nroot@sonic:/etc/sonic/frr# docker exec -it 70113ad4f31b bash\nroot@sonic:/# /usr/local/bin/frr_exporter\n</code></pre></p> <p>\u041f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 sonic-exporter \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e snmp \u0441\u043c\u044b\u0441\u043b\u0430 \u043c\u0430\u043b\u043e <pre><code>sudo config feature state snmp disable\n</code></pre></p>"},{"location":"network/sonic/#vrrp","title":"vrrp","text":"<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043a\u043e\u043c\u0430\u043d\u0434 \u043d\u0435\u0442, \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0435\u0442. \u0422\u043e\u043b\u044c\u043a\u043e \u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 keepalived. \u041f\u043e\u044d\u0442\u043e\u043c\u0443, \u043f\u043e \u0441\u043e\u0432\u0435\u0442\u0443 masru0714 \u0441\u0442\u0430\u0432\u0438\u043b \u043f\u0430\u043a\u0435\u0442, \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u043b \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u0442\u0430\u043a. \u0421 \u043c\u0443\u043b\u044c\u0442\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u043c mac-\u0430\u0434\u0440\u0435\u0441\u043e\u043c \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c.</p> <pre><code>$ cat /etc/keepalived/keepalived.conf\nglobal_defs\n{\n  router_id sonic01\n}\nvrrp_instance i25 {\n  state BACKUP\n  interface Vlan25\n  priority 99\n  advert_int 1\n  virtual_router_id 25\n  virtual_ipaddress { 10.10.25.254 }\n  unicast_src_ip 10.10.25.252\n  unicast_peer { 10.10.25.251 }\n}\n</code></pre>"},{"location":"network/sonic/#mclag","title":"mclag","text":"<p>\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043c\u043e\u0436\u043d\u043e, \u043d\u043e \u0435\u0441\u043b\u0438 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 mclag \u043a\u0430\u043a \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435, \u0442\u043e \u043d\u0430 \u043e\u0434\u043d\u043e\u043c \u0438\u0437 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u0431\u0443\u0434\u0435\u0442 \u0441\u043b\u043e\u043c\u0430\u043d LAG. <pre><code>sudo config mclag add 1 192.168.10.2 192.168.10.1 PortChannel00\n</code></pre></p> <p>\u0412\u044b\u0432\u043e\u0434, \u0433\u0434\u0435 LAG \u0441\u043b\u043e\u043c\u0430\u043d. <pre><code>admin@sonic01:~$ mclagdctl -i 1 dump state\nThe MCLAG's keepalive is: OK\nMCLAG info sync is: completed\nDomain id: 1\nLocal Ip: 192.168.10.2\nPeer Ip: 192.168.10.1\nPeer Link Interface: PortChannel01\nKeepalive time: 1\nsesssion Timeout : 15\nPeer Link Mac: 1c:34:da:f2:17:00\nRole: Standby\nMCLAG Interface:\nLoglevel: NOTICE\nadmin@sonic01:~$ show interfaces portchannel\nFlags: A - active, I - inactive, Up - up, Dw - Down, N/A - not available,\n       S - selected, D - deselected, * - not synced\n  No.  Team Dev       Protocol    Ports\n-----  -------------  ----------  -------\n   01  PortChannel01  N/A\nadmin@sonic01:~$\n\nadmin@sonic02:~$ mclagdctl -i 1 dump state\nThe MCLAG's keepalive is: OK\nMCLAG info sync is: completed\nDomain id: 1\nLocal Ip: 192.168.10.1\nPeer Ip: 192.168.10.2\nPeer Link Interface: PortChannel01\nKeepalive time: 1\nsesssion Timeout : 15\nPeer Link Mac: 04:3f:72:2f:34:80\nRole: Active\nMCLAG Interface:\nLoglevel: NOTICE\nadmin@sonic02:~$ show interfaces portchannel\nFlags: A - active, I - inactive, Up - up, Dw - Down, N/A - not available,\n       S - selected, D - deselected, * - not synced\n  No.  Team Dev       Protocol     Ports\n-----  -------------  -----------  -----------------------------\n   01  PortChannel01  LACP(A)(Up)  Ethernet196(S) Ethernet192(S)\nadmin@sonic02:~$\n</code></pre></p>"},{"location":"network/sonic/#ipv6","title":"ipv6","text":"<p>\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435. <pre><code>sudo config ipv6 disable link-local\n</code></pre></p>"},{"location":"network/switching/","title":"Switching","text":""},{"location":"network/switching/#learning","title":"learning","text":"<p>\u041a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0432\u043d\u043e\u0441\u0438\u0442 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 mac-\u0430\u0434\u0440\u0435\u0441\u043e\u0432 src \u0430\u0434\u0440\u0435\u0441\u0430 \u0438\u0437 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u043e\u0433\u043e \u0444\u0440\u0435\u0439\u043c\u0430. \u041f\u0440\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u043e dst mac-\u0430\u0434\u0440\u0435\u0441\u0435, \u0444\u0440\u0435\u0439\u043c \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u0432\u043e \u0432\u0441\u0435 \u043f\u043e\u0440\u0442\u044b, \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0435 \u0432 vlan, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0432 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0435 \u0444\u0440\u0435\u0439\u043c\u0430. \u0412\u043e \u0432\u0441\u0435, \u043a\u0440\u043e\u043c\u0435 \u043f\u043e\u0440\u0442\u0430 \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0444\u0440\u0435\u0439\u043c.</p>"},{"location":"network/switching/#ethernet-frame","title":"ethernet frame","text":"Field Field Length in Bytes Description Preamble 7 Synchronization Start Frame Delimiter (SFD) 1 Signifies that the next byte begins the Destination MAC field Destination MAC address 6 Identifies the intended recipient of this frame Source MAC address 6 Identifies the sender of this frame Length 2 Defines the length of the data field of the frame (either length or type is present, but not both) Type 2 Defines the type of protocol listed inside the frame (either length or type is present, but not both) Data and Pad 46\u20131500 Holds data from a higher layer, typically a Layer 3 PDU (generic), and often an IP packet Frame Check Sequence (FCS) 4 Provides a method for the receiving NIC to determine whether the frame experienced transmission errors"},{"location":"network/switching/#switching","title":"switching","text":"<p>\u0414\u0432\u0430 \u0440\u0435\u0436\u0438\u043c\u0430: Store-and-Forward \u0438 Cut-Through. \u0412\u043e \u0432\u0442\u043e\u0440\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0432\u0441\u0435 \u0444\u0440\u0435\u0439\u043c\u044b \u0441 \u043e\u0448\u0438\u0431\u043a\u0430\u043c\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0441 FCS, \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e.</p> <p>\u0426\u0438\u0442\u0430\u0442\u0430</p> <p>Store-and-Forward is used to describe a functionality where a switch receives a complete packet, stores it, and only then forwards it. since the switch make forwarding decisions based on the destination address which is at the header of the packet, the switch can make the forwarding decision before receiving the complete packet, this process is called cut-through, the switch forwards part of the packet before receiving the complete packet. Cut-through allows lower latency and saves buffer space, but if an error occurred in the packet while utilizing cut-through, the packet will be forwarded with an error, alternatively, utilizing store-and-forward allows the switch to drop erroneous packets.</p>"},{"location":"network/switching/#aging","title":"aging","text":"<p>\u0412\u0440\u0435\u043c\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0445\u044d\u0448\u0430 \u0432 \u043f\u0430\u043c\u044f\u0442\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 5 \u043c\u0438\u043d\u0443\u0442. \u0412 \u0445\u0435\u0448\u0435 \u043e\u0431\u044b\u0447\u043d\u043e \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u044e\u043d\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0435 \u0430\u0434\u0440\u0435\u0441\u0430, \u0430 \u0434\u043b\u044f \u043c\u0443\u043b\u044c\u0442\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0445 \u0433\u0440\u0443\u043f\u043f\u043e\u0432\u044b\u0445 \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0435\u0441\u0442\u044c igmp-\u0442\u0430\u0439\u043c\u0435\u0440\u044b. \u0412 cisco \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u0434\u043b\u044f \u043c\u0443\u043b\u044c\u0442\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0430\u0434\u0440\u0435\u0441\u0430, \u043d\u043e \u044d\u0442\u043e \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435. \u041a\u043e\u0433\u0434\u0430 \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b STP, \u0442\u043e \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 TCN \u0442\u0430\u0431\u043b\u0438\u0446\u0430 mac-\u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u043e\u0447\u0438\u0449\u0430\u0435\u0442\u0441\u044f. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 port-security \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 mac-\u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0431\u0435\u0437 aging-time. \u0415\u0441\u043b\u0438 \u043a\u043e\u043b\u043b\u0438\u0437\u0438\u0439 \u043d\u0435 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442, \u0442\u043e \u0434\u043b\u044f \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u044f \u0441\u043b\u0443\u0447\u0430\u0435\u0432 unknown unicast \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c aging-time \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0434\u043e\u043b\u0436\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c STP \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043e\u0447\u0438\u0441\u0442\u043a\u0438 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0438\u0437 \"\u0442\u0430\u0431\u043b\u0438\u0446\u044b\".</p>"},{"location":"network/switching/#multicast","title":"multicast","text":"<p>\u0414\u043b\u044f \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 dst \u0433\u0440\u0443\u043f\u043f\u043e\u0432\u044b\u0445 \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d 0100.5E00.0000 \u043f\u043e 0100.5E7F.FFFF. \u041c\u043d\u043e\u0433\u043e\u0430\u0434\u0440\u0435\u0441\u043d\u0430\u044f \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0432\u043e \u0432\u0441\u0435 \u043f\u043e\u0440\u0442\u044b vlan'\u0430, \u0435\u0441\u043b\u0438 \u043d\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u0441\u043e \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430 igmp. \u041a\u0440\u043e\u043c\u0435 \u043f\u043e\u0440\u0442\u0430 \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0444\u0440\u0435\u0439\u043c, \u043a\u043e\u043d\u0435\u0447\u043d\u043e. \u0415\u0441\u043b\u0438 \u0432 8 \u0431\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u043e\u043a\u0442\u0435\u0442\u0430 \u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u0441\u0442\u044c 1, \u0442\u043e \u044d\u0442\u043e \u043c\u0443\u043b\u044c\u0442\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441. \u0415\u0441\u043b\u0438 0, \u0442\u043e \u044e\u043d\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0439. \u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438 hex \u0432 bin, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, 01 - 1, 03 - 11. \u0414\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0433\u043e \u0430\u0434\u0440\u0435\u0441\u0430 0100.5E00.0000 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b igmp \u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0438 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0444\u0440\u0435\u0439\u043c\u044b \u0432 \u0440\u0430\u0437\u043d\u044b\u0435 \u043f\u043e\u0440\u0442\u044b, \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0432\u0448\u0438\u0435\u0441\u044f \u043d\u0430 \u0433\u0440\u0443\u043f\u043f\u0443 \u043f\u043e igmp \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443, \u0430 \u0434\u043b\u044f \u0430\u0434\u0440\u0435\u0441\u0430 Microsoft NLB \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430 03bf.0a00.0002 \u043d\u0435\u0442 \u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442 \u043a\u043e\u043f\u0438\u0438 \u0444\u0440\u0435\u0439\u043c\u0430 \u0432\u043e \u0432\u0441\u0435 \u043f\u043e\u0440\u0442\u044b vlan'\u0430.  \u0427\u0442\u043e\u0431\u044b \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 \u043f\u043e\u0440\u0442\u0430\u043c\u0438 \u0432 cisco \u0432 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435 rfc \u043c\u043e\u0436\u043d\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u043d\u0430 \u043c\u0443\u043b\u044c\u0442\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u0435 \u0430\u0434\u0440\u0435\u0441\u0430. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0432 \u0437\u0430\u043c\u0435\u0442\u043a\u0435 \u043f\u043e NLB.</p>"},{"location":"network/switching/#unknown-unicast","title":"unknown unicast","text":"<p>\u0417\u0430\u043f\u0438\u0441\u044c \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \"\u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 mac-\u0430\u0434\u0440\u0435\u0441\u043e\u0432\" \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 aging-time \u0432 \u0441\u043b\u0443\u0447\u0430\u0435, \u043a\u043e\u0433\u0434\u0430 \u0444\u0440\u0435\u0439\u043c\u043e\u0432 \u0441 \u043f\u043e\u0434\u043e\u0431\u043d\u044b\u043c src \u0430\u0434\u0440\u0435\u0441\u043e\u043c \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u043b\u043e\u0441\u044c.  \u0424\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043f\u0438\u0441\u044c \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432 \u043f\u0430\u043c\u044f\u0442\u0438 ASIC'\u0430 \u0432 \u0432\u0438\u0434\u0435 \u0445\u044d\u0448\u0430, \u0447\u0442\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u0447\u0438\u0441\u043b\u043e mac-\u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0432 \u043f\u0430\u043c\u044f\u0442\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430. \u041f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0445\u0435\u0448 - \u044d\u0442\u043e \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e mac-\u0430\u0434\u0440\u0435\u0441, \u043d\u043e \u0438 \u043d\u043e\u043c\u0435\u0440 vlan id, \u0442\u043e \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u043a\u043e\u043b\u043b\u0438\u0437\u0438\u0438 \u0445\u0435\u0448\u0435\u0439, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u043a\u043e\u0433\u0434\u0430 \u043c\u043d\u043e\u0433\u043e \u043f\u043e\u0445\u043e\u0436\u0438\u0445 \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0432 \u043e\u0434\u043d\u043e\u043c vlan, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0422\u0412-\u043f\u0440\u0438\u0441\u0442\u0430\u0432\u043e\u043a. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 src \u0430\u0434\u0440\u0435\u0441 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u0437\u0443\u0447\u0435\u043d \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u043c, \u0442.\u0435. \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 unknown unicast. \u0414\u0440\u0443\u0433\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, unknown unicast \u044d\u0442\u043e \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0444\u0440\u0435\u0439\u043c\u0430 \u0441 \u044e\u043d\u0438\u043a\u0430\u0441\u0442\u043e\u0432\u044b\u043c dst \u0430\u0434\u0440\u0435\u0441\u043e\u043c \u0432\u043e \u0432\u0441\u0435 \u043f\u043e\u0440\u0442\u044b vlan'\u0430, \u043a\u0440\u043e\u043c\u0435 \u043f\u043e\u0440\u0442\u0430 \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0444\u0440\u0435\u0439\u043c, \u043a\u043e\u0433\u0434\u0430 dst \u0430\u0434\u0440\u0435\u0441 \u043d\u0435 \u043c\u043e\u0433 \u0431\u044b\u0442\u044c \u0438\u0437\u0443\u0447\u0435\u043d \u0440\u0430\u043d\u0435\u0435.</p>"},{"location":"network/switching/#broadcast","title":"broadcast","text":"<p>Dst \u0430\u0434\u0440\u0435\u0441 ffff.ffff.ffff. \u041a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0434\u0435\u043b\u0430\u0435\u0442 \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443 \u0432\u043e \u0432\u0441\u0435 \u043f\u043e\u0440\u0442\u044b vlan'\u0430, \u043a\u0440\u043e\u043c\u0435 \u043f\u043e\u0440\u0442\u0430 \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0444\u0440\u0435\u0439\u043c.</p>"},{"location":"network/switching/#unicast","title":"unicast","text":"<p>Dst \u0430\u0434\u0440\u0435\u0441 \u0438\u0437\u0443\u0447\u0435\u043d, \u0435\u0441\u0442\u044c \u0432 \"\u0442\u0430\u0431\u043b\u0438\u0446\u0435 mac-\u0430\u0434\u0440\u0435\u0441\u043e\u0432\" \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u0438 \u0435\u043c\u0443 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0438\u043b\u0438 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430, aging-time \u0442\u0430\u0439\u043c\u0435\u0440 \u043d\u0435 \u0438\u0441\u0442\u0435\u043a. \u041a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0444\u0440\u0435\u0439\u043c\u0430 \u0441 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u043c dst \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442 \u0435\u0433\u043e \u0432 \u043f\u043e\u0440\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \"\u0442\u0430\u0431\u043b\u0438\u0446\u0435\".</p>"},{"location":"network/switching/#port-isolation","title":"port isolation","text":"<p>\u0422\u0430\u043a \u0438\u043b\u0438 switchport protected \u0438\u043b\u0438 \u0435\u0449\u0435 \u043a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f. \u0424\u0440\u0435\u0439\u043c\u044b, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u0438\u0437 \u043f\u043e\u0440\u0442\u0430 \u0441 \u0442\u0430\u043a\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u043e\u0439, \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043f\u043e\u0440\u0442 \u0441 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u043e\u0439. \u0414\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0447\u0430\u0441\u0442\u043e \u0442\u0430\u043a \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b downlink \u043f\u043e\u0440\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043b\u044e\u0431\u043e\u0435 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0430\u0431\u043e\u043d\u0435\u043d\u0442\u0430\u043c\u0438 \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430. \u0422\u043e\u0433\u0434\u0430 \u0432\u0441\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0446\u0438\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u043c\u0435\u0436\u0434\u0443 \u043f\u043e\u0440\u0442\u043e\u043c \u0430\u0431\u043e\u043d\u0435\u043d\u0442\u0430 \u0438 \u043c\u0430\u0433\u0438\u0441\u0442\u0440\u0430\u043b\u044c\u043d\u044b\u043c \u043f\u043e\u0440\u0442\u043e\u043c.</p>"},{"location":"network/tcp_mss/","title":"TCP MSS","text":"<p>\u0420\u0430\u0437\u043c\u0435\u0440 tcp-\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 - 20 \u0431\u0430\u0439\u0442 \u043f\u043e RFC793, \u0440\u0430\u0437\u043c\u0435\u0440 ip-\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 - 20 \u0431\u0430\u0439\u0442 \u043f\u043e RFC791. \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430 (MSS) \u0432 tcp \u0440\u0430\u0432\u0435\u043d MTU \u0437\u0430 \u0432\u044b\u0447\u0435\u0442\u043e\u043c \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432: MSS = MTU - 20 - 20. \u0411\u044b\u0432\u0430\u044e\u0442 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u043a\u043e\u0433\u0434\u0430 \u043d\u0430 \u043a\u0430\u043a\u043e\u043c-\u0442\u043e \u0443\u0447\u0430\u0441\u0442\u043a\u0435 MTU \u043c\u0435\u043d\u044c\u0448\u0435, \u0447\u0435\u043c 1500, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0437\u0430 \u0441\u0447\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0442\u0443\u043d\u043d\u0435\u043b\u0435\u0439: gre, ipip, pptp, pppoe, l2tp, ipsec. \u0417\u0430 \u0441\u0447\u0435\u0442 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u0432 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u0435 MTU \u0434\u043b\u044f ip-\u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439. \u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f SOHO \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u0432 \u043f\u0440\u0438 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u0442\u0443\u043d\u043d\u0435\u043b\u0435\u0439 \u043d\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0435 \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 tcp mss, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u043d\u043e\u0441\u0438\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 tcp-\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043f\u0435\u0440\u0432\u043e\u0433\u043e tcp-\u043f\u0430\u043a\u0435\u0442\u0430 (syn), \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u043c \u0432 \u0441\u0442\u043e\u0440\u043e\u043d\u0443 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0434\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f. \u042d\u0442\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u0442\u0430\u043a \u043a\u0430\u043a \u043d\u0435 \u0432\u0441\u0435\u0433\u0434\u0430 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0442\u0430\u043a\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e.</p>"},{"location":"network/tcp_mss/#tcp-mss-cisco","title":"tcp mss \u0432 cisco","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 tcp-\u0441\u0435\u0441\u0441\u0438\u0438: syn, syn-ack, ack. \u0412 \u0441\u0432\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u042f\u043d\u0434\u0435\u043a\u0441 \u043d\u0430 \u0441\u0432\u043e\u0438\u0445 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u0445 \u0438\u043b\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430\u0445 \u0432\u044b\u0441\u0442\u0430\u0432\u0438\u043b tcp mss \u0440\u0430\u0432\u043d\u044b\u043c 1400. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 tcp mss \u0434\u043b\u044f \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432\u044b\u0433\u043b\u044f\u0434\u044f\u0442 \u043a\u0430\u043a \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b \u042f\u043d\u0434\u0435\u043a\u0441\u0430 \u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043f\u0440\u043e\u0447\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b. \u0422\u0430\u043a\u0430\u044f \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430, \u043a\u043e\u0433\u0434\u0430 \u0432\u043c\u0435\u0441\u0442\u043e SOHO \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043c\u0435\u043b\u043a\u0430\u044f Cisco, \u043a \u043f\u0440\u0438\u043c\u0435\u0440\u0443. \u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u043e pppoe \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 Dialer \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0434\u0430\u0442\u044c tcp mss \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439: <pre><code> ip tcp adjust-mss &lt;\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&gt;\n</code></pre></p>"},{"location":"network/tcp_mss/#mtu","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 MTU","text":"<p>\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a icmp \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442 8 \u0431\u0430\u0439\u0442, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0435\u0441\u043b\u0438 MTU \u043a\u0430\u043d\u0430\u043b\u0430 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0435 \u0438 \u0440\u0430\u0432\u043d\u043e 1500 \u0431\u0430\u0439\u0442, \u0442\u043e \u0437\u0430 \u0432\u044b\u0447\u0435\u0442\u043e\u043c \u0435\u0449\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 ip \u043d\u0430\u0434\u043e \u0432\u044b\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440 \u043f\u0430\u043a\u0435\u0442\u0430 1472. <pre><code>windows&gt;ping 999.99.9.1 -l 1472 -f -n 2\n\n\u041e\u0431\u043c\u0435\u043d \u043f\u0430\u043a\u0435\u0442\u0430\u043c\u0438 \u0441 999.99.9.1 \u043f\u043e \u0441 1472 \u0431\u0430\u0439\u0442\u0430\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u0445:\n\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 999.99.9.1: \u0447\u0438\u0441\u043b\u043e \u0431\u0430\u0439\u0442=1472 \u0432\u0440\u0435\u043c\u044f=3\u043c\u0441 TTL=254\n\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 999.99.9.1: \u0447\u0438\u0441\u043b\u043e \u0431\u0430\u0439\u0442=1472 \u0432\u0440\u0435\u043c\u044f=3\u043c\u0441 TTL=254\n\n\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 Ping \u0434\u043b\u044f 999.99.9.1:\n    \u041f\u0430\u043a\u0435\u0442\u043e\u0432: \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e = 2, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e = 2, \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u043e = 0\n    (0% \u043f\u043e\u0442\u0435\u0440\u044c)\n\u041f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u0438\u0435\u043c\u0430-\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0432 \u043c\u0441:\n    \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 = 3\u043c\u0441\u0435\u043a, \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 = 3 \u043c\u0441\u0435\u043a, \u0421\u0440\u0435\u0434\u043d\u0435\u0435 = 3 \u043c\u0441\u0435\u043a\n\nwindows&gt;ping 999.99.9.1 -l 1473 -f -n 2\n\n\u041e\u0431\u043c\u0435\u043d \u043f\u0430\u043a\u0435\u0442\u0430\u043c\u0438 \u0441 999.99.9.1 \u043f\u043e \u0441 1473 \u0431\u0430\u0439\u0442\u0430\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u0445:\n\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430, \u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u044e\u0449\u0438\u0439 \u0444\u043b\u0430\u0433.\n\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430, \u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u044e\u0449\u0438\u0439 \u0444\u043b\u0430\u0433.\n\n\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 Ping \u0434\u043b\u044f 999.99.9.1:\n    \u041f\u0430\u043a\u0435\u0442\u043e\u0432: \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e = 2, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e = 0, \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u043e = 2\n    (100% \u043f\u043e\u0442\u0435\u0440\u044c)\n\nlinux$ ping -s 1472 -M do -c 2 999.99.9.1 \nPING 999.99.9.1 (999.99.9.1) 1472(1500) bytes of data.\n1480 bytes from 999.99.9.1: icmp_seq=1 ttl=253 time=2.12 ms\n1480 bytes from 999.99.9.1: icmp_seq=2 ttl=253 time=1.93 ms\n\n--- 999.99.9.1 ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1001ms\nrtt min/avg/max/mdev = 1.935/2.027/2.120/0.102 ms\nlinux$ ping -s 1473 -M do -c 2 999.99.9.1 \nPING 999.99.9.1 (999.99.9.1) 1473(1501) bytes of data.\nping: local error: Message too long, mtu=1500\nping: local error: Message too long, mtu=1500\n\n--- 999.99.9.1 ping statistics ---\n2 packets transmitted, 0 received, +2 errors, 100% packet loss, time 1000ms\n\nfreebsd$ ping -D -s 1472 -c 2 999.99.9.1\nPING 999.99.9.1 (999.99.9.1): 1472 data bytes\n1480 bytes from 999.99.9.1: icmp_seq=0 ttl=253 time=1.163 ms\n1480 bytes from 999.99.9.1: icmp_seq=1 ttl=253 time=0.696 ms\n\n--- 999.99.9.1 ping statistics ---\n2 packets transmitted, 2 packets received, 0.0% packet loss\nround-trip min/avg/max/stddev = 0.696/0.929/1.163/0.234 ms\n\nfreebsd$ ping -D -s 1473 -c 2 999.99.9.1\nPING 999.99.9.1 (999.99.9.1): 1473 data bytes\nping: sendto: Message too long\nping: sendto: Message too long\n^C\n--- 999.99.9.1 ping statistics ---\n2 packets transmitted, 0 packets received, 100.0% packet loss\n</code></pre> \u0415\u0441\u043b\u0438 \u043f\u0430\u043a\u0435\u0442\u044b \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c 1472 \u043d\u0435 \u043f\u0440\u043e\u0445\u043e\u0434\u044f\u0442, \u0442\u043e \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0433\u043e\u0432\u043e\u0440\u0438\u0442\u044c \u043e\u0431 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0442\u0443\u043d\u043d\u0435\u043b\u0435\u0439 \u043d\u0430 \u043f\u0443\u0442\u0438 \u0434\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0445\u043e\u0441\u0442\u0430, \u043b\u0438\u0431\u043e \u043e \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 MTU \u043d\u0430 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445, \u0433\u0434\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043e QinQ, \u0435\u0441\u043b\u0438 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442 \u043d\u0430 4 \u0431\u0430\u0439\u0442\u0430 \u043c\u0435\u043d\u044c\u0448\u0435, \u0442\u043e\u0433\u0434\u0430 \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u043e\u0439 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u0438\u0437 google play \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0435. </p>"},{"location":"network/tfortis/","title":"Switch tfortis","text":"<p>\u0411\u044b\u043b\u043e \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u0432 \u043a\u043e\u043d\u0446\u0435 2018</p> <p>\u041a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 tfortis PSW-2G4F-UPS \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0432\u043e\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \u0432\u0435\u0431-\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0438\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 telnet \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435. \u0412\u043e \u0432\u0442\u043e\u0440\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043d\u0430\u0431\u043e\u0440 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d putty \u0432 \u0442.\u0447. \u043f\u043e\u0434 linux. \u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u043c telnet'\u043e\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f. \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u0434\u043e\u0431\u043d\u0443\u044e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 tfortis scanner, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432. \u0414\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u0441 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044f\u043c\u0438 \u041f\u041e \u0438 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u043f\u0440\u043e\u0448\u0438\u0432\u043e\u043a. \u0412 0.2.3 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 forward_bpdu \u0447\u0435\u0440\u0435\u0437 \u0432\u0435\u0431-\u0438\u043d\u0442\u0435\u0444\u0435\u0439\u0441, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043d\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u043b\u0441\u044f, \u043d\u043e \u0432\u0440\u043e\u0434\u0435 \u043f\u043e\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0441\u0443\u0434\u044f \u043f\u043e changelog. \u041d\u0435 \u0440\u0435\u0448\u0438\u043b\u0441\u044f \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c vlan \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u043c, vlan \u0434\u043b\u044f \u043a\u0430\u043c\u0435\u0440 \u0438 \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u0432\u0441\u0435 \u043a\u0430\u043a \u0435\u0441\u0442\u044c \u0432 \u043d\u0430\u0442\u0438\u0432\u043d\u043e\u043c vlan'\u0435. \u041f\u0440\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 ip-\u0430\u0434\u0440\u0435\u0441\u0430 \u0432 \u0442\u043e\u043c \u0436\u0435 \u043c\u0435\u043d\u044e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u0441\u0440\u0430\u0437\u0443 \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c gratuitous arp. \u0418 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0430\u0434\u0440\u0435\u0441\u0430, \u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u044d\u0442\u043e\u0433\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u0430 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430 \u0432 0.2.3. \u041a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u0441\u0435\u0431\u0435 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 arp \u0432\u0441\u0435 arp-\u043e\u0442\u0432\u0435\u0442\u044b \u043a\u0430\u043c\u0435\u0440, \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 \u0438 \u043f\u0440\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u043e\u0431\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430\u0445 \"\u0434\u0435\u043b\u0438\u0442\u0441\u044f\" \u044d\u0442\u0438\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u0441 \u0441\u043e\u0441\u0435\u0434\u043d\u0438\u043c\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u043c\u0438. \u0412 \u0438\u0442\u043e\u0433\u0435 \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0433\u043b\u044f\u0434\u0435\u0442\u044c \u043a\u0430\u043a \"\u0437\u0430\u0432\u0438\u0441\u0430\u043d\u0438\u0435\" \u0447\u0430\u0441\u0442\u0438 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 \u0432 \u0446\u0435\u043f\u043e\u0447\u043a\u0435 \u0438\u043b\u0438 \u043a\u0430\u043a \"\u043f\u0435\u0442\u043b\u044f\". \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u041f\u041e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u043d\u044e \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435 \u0441 0.2.1 \u0434\u043e 0.2.3. \u041f\u0440\u0438\u0447\u0435\u043c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u0432\u0435\u0431 \u0443 \u043c\u0435\u043d\u044f \u0432 linux \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c. \u0412\u0442\u043e\u0440\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0447\u0435\u0440\u0435\u0437 tftp \u043d\u0438\u0436\u0435: <pre><code>config tftp state enable\ndownload firmware_fromTFTP 192.168.0.100 sw407.img\n</code></pre> \u041f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 rstp \u0447\u0435\u0440\u0435\u0437 \u0432\u0435\u0431 \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041d\u0438\u0436\u0435 \u0447\u0430\u0441\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434 \u0434\u043b\u044f \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0447\u0435\u0440\u0435\u0437 putty \u0432\u0441\u044f\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0433\u043e \u0438 rstp \u0432 \u0442\u043e\u043c \u0447\u0438\u0441\u043b\u0435. \u041a\u0441\u0442\u0430\u0442\u0438, \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u0435. <pre><code>config user_accounts add admin mypass admin_rule\nconfig syslog host 10.9.8.7\nconfig syslog state enable\nconfig tftp state disable\nconfig igmp_snooping state enable\nconfig snmp state enable\nconfig sntp primary 10.9.8.7\nconfig sntp state enable\nconfig stp forward_bpdu state disable ! \u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u0432\u0435\u0431 \u0432 0.2.3\nconfig stp version rstp\nconfig stp state enable\nsave\n</code></pre> \u0414\u0430\u043b\u0435\u0435 \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e \u043d\u0430\u0434\u043e \u0437\u0430\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 \u0432\u0435\u0431 \u0438 \u0432 advanced \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 rstp \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u043d\u0430 \u043f\u043e\u0440\u0442\u0430\u0445 \u043a\u0430\u043c\u0435\u0440, \u0442.\u043a. \u043f\u043e\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u0430\u043a\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c\u0438 \u043d\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438. \u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u043b\u044e\u0441\u043e\u0432 PSW-2G4F-UPS \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0435 \u0446\u0435\u043d\u0430/\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e. \u0415\u0441\u043b\u0438 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u043d\u043e \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u041f\u041e, \u0442\u043e \u0435\u0433\u043e \u0441\u043e\u0432\u0441\u0435\u043c \u043d\u0435\u043c\u043d\u043e\u0433\u043e. \u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043c\u0438\u043d\u0443\u0441\u043e\u0432:</p> <ul> <li>\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0432 \u0432\u0438\u0434\u0435 ini-\u0444\u0430\u0439\u043b\u0430, \u043f\u0440\u0438\u0447\u0435\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 gratuitous arp \u044f \u0442\u0430\u043c \u043d\u0435 \u043d\u0430\u0448\u0435\u043b;</li> <li>\u043f\u0430\u0440\u043e\u043b\u044c \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432 \u043e\u0442\u043a\u0440\u044b\u0442\u043e\u043c \u0432\u0438\u0434\u0435;</li> <li>\u0432\u0432\u043e\u0434 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 telnet \u043d\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442\u0441\u044f. \u0415\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u0430 \u043d\u0435 \u0437\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043d\u0430 \u0438 \u043f\u0430\u0440\u043e\u043b\u044f \u0432 0.2.3 \u0443\u043a\u0430\u0437\u0430\u0432 \u0432 \u043f\u0430\u0440\u043e\u043b\u0435 \u043f\u0440\u043e\u0431\u0435\u043b;</li> </ul> <p>\u0427\u0442\u043e\u0431\u044b \u0440\u0435\u0441\u0435\u0442\u043d\u0443\u0442\u044c \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u043d\u0430\u0434\u043e \u043d\u0430\u0436\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0443 CPU \u043d\u0430 \u043f\u043b\u0430\u0442\u0435, \u0430 \u0447\u0442\u043e\u0431\u044b \u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0432 \u0434\u0435\u0444\u043e\u043b\u0442 \u043d\u0430\u0434\u043e \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c DEFAULT \u0431\u043e\u043b\u0435\u0435 30 \u0441\u0435\u043a\u0443\u043d\u0434.</p>"},{"location":"network/vipnet/","title":"FW vipnet","text":""},{"location":"network/vipnet/#hw50","title":"hw50","text":"<p>\u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u0441 \u043a\u043e\u043d\u0441\u043e\u043b\u0438 \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 38400. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c user \u0438 \u043f\u0430\u0440\u043e\u043b\u044c user. \u0412\u044b\u0431\u0440\u0430\u0442\u044c cli \u043d\u0430\u0436\u0430\u0442\u0438\u0435\u043c \"1\" <pre><code>1) command line interface                                   \n2) full-screen interface                                    \nPlease select setup wizard operating mode :             \n\nWelcome to the ViPNet Coordinator HW50 4.3.2-3421!\nYou must install keys or restore saved configuration\nWould you like to start installing keys or restoring configuration? [Yes/No] : \n\nWould you like to install keys from TFTP, USB or CD storage device? [t/u/c] : u\n\nInsert USB storage device with DST or VBE file and press &lt;Enter&gt;\n\nTry to mount /dev/sdb1 as vfat\n</code></pre> \u0421\u043b\u0435\u0434\u043e\u043c \u0432\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f RemoteOffceN. \u041f\u0430\u0440\u043e\u043b\u044c \u0435\u0441\u0442\u044c \u0432 \u0434\u0438\u0441\u0442\u0440\u0438\u0431\u0443\u0442\u0438\u0432\u0435 \u043a\u043b\u044e\u0447\u0435\u0439 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u043f\u0430\u0440\u043e\u043b\u0435\u043c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430. <pre><code>Enter password: \nHost name: RemoteOffceN\nUser ID: 1167006D\nUser password successfully checked\nHardware platform HW50-N1 is detected\nReleasing all resources...\nConfigure interface eth0? [Yes/No]:Yes\n\nUse dhcp on the interface eth0? [Yes/No] : No\n\nEnter interface IP-address : 893.888.43.125\n\nEnter interface netmask : 255.255.255.224\n\nConfigure interface eth1? [Yes/No]:No\n\nConfigure interface eth2? [Yes/No]:No\n\nEnter ip-address of the default gateway : 893.888.43.97\n\nDo you want to use DNS server? [Yes/No] : No\n\nDo you want to use NTP daemon to synchronize the time? [Yes/No] : Yes\n\nThis node will use public NTP servers for time synchronization by default.\nDo you want to add custom NTP server? [Yes/No] : Yes\n\nEnter IP-address or domain name of the custom NTP server : 194.190.168.1\n\nEnter hostname (default hw50-1167006a)\nOnly latin letters, digits and '-' symbols are allowed (2-63 symbols)\nOr press Enter to leave default value : \n\nThe current virtual IP address range is: 11.0.0.1/8\nDo you want to specify custom virtual IP address range? [Yes/No] : No\n\nDo you want to probe VPN-connection with some host in order to verify the configuration you've just made? [Yes/No] : No\n\nDo you want to start VPN services before leaving the installation wizard? [Yes/No] : Yes\n\nDo you want to start the command shell now? [Yes/No] : Yes\n</code></pre> \u041d\u0430 \u044d\u0442\u043e\u043c \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430.</p> <p>\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <pre><code>hw50-1167006a# firewall rules show\n Service Vpn Rules:\n================================================================================\nNum   Name                                               Option        Schedule \nAct   Protocol                  Source                 &gt; Destination            \n================================================================================\n1     Block not original udp port                        Generated              \ndrop  udp:                      @local                 &gt; @any                   \n       from 0-2045                                                              \n       to 2046,                                                                 \n      udp:                                                                      \n       from 2047-65535                                                          \n       to 2046                                                                  \n--------------------------------------------------------------------------------\n Vpn Rules:\n================================================================================\nNum   Name                                               Option        Schedule \nAct   Protocol                  Source                 &gt; Destination            \n================================================================================\n1     Allow DHCP Service                                 User                   \npass  udp:                      @any                   &gt; @any                   \n       from 67                                                                  \n       to 68                                                                    \n--------------------------------------------------------------------------------\n2     Allow DHCP Service                                 User                   \npass  udp:                      @any                   &gt; @any                   \n       from 68                                                                  \n       to 67                                                                    \n--------------------------------------------------------------------------------\n3     Allow DHCP-Relay service                           User                   \npass  udp:                      @any                   &gt; @any                   \n       from 67                                                                  \n       to 67                                                                    \n--------------------------------------------------------------------------------\n4     Allow ViPNet base services                         User                   \npass  udp:                      @any                   &gt; @any                   \n       from 2048                                                                \n       to 2048,                                                                 \n      udp:                                                                      \n       from 2050                                                                \n       to 2050                                                                  \n--------------------------------------------------------------------------------\n5     Allow ViPNet base services                         User                   \npass  udp:                      @any                   &gt; @any                   \n       to 2046                                                                  \n--------------------------------------------------------------------------------\n6     Allow ViPNet StateWatcher                          User                   \npass  tcp:                      @any                   &gt; @any                   \n       to 5100,                                                                 \n      tcp:                                                                      \n       to 10092                                                                 \n--------------------------------------------------------------------------------\n7     Allow ViPNet DBViewer                              User                   \npass  tcp:                      @any                   &gt; @any                   \n       to 2047                                                                  \n--------------------------------------------------------------------------------\n8     Allow ViPNet MFTP                                  User                   \npass  tcp:                      @any                   &gt; @any                   \n       to 5000-5003                                                             \n--------------------------------------------------------------------------------\n9     Allow ViPNet WebGui                                User                   \npass  tcp:                      @any                   &gt; @local                 \n       to 8080                                                                  \n--------------------------------------------------------------------------------\n10    Allow ICMP Ping                                    User                   \npass  icmp: 8                   @any                   &gt; @any                   \n--------------------------------------------------------------------------------\n11    Allow SSH                                          User                   \npass  tcp:                      @any                   &gt; @any                   \n       to 22                                                                    \n--------------------------------------------------------------------------------\n12    Allow DNS                                          User                   \npass  udp:                      @any                   &gt; @any                   \n       to 53,                                                                   \n      tcp:                                                                      \n       to 53                                                                    \n--------------------------------------------------------------------------------\n13    Allow NTP                                          User                   \npass  udp:                      @any                   &gt; @any                   \n       to 123                                                                   \n--------------------------------------------------------------------------------\n14    Allow UPS service                                  User                   \npass  tcp:                      @any                   &gt; @any                   \n       to 3493                                                                  \n--------------------------------------------------------------------------------\n15    Allow syslog outgoing                              User                   \npass  udp:                      @local                 &gt; @any                   \n       to 514                                                                   \n--------------------------------------------------------------------------------\n16    Allow SNMP                                         User                   \npass  udp:                      @any                   &gt; @local                 \n       to 161                                                                   \n--------------------------------------------------------------------------------\n17    Allow SNMP traps                                   User                   \npass  udp:                      @local                 &gt; @any                   \n       to 162                                                                   \n--------------------------------------------------------------------------------\n Vpn Default:\n================================================================================\nNum   Name                                               Option        Schedule \nAct   Protocol                  Source                 &gt; Destination            \n================================================================================\n1     Block All Traffic                                  User                   \ndrop  @any                      @any                   &gt; @any                   \n--------------------------------------------------------------------------------\nempty rule for  Nat Rules:\n Tunnel Rules:\n================================================================================\nNum   Name                                               Option        Schedule \nAct   Protocol                  Source                 &gt; Destination            \n================================================================================\n1     To all tunnel nodes                                User                   \npass  @any                      @any                   &gt; @tunneledip            \n--------------------------------------------------------------------------------\n2     From all tunnel nodes                              User                   \npass  @any                      @tunneledip            &gt; @any                   \n--------------------------------------------------------------------------------\n Tunnel Default:\n================================================================================\nNum   Name                                               Option        Schedule \nAct   Protocol                  Source                 &gt; Destination            \n================================================================================\n1     Block All Traffic                                  User                   \ndrop  @any                      @any                   &gt; @any                   \n--------------------------------------------------------------------------------\n Service Local Rules:\n================================================================================\nNum   Name                                               Option        Schedule \nAct   Protocol                  Source                 &gt; Destination            \n================================================================================\n1     ViPNet Service Common In                           Generated              \ndrop  tcp/udp:                  @any                   &gt; @local                 \n       to 2046,                                                                 \n      tcp/udp:                                                                  \n       to 2047,                                                                 \n      tcp/udp:                                                                  \n       to 10096,                                                                \n      tcp/udp:                                                                  \n       to 5100,                                                                 \n      tcp/udp:                                                                  \n       to 10092                                                                 \n--------------------------------------------------------------------------------\n2     ViPNet Service Common Out                          Generated              \ndrop  tcp/udp:                  @local                 &gt; @any                   \n       from 2046                                                                \n--------------------------------------------------------------------------------\n Local Rules:\n================================================================================\nNum   Name                                               Option        Schedule \nAct   Protocol                  Source                 &gt; Destination            \n================================================================================\n1     Allow DHCP Service                                 User                   \npass  udp:                      @any                   &gt; @any                   \n       from 67                                                                  \n       to 68                                                                    \n--------------------------------------------------------------------------------\n2     Allow DHCP Service                                 User                   \npass  udp:                      @any                   &gt; @any                   \n       from 68                                                                  \n       to 67                                                                    \n--------------------------------------------------------------------------------\n3     Allow DHCP-Relay service                           User                   \npass  udp:                      @any                   &gt; @any                   \n       from 67                                                                  \n       to 67                                                                    \n--------------------------------------------------------------------------------\n4     Block ICMP timestamp response                      User                   \ndrop  icmp: 14                  @local                 &gt; @any                   \n--------------------------------------------------------------------------------\n5     Allow ICMP Ping                                    User                   \npass  icmp: 8                   @local                 &gt; @any                   \n--------------------------------------------------------------------------------\n6     Allow ICMP type 3 code 4 'fragmentation needed ... User                   \npass  icmp: 3/4                 @local                 &gt; @any                   \n--------------------------------------------------------------------------------\n7     Allow DNS                                          User                   \npass  udp:                      @local                 &gt; @any                   \n       to 53,                                                                   \n      tcp:                                                                      \n       to 53                                                                    \n--------------------------------------------------------------------------------\n8     Allow NTP                                          User                   \npass  udp:                      @local                 &gt; @any                   \n       to 123                                                                   \n--------------------------------------------------------------------------------\n Local Default:\n================================================================================\nNum   Name                                               Option        Schedule \nAct   Protocol                  Source                 &gt; Destination            \n================================================================================\n1     Block All Traffic                                  User                   \ndrop  @any                      @any                   &gt; @any                   \n--------------------------------------------------------------------------------\nempty rule for  Forward Rules:\n Forward Default:\n================================================================================\nNum   Name                                               Option        Schedule \nAct   Protocol                  Source                 &gt; Destination            \n================================================================================\n1     Block All Traffic                                  User                   \ndrop  @any                      @any                   &gt; @any                   \n--------------------------------------------------------------------------------\n</code></pre></p> <p>\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043f\u043e ssh \u0438 \u0447\u0435\u0440\u0435\u0437 web http://host:8080. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 enable, \u0432\u0432\u0435\u0441\u0442\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 <pre><code>firewall local add src @any dst @local tcp dport 22 pass\nfirewall local add src @any dst @local tcp dport 8080 pass\n</code></pre></p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043d\u0430 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c user <pre><code>ssh user@893.888.43.125\nuser@893.888.43.125's password: \nLast login: Fri Mar  5 13:42:46 MSK 2021 on ttyS0\nLast login: Fri Mar  5 14:34:21 2021 from 893.888.43.97\nProduct: ViPNet Coordinator HW\nPlatform: HW50 N1\nLicense: HW50 AU\nSoftware version: 4.3.2-3421\n(C) InfoTeCS JSC, 2020; website: www.infotecs.ru, email: soft@infotecs.ru; phone (Russia): 8 800 250-0-260, phone (Moscow): +7 495 737-61-92\nLoading command shell, please wait...\nStarting the command line interface of Platform: HW50\nhw50-1167006a&gt; \n</code></pre> \u0412\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u043a\u0440\u0430\u0442\u043a\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u043c \u043d\u0430\u0436\u0430\u0442\u0438\u0435\u043c \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043f\u0438\u0442\u0430\u043d\u0438\u044f. \u0414\u0430\u043b\u0435\u0435 \u043a\u0430\u043a \u043e\u0431\u044b\u0447\u043d\u043e\u043c \u041f\u041a \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0441 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432 linux</p>"},{"location":"network/vxlan_sw/","title":"Switch list for vxlan","text":"<p>\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 \u0434\u043b\u044f \u0434\u0430\u0442\u0430\u0446\u0435\u043d\u0442\u0430 hardware vxlan gateway. \u0422.\u043a. redhat \u0438 vmware \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0442 \u043d\u0430 geneve, \u0442\u043e \u043e\u0442 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 \u0431\u0443\u0434\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 underlay.</p>"},{"location":"network/vyos/","title":"Router vyos","text":"<p>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f vyos. \u041d\u0438\u0436\u0435 \u0434\u043b\u044f VyOS 1.3-rolling</p> <p>The most up-do-date Rolling Release for AMD64 can be accessed using the following URL: https://downloads.vyos.io/rolling/current/amd64/vyos-rolling-latest.iso \u0438\u0437 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u043f\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044e</p>"},{"location":"network/vyos/#interface","title":"interface","text":"<p>\u0410\u0434\u0440\u0435\u0441 \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0438 \u0441\u0430\u0431\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b: <pre><code>set interfaces ethernet eth0 address '10.0.0.2/24'\nset interfaces ethernet eth1 vif 100 address '10.0.100.1/24'\nset interfaces ethernet eth1 vif 200 address '10.0.200.1/24'\nset interfaces loopback lo address '10.9.8.1/32'\n</code></pre></p> <p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>show int\n</code></pre></p>"},{"location":"network/vyos/#arp","title":"arp","text":"<p><code>arp -n</code>, \u043d\u043e \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 <code>show arp</code>.</p>"},{"location":"network/vyos/#vrrp","title":"vrrp","text":"<p>\u0427\u0435\u0440\u0435\u0437 high-availability <pre><code>set high-availability vrrp group 1 authentication password '1'\nset high-availability vrrp group 1 authentication type 'plaintext-password'\nset high-availability vrrp group 1 interface 'eth0'\nset high-availability vrrp group 1 virtual-address '10.0.0.1/24'\nset high-availability vrrp group 1 vrid '1'\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c, \u043d\u043e \u043d\u0435\u0442 \u0430\u0434\u0440\u0435\u0441\u043e\u0432, \u0442\u043e\u043b\u044c\u043a\u043e backup/master \u0438 \u0442\u0430\u0439\u043c\u0435\u0440\u044b <pre><code>show vrrp\n</code></pre></p>"},{"location":"network/vyos/#dhcp-server","title":"dhcp server","text":"<pre><code>set service dhcp-server shared-network-name [poolname] subnet 10.0.200.0/24 default-router '10.0.200.1'\nset service dhcp-server shared-network-name [poolname] subnet 10.0.200.0/24 dns-server '8.8.8.8'\nset service dhcp-server shared-network-name [poolname] subnet 10.0.200.0/24 dns-server '8.8.4.4'\nset service dhcp-server shared-network-name [poolname] subnet 10.0.200.0/24 range 1 start '10.0.200.10'\nset service dhcp-server shared-network-name [poolname] subnet 10.0.200.0/24 range 1 stop '10.0.200.100'\n</code></pre> <p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>sh dhcp server leases\n</code></pre></p>"},{"location":"network/vyos/#bw-limits","title":"bw limits","text":"<p>\u0428\u0435\u0439\u043f\u0435\u0440 1\u043c\u0431\u0438\u0442 <pre><code>set traffic-policy shaper 1m default bandwidth '1mbit'\nset interfaces ethernet eth1 vif 100 traffic-policy out '1m'\n</code></pre></p> <p>\u041f\u043e\u043b\u0438\u0441\u0435\u0440 \u043d\u0430 out <pre><code>set traffic-policy rate-control 10m bandwidth '10mbit'\nset interfaces ethernet eth1 vif 200 traffic-policy out '10m'\n</code></pre></p> <p>\u041f\u043e\u043b\u0438\u0441\u0435\u0440 \u043d\u0430 in <pre><code>set traffic-policy limiter in10m default bandwidth '10mbit'\nset interfaces ethernet eth1 vif 200 traffic-policy out 'in10m'\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>sh int ethernet [ifname] queue\n</code></pre></p>"},{"location":"network/vyos/#flow-accounting","title":"flow-accounting","text":"<p>netflow v5</p> <pre><code>set system flow-accounting netflow engine-id '[id]'\nset system flow-accounting netflow server [ip] port [port]\nset system flow-accounting netflow version '5'\n</code></pre> <p>\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b. \u0421\u043e\u0431\u0438\u0440\u0430\u0435\u0442\u0441\u044f ingress, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0432\u0441\u0435 \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u044b. <pre><code>set system flow-accounting interface [ifname]\n</code></pre></p> <p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>sh flow-accounting\nsh flow-accounting interface [ifname]\n</code></pre></p>"},{"location":"network/vyos/#prefix-list","title":"prefix-list","text":"<p>\u0414\u0435\u0444\u043e\u043b\u0442 <pre><code>set policy prefix-list DEFAULT rule 10 action 'permit'\nset policy prefix-list DEFAULT rule 10 prefix '0.0.0.0/0'\n</code></pre></p> <p>\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a \u0441\u043e \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430\u043c\u0438 \u0438\u0437 \u0431\u043b\u043e\u043a\u0430 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430 <pre><code>set policy prefix-list CUSTOMER rule 10 action 'permit'\nset policy prefix-list CUSTOMER rule 10 ge '25'\nset policy prefix-list CUSTOMER rule 10 prefix '10.9.8.0/23'\n</code></pre></p> <p>\u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u044b <pre><code>set policy prefix-list MYSELF rule 10 action 'permit'\nset policy prefix-list MYSELF rule 10 prefix '10.9.8.0/23'\n</code></pre></p>"},{"location":"network/vyos/#route-map","title":"route-map","text":"<p>\u0414\u043b\u044f FRR \u0432 bgp \u043d\u0443\u0436\u0435\u043d, \u0447\u0442\u043e\u0431 \u043e\u0442\u0434\u0430\u0442\u044c \u0434\u0435\u0444\u043e\u043b\u0442. \u0412\u0437\u044f\u0442\u043e \u0438\u0437 https://blog.donatas.net/blog/2018/07/27/frr-bgp-default-originate/ <pre><code>set policy route-map PM-DEFAULT rule 10 action 'permit'\nset policy route-map PM-DEFAULT rule 10 set as-path-prepend '[as] [as]'\nset policy route-map PM-DEFAULT rule 10 set metric '200'\n</code></pre></p>"},{"location":"network/vyos/#bgp","title":"bgp","text":"<p>\u0410\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0434\u043b\u044f \u0430\u043d\u043e\u043d\u0441\u0430 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430\u043c. \u0425\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0430\u0434\u0440\u0435\u0441 \u0441 \u043b\u0443\u043f\u0431\u0435\u043a\u0430 \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c \u0432 network. <pre><code>set protocols bgp [as] address-family ipv4-unicast aggregate-address 10.9.8.0/23 summary-only\nset protocols bgp [as] address-family ipv4-unicast network 10.9.8.1/32\nset protocols bgp [as] parameters router-id '10.9.8.1'\n</code></pre></p> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0438\u0440\u0430 \u0441 \u0434\u043e\u043c\u0440\u0443, \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0432\u0441\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u044b \u0431\u0435\u0437 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439. <pre><code>set protocols bgp [as] neighbor [isp-ip] address-family ipv4-unicast prefix-list export 'MYSELF'\nset protocols bgp [as] neighbor [isp-ip] address-family ipv4-unicast soft-reconfiguration inbound\nset protocols bgp [as] neighbor [isp-ip] remote-as '9049'\ncomment protocols bgp [as] neighbor [isp-ip] 'DOMru'\n</code></pre></p> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0438\u0440\u0430 \u0441 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u043c, \u0434\u043e \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0434\u0432\u0435 \u043b\u0438\u043d\u0438\u0438 \u0441\u0432\u044f\u0437\u0438. <pre><code>set protocols bgp [as] neighbor [peer-ip-1] peer-group 'CUSTOMER1'\ncomment protocols bgp [as] neighbor 1[peer-ip-1] 'CUSTOMER1-link1'\nset protocols bgp [as] neighbor [peer-ip-2] peer-group 'CUSTOMER1'\ncomment protocols bgp [as] neighbor [peer-ip-2] 'CUSTOMER1-link2'\nset protocols bgp [as] peer-group CUSTOMER1 address-family ipv4-unicast default-originate route-map 'PM-DEFAULT'\nset protocols bgp [as] peer-group CUSTOMER1 address-family ipv4-unicast maximum-prefix '10'\nset protocols bgp [as] peer-group CUSTOMER1 address-family ipv4-unicast nexthop-self\nset protocols bgp [as] peer-group CUSTOMER1 address-family ipv4-unicast prefix-list export 'DEFAULT'\nset protocols bgp [as] peer-group CUSTOMER1 address-family ipv4-unicast prefix-list import 'CUSTOMER'\nset protocols bgp [as] peer-group CUSTOMER1 address-family ipv4-unicast soft-reconfiguration inbound\nset protocols bgp [as] peer-group CUSTOMER1 remote-as '[customer1-as]'\n</code></pre></p> <p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>show ip bgp summary\nsh ip bgp neighbors [peer-ip] advertised-routes\nsh ip bgp neighbors [peer-ip] received-routes\nsh ip bgp neighbors [peer-ip] received-routes\nsh ip route [prefix]\nsh ip bgp [prefix]\n</code></pre></p>"},{"location":"network/vyos/#ntp","title":"ntp","text":"<p>dns \u043d\u0443\u0436\u0435\u043d \u0432 \u0442\u0447 \u0434\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f <pre><code>set system name-server '8.8.8.8'\nset system ntp server 0.ru.pool.ntp.org\nset system ntp server 1.ru.pool.ntp.org\nset system ntp server 2.ru.pool.ntp.org\nset system ntp server 3.ru.pool.ntp.org\nset system time-zone 'Asia/Krasnoyarsk'\n</code></pre></p> <p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c <pre><code>sh ntp\n</code></pre></p>"},{"location":"network/vyos/#snmp","title":"snmp","text":"<p>\u041c\u0438\u0431\u044b \u043b\u0438\u043d\u0443\u043a\u0441\u0430, \u043d\u0438\u0447\u0435\u0433\u043e \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u043e\u0433\u043e \u043d\u0435\u0442. <pre><code>set service snmp community public authorization 'ro'\nset service snmp community public client '[nms-ip]\nset service snmp contact '[contact]'\nset service snmp location '[location]'\n</code></pre></p>"},{"location":"network/vyos/#ssh","title":"ssh","text":"<p>\u0412 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e\u0442 \u043f\u043e \u043a\u043b\u044e\u0447\u0430\u043c, \u0430 \u043d\u0435 \u043f\u0430\u0440\u043e\u043b\u044f\u043c.</p>"},{"location":"network/vyos/#rpf-check","title":"rpf-check","text":"<p>\u0414\u043b\u044f \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0430\u0434\u0440\u0435\u0441\u043e\u0432, \u043d\u0435 \u0434\u043b\u044f vrrp \u0438 dhcp. <pre><code>set interfaces ethernet [ifname] ip source-validation 'strict'\n</code></pre></p>"},{"location":"network/vyos/#ansible","title":"ansible","text":"<p>vyos.vyos.vyos_config</p> <p>set \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0432 \u0442\u043e\u043c \u0432\u0438\u0434\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0431\u0443\u0434\u0443\u0442 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u0442.\u0435. \u0432 \u043e\u0434\u043d\u043e\u043c \u0442\u0430\u0441\u043a\u0435 \u043c\u043e\u0436\u043d\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0442\u0440\u043e\u043a \u043f\u043e\u0434\u0440\u044f\u0434, \u0435\u0441\u043b\u0438 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0435 \u044d\u0442\u043e \u0442\u043e\u0447\u043d\u043e \u0442\u0430\u043a \u0436\u0435 \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442. \u0415\u0441\u043b\u0438 \u043c\u043d\u043e\u0433\u043e \u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u043c\u0435\u0441\u0442\u0430\u0445, \u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0442\u0430\u0441\u043a\u043e\u0432. playbook.yml <pre><code>- hosts: vyos\n\n  tasks:\n\n    - name: configure\n      vyos.vyos.vyos_config:\n        lines:\n            - set ...\n\n    - name: save\n      vyos.vyos.vyos_config:\n        save: yes\n</code></pre> inventory <pre><code>[vyos]\nvyos1 ansible_host=x.x.x.x\n\n[vyos:vars]\nansible_network_os=vyos\nansible_become=no\nansible_user=some_user\nansible_connection=network_cli\nansible_python_interpreter=~/base/bin/python\n</code></pre> ansible.cfg <pre><code>[defaults]\nhost_key_checking = True\ninventory=./inventory\n[ssh_connection]\npipelining = true\n</code></pre></p>"},{"location":"network/vyos/#fastnetmon","title":"fastnetmon","text":"<p>(\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435)[https://fastnetmon.com/fastnetmon-community-on-vyos-rolling-1-3/]</p>"},{"location":"voip/cisco_cme/","title":"Cisco CME(CUCME)","text":""},{"location":"voip/cisco_cme/#cme-7x","title":"CME 7.x","text":"<p>\u042d\u0442\u043e \u0432\u043e\u043e\u0431\u0449\u0435 2010 \u0433\u043e\u0434.</p> <p>\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432 2800 \u0438\u043b\u0438 3800 \u0441\u0435\u0440\u0438\u044e \"\u0437\u0430\u043b\u0438\u0442\u044c\" \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 IOS. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c 12.4\u0422 voice \u0438\u043b\u0438 advipservices. PVDM \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438 \u043f\u043e\u0442\u043e\u043a\u043e\u043c E1, \u043b\u0438\u0431\u043e \u043f\u0440\u0438 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0430 cisco ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u0445 hardware \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439, \u0442.\u0435. \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439, \u0433\u0434\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0431\u043e\u043b\u044c\u0448\u0435 \u0447\u0435\u043c 3. \u0415\u0441\u043b\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440 \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043a \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438, \u043a \u043d\u0435\u043c\u0443 \u043f\u043b\u0430\u043d\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c\u0441\u044f \u0435\u0449\u0435 \u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0435 SIP ip-\u0448\u043b\u044e\u0437\u044b \u0441 FXS-\u043f\u043e\u0440\u0442\u0430\u043c\u0438, \u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438. \u041f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u0434\u043b\u044f \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0442\u0440\u0435\u0445\u0437\u043d\u0430\u0447\u043d\u043e\u0439 \u043d\u0443\u043c\u0435\u0440\u0430\u0446\u0438\u0438 \u0438 \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430\u043c\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0433\u043e\u043b\u043e\u0441\u0430 \u0431\u0443\u0434\u0435\u0442 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u043e H323-\u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 <pre><code>voice rtp send-recv\n!\nvoice service voip \n allow-connections h323 to h323\n allow-connections h323 to sip\n allow-connections sip to h323\n allow-connections sip to sip\n supplementary-service h450.12\n fax protocol t38 nse ls-redundancy 0 hs-redundancy 0 fallback cisco\n h323\n sip\n</code></pre> \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0441\u0442\u0440\u043e\u043a allow-connections ** to ** \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 voip-\u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0435\u0440\u0435\u0437 dial-peer pots.</p> <p>\u041f\u0443\u0441\u0442\u044c \u0438\u043c\u0435\u0435\u043c \u043d\u0435\u043a\u0438\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441: <pre><code>interface FastEthernet0/1.100\n description LAN\n encapsulation dot1Q 100\n ip address 10.10.9.254 255.255.255.0\n\ninterface FastEthernet0/1.110\n description Voice LAN\n encapsulation dot1Q 110\n ip address 10.10.10.254 255.255.255.0\n h323-gateway voip bind srcaddr 10.10.10.254\n</code></pre> \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u043b\u0443\u0431\u043a\u0435\u043a\u0430 \u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0436\u0435\u043b\u0430\u043d\u0438\u044f \u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441, \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0431\u0443\u0434\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c\u0441\u044f rtp-\u0441\u0435\u0441\u0441\u0438\u044f \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430\u043c\u0438, \u043f\u043e\u0434\u0440\u0430\u0437\u0443\u043c\u0435\u0432\u0430\u0435\u0442 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 h323-gateway voip bind srcaddr \u0432 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435.</p> <p>\u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0435\u0440\u0432\u0438\u0441 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438 \u0434\u043b\u044f ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u0432 \u0421isco. <pre><code>telephony-service\n ip source-address 10.10.10.254 port 2000\n calling-number initiator\n timeouts interdigit 3\n system message MyCompany\n cnf-file location flash:\n time-zone 42\n time-format 24\n date-format dd-mm-yy\n dialplan-pattern 1 ... extension-length 3\n max-conferences 6 gain -6\n call-forward pattern .T\n call-forward system redirecting-expanded\n transfer-system full-consult\n transfer-pattern .T\n</code></pre> \u0412 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0443\u043a\u0430\u0437\u0430\u043d \u0447\u0430\u0441\u043e\u0432\u043e\u0439 \u043f\u043e\u044f\u0441, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0438\u043a\u0430\u043a \u043d\u0435 \u0441\u0432\u044f\u0437\u0430\u043d \u0441 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u0447\u0430\u0441\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u044f\u0441\u0430 \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0435. \u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0438 \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0438\u043a\u0430\u043a \u043d\u0435 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u0443\u0435\u0442\u0441\u044f. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u0430\u0436\u043d\u043e \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440 \u0438 \u043d\u0435 \u0437\u0430\u0431\u044b\u0432\u0430\u0442\u044c \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c \u0440\u0443\u043a\u0430\u043c\u0438 \u0432 \u0441\u0435\u0440\u0432\u0438\u0441\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043d\u0430 \u043b\u0435\u0442\u043d\u0435\u0435/\u0437\u0438\u043c\u043d\u0435\u0435 \u0432\u0440\u0435\u043c\u044f. \u041f\u043e\u043d\u044f\u0442\u043d\u043e, \u0447\u0442\u043e \u0441\u043c\u0435\u043d\u0430 \u0447\u0430\u0441\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u044f\u0441\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0432 \u0438\u0442\u043e\u0433\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439: <pre><code>router(config)#telephony-service \nrouter(config-telephony)#reset all\n</code></pre> \u0420\u0430\u0437\u043d\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u043e\u0432 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0440\u0430\u0437\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u0432. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043c\u043e\u0434\u0435\u043b\u0438, \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438 \u0438 \u0435\u0449\u0435 \u0447\u0435\u0433\u043e-\u043d\u0438\u0431\u0443\u0434\u044c, \u0437\u0430\u0434\u0430\u0435\u0442\u0441\u044f \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u0432 \u0438 DN (\u0447\u0442\u043e-\u0442\u043e \u0432\u0440\u043e\u0434\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0434\u043b\u044f \u043d\u043e\u043c\u0435\u0440\u0430). <pre><code>telephony-service\n max-ephones 30\n max-dn 100\n</code></pre> \u0414\u0430\u043b\u0435\u0435 \u0441\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0445\u043e\u0447\u0443 \u0441\u043e\u0437\u0434\u0430\u0442\u044c 10 \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u0438 \u0447\u0442\u043e\u0431\u044b \u0432\u0441\u0435 \u043e\u043d\u0438 \u0440\u0430\u0437\u0434\u0430\u043b\u0438\u0441\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430. <pre><code>ephone-dn  10  dual-line\n number 210\n!\n!\nephone-dn  11  dual-line\n number 211\n!\n!\nephone-dn  12  dual-line\n number 212\n!\n!\nephone-dn  13  dual-line\n number 213\n!\n!\nephone-dn  14  dual-line\n number 214\n!\n!\nephone-dn  15  dual-line\n number 215\n!\n!\nephone-dn  16  dual-line\n number 216\n!\n!\nephone-dn  17  dual-line\n number 217\n!\n!\nephone-dn  18  dual-line\n number 218\n!\n!\nephone-dn  19  dual-line\n number 219\n\ntelephony-service\n auto assign 10 to 19\n</code></pre> \u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442\u0441\u044f DHCP \u043f\u0443\u043b\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441\u0430 \u0440\u0430\u0431\u043e\u0447\u0438\u043c \u0441\u0442\u0430\u043d\u0446\u0438\u044f\u043c \u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u043c. \u041d\u0430\u043b\u0438\u0447\u0438\u0435 \u043e\u043f\u0446\u0438\u0438 150 \u0443\u043a\u0430\u0436\u0435\u0442 \u0438\u043c \u0441 \u043a\u0430\u043a\u043e\u0433\u043e \u0430\u0434\u0440\u0435\u0441\u0430 \u043e\u043d\u0438 \u0431\u0443\u0434\u0443\u0442 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 xml \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 tftp. \u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 tftp-\u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0432\u044b\u0441\u0442\u0443\u043f\u0430\u0435\u0442 \u0441\u0430\u043c \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440. \u0427\u0430\u0441\u0442\u044c \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u044b\u0445 \u0448\u043b\u044e\u0437\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0438\u043c\u0435\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0430\u0434\u0440\u0435\u0441\u0430. <pre><code>ip dhcp excluded-address 10.10.10.1 10.10.10.50\n\nip dhcp pool LAN\n   network 10.10.9.0 255.255.255.0\n   default-router 10.10.9.254 \n   dns-server 10.0.0.1 10.0.1.1\n   domain-name mycompany.com\n   netbios-node-type h-node\n\nip dhcp pool VoiceLAN\n   network 10.10.10.0 255.255.255.0\n   default-router 10.10.10.254 \n   dns-server 10.0.0.1 10.0.1.1 \n   option 150 ip 10.10.10.254\n</code></pre> \u041f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0431\u0443\u0434\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u0434\u0435\u043a G729, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0432\u0441\u0435\u043c\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u043c\u0438 Cisco, \u0432 \u0442\u043e\u043c \u0447\u0438\u0441\u043b\u0435 \u0438 \u0441\u043e\u0444\u0442\u0444\u043e\u043d\u043e\u043c Cisco Communicator. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u043e\u0441\u043b\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u0432 \u0432 \u043a\u0430\u0436\u0434\u043e\u043c ephone \u043f\u0440\u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442\u0441\u044f: <pre><code>ephone  1\n..\n codec g729r8\n..\n</code></pre> \u0415\u0441\u043b\u0438 \u0431\u0443\u0434\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044b \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u0445, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438, \u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c sccp. <pre><code>sccp local FastEthernet0/1.110\nsccp\n</code></pre></p>"},{"location":"voip/cisco_cme/#ad-hoc","title":"Ad-Hoc \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f","text":"<p>\u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0434\u0432\u0430 \u0442\u0438\u043f\u0430 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439:</p> <ol> <li>Ad-Hoc, \u043a\u043e\u0433\u0434\u0430 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u0441 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 cisco \u043f\u0443\u0442\u0435\u043c \u043d\u0430\u0436\u0430\u0442\u0438\u044f \u043a\u043d\u043e\u043f\u043a\u0438 Confrn. \u0411\u0435\u0437 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439 (conference hardware) \u043d\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0435 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0442\u0430\u043a\u043e\u0439 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u0440\u0430\u0432\u043d\u043e \u0442\u0440\u0435\u043c.</li> <li>Meetme, \u043a\u043e\u0433\u0434\u0430 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u0441 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 cisco \u043f\u0443\u0442\u0435\u043c \u0434\u043e\u0437\u0432\u043e\u043d\u0430 \u043d\u0430 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043d\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0435. \u041f\u043e\u0441\u043b\u0435 \u0447\u0435\u0433\u043e \u0432\u0441\u0435 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438 \u0441 \u043b\u044e\u0431\u043e\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u043c\u043e\u0433\u0443\u0442 \u0437\u0432\u043e\u043d\u0438\u0442\u044c \u043d\u0430 \u0442\u043e\u0442 \u0436\u0435 \u043d\u043e\u043c\u0435\u0440.</li> </ol> <p>\u0421\u0435\u0439\u0447\u0430\u0441 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e Ad-Hoc \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f.  \u0421\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u043e\u0434\u0438\u043d DSP \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 8 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439 \u043f\u043e 8 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043a\u043e\u0434\u0435\u043a\u0430 G711 \u0438 2 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u043f\u043e 8 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043a\u043e\u0434\u0435\u043a\u0430 G729. \u0422\u0430\u043a \u0436\u0435 \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u043d\u0430 16 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432. \u041c\u043d\u0435 \u043f\u043e\u043a\u0430 \u043d\u0435\u044f\u0441\u043d\u043e, \u043a\u0430\u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0447\u0435\u043c \u043e\u0434\u0438\u043d DSP. \u041f\u043e\u043a\u0430 \u0432\u0441\u0435 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0442\u0430\u043a, \u0447\u0442\u043e \u0431\u043e\u043b\u044c\u0448\u0435 \u0447\u0435\u043c \u043e\u0434\u0438\u043d \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f. \u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u043f\u043e\u043b\u0443\u0447\u0430\u044e \u043b\u0438\u043c\u0438\u0442 \u043d\u0430 2 \u043f\u043e 8.</p> <p>\u0412 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0435 \u0432\u0441\u0442\u0430\u0432\u043b\u0435\u043d PVDM2, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c, \u0432\u043a\u043b\u044e\u0447\u0438\u0432 dspfarm: <pre><code>router(config)#voice-card 0\nrouter(config-voicecard)#?\nVoice-card configuration commands:\n  codec         Manage codec configuration parameters for voice card\n  default       Set a command to its defaults\n  dsp           Manage DSP configuration for the voice card\n  dspfarm       Enable dspFarm feature for this voice card (command will be deprecated in future releases, use the new command 'dsp tdm pooling')\n  exit          Exit from voice card configuration mode\n  local-bypass  Enable TDM hairpinning\n  no            Negate a command or set its defaults\n\nrouter(config-voicecard)#dspfarm ?\n\n\nrouter(config-voicecard)#dsp ?   \n  allocation  dsp allocation scheme\n  services    Manage DSP services configuration for the voice card\n  tdm         Manage TDM configuration for the DSP on voice card\n\nrouter(config-voicecard)#dsp services ?\n  dspfarm  Enable dspfarm services on the Voice Card\n\n\nrouter(config-voicecard)#dsp services dspfarm ?\n\n\nrouter(config-voicecard)#dsp services dspfarm \nrouter(config-voicecard)#\n</code></pre> \u0412 \u043f\u0440\u043e\u0444\u0438\u043b\u0435 dspfarm \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0442\u043e\u043d\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0438\u0433\u0440\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435 \u0438 \u0432\u044b\u0445\u043e\u0434\u0435 \u0438\u0437 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438: <pre><code>voice class custom-cptone jointone\n dualtone conference\n  frequency 1200 1200\n  cadence 150 50 150 50\n!\nvoice class custom-cptone leavetone\n dualtone conference\n  frequency 900 900\n  cadence 150 50 150 50\n</code></pre> \u0414\u0430\u043b\u0435\u0435 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0430\u043c \u043f\u0440\u043e\u0444\u0438\u043b\u044c. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d: <pre><code>!\ndspfarm profile 1 conference  \n codec g711ulaw\n codec g711alaw\n codec g729ar8\n codec g729abr8\n codec g729r8\n codec g729br8\n maximum sessions 2\n conference-join custom-cptone jointone\n conference-leave custom-cptone leavetone\n associate application SCCP\n shutdown\n!\n</code></pre> \u0427\u0442\u043e\u0431\u044b \u0437\u0430\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0434\u043b\u044f sccp \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440. <pre><code>sccp ccm 10.10.10.254 identifier 1 version 7.0 \n\nsccp ccm group 1\n bind interface FastEthernet0/1.110\n associate ccm 1 priority 1\n associate profile 1 register mtp002414de5631\n keepalive retries 16\n keepalive timeout 10\n</code></pre> \u0417\u0434\u0435\u0441\u044c mtp002414de5631 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u043d\u0430\u0431\u043e\u0440 \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u0445 \u0431\u0443\u043a\u0432 \u0434\u043b\u044f \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0438\u0445 \u0432 \u0441\u0435\u0440\u0432\u0438\u0441\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438. \u041d\u0430\u043f\u043e\u043c\u043d\u044e, \u0447\u0442\u043e \u0440\u0430\u043d\u0435\u0435 sccp \u0431\u044b\u043b \u0443\u0436\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d: <pre><code>sccp local FastEthernet0/1.110\nsccp\n</code></pre> \u041f\u0440\u0430\u0432\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438, \u0447\u0442\u043e\u0431\u044b \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0430\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c sccp \u0438 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438: <pre><code>telephony-service\n sdspfarm units 1\n sdspfarm tag 1 mtp002414de5631\n conference hardware\n</code></pre> \u0412\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u043f\u0440\u043e\u0444\u0438\u043b\u044c dspfarm <pre><code>router(config)#dspfarm profile 1 conference  \nrouter(config-dspfarm-profile)#no sh\nrouter(config-dspfarm-profile)#\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0438\u043c, \u0447\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c: <pre><code>router#sh sccp all\nSCCP Admin State: UP\nGateway Local Interface: FastEthernet0/1.110\n        IPv4 Address: 10.10.10.254\n        Port Number: 2000\nIP Precedence: 5\nUser Masked Codec list: None\nCall Manager: 10.10.10.254, Port Number: 2000\n  Priority: N/A, Version: 7.0, Identifier: 1\n  Trustpoint: N/A\n\nSCCP application services(dspfarm profiles) are not enabled \nor haven't associated to SCCP CCM group\n\nCCM Group Identifier: 1\n Description: None\n Binded Interface: FastEthernet0/1.110\n        IPv4 Address: 10.10.10.254\n Associated CCM Id: 1, Priority in this CCM Group: 1\n Associated Profile: 1, Registration Name: mtp002414de5631\n Registration Retries: 3, Registration Timeout: 10 sec\n Keepalive Retries: 16, Keepalive Timeout: 10 sec\n CCM Connect Retries: 3, CCM Connect Interval: 10 sec\n Switchover Method: GRACEFUL, Switchback Method: GRACEFUL_GUARD\n Switchback Interval: 10 sec, Switchback Timeout: 7200 sec\n Signaling DSCP value: cs3, Audio DSCP value: ef\n[skip]\n\nrouter#sh dspfarm all\nDspfarm Profile Configuration\n\n Profile ID = 1, Service = CONFERENCING, Resource ID = 1  \n Profile Description :  \n Profile Service Mode : Non Secure \n Profile Admin State : UP \n Profile Operation State : RESOURCE ALLOCATED \n Application : SCCP   Status : NOT ASSOCIATED \n Resource Provider : FLEX_DSPRM   Status : UP \n[skip]\n</code></pre> \u0415\u0441\u0442\u044c \u043e\u0448\u0438\u0431\u043a\u0438, \u043f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u043d\u0435\u043b\u044c\u0437\u044f. \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u043f\u0440\u0438\u0447\u0438\u043d\u0443, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0442\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0442\u0443\u0441 \u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d - \u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c dspfarm. \u041d\u043e \u0442\u0443\u0442 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 sccp, \u0433\u0434\u0435, \u043a\u0430\u043a \u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f, \u0442\u043e\u0436\u0435 \u0432\u0430\u0436\u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434. <pre><code>sccp local FastEthernet0/1.110\nsccp ccm 10.10.10.254 identifier 1 version 7.0 \nsccp\n</code></pre> \u041b\u044e\u0431\u043e\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 (\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u043b\u0438 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435) sccp \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c/\u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c sccp: <pre><code>router(config)#no sccp\nrouter(config)#sccp\nrouter(config)#^Z\nrouter#sh dspfarm all\nDspfarm Profile Configuration\n\n Profile ID = 1, Service = CONFERENCING, Resource ID = 1  \n Profile Description :  \n Profile Service Mode : Non Secure \n Profile Admin State : UP \n Profile Operation State : ACTIVE \n Application : SCCP   Status : ASSOCIATED \n Resource Provider : FLEX_DSPRM   Status : UP\n[skip] \n</code></pre> \u0414\u043b\u044f Ad-Hoc \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c DN-\u043a\u0438. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0448\u0442\u0443\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432. \u0415\u0441\u043b\u0438 DN-\u043a\u0438 dual-line , \u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043f\u043e\u043b\u043e\u0432\u0438\u043d\u0443 \u043c\u0435\u043d\u044c\u0448\u0435. \u041f\u0443\u0441\u0442\u044c \u0431\u0443\u0434\u0435\u0442 \u043d\u0430 32 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 16 DN dual-line: <pre><code>ephone-dn  100  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 1\n no huntstop\n!\n!\nephone-dn  101  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 2\n no huntstop\n!\n!\nephone-dn  102  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 3\n no huntstop\n!\n!\nephone-dn  103  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 4\n no huntstop\n!\n!\nephone-dn  104  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 5\n no huntstop\n!\n!\nephone-dn  105  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 6\n no huntstop\n!\n!\nephone-dn  106  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 7\n no huntstop\n!\n!\nephone-dn  107  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 8\n no huntstop\n!\n!\nephone-dn  108  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 9\n no huntstop\n!\n!\nephone-dn  109  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 9\n no huntstop\n!\n!\nephone-dn  110  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 9\n no huntstop\n!\n!\nephone-dn  111  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 9\n no huntstop\n!\n!\nephone-dn  112  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 9\n no huntstop\n!\nephone-dn  113  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 9\n no huntstop\n!\n!\nephone-dn  114  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 9\n no huntstop\n!\n!\nephone-dn  115  dual-line\n number A0001\n name conference\n conference ad-hoc\n preference 9\n huntstop\n!\n</code></pre> \u0418\u043d\u0442\u0435\u0440\u0435\u0441\u0442\u043d\u043e, \u0447\u0442\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f number A0001. \u041d\u0435\u043f\u0440\u0438\u0432\u044b\u0447\u043d\u043e. \u0414\u043b\u044f meetme \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0431\u043e\u0447\u0438\u0439 \u043d\u043e\u043c\u0435\u0440. \u041f\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c - \u0432\u0441\u0435. \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u0441 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u043d\u0430 CME \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0441 Cisco IP Communicator'\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 G711 \u0438 G729 \u043a\u043e\u0434\u0435\u043a\u0438.</p> <p>\u0421\u043c\u043e\u0442\u0440\u0438\u043c \u0442\u0435\u0441\u0442\u043e\u0432\u0443\u044e \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e \u0438\u0437 \u0442\u0440\u0435\u0445 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432: <pre><code>router#sh sccp all\nSCCP Admin State: UP\nGateway Local Interface: FastEthernet0/1.110\n        IPv4 Address: 10.10.10.254\n        Port Number: 2000\nIP Precedence: 5\nUser Masked Codec list: None\nCall Manager: 10.10.10.254, Port Number: 2000\n  Priority: N/A, Version: 7.0, Identifier: 100\n  Trustpoint: N/A\n\nConferencing Oper State: ACTIVE - Cause Code: NONE\nActive Call Manager: 10.10.10.254, Port Number: 2000\nTCP Link Status: CONNECTED, Profile Identifier: 1\nReported Max Streams: 16, Reported Max OOS Streams: 0\nSupported Codec: g711ulaw, Maximum Packetization Period: 30\nSupported Codec: g711alaw, Maximum Packetization Period: 30\nSupported Codec: g729ar8, Maximum Packetization Period: 60\nSupported Codec: g729abr8, Maximum Packetization Period: 60\nSupported Codec: g729r8, Maximum Packetization Period: 60\nSupported Codec: g729br8, Maximum Packetization Period: 60\nSupported Codec: rfc2833 dtmf, Maximum Packetization Period: 30\nSupported Codec: rfc2833 pass-thru, Maximum Packetization Period: 30\nSupported Codec: inband-dtmf to rfc2833 conversion, Maximum Packetization Period: 30\n\n\nSCCP Application Service(s) Statistics:\n\nProfile Identifier: 1, Service Type: Conferencing\nTCP packets rx 1835, tx 1819\nUnsupported pkts rx 0, Unrecognized pkts rx 0\nRegister tx 1, successful 1, rejected 0, failed 0\nUnregister tx 0, successful 0\nKeepAlive tx 1808, successful 1808, failed 0\nOpenReceiveChannel rx 6, successful 6, failed 0\nCloseReceiveChannel rx 3, successful 0, failed 0\nStartMediaTransmission rx 6, successful 3, failed 0\nStopMediaTransmission rx 3, successful 0, failed 0\nPortReq rx 0\nPortRes tx 0, successful 0, failed 0\nPortClose rx 0\nQosListen rx 0\nQosPath rx 0\nQosTeardown rx 0, send 0, recv 0, sendrecv 0\nQosResvNotify tx 0, send 0, recv 0, sendrecv 0\nQosErrorNotify tx 0, send 0, recv 0, sendrecv 0\n   err0 0, err1 0, err2 0, err3 0, err4 0, err5 0,\n   err6 0, err7 0, err8 0, err9 0, err10 0, err11 0,\n   err12 0\nQosModify rx 0, send 0, recv 0, sendrecv 0\nUpdateDscp rx 0\nReset rx 0, successful 0, failed 0\nMediaStreamingFailure rx 6\nMediaStreamingFailure tx 0\nSwitchover 0, Switchback 0\n\nCCM Group Identifier: 1\n Description: None\n Binded Interface: FastEthernet0/1.110\n        IPv4 Address: 10.10.10.254\n Associated CCM Id: 1, Priority in this CCM Group: 1\n Associated Profile: 1, Registration Name: mtp002414de5631\n Registration Retries: 3, Registration Timeout: 10 sec\n Keepalive Retries: 16, Keepalive Timeout: 10 sec\n CCM Connect Retries: 3, CCM Connect Interval: 10 sec\n Switchover Method: GRACEFUL, Switchback Method: GRACEFUL_GUARD\n Switchback Interval: 10 sec, Switchback Timeout: 7200 sec\n Signaling DSCP value: cs3, Audio DSCP value: ef\n\nsess_id    conn_id      stype mode     codec   sport rport ripaddr\n\n3221356546 65542        conf  sendrecv g729    17742 2000  10.10.10.254\n3221356546 65541        conf  sendrecv g729    17264 2000  10.10.10.254\n3221356546 65540        conf  sendrecv g729    17148 2000  10.10.10.254\n\nTotal number of active session(s) 1, and connection(s) 3\n\nsess_id    conn_id    st ev orc_ts     orca_ts    crc_ts     stmt_ts    spmt_ts    dis_ind_ts preq_ts    pc_ts      qosl_ts    qost_r_ts  qosp_ts    qost_s_ts \n\n3221356546 65542      -  -  61980160   61980200   0          61980212   0          0          0          0          0          0          0          0         \n3221356546 65541      -  -  61978476   61978492   0          61978504   0          0          0          0          0          0          0          0         \n3221356546 65540      -  -  61978388   61978440   0          61978452   0          0          0          0          0          0          0          0         \n\nTotal number of active session(s) 1, and connection(s) 3\n\n\nbridge-info(bid, cid) - Normal bridge information(Bridge id, Calleg id)\nmmbridge-info(bid, cid) - Mixed mode bridge information(Bridge id, Calleg id)\n\nsess_id    conn_id    call-id    codec   pkt-period dtmf_method    type        bridge-info(bid, cid)   mmbridge-info(bid, cid) srtp_cryptosuite          dscp      \n\n3221356546 -          1249       N/A     N/A        none              confmsp   All RTPSPI Callegs      All MM-MSP Callegs      N/A                       N/A       \n\n3221356546 65542      1255       g729    20         none              rtpspi    (390,1249)               N/A                     N/A                       0         \n\n3221356546 65541      1252       g729    20         rfc2833_pthru     rtpspi    (388,1249)               N/A                     N/A                       0         \n\n3221356546 65540      1248       g729    20         rfc2833_pthru     rtpspi    (386,1249)               N/A                     N/A                       0         \n\n\nTotal number of active session(s) 1, connection(s) 3, and callegs 4\n\nSCCP Application Service(s) Statistics Summary:\nTotal Conferencing Sessions: 1, Connections: 3\nTotal Transcoding Sessions: 0, Connections: 0\nTotal MTP Sessions: 0, Connections: 0\nTotal ALG-Phone Sessions: 0, Connections: 0\nTotal BRI-Phone Sessions: 0, Connections: 0\nTotal SCCP Sessions: 1, Connections: 3\n\n\nsess_id    conn_id    rsvp_id    dir  local ip       :port  remote ip      :port \n\n\n Total active sessions 1, connections 3, rsvp sessions 0\nStatistic                  Count\n-------------------------  -----------\nSend queue enqueue error   0\nSocket send error          1\nMsgs discarded upon error  0\n</code></pre></p> <p>\u0415\u0441\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0432 \u0432\u044b\u0432\u043e\u0434\u0435 <pre><code>router#sh dspfarm all\nDspfarm Profile Configuration\n\n Profile ID = 1, Service = CONFERENCING, Resource ID = 1  \n Profile Description :  \n Profile Service Mode : Non Secure \n Profile Admin State : UP \n Profile Operation State : ACTIVE \n Application : SCCP   Status : ASSOCIATED \n Resource Provider : FLEX_DSPRM   Status : UP \n Number of Resource Configured : 2 \n Number of Resource Available : 2         # \u043a\u0430\u043a \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u044d\u0442\u043e \u0447\u0438\u0441\u043b\u043e?\n Codec Configuration \n Codec : g711ulaw, Maximum Packetization Period : 30 , Transcoder: Not Required \n Codec : g711alaw, Maximum Packetization Period : 30 , Transcoder: Not Required \n Codec : g729ar8, Maximum Packetization Period : 60 , Transcoder: Not Required \n Codec : g729abr8, Maximum Packetization Period : 60 , Transcoder: Not Required \n Codec : g729r8, Maximum Packetization Period : 60 , Transcoder: Not Required \n Codec : g729br8, Maximum Packetization Period : 60 , Transcoder: Not Required\n\n\nSLOT DSP VERSION  STATUS CHNL USE   TYPE    RSC_ID BRIDGE_ID PKTS_TXED PKTS_RXED\n\n0    1   24.3.2   UP     1    USED  conf    1      0x182       6165      6174     # \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f 01 \u043a\u0430\u043d\u0430\u043b (\u0441\u043c. \u043d\u0438\u0436\u0435)\n0    1   24.3.2   UP     1    USED  conf    1      0x184       6165      6172     \n0    1   24.3.2   UP     1    USED  conf    1      0x186       6086      6007     \n0    1   24.3.2   UP     N/A  FREE  conf   1      -         -         -        \n\nTotal number of DSPFARM DSP channel(s) 2\n\n\n\n\n\nrouter#sh voice dsp voice \n\nDSP  DSP                DSPWARE CURR  BOOT                         PAK     TX/RX\nTYPE NUM CH CODEC       VERSION STATE STATE   RST AI VOICEPORT TS ABORT  PACK COUNT\n==== === == ======== ========== ===== ======= === == ========= == ===== ============\nedsp 0001 01 g729r8    0.1 IDLE  50/0/1.1     \nedsp 0002 02 g729r8 p  0.1 IDLE  50/0/1.2     \n[skip]  \nedsp 0010 01 g729r8    0.1 busy  50/0/40.1 # \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f   \n[skip]\nedsp 0030 01 g729r8    0.1 busy  50/0/100.1  # \nedsp 0031 02 g729r8    0.1 busy  50/0/100.2  # \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f 3 \u043b\u0438\u043d\u0438\u0438 Ad-Hoc\nedsp 0032 01 g729r8    0.1 busy  50/0/101.1  # \nedsp 0033 02 g729r8 p  0.1 IDLE  50/0/101.2   \nedsp 0034 01 g729r8 p  0.1 IDLE  50/0/102.1   \nedsp 0035 02 g729r8 p  0.1 IDLE  50/0/102.2   \n[skip]\n\n\n----------------------------FLEX VOICE CARD 0 ------------------------------\n                           *DSP VOICE CHANNELS*\n\nCURR STATE : (busy)inuse (b-out)busy out (bpend)busyout pending \nLEGEND     : (bad)bad    (shut)shutdown  (dpend)download pending\n\nDSP   DSP                 DSPWARE CURR  BOOT                         PAK   TX/RX\nTYPE  NUM CH CODEC        VERSION STATE STATE   RST AI VOICEPORT TS ABRT PACK COUNT\n===== === == ========= ========== ===== ======= === == ========= == ==== ============\n# \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043a\u0430\u043d\u0430\u043b 01\nC5510 001 02 None          24.3.2 idle  idle      0  0                 0          0/0 \nC5510 001 03 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 04 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 05 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 06 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 07 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 08 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 09 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 10 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 11 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 12 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 13 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 14 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 15 None          24.3.2 idle  idle      0  0                 0          0/0\nC5510 001 16 None          24.3.2 idle  idle      0  0                 0          0/0\n------------------------END OF FLEX VOICE CARD 0 ----------------------------\n</code></pre></p>"},{"location":"voip/cisco_cme/#meetme","title":"Meetme \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f","text":"<p>CUCME \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0447\u0442\u043e-\u0442\u043e \u043d\u0430\u043f\u043e\u0434\u043e\u0431\u0438\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439. \u0424\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f Meetme, \u043a\u043e\u0433\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c \u043d\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0438 \u043f\u043e\u043f\u0430\u0441\u0442\u044c \u0432 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e, \u0432 \u043e\u0442\u043b\u0438\u0447\u0438\u0438 \u043e\u0442 Ad-hoc \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439, \u043a\u043e\u0433\u0434\u0430 \u0434\u043e \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c\u0441\u044f.</p> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 \u043e\u0441\u0442\u0430\u044e\u0442\u0441\u044f \u043f\u0440\u0435\u0436\u043d\u0438\u043c\u0438. \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e ephone-dn: <pre><code>ephone-dn  111  dual-line\n number 2222\n conference meetme\n preference 2\n no huntstop\n!\n!\nephone-dn  112  dual-line\n number 2222\n conference meetme\n preference 3\n no huntstop\n!\n!\nephone-dn  113  dual-line\n number 2222\n conference meetme\n preference 4\n no huntstop\n!\n!\nephone-dn  114  dual-line\n number 2222\n conference meetme\n preference 5\n no huntstop\n!\n!\nephone-dn  115  dual-line\n number 2222\n conference meetme\n preference 6\n no huntstop\n!\n!\nephone-dn  116  dual-line\n number 2222\n conference meetme\n preference 7\n no huntstop\n!\n!\nephone-dn  117  dual-line\n number 2222\n conference meetme\n preference 8\n no huntstop\n!\n!\nephone-dn  118  dual-line\n number 2222\n conference meetme\n preference 9\n no huntstop\n!\n!\nephone-dn  119  dual-line\n number 2222\n conference meetme\n preference 10\n no huntstop\n!\n!\nephone-dn  120  dual-line\n number 2222\n conference meetme\n preference 10\n no huntstop\n!\n!\nephone-dn  121  dual-line\n number 2222\n conference meetme\n preference 10\n no huntstop\n!\n!\nephone-dn  122  dual-line\n number 2222\n conference meetme\n preference 10\n no huntstop\n!\n!\nephone-dn  123  dual-line\n number 2222\n conference meetme\n preference 10\n no huntstop\n!\n!\nephone-dn  124  dual-line\n number 2222\n conference meetme\n preference 10\n</code></pre> \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e dn \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0447\u0438\u0441\u043b\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432, \u043a\u0430\u043a \u0438 \u0432 Ad-hoc \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f\u0445. \u041f\u043e\u043d\u044f\u0442\u043d\u043e, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0440\u0435\u0441\u0443\u0440\u0441\u044b DSP. \u041a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0441\u0442\u0440\u043e\u043a\u0438 conference meetme \u0445\u043e\u0442\u044f \u0431\u044b \u0432 \u043e\u0434\u043d\u043e\u0439 DN. \u0418 \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0438\u043b\u0438 ip-\u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0442\u043e\u0440\u0430 Cisco \u0438\u043c\u0435\u044e\u0449\u0435\u0433\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u044b\u0435 \u043a\u043b\u0430\u0432\u0438\u0448\u0438. \u0418\u0445 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043a \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044e. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043d\u0438\u0436\u0435 \u0442\u0430\u043a\u043e\u0435 \u043f\u0440\u043e\u0434\u0435\u043b\u0430\u043d\u043e \u0434\u043b\u044f ip-\u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0442\u043e\u0440\u0430: <pre><code>ephone-template  1\n softkeys hold  Newcall Resume Select Join\n softkeys idle  Cfwdall ConfList Dnd Gpickup HLog Join Login Newcall Pickup Redial RmLstC\n softkeys seized  Redial Pickup Gpickup HLog Meetme Endcall\n softkeys connected  Acct ConfList Confrn Endcall Flash HLog Hold Join Park RmLstC Select Trnsfer\nephone  89\n device-security-mode none\n mac-address 0025.B311.E0D0\n ephone-template 1\n type CIPC\n button  1:10\n</code></pre> \u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438:</p> <ul> <li>\u0441\u043d\u0438\u043c\u0430\u0435\u043c \"\u0442\u0440\u0443\u0431\u043a\u0443\" \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0435.</li> <li>\u0432\u044b\u0431\u0438\u0440\u0430\u0435\u043c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u0443\u044e \u043a\u043b\u0430\u0432\u0438\u0448\u0443 Meetme (\u0434\u043b\u044f \u0440\u0443\u0441\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u044d\u0442\u043e \u041a\u043e\u043d\u0444\u2116). \u041e\u043d\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0430, \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c DN c conference meetme. \u0423\u0441\u043b\u044b\u0448\u0438\u0442\u0435 \u0442\u043e\u043d\u043e\u0432\u044b\u0439 \u0441\u0438\u0433\u043d\u0430\u043b \u043f\u043e \u043d\u0430\u0436\u0430\u0442\u0438\u044e.</li> <li>\u043d\u0430\u0431\u0438\u0440\u0430\u0435\u043c \u043d\u043e\u043c\u0435\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 2222.</li> </ul> <p>\u0412\u0441\u0435 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0437\u0432\u043e\u043d\u0438\u0442\u044c \u043d\u0430 2222 \u0431\u0435\u0437 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439 \u043a\u0430\u043a \u043d\u0430 \u043e\u0431\u044b\u0447\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440. \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f join \u0438 leave \u0442\u043e\u043d\u043e\u0432\u044b\u043c\u0438 \u0441\u0438\u0433\u043d\u0430\u043b\u0430\u043c\u0438. \u041a \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043a\u0443 \u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043d\u0435\u0441\u0442\u0438 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430\u043c\u0438 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u0438\u0437-\u0437\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u0440\u0443\u0441\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438. \u0412\u0441\u0435 \u043c\u0435\u043d\u044e \u0441 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430\u043c\u0438 \u0432 \u043a\u0440\u0430\u043a\u043e\u0437\u044f\u0431\u0440\u0430\u0445. \u041a \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u043c \u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043d\u0435\u0441\u0442\u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u0430\u043f\u043f\u0430\u0440\u0430\u0442\u043e\u0432, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0449\u0438\u0445 sccp \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e. Cisco IP-Phone \u0441 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0430\u043c\u0438 SIP, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0435 \u0448\u043b\u044e\u0437\u044b ATA \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0438 Meetme.</p>"},{"location":"voip/cisco_cor/","title":"Cisco COR list","text":"<p>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043c\u0435\u0436\u0433\u043e\u0440\u043e\u0434\u0430 - \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0432\u043e\u0441\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f, \u043a\u043e\u0433\u0434\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442 COR-\u043b\u0438\u0441\u0442\u044b \u043d\u0430 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u044b\u0445 \u0448\u043b\u044e\u0437\u0430\u0445 cisco. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0447\u0435\u0442\u043a\u043e \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c, \u043a\u043e\u0433\u0434\u0430 \u043e\u043d\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0438 \u0432 \u043a\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0432 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0435. \u041f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u0441\u0435 \u0437\u0432\u043e\u043d\u043a\u0438 \u0441 \u043d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u043c \u043d\u043e\u043c\u0435\u0440\u043e\u043c, \u043d\u0435 \u043f\u043e\u043f\u0430\u0432\u0448\u0438\u0435 \u043d\u0438 \u0432 \u043a\u0430\u043a\u043e\u0439 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0439 dial-peer, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0439 dial-peer 0 , \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0435\u043b\u044c\u0437\u044f \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c. \u0422\u0430\u043a\u043e\u0439 \u0432\u044b\u0437\u043e\u0432 \u0431\u0443\u0434\u0435\u0442 \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 corlist'\u044b \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0435\u043c dial-peer'\u0435. \u041f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e:</p> COR List on Incoming dial-peer COR List on Outgoing dial-peer Result Reason No COR. No COR. Call succeeds. COR is not in the picture. No COR. COR list applied for outgoing calls. Call succeeds. The incoming dial-peer, by default, has the highest COR priority when no COR is applied. Therefore, if you apply no COR for an incoming call leg to a dial-peer, then this dial-peer can make calls out of any other dial-peer, irrespective of the COR configuration on the outgoing dial-peer. The COR list applied for incoming calls. No COR. Call succeeds. The outgoing dial-peer, by default, has the lowest priority. Since there are some COR configurations for incoming calls on the incoming/originating dial-peer, it is a super set of the outgoing call COR configurations on the outgoing/terminating dial-peer. The COR list applied for incoming calls (super set of COR lists applied for outgoing calls on the outgoing dial-peer). The COR list applied for outgoing calls (subset of COR lists applied for incoming calls on the incoming dial-peer.) Call succeeds. The COR list for incoming calls on the incoming dial-peer is a super set of COR lists for outgoing calls on the outgoing dial-peer The COR list applied for incoming calls (subset of COR lists applied for outgoing calls on the outgoing dial-peer). The COR list applied for outgoing calls (super set of COR lists applied for incoming calls on the incoming dial-peer). Call cannot be completed using this outgoing dial-peer. COR lists for incoming calls on the incoming dial-peer are not a super set of COR lists for outgoing calls on the outgoing dial-peer. <p>\u041f\u0443\u0441\u0442\u044c \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0439 \u0448\u043b\u044e\u0437 \u0421isco. \u0414\u043b\u044f corlist'\u0430 \u043d\u0435\u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0438\u0430\u043b\u044c\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043d\u0430 voip \u0438\u043b\u0438 pots dial-peer'\u0430\u0445. \u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u043c\u0438:</p> <ol> <li>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \"\u043c\u0435\u0436\u0433\u043e\u0440\u043e\u0434\", \u043d\u0430\u0431\u043e\u0440 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 98</li> <li>\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u044b\u0445\u043e\u0434 \u0432 \u0433\u043e\u0440\u043e\u0434, \u043d\u0430\u0431\u043e\u0440 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 9</li> <li>\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u044b\u0445\u043e\u0434 \u043d\u0430 \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430, \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u043d\u0430 2 \u0438 3.</li> </ol> <p>\u0418\u043c\u0435\u0435\u043c ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u044b Cisco \u0432 \u043d\u0443\u043c\u0435\u0440\u0430\u0446\u0438\u0438 211x, \u043e\u0434\u043d\u043e\u043c\u0443 \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 (2111) \u043d\u0430\u0434\u043e \u0437\u0430\u043a\u0440\u044b\u0442\u044c \"\u043c\u0435\u0436\u0433\u043e\u0440\u043e\u0434\" \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439 \u0448\u043b\u044e\u0437 \u0441 \u043d\u043e\u043c\u0435\u0440\u0430\u043c\u0438 311\u0445, \u0433\u0434\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u043e\u043c\u0435\u0440\u0443 3111 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0442\u043a\u0440\u044b\u0442\u044c \"\u043c\u0435\u0436\u0433\u043e\u0440\u043e\u0434\". \u041f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u0441\u044f \u0432\u0441\u0435\u0433\u043e \u0434\u0432\u0430 corlist'\u0430. \u0411\u0443\u0434\u0435\u043c \u043f\u0440\u043e\u0449\u0435 \u0438 \u043d\u0430\u0437\u043e\u0432\u0435\u043c \u0438\u0445 Limit \u0438 NoLimit, \u0442\u0430\u043a \u043a\u0430\u043a \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043d\u0438\u043a\u0430\u043a\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0432\u043e\u043e\u0431\u0449\u0435. <pre><code>dial-peer cor custom\n name Limit\n name NoLimit\n!\n!\ndial-peer cor list Limit\n member Limit\n!\ndial-peer cor list NoLimit\n member Limit\n member NoLimit\n</code></pre> \u0418\u0441\u0445\u043e\u0434\u044f \u0438\u0437 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u0447\u0442\u043e \u043f\u0440\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 corlist'\u043e\u0432 \u043d\u0430 dial-peer'\u0430\u0445 \u0432\u0441\u0435 \u0432\u044b\u0437\u043e\u0432\u044b \u0431\u0443\u0434\u0443\u0442 \u0431\u0435\u0441\u043f\u0440\u0435\u043f\u044f\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f, \"\u0432\u0435\u0448\u0430\u0435\u043c\" \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 corlist'\u044b <pre><code>dial-peer voice 98 voip\n corlist outgoing NoLimit\n description MejGorod\n destination-pattern 98T\n session target ipv4:10.0.0.100\n no vad\ndial-peer voice 9 voip\n corlist outgoing Limit\n description Gorod\n destination-pattern 9[012345679]T\n session target ipv4:10.0.0.100\n no vad\ndial-peer voice 2000 voip\n corlist outgoing Limit\n description Corporate\n destination-pattern [23]...\n session target ipv4:10.0.0.100\n no vad\n</code></pre> \u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 corlist'\u044b. \u041f\u043e\u043c\u043d\u0438\u043c, \u0447\u0442\u043e \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u043b\u0438\u0441\u0442\u0430 \u0440\u0430\u0432\u043d\u043e\u0446\u0435\u043d\u043d\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u043c\u0443 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0443, \u0430 \u043d\u0435\u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u043b\u0438\u0441\u0442\u043e\u0432 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0438\u043c \u043f\u0440\u0438\u0437\u043d\u0430\u043a\u043e\u043c \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u043e\u0442\u043a\u0430\u0437\u0443 \u0432 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0432\u044b\u0437\u043e\u0432\u0430. <pre><code>ephone-dn 10\n number 2110\n!\nephone-dn 11\n number 2111\n corlist incoming Limit\n!\nephone-dn 12\n number 2112\n!\nephone-dn 13\n number 2113\n!\nephone-dn 14\n number 2114\n!\nephone-dn 15\n number 2115\n!\nephone-dn 16\n number 2116\n!\nephone-dn 17\n number 2117\n!\nephone-dn 18\n number 2118\n!\nephone-dn 19\n number 2119\n!\ndial-peer voice 3110 voip\n corlist incoming Limit\n description Remote Gateway\n huntstop\n destination-pattern 311.\n session target ipv4:10.100.0.100\n no vad\n!\ndial-peer voice 3111 voip\n description Happy User on Remote Gateway\n huntstop\n destination-pattern 3111\n session target ipv4:10.100.0.100\n no vad\n</code></pre> \u041d\u0430 ephone-dn \u0438 dial-peer'\u0430\u0445 \u0432\u044b\u0448\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u043b\u044e\u0431\u044b\u0435 \"corlist outgoing\", \u0430 \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0438\u0442, \u0447\u0442\u043e 2111 \u0438 311.  \u043c\u043e\u0433\u0443\u0442 \u0431\u0435\u0441\u043f\u0440\u0435\u043f\u044f\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0437\u0432\u043e\u043d\u0438\u0442\u044c \u043d\u0430 \u0432\u0441\u0435 \u043d\u043e\u043c\u0435\u0440\u0430 (211\u0445 \u0438 311\u0445) \u043d\u0430 \u0434\u0430\u043d\u043d\u043e\u043c \u0448\u043b\u044e\u0437\u0435. \u041f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0442\u0430\u043a \u0437\u0430\u0434\u0443\u043c\u0430\u043d\u043e \u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u043e \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435.</p>"},{"location":"voip/cisco_cube/","title":"Cisco CUBE","text":"<p>CUBE - \u044d\u0442\u043e \u0447\u0442\u043e-\u0442\u043e \u0432\u0440\u043e\u0434\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 \u0432 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438 \u0438\u043b\u0438 ip-to-ip \u0448\u043b\u044e\u0437\u0430, \u043a\u0430\u043a \u043f\u0438\u0441\u0430\u043b\u0438 \u0440\u0430\u043d\u0435\u0435. Cisco Unified Border Element Configuration Guide. \u041d\u0438\u0436\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043b\u044f IOS 15.x. \u041f\u0443\u0441\u0442\u044c \u0431\u0443\u0434\u0435\u0442 \u0448\u043b\u044e\u0437\u043e\u043c \u043c\u0435\u0436\u0434\u0443 \u0434\u0432\u0443\u043c\u044f \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u043c\u0438 \u0441\u0442\u0430\u043d\u0446\u0438\u044f\u043c\u0438 host1 \u0438 host2. \u041a\u0430\u0436\u0434\u0430\u044f \u0441\u0442\u0430\u043d\u0446\u0438\u044f \u0438\u043c\u0435\u0435\u0442 \u043c\u0430\u0440\u0448\u0440\u0443\u0442, \u0434\u043e\u0441\u0442\u0443\u043f \u0434\u043e \u0430\u0434\u0440\u0435\u0441\u0430 \u043d\u0430 Loopback0 CUBE, \u043d\u043e \u043d\u0435 \u0434\u043e \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u0430. <pre><code>voice rtp send-recv\n!\nvoice service voip\n ip address trusted list\n  ipv4 &lt;host1&gt; 255.255.255.255\n  ipv4 &lt;host2&gt; 255.255.255.255\n allow-connections sip to sip\n fax protocol t38 version 0 ls-redundancy 0 hs-redundancy 0 fallback none\n sip\n  bind control source-interface Loopback0\n  bind media source-interface Loopback0\n</code></pre> \u0434\u0438\u0430\u043b\u043f\u0438\u0440\u044b \u043d\u0430 host1 \u0438 host2. \u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043b\u0443\u0447\u0448\u0435 \u043d\u0435 \u043d\u0430\u0434\u043e, \u0447\u0442\u043e\u0431\u044b \u0432\u044b\u0437\u043e\u0432\u044b \u043d\u0435 \u043f\u0435\u0442\u043b\u044f\u043b\u0438 \u043c\u0435\u0436\u0434\u0443 \u0448\u043b\u044e\u0437\u0430\u043c\u0438, \u0435\u0441\u043b\u0438 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u042d\u0442\u043e \u043a\u0430\u0441\u0430\u0435\u0442\u0441\u044f \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e cube, \u043d\u043e \u0438 \u0441\u0442\u0430\u043d\u0446\u0438\u0439 host1 \u0438 host2. huntstop - \u043f\u0440\u0435\u043a\u0440\u0430\u0442\u0438\u0442\u044c \u043f\u043e\u0438\u0441\u043a \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f, \u043a\u043e\u0433\u0434\u0430 sip-\u0442\u0440\u0430\u043d\u043a \u0434\u043e host2 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 udp, \u0430 \u0434\u043e host1 \u043f\u043e tcp \u0438 \u043f\u043e\u0440\u0442 \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439. \u0411\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0438 \u0442\u0430\u043a. \u041d\u0430 \u0441\u0442\u0430\u043d\u0446\u0438\u044f\u0445 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0442\u0440\u0430\u043d\u043a\u0438 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 lo0 cube \u0431\u0435\u0437 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438. \u0425\u043e\u0441\u0442\u044b \u0441\u0442\u0430\u043d\u0446\u0438\u0439 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u0432 trusted \u043b\u0438\u0441\u0442\u0435 \u043d\u0430 cube. <pre><code>dial-peer voice 100 voip\n huntstop\n destination-pattern [567]..\n session protocol sipv2\n session target ipv4:&lt;host1&gt;:5080\n session transport tcp\n codec g711alaw\n!\ndial-peer voice 200 voip\n huntstop\n destination-pattern [234]..\n session protocol sipv2\n session target ipv4:&lt;host2&gt;\n session transport udp\n dtmf-relay rtp-nte\n codec g711alaw\n</code></pre> \u041a\u043e\u0433\u0434\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u044b\u0439 \u0434\u0438\u0430\u043b\u043f\u0438\u0440 \u043d\u0430 host3, \u0442\u043e \u0443\u0431\u0440\u0430\u0442\u044c <code>huntstop</code> \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c \u0438 \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c <code>preference 10</code> \u043d\u0430 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u043c \u0434\u0438\u0430\u043b\u043f\u0438\u0440\u0435. <pre><code>dial-peer voice 200 voip\n destination-pattern [234]..\n session protocol sipv2\n session target ipv4:&lt;host2&gt;\n session transport udp\n dtmf-relay rtp-nte\n codec g711alaw\ndial-peer voice 300 voip\n huntstop\n preference 10\n destination-pattern [234]....\n session protocol sipv2\n session target ipv4:&lt;host3&gt;\n session transport udp\n dtmf-relay rtp-nte\n codec g711alaw\n</code></pre> \u041e\u0431\u044b\u0447\u043d\u043e \u043d\u0430 cube \u0448\u043b\u044e\u0437\u0430\u0445 \u043d\u0435 \u0434\u0435\u043b\u0430\u044e\u0442 \u0442\u0440\u0430\u043d\u0441\u043a\u043e\u0434\u0438\u043d\u0433, \u043d\u0443 \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u043e\u043d \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u043a CUBE \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0444\u0435\u0440\u043c\u044b. \u041c\u043e\u0436\u043d\u043e \u043d\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u044f\u0432\u043d\u043e\u043c \u0432\u0438\u0434\u0435 \u043a\u043e\u0434\u0435\u043a, \u0443\u043a\u0430\u0437\u0430\u0432: <pre><code> codec transparent\n</code></pre> \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0432\u043e\u043d\u043a\u043e\u0432 <pre><code>sh voip rtp connections\n</code></pre> \u041e\u0442\u043b\u0430\u0434\u043a\u0430 <pre><code>debug voip ccapi inout\ndebug ccsip\n</code></pre></p>"},{"location":"voip/cisco_e1_gateway/","title":"Cisco E1 gateway","text":""},{"location":"voip/cisco_e1_gateway/#e1-gateway","title":"E1 gateway","text":"<p>\u041d\u0430\u043f\u0438\u0441\u0430\u043d\u043e \u0432 2009. \u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438 \u0438\u043b\u0438 \u0438\u043c\u0435\u044e\u0449\u0438\u0445\u0441\u044f \u043b\u0438\u0446\u0435\u043d\u0437\u0438\u0439 \u043d\u0430 \u043d\u0435\u0435, \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0432\u0430 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430 \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438: QSIG \u0438 Euro ISDN (net5 \u0432 cisco). \u041f\u0435\u0440\u0432\u044b\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0441\u0435\u0442\u044f\u0445 \u0438 \u0438\u0437\u0432\u0435\u0441\u0442\u0435\u043d \u0441\u0432\u043e\u0438\u043c\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u043c\u0438, \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0435\u0439. \u041e\u0447\u0435\u043d\u044c \u0443\u0434\u043e\u0431\u043d\u043e, \u043a\u043e\u0433\u0434\u0430 \u043d\u0430 \u0434\u0438\u0441\u043f\u043b\u0435\u0435 \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u043f\u043e\u043c\u0438\u043c\u043e \u043d\u043e\u043c\u0435\u0440\u0430 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044f \u0424\u0418\u041e \u0437\u0432\u043e\u043d\u044f\u0449\u0435\u0433\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430. \u0412\u0442\u043e\u0440\u043e\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0442\u044f\u043c \u043e\u0431\u0449\u0435\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0432 \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0441\u0435\u0442\u044f\u0445, \u0435\u0441\u043b\u0438 \u043f\u043e \u043a\u0430\u043a\u0438\u043c-\u0442\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0430\u043c \u0432\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c QSIG. \u0415\u0441\u043b\u0438 \u043e\u0434\u0438\u043d \u043f\u043e\u0440\u0442, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0441\u0442\u0430\u043d\u0446\u0438\u044f, \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 network, \u0442\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440 - user. \u0418 \u043d\u0430\u043e\u0431\u043e\u0440\u043e\u0442.</p> <p>\u0412 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u0434\u0432\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0445 \u0441\u0442\u0430\u043d\u0446\u0438\u0438, \u043a\u0430\u0436\u0434\u0430\u044f \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u043c PRI \u043a \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430\u043c Cisco, \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u044b\u0445 \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0431\u043e\u0439 \u043d\u0435\u043a\u043e\u0439 \u0441\u0435\u0442\u044c\u044e \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0434\u0430\u043d\u043d\u044b\u0445.</p> <p>\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435:</p> <ol> <li>\u041c\u043e\u0434\u0435\u043b\u044c \u0438\u0437 \u0441\u0435\u0440\u0438\u0438 2800, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, 2811. \u041c\u043e\u0434\u0435\u043b\u044c \u0438\u0437 \u0441\u0435\u0440\u0438\u0438 3800, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, 3845. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0442\u043e\u0440 Cisco, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044e \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f.</li> <li>\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u043e\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430. \u0415\u0441\u043b\u0438 \u0432\u044b \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438\u0441\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0442\u043e\u0440\u043e\u043c, \u0442\u043e \u043d\u0430\u0432\u0435\u0440\u043d\u044f\u043a\u0430 \u0432\u043a\u043b\u044e\u0447\u0438\u043b\u0438 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u043e\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 IOS IP VOICE/SP SERVICES, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0432\u0445\u043e\u0434\u0438\u0442 \u0432 \u0441\u043e\u0441\u0442\u0430\u0432 \u0442.\u043d. bundle Voice (V_K9)</li> <li>\u0415\u0441\u043b\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u0438\u043c \u043f\u043e\u0442\u043e\u043a\u043e\u043c, \u0442\u043e \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043a\u0430\u0440\u0442\u044b VWIC2-1MFT-T1/E1 (1-Port 2nd Gen Multiflex Trunk Voice/WAN Int. Card - T1/E1)</li> <li>\u0414\u043b\u044f \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0433\u043e\u043b\u043e\u0441\u0430 \u0432 ip \u0438 \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u043a\u0430\u0440\u0442\u044b PVDM2 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u0446\u0438\u0444\u0440\u043e\u0432\u044b\u0445 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u043e\u0432 DSP, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0449\u0438\u0445 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435/\u0434\u0435\u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u043b\u043e\u0441\u0430. \u0415\u0441\u0442\u044c \u043a\u0430\u0440\u0442\u044b \u043d\u0430 8,16,32,48,64 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430. \u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u0438\u0440\u0443\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c 16 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0437\u0432\u043e\u043d\u043a\u043e\u0432, \u0442\u043e \u043c\u043e\u0436\u043d\u043e \u043e\u0431\u043e\u0439\u0442\u0438\u0441\u044c PVDM2-16, \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0432 \u0441\u043e\u0441\u0442\u0430\u0432 \u0421ISCO2811-V_K9. \u0415\u0441\u043b\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0442\u0430\u0439\u043c\u0441\u043b\u043e\u0442\u044b \u043d\u0430 \u043a\u0430\u0440\u0442\u0435 \u0441\u0442\u0430\u043d\u0446\u0438\u0438, \u0442\u043e - PVDM2-32 \u043c\u0438\u043d\u0438\u043c\u0443\u043c. \u0415\u0441\u043b\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0442\u0430\u043c\u0438 \u0441 FXS/FXO \u043f\u043e\u0440\u0442\u0430\u043c\u0438, \u0442\u043e \u043a\u0430\u0436\u0434\u044b\u0439 \u043f\u043e\u0440\u0442 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c 1 DSP \u0438\u0437 \u0438\u043c\u0435\u044e\u0449\u0438\u0445\u0441\u044f. \u041d\u0435\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u044d\u0442\u043e \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c.</li> </ol> <p>\u041f\u0443\u0441\u0442\u044c \u0438\u043c\u0435\u0435\u043c \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440 CISCO3845-V_K9 \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u0438 (\u0441\u0435\u0440\u0438\u0439\u043d\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u044b): <pre><code>router1#show inventory\nNAME: \"3845 chassis\", DESCR: \"3845 chassis\"\nPID: CISCO3845         , VID: V01 , SN: x\n\nNAME: \"c3845 Motherboard with Gigabit Ethernet on Slot 0\", DESCR: \"c3845 Motherboard with Gigabit Ethernet\"\nPID: CISCO3845-MB      , VID: V06 , SN: x\n\nNAME: \"VWIC2-1MFT-T1/E1 - 1-Port RJ-48 Multiflex Trunk - T1/E1 on Slot 0 SubSlot 0\", DESCR: \"VWIC2-1MFT-T1/E1 - 1-Port RJ-48 Multiflex Trunk - T1/E1\"\nPID: VWIC2-1MFT-T1/E1  , VID: V01 , SN: x\n\nNAME: \"One-Port Fast Ethernet High Speed WAN Interface Card on Slot 0 SubSlot 1\", DESCR: \"One-Port Fast Ethernet High Speed WAN Interface Card\"\nPID: HWIC-1FE          , VID: V01 , SN: x\n\nNAME: \"VWIC2-1MFT-T1/E1 - 1-Port RJ-48 Multiflex Trunk - T1/E1 on Slot 0 SubSlot 3\", DESCR: \"VWIC2-1MFT-T1/E1 - 1-Port RJ-48 Multiflex Trunk - T1/E1\"\nPID: VWIC2-1MFT-T1/E1  , VID: V01 , SN: x\n\nNAME: \"PVDMII DSP SIMM with four DSPs on Slot 0 SubSlot 4\", DESCR: \"PVDMII DSP SIMM with four DSPs\"\nPID: PVDM2-64          , VID: V01 , SN: x\n</code></pre> \u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u0430\u044f \u0441\u0442\u0430\u043d\u0446\u0438\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0432 \u043f\u043e\u0440\u0442 Slot 0 Subslot 3. \u041e\u043d\u0430 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 QSIG \u043b\u0438\u0446\u0435\u043d\u0446\u0438\u0438, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u043f\u043e Euro ISDN. \u041a \u0442\u043e\u043c\u0443 \u0436\u0435 \u0441\u0442\u0430\u043d\u0446\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u0430\u043a user. \u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0437\u0430\u0434\u0430\u0435\u0442\u0441\u044f \u0440\u0435\u0436\u0438\u043c \u0440\u0430\u0431\u043e\u0442\u044b \u043a\u0430\u0440\u0442\u044b VWIC2-1MFT-T1/E1: <pre><code>card type e1 0 3\n</code></pre> \u0420\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u044e \u043e\u0442 \u044d\u0442\u043e\u0439 \u043a\u0430\u0440\u0442\u044b: <pre><code>network-clock-participate wic 3\n</code></pre> \u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u0435 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439, \u0435\u0441\u043b\u0438 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e: <pre><code>network-clock-select 1 E1 0/3/0\n</code></pre> \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u0438\u043f \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 Euro ISDN: <pre><code>isdn switch-type primary-net5\n</code></pre> \u041f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440 E1. \u0414\u043e\u0433\u043e\u0432\u0430\u0440\u0438\u0432\u0430\u0435\u043c\u0441\u044f, \u0447\u0442\u043e \u0432 E1 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f CRC4 \u0438 \u0431\u0443\u0434\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432\u0441\u0435 \u0438\u043c\u0435\u044e\u0449\u0438\u0435\u0441\u044f \u0442\u0430\u0439\u043c\u0441\u043b\u043e\u0442\u044b: <pre><code>controller E1 0/3/0\n framing NO-CRC4\n pri-group timeslots 1-31\n</code></pre> \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 D-\u043a\u0430\u043d\u0430\u043b\u0430, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0430\u0434\u043e \u0432\u043d\u0435\u0441\u0442\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 network: <pre><code>interface Serial0/3/0:15\n no ip address\n encapsulation hdlc\n isdn switch-type primary-net5\n isdn protocol-emulate network\n isdn incoming-voice voice\n isdn send-alerting\n isdn sending-complete\n no cdp enable\n</code></pre> \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0433\u0434\u0435 MULTIPLE_FRAME_ESTABLISHED - \u0432\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442. <pre><code>router1#show controllers e1\nE1 0/3/0 is up.\n  Applique type is Channelized E1 - balanced\n  Cablelength is Unknown\n  No alarms detected.\n  alarm-trigger is not set\n  Version info Firmware: 20071011, FPGA: 13, spm_count = 0\n  Framing is NO-CRC4, Line Code is HDB3, Clock Source is Line.\n  Data in current interval (581 seconds elapsed):\n     0 Line Code Violations, 0 Path Code Violations\n     0 Slip Secs, 0 Fr Loss Secs, 0 Line Err Secs, 0 Degraded Mins\n     0 Errored Secs, 0 Bursty Err Secs, 0 Severely Err Secs, 0 Unavail Secs\n  Total Data (last 24 hours)\n     0 Line Code Violations, 0 Path Code Violations,\n     0 Slip Secs, 0 Fr Loss Secs, 0 Line Err Secs, 0 Degraded Mins,\n     0 Errored Secs, 0 Bursty Err Secs, 0 Severely Err Secs, 0 Unavail Secs\nrouter1#show isdn status\nGlobal ISDN Switchtype = primary-net5\nISDN Serial0/3/0:15 interface\n ******* Network side configuration ******* \n dsl 0, interface ISDN Switchtype = primary-net5\n    Layer 1 Status:\n ACTIVE\n    Layer 2 Status:\n TEI = 0, Ces = 1, SAPI = 0, State = MULTIPLE_FRAME_ESTABLISHED\n    Layer 3 Status:\n 2 Active Layer 3 Call(s)\n CCB:callid=C78C, sapi=0, ces=0, B-chan=2, calltype=VOICE\n CCB:callid=3335, sapi=0, ces=0, B-chan=9, calltype=VOICE\n    Active dsl 0 CCBs = 2\n    The Free Channel Mask:  0xFFFF7EFD\n    Number of L2 Discards = 0, L2 Session ID = 1\n    Total Allocated ISDN CCBs = 2\n</code></pre> \u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f voip \u0447\u0430\u0441\u0442\u044c. \u0421\u0442\u0430\u0440\u0430\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0430 \u0431\u0435\u0437 sip. <pre><code>voice rtp send-recv\n!\nvoice service voip\n allow-connections h323 to h323\n h323\n</code></pre> \u041f\u043e\u0440\u0430 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0438\u0442\u044c \u043a \u043d\u043e\u043c\u0435\u0440\u043d\u043e\u043c\u0443 \u043f\u043b\u0430\u043d\u0443. \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0431\u044b\u043b \u0441\u043e\u0437\u0434\u0430\u043d \u043f\u043e\u0440\u0442 <code>voice-port 0/3/0:15</code>. \u0418\u043c\u0435\u043d\u043d\u043e \u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0442.\u043d. dial-peer - \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430\u0445 \u0437\u0432\u043e\u043d\u043a\u043e\u0432. \u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435:</p> <ul> <li>86101XXX - \u043d\u043e\u043c\u0435\u0440\u0430 \u043d\u0430 \u0410\u0422\u0421, \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u043e\u0439 \u043a \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0443 router1;</li> <li>86102XXXX - \u043d\u043e\u043c\u0435\u0440\u0430 \u043d\u0430 \u0410\u0422\u0421, \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u043e\u0439 \u043a \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0443 router2;</li> <li>10.0.0.1 - ip-\u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 router1, \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d router2;</li> <li>10.0.0.2 - ip-\u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 router2, \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d router1.</li> </ul> <p>\u041d\u043e\u043c\u0435\u0440\u0430 dial-peer \u0432\u044b\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u043e. \u0413\u043b\u0430\u0432\u043d\u043e\u0435, \u0447\u0442\u043e\u0431\u044b \u0431\u044b\u043b\u0438 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u043c\u0438. <pre><code>dial-peer voice 86101 pots\n destination-pattern 86101...\n progress_ind alert enable 8\n direct-inward-dial\n port 0/3/0:15\n forward-digits all\n!\ndial-peer voice 86102 voip\n destination-pattern 86102....\n session target ipv4:10.0.0.2\n dtmf-relay rtp-nte\n no vad\n \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043b\u044f \u0444\u0430\u043a\u0441\u043e\u0432\n fax-relay ecm disable\n fax rate 14400\n fax nsf 000000\n fax protocol t38 nse ls-redundancy 0 hs-redundancy 0 fallback cisco\n</code></pre> \u0421\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c, \u0447\u0442\u043e \u0432 dial-peer voip, \u0433\u0434\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f session target ipv4 \u043d\u0435\u043b\u044c\u0437\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430. \u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c:</p> <ul> <li>\u0434\u043b\u044f session target ras, \u043a\u043e\u0433\u0434\u0430 \u0432\u044b \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0435 h323-\u0448\u043b\u044e\u0437 \u0438 \u0432\u0432\u043e\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 \u0434\u043b\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043d\u0430 \u0433\u0435\u0439\u0442\u043a\u0438\u043f\u0435\u0440\u0435;</li> <li>\u0434\u043b\u044f session target sip-server, \u043a\u043e\u0433\u0434\u0430 \u0432\u044b \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 \u043a SIP-\u0441\u0435\u0440\u0432\u0435\u0440\u0443.</li> </ul> <p>\u0420\u0430\u0441\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e router2 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u043d\u0435 \u0441\u0442\u0430\u043d\u0443. \u041e\u0442\u043c\u0435\u0447\u0443, \u0447\u0442\u043e \u0434\u043b\u044f \u0441\u0432\u044f\u0437\u0438 \u0441\u043e \u0441\u0442\u0430\u043d\u0446\u0438\u0435\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f QSIG, \u0441\u0442\u0430\u043d\u0446\u0438\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f network \u0434\u043b\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430. <pre><code>card type e1 0 0\n!\nnetwork-clock-participate wic 0\nnetwork-clock-select 1 E1 0/0/0\n!\nisdn switch-type primary-qsig\n!\nvoice rtp send-recv\n!\nvoice service voip\n qsig decode\n allow-connections h323 to h323\n h323\n!\ncontroller E1 0/0/0\n framing NO-CRC4\n pri-group timeslots 1-31\n!\ninterface Serial0/0/0:15\n no ip address\n encapsulation hdlc\n isdn switch-type primary-qsig\n isdn incoming-voice voice\n isdn send-alerting\n isdn sending-complete\n no cdp enable\n!\ndial-peer voice 86102 pots\n destination-pattern 86102....\n progress_ind alert enable 8\n direct-inward-dial\n port 0/0/0:15\n forward-digits all\n!\ndial-peer voice 86101 voip\n destination-pattern 86101...\n session target ipv4:10.0.0.1\n dtmf-relay rtp-nte\n no vad\n fax-relay ecm disable\n fax rate 14400\n fax nsf 000000\n fax protocol t38 nse ls-redundancy 0 hs-redundancy 0 fallback cisco\n</code></pre> \u0427\u0442\u043e\u0431\u044b \u0441\u043b\u0443\u0448\u0430\u0442\u044c \u043f\u0440\u0438\u0432\u044b\u0447\u043d\u044b\u0435 \u0442\u043e\u043d\u044b \u041a\u041f\u0412, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432 voice-port \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c cptone: <pre><code>voice-port 0/0/0:15\n cptone RU\n</code></pre> \u041a\u043e\u0433\u0434\u0430 \u0447\u0442\u043e-\u0442\u043e \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043e\u0442\u043b\u0430\u0434\u043a\u0443 \u0438 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c: <pre><code>router#debug isdn q931\n\nrouter#debug voice dcapi inout\n</code></pre> \u0414\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432 \u0436\u0435\u043b\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0442\u0438\u043f \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438. \u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0435\u043d \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u0431\u044b\u043b\u0430 \u0431\u044b \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430, \u0435\u0441\u043b\u0438 \u0431\u044b router1 \u0438 ATC \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438 QSIG, \u043a\u0430\u043a \u0438 \u0432\u0442\u043e\u0440\u0430\u044f \u0441\u0442\u0430\u043d\u0446\u0438\u044f.</p>"},{"location":"voip/cisco_e1_gateway/#resource-unavailable-unspecified","title":"resource unavailable, unspecified","text":"<p>\u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b:</p> <ul> <li>\u043f\u0440\u0438 \u0437\u0432\u043e\u043d\u043a\u0430\u0445 \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u0443\u044e \u0441\u0442\u0430\u043d\u0446\u0438\u044e \u043e\u0442\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f. \u0421\u043b\u044b\u0448\u0435\u043d \u0437\u0432\u043e\u043d\u043e\u043a \u0438 \u0441\u0440\u0430\u0437\u0443 \u0441\u0431\u0440\u043e\u0441.</li> <li>\u0437\u0432\u043e\u043d\u044f\u0449\u0438\u043c \u043d\u0430 \u0441\u0442\u0430\u043d\u0446\u0438\u044e \u0447\u0430\u0441\u0442\u043e \u0432\u044b\u0434\u0430\u0435\u0442\u0441\u044f \"\u0437\u0430\u043d\u044f\u0442\u043e\"</li> <li>\u0432 \u043b\u043e\u0433\u0430\u0445 \u043e\u0442\u043b\u0430\u0434\u043a\u0438 (debug isdn q931) Resource unavailable, unspecified</li> </ul> <p>\u041f\u043e\u0434 \u0440\u0435\u0441\u0443\u0440\u0441\u0430\u043c\u0438 \u043f\u043e\u0434\u0440\u0430\u0437\u0443\u043c\u0435\u0432\u0430\u0435\u0442\u0441\u044f DSP. \u0421\u043c\u043e\u0442\u0440\u0438\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043a\u0430\u043d\u0430\u043b\u044b: <pre><code>voice-gw#show voice dsp detailed | in 0/0/0:15\nC5510 001 01 g729r8        23.8.3 busy  idle      0  0 0/0/0:15  28    0    9300/9539\nC5510 001 02 g729r8        23.8.3 busy  idle      0  0 0/0/0:15  03    0 122789/12573\nC5510 001 03 g729r8        23.8.3 busy  idle      0  0 0/0/0:15  01    0    3411/5237\nC5510 001 04 g711ulaw      23.8.3 busy  idle      0  0 0/0/0:15  27    0         0/13\nC5510 001 06 g729r8        23.8.3 busy  idle      0  0 0/0/0:15  04    0 123864/12559\nC5510 001 07 g729r8        23.8.3 busy  idle      0  0 0/0/0:15  24    0    2435/2516\nC5510 002 01 g729r8        23.8.3 busy  idle      0  0 0/0/0:15  02    0    7396/7584\nC5510 002 02 g729r8        23.8.3 busy  idle      0  0 0/0/0:15  05    0    7116/7308\nC5510 002 03 g729r8        23.8.3 busy  idle      0  0 0/0/0:15  06    0 121376/12432\nC5510 002 04 g729r8        23.8.3 busy  idle      0  0 0/0/0:15  07    0 120839/12376\nC5510 002 05 g729r8        23.8.3 busy  idle      0  0 0/0/0:15  08    0 119916/12284\n</code></pre> \u0421\u043c\u043e\u0442\u0440\u0438\u043c \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0437\u0432\u043e\u043d\u043a\u0438. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0432\u043e\u043d\u043a\u043e\u0432 \u0438 \"\u0437\u0430\u043d\u044f\u0442\u044b\u0445\" \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 0/0/0:15 \u043a\u0430\u043d\u0430\u043b\u043e\u0432 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442. <pre><code>voice-gw#sh isdn active\n--------------------------------------------------------------------------------\n                                ISDN ACTIVE CALLS\n--------------------------------------------------------------------------------\nCall    Calling      Called       Remote  Seconds Seconds Seconds Charges\nType    Number       Number       Name    Used    Left    Idle    Units/Currency\n--------------------------------------------------------------------------------\nIn         1234        2345                   187       0       0\nOut        5678        3456                   147       0       0      0\nOut   123456789       87654                   140       0       0      0\nOut   987654321       45632                   100       0       0      0\nIn   8765432123        6432                    50       0       0\n--------------------------------------------------------------------------------\n</code></pre> \u0412 \u0442\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435/\u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0440\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043e\u0441\u0432\u043e\u0431\u043e\u0434\u0438\u0442\u044c \u0432\u0441\u0435 \u043a\u0430\u043d\u0430\u043b\u044b. <pre><code>voice-gw(config)#voice-port 0/0/0:15\nvoice-gw(config-voiceport)#shutdown\nvoice-gw(config-voiceport)#no shutdown\n</code></pre></p>"},{"location":"voip/cisco_e1_gateway/#e1","title":"E1 \u0441\u0438\u043d\u0445\u0440\u0430","text":"<p>\u0414\u043b\u044f 2800 \u0438 3800 \u0441\u0435\u0440\u0438\u0438, \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438: <pre><code>network-clock-participate wic 0\nnetwork-clock-select 1 e1 0/0/0\n</code></pre> \u0414\u043b\u044f 7200 \u0441\u0435\u0440\u0438\u0438: <pre><code>frame-clock-select 1 E1 1/0\n</code></pre></p>"},{"location":"voip/cisco_e1_gateway/#eem","title":"eem","text":"<p>\u041f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u043f\u043e\u0442\u043e\u043a\u043e\u043c \u04151 \u043d\u0430 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u043e\u043c \u0448\u043b\u044e\u0437\u0435 Cisco. C\u043a\u0440\u0438\u043f\u0442, \u0432\u044b\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u0439 \u043d\u043e\u0447\u044c\u044e D-\u043a\u0430\u043d\u0430\u043b. <pre><code>event manager session cli username \"operator\"\nevent manager applet restartd\n event timer cron cron-entry \"26 4 * * *\" maxrun 120\n action 1.0 syslog msg \"restart d-channel\"\n action 2.0 cli command \"enable\"\n action 3.0 cli command \"conf t\"\n action 4.0 cli command \"voice-port 0/0/0:15\"\n action 5.0 cli command \"shutdown\"\n action 6.0 wait 30\n action 7.0 cli command \"no shutdown\"\n action 8.0 cli command \"end\"\n</code></pre></p>"},{"location":"voip/cisco_gw_cdr/","title":"Cisco CDR for gateway","text":"<p>\u0414\u043b\u044f \u0432\u044b\u0433\u0440\u0443\u0437\u043a\u0438 CDR \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440 \u0431\u0438\u043b\u043b\u0438\u043d\u0433\u0430 \u043d\u0435 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0433\u043e syslog-\u0430. \u0412 IOS \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u0438\u043b\u0438 \u0441\u044a\u0435\u043c\u043d\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430: <pre><code>router(config)#gw-accounting file\nrouter(config-gw-accounting-file)#primary ?\n  ftp  ftp mode of file transfer\n  ifs  Local file system, i.e.,flash/ mem slot device name such as flash: slot0:\n</code></pre> \u0422\u0430\u043a\u043e\u0439 \u043c\u0435\u0442\u043e\u0434 \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f File Accounting. \u041c\u0435\u0442\u043e\u0434 File Accounting \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0441\u0431\u043e\u0440 CDR \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0432 \u0444\u0430\u0439\u043b\u044b CSV \u0444\u043e\u0440\u043c\u0430\u0442\u0430 (\u043f\u043e\u043b\u044f \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u0437\u0430\u043f\u044f\u0442\u044b\u043c\u0438) \u0438 \u0437\u0430\u043f\u0438\u0441\u044c \u044d\u0442\u0438\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \u043d\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044e\u044e \u0444\u043b\u044d\u0448 \u043f\u0430\u043c\u044f\u0442\u044c \u0438\u043b\u0438 \u043d\u0430 \u0432\u043d\u0435\u0448\u043d\u0438\u0439 FTP \u0441\u0435\u0440\u0432\u0435\u0440. CDR \u0437\u0430\u043f\u0438\u0441\u0438 \u0444\u043e\u0440\u043c\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0432\u0435\u0442\u0432\u0438 \u0432\u044b\u0437\u043e\u0432\u0430, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u043e\u0433\u043e \u0447\u0435\u0440\u0435\u0437 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u044b\u0435 \u0448\u043b\u044e\u0437\u044b Cisco. \u0414\u043b\u044f CDR \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0432 CSV \u0444\u043e\u0440\u043c\u0430\u0442\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430:</p> <ul> <li>\u041a\u0430\u0436\u0434\u0430\u044f CDR \u0437\u0430\u043f\u0438\u0441\u044c \u0438\u043c\u0435\u0435\u0442 \u0441\u0432\u043e\u0439 \u043d\u043e\u043c\u0435\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438. \u041f\u043e\u043b\u044f, \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442\u0441\u044f \u043a\u0430\u043a \u043f\u0443\u0441\u0442\u044b\u0435 \u043f\u043e\u043b\u044f.</li> <li>\u0414\u0432\u0435\u043d\u0430\u0434\u0446\u0430\u0442\u044c \u043f\u043e\u043b\u0435\u0439 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043e\u0431\u0449\u0438\u043c\u0438 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e-\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438. \u0414\u043b\u044f \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 CDR \u0437\u0430\u043f\u0438\u0441\u044c \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0441 \u0431\u0430\u0437\u043e\u0432\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439 \u043e \u0432\u044b\u0437\u043e\u0432\u0435 \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u043f\u043e\u043b\u0435\u0439. \u041f\u043e\u043b\u044f \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0441\u0432\u043e\u0438\u0445 \u043f\u043e\u0437\u0438\u0446\u0438\u0439, \u043e\u0434\u043d\u0430\u043a\u043e, \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 VSA* \u043f\u043e\u043b\u0435\u0439 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u0438\u043f\u043e\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</li> <li>CDR \u0437\u0430\u043f\u0438\u0441\u0438 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0432\u044b\u0437\u043e\u0432\u0430 \u0431\u044b\u043b \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0432\u044b\u0437\u043e\u0432\u0430, \u0442\u043e \u0431\u0443\u0434\u0443\u0442 \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b 2-\u0435 CDR \u0437\u0430\u043f\u0438\u0441\u0438: - CDR \u0437\u0430\u043f\u0438\u0441\u044c \u0434\u043b\u044f \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0432\u044b\u0437\u043e\u0432\u0430; - CDR \u0437\u0430\u043f\u0438\u0441\u044c \u0434\u043b\u044f \u044d\u0442\u0430\u043f\u0430 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0432\u044b\u0437\u043e\u0432\u0430.</li> </ul> <p>\u041f\u0440\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u044d\u0442\u043e\u0433\u043e \u043c\u0435\u0442\u043e\u0434\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f CDR \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0435 \u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438. \u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u0435\u0441\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f, \u0448\u043b\u044e\u0437 \u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0432\u044f\u0437\u044c \u0441 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e\u043c \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0440\u0430\u0437, \u0438 \u0435\u0441\u043b\u0438 \u044d\u0442\u043e \u043d\u0435 \u0443\u0434\u0430\u0435\u0442\u0441\u044f, \u0442\u043e \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e. \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u0442\u0435\u043c \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u044b\u0432\u043e\u0434 CDR \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u0440\u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0435\u0433\u043e \u0440\u0430\u0431\u043e\u0442\u044b. \u0412 \u0441\u043b\u0443\u0447\u0430\u0435, \u043a\u043e\u0433\u0434\u0430 \u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u044e\u0442 \u0441\u0432\u043e\u044e \u0440\u0430\u0431\u043e\u0442\u0443, \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0443\u0447\u0435\u0442\u0430 \u0432\u044b\u0437\u043e\u0432\u043e\u0432 \u043e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443. \u041f\u0440\u0438 \u044d\u0442\u043e\u043c \u043d\u043e\u0432\u044b\u0435 CDR \u0437\u0430\u043f\u0438\u0441\u0438 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b \u0434\u043e \u0442\u0435\u0445 \u043f\u043e\u0440, \u043f\u043e\u043a\u0430 \u043e\u0434\u043d\u043e \u0438\u0437 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u0437\u0430\u043f\u0438\u0441\u0438 \u043d\u0435 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442 \u0440\u0430\u0431\u043e\u0442\u043e\u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u0438 \u0432\u044b \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443. \u0428\u043b\u044e\u0437 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0445\u0440\u0430\u043d\u0438\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0445 \u0432\u044b\u0437\u043e\u0432\u0430\u0445 \u0432 \u0431\u0443\u0444\u0435\u0440\u0435 \u043f\u0430\u043c\u044f\u0442\u0438 \u043f\u0435\u0440\u0435\u0434 \u0442\u0435\u043c, \u043a\u0430\u043a \u043e\u043d\u0430 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u0430 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b. \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432 CDR \u0444\u0430\u0439\u043b \u043f\u043e\u0441\u043b\u0435 \u0438\u0441\u0442\u0435\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0433\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430 \u0438\u043b\u0438 \u043a\u043e\u0433\u0434\u0430 \u0431\u0443\u0444\u0435\u0440 \u043f\u0430\u043c\u044f\u0442\u0438 \u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f. \u0428\u043b\u044e\u0437 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u0442 CDR \u0444\u0430\u0439\u043b \u0438 \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u0441\u043b\u0435 \u0438\u0441\u0442\u0435\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430 \u0438\u043b\u0438 \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u043d\u0438\u0446\u0438\u0438\u0440\u043e\u0432\u0430\u043d \u0432\u0440\u0443\u0447\u043d\u0443\u044e. \u0414\u0440\u0443\u0433\u0438\u0435 \u043e\u043f\u0446\u0438\u0438 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 CDR \u0437\u0430\u043f\u0438\u0441\u044f\u0445. CDR \u0437\u0430\u043f\u0438\u0441\u0438 \u043c\u043e\u0433\u0443\u0442 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043e\u0434\u043d\u043e\u043c \u0438\u0437 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0444\u043e\u0440\u043c\u0430\u0442\u043e\u0432:</p> <ul> <li>\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442;</li> <li>\u041a\u043e\u043c\u043f\u0430\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442;</li> <li>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u043c\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c \u0444\u043e\u0440\u043c\u0430\u0442.</li> </ul> <p>\u0412 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u044d\u0442\u043e \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u0442\u0430\u043a: <pre><code>gw-accounting syslog\ngw-accounting file\n primary ftp 1.2.3.4/voip-cdr.txt username cdr password cdr\n secondary ftp 4.3.2.1/voip-cdr.txt username cdr password cdr\n maximum cdrflush-timer 15\n cdr-format compact\n</code></pre> \u0425\u043e\u0442\u044f \u0438 \u0432\u044b\u0431\u0440\u0430\u043d \u043a\u043e\u043c\u043f\u0430\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u043b\u044f \u0444\u0430\u0439\u043b\u043e\u0432, \u043d\u043e \u043d\u0435 \u043e\u0431\u043e\u043b\u044c\u0449\u0430\u0439\u0442\u0435\u0441\u044c. \u041f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0432 \u044d\u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435 \u0432\u044b\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0432\u0441\u0435\u0433\u043e 23 \u043f\u043e\u043b\u044f (0-22), \u0430 \u0438\u0445 \u0442\u0430\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u0441\u043e\u0442\u043d\u0438! \u0418\u043c\u0435\u0435\u0442\u0441\u044f \u0442\u0430\u043a\u0436\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0434\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432\u044b\u0434\u0430\u0447\u0443 CDR \u043f\u043e\u043b\u0435\u0439 \u043f\u043e\u0434 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043d\u043e\u0441\u0442\u0438 (\u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442). \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0431\u043e\u0439 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b, \u0441 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0432 \u043d\u0435\u043c \u0438\u043c\u0435\u043d\u0430\u043c\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0445 \u043f\u043e\u043b\u0435\u0439. \u0422\u043e\u043b\u044c\u043a\u043e \u044d\u0442\u0438 CDR \u043f\u043e\u043b\u044f \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0432 CDR \u0444\u0430\u0439\u043b. \u0414\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438 \u043f\u0440\u0438\u043d\u0443\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e: <pre><code>router#file-acct flush ?\n  with-close     File accounting flush pending accounting to file,and close file\n  without-close  File accounting flush pending accounting to file\n</code></pre> <code>file-acct flush with-close</code> - \u0421\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 \u0431\u0443\u0444\u0435\u0440\u0430 \u0432 \u0444\u0430\u0439\u043b \u0441 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435\u043c \u0444\u0430\u0439\u043b\u0430.</p> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 \u0441 \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u043a \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0443 \u0441\u0432\u044f\u0437\u0438 \u043f\u043e \u04151 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435: <pre><code>gw-accounting file\n primary ftp 999.99.9.1/ username cdr password cdr\n maximum cdrflush-timer 15\n</code></pre> \u041d\u0430 ftp-\u0441\u0435\u0440\u0432\u0435\u0440\u0435, \u0433\u0434\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e cdr, \u043f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \"\u0441\u043a\u0440\u044b\u0442\u044b\u0439\" (ls -la) \u0444\u0430\u0439\u043b \u0432\u0438\u0434\u0430 .\u0438\u043c\u044f_\u0445\u043e\u0441\u0442\u0430_\u0434\u0430\u0442\u0430_\u0432\u0440\u0435\u043c\u044f. \u0424\u0430\u0439\u043b \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u0434\u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442\u0441\u044f, \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u043e \u0447\u0435\u043c \u043f\u0438\u0441\u0430\u0442\u044c. \u041d\u043e\u0432\u044b\u0439 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u0440\u0430\u0437 \u0432 \u0441\u0443\u0442\u043a\u0438 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0438\u043d\u0433\u0430. <pre><code>VOIP-C2901(config-gw-accounting-file)#maximum fileclose-timer ?\n  &lt;60-1440&gt;  in minutes, default is 1440min\n</code></pre> \u041d\u0435\u0442 \u0436\u0435\u043b\u0430\u043d\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u043f\u0430\u043a\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c, \u0442\u0430\u043a \u043a\u0430\u043a \u0432 \u0434\u0435\u0442\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u043c \u0432\u0438\u0434\u0435 \u0435\u0441\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0432 \u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445. \u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u044b \",\" \u0438 \u0438\u0434\u0443\u0442 \u0440\u043e\u0432\u043d\u043e \u0432 \u0442\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043e\u043d\u0438 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438.  \u0443\u0436\u043d\u044b \u043f\u043e\u043b\u044f, \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u043d\u0438\u0436\u0435 \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435: unix_time, leg-type, username, clid, dnis, h323-setup-time, override-session-time. \u041f\u043e\u043b\u0435 leg-type \u0438\u043c\u0435\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0438 \u044d\u0442\u043e \u0443\u0434\u043e\u0431\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u0442\u0430\u043a \u043a\u0430\u043a \u043d\u0430 \u043a\u0430\u0436\u0434\u0443\u044e \"\u043d\u043e\u0433\u0443\" \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c. \u0418\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0442\u044b\u043a \u0441 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c - \"1\", \u0430 \u0438\u043c\u0435\u043d\u043d\u043e \u0432\u0442\u043e\u0440\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c \u043e \u0437\u0432\u043e\u043d\u043a\u0435 \u0441 id \"80CD1398 50739150 854F5801 AC117AEF\". <pre><code>1426682736,788957,0,2,\"80CD1398 50739150 854F5801 AC117AEF\",\"\",\"\",\"19:45:04.169 KRSK Wed Mar 18 2015\",\"\",\"19:45:11.829 KRSK Wed Mar 18 2015\",\"19:45:36.849 KRSK Wed Mar 18 2015\",\"\",\"\",\"answer\",0,\"\",594,93528,1413,226080,\"662\",\"662\",\"089830000000\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",25,\"\",\"\",\"0\",\"999.99.9.100\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"ton:0,npi:0,#:089830000000\",\"ton:0,npi:0,pi:0,si:1,#:662\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"Unknown\",\"\",\"\",\"cisco\",\"\",\"\",\"TWC\",\"03/18/2015 19:45:04.168\",\"662\",\"089830000000\",0,700847,80CD1398 50739150 854F5801 AC117AEF,C09DD,\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"\n1426682737,788958,0,1,\"80CD1398 50739150 854F5801 AC117AEF\",\"\",\"\",\"19:45:04.525 KRSK Wed Mar 18 2015\",\"19:45:08.415 KRSK Wed Mar 18 2015\",\"19:45:11.815 KRSK Wed Mar 18 2015\",\"19:45:37.185 KRSK Wed Mar 18 2015\",\"\",\"\",\"originate\",0,\"\",1413,237384,598,94168,\"662\",\"3912000000\",\"89830000000\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",25,\"Tariff:Unknown\",\"\",\"0\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"0/1:1\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"ton:0,npi:0,#:089830000000\",\"ton:0,npi:0,pi:0,si:1,#:662\",\"\",\"\",\"\",\"ton:0,npi:0,#:89830000000\",\"ton:0,npi:0,pi:0,si:1,#:3912000000\",\"\",\"\",\"\",\"\",\"\",\"\",\"Unknown\",\"\",\"\",\"\",\"\",\"\",\"TWC\",\"03/18/2015 19:45:04.172\",\"3912000000\",\"89830000000\",0,700848,80CD1398 50739150 854F5801 AC117AEF,C09DE,\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"\n</code></pre> \u041c\u043d\u0435 \u043d\u0443\u0436\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0431 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0432 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u0443\u044e \u0441\u0435\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430 \u0437\u0432\u043e\u043d\u043a\u0430\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u0441\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0431\u0430\u0437\u0443 sqlite: <pre><code>bash$ awk -F\",\" '{if ($4=='1' &amp;&amp; $14~'originate' &amp;&amp; $68&gt;0 &amp;&amp; $22~'3912000') {print \"insert into cisco values (\"$1\",\"$21\",\"$22\",\"$23\",\"$8\",\"$68\");\"} }' \u0438\u043c\u044f_\u0444\u0430\u0439\u043b\u0430_cdr &gt; OUT.sql\nbash$ sqlite3 ciscocdr.db &lt; OUT.sql\n</code></pre> \u041f\u0440\u0438\u043c\u0435\u0440 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0431\u0430\u0437\u043e\u0439: <pre><code>bash$ sqlite3 ciscocdr.db \nSQLite version 3.7.9 2011-11-01 00:52:41\nEnter \".help\" for instructions\nEnter SQL statements terminated with a \";\"\nsqlite&gt; .schema cisco\nCREATE TABLE cisco ( unix_time integer, username , clid , dnis , setuptime , sessiontime integer );\nsqlite&gt; select * from cisco where sessiontime&gt;300 and dnis like '8%' and setuptime like '%Mar 18%' order by sessiontime desc;\n</code></pre></p>"},{"location":"voip/cisco_voip/","title":"Cisco voip notes","text":""},{"location":"voip/cisco_voip/#cisco-phone-reset","title":"cisco phone reset","text":"<p>\u0421\u0431\u0440\u043e\u0441 Cisco IP Phone. \u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0438\u0442\u0430\u043d\u0438\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430.\u0417\u0430\u0436\u0430\u0432  # \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0435, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0438\u0442\u0430\u043d\u0438\u0435 \u0438 \u043e\u0442\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435 \u0438\u043d\u0434\u0438\u043a\u0430\u0446\u0438\u0438 \u043d\u0430 \u0442\u0440\u0443\u0431\u0435. \u041d\u0430\u0436\u0430\u0442\u044c \u0432\u0441\u0435 \u043a\u043d\u043e\u043f\u043a\u0438 \u043f\u043e\u043e\u0447\u0435\u0440\u0435\u0434\u043d\u043e 123456789*0#</p> <p>\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 Cisco IP Phone/ \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043c\u0435\u043d\u044e \"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\", \u043d\u0430\u0436\u0430\u0442\u044c ##*##</p>"},{"location":"voip/cisco_voip/#fxs-sip-password","title":"fxs sip password","text":"<p>\u0415\u0441\u0442\u044c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 Cisco \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 FXS-\u0448\u043b\u044e\u0437\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 \u043f\u0430\u0440\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u0430 \"?\". <pre><code>dial-peer voice 220 pots\n destination-pattern 220\n authentication username 220 password 7 02110C4218091C245E47060C16\n port 0/0/0\n forward-digits 0\n</code></pre></p>"},{"location":"voip/cisco_voip/#connection-reuse","title":"connection-reuse","text":"<p>\u041f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0443\u0447\u0435\u0442\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043e \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u0440\u0442, \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u043e\u0442 5060. \u041d\u0435\u0441\u043c\u043e\u0442\u0440\u044f \u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u0443\u044e \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u043b\u0430\u0434\u043a\u0443 debug ccsip \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f, \u0442.\u043a. \u0434\u0430\u043d\u043d\u0430\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430, \u043a\u0430\u043a \u043e\u043a\u0430\u0437\u0430\u043b\u043e\u0441\u044c, \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u043d\u044f\u0442\u044b\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u043f\u043e\u0440\u0442 5060. \u042d\u0434\u0430\u043a\u0438\u0439 tcpdump port 5060. \u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u0440\u0435\u0448\u0438\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u0434\u0430\u0447\u0443 \u0447\u0435\u0440\u0435\u0437 connection-reuse <pre><code>sip-ua \n registrar dns:pbx.a.b expires 3600\n sip-server dns:pbx.a.b\n connection-reuse\n</code></pre></p>"},{"location":"voip/cisco_voip/#white-list-source-interface","title":"white list, source-interface","text":"<p>\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0445 \u0445\u043e\u0441\u0442\u043e\u0432. \u0422\u0430\u043a \u043a\u0430\u043a INVITE \u043f\u0440\u0438\u0434\u0435\u0442 \u043e\u0442 \u0445\u043e\u0441\u0442\u0430 pbx.a.b, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0443\u044e \u0441\u043c\u0435\u043d\u0443 \u0430\u0434\u0440\u0435\u0441\u0430 ip-\u0430\u0442\u0441. <pre><code>voice service voip\n ip address trusted list\n  ipv4 100.99.999.1\n fax protocol t38 version 0 ls-redundancy 0 hs-redundancy 0 fallback none\n sip\n  bind control source-interface Loopback0\n  bind media source-interface Loopback0\n</code></pre></p>"},{"location":"voip/freeswitch/","title":"Freeswitch","text":""},{"location":"voip/freeswitch/#sbin","title":"sbin","text":"<p>\u041f\u0440\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0435 fusionpbx \u0432 debian \u0434\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u0430 \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c PATH \u0434\u043e /sbin</p>"},{"location":"voip/freeswitch/#ssl-cert","title":"ssl cert","text":"<p>\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 letsencrypt <pre><code>systemctl stop nginx\n\ncertbot -q renew\n\nmkdir -p /etc/freeswitch/tls\n\nrm /etc/freeswitch/tls/*\n\ncat /etc/letsencrypt/live/[domain]/fullchain.pem &gt; /etc/freeswitch/tls/all.pem\ncat /etc/letsencrypt/live/[domain]/privkey.pem &gt;&gt; /etc/freeswitch/tls/all.pem\n\ncp /etc/letsencrypt/live/[domain]/cert.pem /etc/freeswitch/tls\ncp /etc/letsencrypt/live/[domain]/chain.pem /etc/freeswitch/tls\ncp /etc/letsencrypt/live/[domain]/fullchain.pem /etc/freeswitch/tls\ncp /etc/letsencrypt/live/[domain]/privkey.pem /etc/freeswitch/tls\n\nln -s /etc/freeswitch/tls/all.pem /etc/freeswitch/tls/agent.pem\nln -s /etc/freeswitch/tls/all.pem /etc/freeswitch/tls/tls.pem\nln -s /etc/freeswitch/tls/all.pem /etc/freeswitch/tls/wss.pem\nln -s /etc/freeswitch/tls/all.pem /etc/freeswitch/tls/dtls-srtp.pem\n\nsystemctl start nginx\n\nsystemctl restart freeswitch\n</code></pre></p>"},{"location":"voip/freeswitch/#reboot","title":"reboot","text":"<p>\u041f\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044e \u0432 3 \u043d\u043e\u0447\u0438 <pre><code>/sbin/shutdown -r 03:00\n</code></pre> \u041e\u0442\u043c\u0435\u043d\u0430 <pre><code>/sbin/shutdown -c\n</code></pre></p>"},{"location":"voip/freeswitch/#codec","title":"codec","text":"<p>\u0422\u043e\u043b\u044c\u043a\u043e 711a. \u0412 vars <pre><code>&lt;X-PRE-PROCESS cmd=\"set\" data=\"outbound_codec_prefs=PCMA\" /&gt;\n&lt;X-PRE-PROCESS cmd=\"set\" data=\"global_codec_prefs=PCMA@20i,H264\" /&gt;\n</code></pre> greedy, \u0447\u0442\u043e\u0431 \u0431\u044b\u043b\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c ptime 20, \u0438 \u043d\u0435 \u0431\u044b\u043b\u043e \u043f\u043e\u043f\u044b\u0442\u043e\u043a \u0441 30. \u0412 sip_profiles/internal <pre><code>&lt;!--set to 'greedy' if you want your codec list to take precedence --&gt;\n&lt;param name=\"inbound-codec-negotiation\" value=\"greedy\"/&gt;\n</code></pre></p>"},{"location":"voip/freeswitch/#fs_cli","title":"fs_cli","text":"<p>\u041f\u0430\u0440\u043e\u043b\u044c \u0432 \u0444\u0430\u0439\u043b\u0435 <code>autoload_configs/event_socket.conf.xml</code> <pre><code>&lt;configuration name=\"event_socket.conf\" description=\"Socket Client\"&gt;\n  &lt;settings&gt;\n    &lt;param name=\"listen-ip\" value=\"127.0.0.1\"/&gt;\n    &lt;param name=\"listen-port\" value=\"8021\"/&gt;\n    &lt;param name=\"password\" value=\"123\"/&gt;\n  &lt;/settings&gt;\n&lt;/configuration&gt;\n</code></pre> \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 <code>fs_cli -p 123</code></p>"},{"location":"voip/softphone/","title":"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0441\u043e\u0444\u0442\u0444\u043e\u043d\u0430\u0445","text":"<p>\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043e\u0444\u0442\u0444\u043e\u043d\u043e\u0432 \u0438 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e \u0438\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u043a freeswitch \u0441 tls.</p>"},{"location":"voip/softphone/#_2","title":"\u041e\u0433\u043e\u0432\u043e\u0440\u043a\u0438","text":"<p>\u0414\u043b\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0445 \u0437\u0432\u043e\u043d\u043a\u043e\u0432 \u0441 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u0432 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442: Wifi, 3G, 4G. \u0415\u0441\u043b\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u0438\u0437 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0433\u043e \u0432\u0430\u043c \u043d\u0435 \u043f\u043e\u0434\u043e\u0448\u043b\u043e, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u043d\u0443\u044e \u043d\u0438\u0436\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u0438\u043b\u0438 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u0432 Yealink. \u0412\u0441\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0432\u0435\u0440\u0441\u0438\u044f\u0445 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u044b\u0445 \u0441\u0438\u0441\u0442\u0435\u043c \u0438\u043c\u0435\u044e\u0442 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043a\u0438, \u0432\u044b\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0437 \u043f\u0430\u043c\u044f\u0442\u0438, \u0447\u0442\u043e \u043d\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0432\u044b\u0437\u043e\u0432. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u043e\u044f\u0432\u0438\u0442\u0435 \u0442\u0435\u0440\u043f\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0434\u0440\u0443\u0433\u0443\u044e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u0438\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0434\u043b\u044f \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0432\u044b\u0437\u043e\u0432\u043e\u0432.</p>"},{"location":"voip/softphone/#_3","title":"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435","text":"<p>\u0414\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0430\u044f \u0443\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c: \u043d\u043e\u043c\u0435\u0440, \u043f\u0430\u0440\u043e\u043b\u044c. \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435:</p> <ul> <li>\u0421\u0435\u0440\u0432\u0435\u0440 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0438\u043b\u0438 \u0434\u043e\u043c\u0435\u043d - <code>yourdomain</code></li> <li>\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f - <code>TLS</code>.</li> <li>\u0421\u0435\u0440\u0432\u0435\u0440 STUN - <code>yourdomain</code></li> </ul> <p>\u041f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:</p> <ul> <li>\u0421\u0435\u0440\u0432\u0435\u0440 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0438\u043b\u0438 \u0434\u043e\u043c\u0435\u043d - <code>yourdomain</code></li> <li>\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f - <code>TCP</code>.</li> <li>\u0421\u0435\u0440\u0432\u0435\u0440 STUN - <code>yourdomain</code></li> <li>\u0412\u0440\u0435\u043c\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u0434\u043e 300 \u0441\u0435\u043a\u0443\u043d\u0434. \u042d\u0442\u043e\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0437\u0432\u044b\u0432\u0430\u0442\u044c\u0441\u044f \"\u0418\u0441\u0442\u0435\u043a\u0430\u0435\u0442\" \u0438\u043b\u0438 \"\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0435\" \u0438 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0442\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c 3600 \u0441\u0435\u043a\u0443\u043d\u0434 \u0438\u043b\u0438 \u043c\u0435\u043d\u044c\u0448\u0435.</li> </ul>"},{"location":"voip/softphone/#_4","title":"\u0423\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c","text":"<p>\u041f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0432 \u043a\u043b\u0438\u0435\u043d\u0442\u0435 \u0438\u043c\u0435\u043d\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u0438\u043c\u0435\u043d\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043d\u043e\u043c\u0435\u0440\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0432 \u043f\u043e\u043b\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0430 \u0438\u043c\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c. \u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f - \u044d\u0442\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440. \u041f\u0430\u0440\u043e\u043b\u044c \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0432 \u0446\u0435\u043b\u044f\u0445 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438.</p>"},{"location":"voip/softphone/#_5","title":"\u0421\u0435\u0440\u0432\u0435\u0440 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438","text":"<p>\u0412 \u0440\u0430\u0437\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, registar \u0438\u043b\u0438  domain/\u0434\u043e\u043c\u0435\u043d.</p>"},{"location":"voip/softphone/#_6","title":"\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f","text":"<p>\u0412 \u0446\u0435\u043b\u044f\u0445 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 TLS \u043d\u0430 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u0434\u043b\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u0440\u0442 5061.</p>"},{"location":"voip/softphone/#stun","title":"\u0421\u0435\u0440\u0432\u0435\u0440 STUN","text":"<p>\u0411\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u043a \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c \u0432 \u0441\u0435\u0442\u0438 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u044b \u0441 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u043e\u0439 \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u0435\u0439 \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0438\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u044b \u0441\u043e\u0442\u043e\u0432\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432. \u0414\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0439 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \"\u0433\u043e\u043b\u043e\u0441\u0430\" \u043d\u0430 \u0432\u0430\u0448\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441 STUN \u0441\u0435\u0440\u0432\u0435\u0440\u0430.</p>"},{"location":"voip/softphone/#_7","title":"\u0428\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0432\u043e\u043d\u043a\u043e\u0432","text":"<p>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \"\u0433\u043e\u043b\u043e\u0441\u0430\" \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u043c SRTP, \u043e\u0434\u043d\u0430\u043a\u043e \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u043e\u0439. \u0428\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u043c TLS \u0432\u0441\u0435\u0433\u0434\u0430.</p>"},{"location":"voip/softphone/#_8","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043c\u0438\u043a\u0440\u043e\u0444\u043e\u043d\u0430","text":"<p>\u041f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u0435 \u043d\u0430 \u043d\u043e\u043c\u0435\u0440 <code>*9195</code> \u0438 \u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0432. \u0412\u044b \u0443\u0441\u043b\u044b\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0438\u0441\u044c \u0432\u0430\u0448\u0438\u0445 \u0441\u043b\u043e\u0432 \u0441 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434.</p>"},{"location":"voip/softphone/#android","title":"\u0421\u043e\u0444\u0442\u0444\u043e\u043d\u044b \u0432 Android","text":"<p>\u041d\u0430 \u0440\u0430\u0437\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u044f\u0445 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u0445 \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442, \u0430 \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043d\u0435\u0442. \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u043e\u0434\u043d\u043e\u0439 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043e\u0439, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0434\u0440\u0443\u0433\u0443\u044e. \u041d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0447\u0430\u0441\u0442\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u043d\u0430\u0431\u043b\u044e\u0434\u0430\u044e\u0442\u0441\u044f \u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u0432 Xiaomi \u0438\u0437-\u0437\u0430 \u0430\u0433\u0440\u0435\u0441\u0441\u0438\u0432\u043d\u043e\u0439 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438 \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u044d\u043d\u0435\u0440\u0433\u043e\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f \u0441\u043c\u0430\u0440\u0442\u0444\u043e\u043d\u0430. \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 Xiaomi, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 Zoiper, \u043f\u043e\u0442\u043e\u043c Sipnetic, \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u044f \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438.</p>"},{"location":"voip/softphone/#sipnetic","title":"Sipnetic","text":"<p>\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 sipnetic \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0441\u0432\u044f\u0437\u044c \u0441 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c \u0430\u0442\u0441, \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0440\u0435\u043a\u043b\u0430\u043c\u044b, \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0433\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u0430 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0434\u043b\u044f \u0437\u0432\u043e\u043d\u043a\u043e\u0432.</p> <ul> <li>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 https://play.google.com/store/apps/details?id=com.sipnetic.app.</li> <li>\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435. \u041e\u0442\u043a\u0440\u043e\u0435\u0442\u0441\u044f \u044d\u043a\u0440\u0430\u043d \"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 SIP\", \u0433\u0434\u0435 \u043e\u0434\u043d\u0438\u043c \u0438\u0437 \u043f\u0443\u043d\u043a\u0442\u043e\u0432 \u0431\u0443\u0434\u0435\u0442 \"\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c QR-\u043a\u043e\u0434\". \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0435\u0433\u043e, \u043e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u0443\u0439\u0442\u0435 \u043a\u043e\u0434 \u0441 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u043d\u0438\u0436\u0435. \u0412 \u043d\u0435\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442\u0441\u044f \u0430\u0434\u0440\u0435\u0441 \u0430\u0442\u0441, \u043f\u0440\u043e\u043a\u043e\u0442\u043e\u043b tls, \u0430\u0434\u0440\u0435\u0441 stun-\u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041a\u043e\u0434 \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0442\u044c \u043f\u043e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u0441 \u0441\u0430\u0439\u0442\u0430 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0447\u0438\u043a\u0430.</li> <li>\u041f\u043e\u0441\u043b\u0435 \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u0444\u043e\u0440\u043c\u0443 \u043f\u044f\u0442\u0438\u0437\u043d\u0430\u0447\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0438 \u043f\u0430\u0440\u043e\u043b\u044c. </li> <li>\u0412 \u043c\u0435\u043d\u044e \"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\" -&gt; \"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c\" \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 SRTP. \u0415\u0441\u043b\u0438 \u043d\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0442\u044c, \u0442\u043e \u043f\u0440\u0438 \u0437\u0432\u043e\u043d\u043a\u0435 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0430 \"\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u0434\u0435\u043a\u043e\u0432\".</li> <li>\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0437\u0430\u043f\u0443\u0441\u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0432 \u043c\u0435\u043d\u044e \"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\" -&gt; \"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f\". \u041f\u0443\u043d\u043a\u0442 \"\u0410\u0432\u0442\u043e\u0437\u0430\u043f\u0443\u0441\u043a\" \u0432 \u0441\u0430\u043c\u043e\u043c \u043d\u0438\u0437\u0443 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438.</li> <li>\u041f\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0432 \u043f\u0430\u043d\u0435\u043b\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439. \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d (TLS)\".</li> <li>\u0415\u0441\u043b\u0438 \u0438\u043a\u043e\u043d\u043a\u0430 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0432 \u043f\u0430\u043d\u0435\u043b\u0438 \u043d\u0435 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u0440\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u0442\u043e \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0432\u044b\u0437\u043e\u0432 \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f \u0438 \u0432\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043b\u0430\u0442\u043d\u044b\u0445 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439. \u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0438\u0437 \u043f\u0430\u043c\u044f\u0442\u0438. \u0412 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u0445 xiaomi \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043b\u0435\u0432\u0443\u044e \u043d\u0438\u0436\u043d\u0443\u044e \u043a\u043d\u043e\u043f\u043a\u0443 \u0434\u043b\u044f \u0432\u044b\u0432\u043e\u0434\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439. \u0423\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 sipnetic, \u0434\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u043f\u043e\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u0438\u043a\u043e\u043d\u043a\u0438 \u0437\u0430\u043c\u043a\u0430 \u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0435\u0433\u043e. \u0421\u043b\u0435\u0434\u0443\u0439\u0442\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Sipnetic \u0432 Xiaomi. \u0412 \u043f\u0440\u043e\u0447\u0438\u0445 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\u0445 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u0445\u043e\u0436\u0430\u044f \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0430. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 \u0434\u043b\u044f \u0432\u044b\u0432\u043e\u0434\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439. \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0438\u043c\u0432\u043e\u043b, \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0430\u044e\u0449\u0438\u0439 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 Pin(\u0437\u0430\u043a\u0440\u0435\u043f\u0438\u0442\u044c) \u0434\u043b\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</li> <li>\u041f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u0435 \u043d\u0430 \u043d\u043e\u043c\u0435\u0440 <code>*9195</code> \u0438 \u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0432. \u0412\u044b \u0443\u0441\u043b\u044b\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0438\u0441\u044c \u0432\u0430\u0448\u0438\u0445 \u0441\u043b\u043e\u0432 \u0441 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434. \u041d\u0430 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u044f\u0445 xiaomi \u043c\u043e\u0436\u0435\u0442 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043c\u0438\u043a\u0440\u043e\u0444\u043e\u043d. \u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u0432 \u043c\u0435\u043d\u044e \"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f\" -&gt; \"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 audio\". \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043c\u0438\u043a\u0440\u043e\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \"Voice recognition\", \u0430 \u043d\u0435 \"Voice communication\".</li> </ul>"},{"location":"voip/softphone/#linphone","title":"Linphone","text":"<ul> <li>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 Linphone \u0438\u0437 GooglePlay</li> <li>\u0415\u0441\u043b\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0440\u0430\u043d\u0435\u0435 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c, \u0441\u043e\u0442\u0440\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u044d\u0442\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0435 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u043d\u044e \"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\" \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430.</li> <li>\u041f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u043c \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u043e \"\u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\", \"\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442 linphone\", \"\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c sip-account\", \"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u0443\u044e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e\". \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \"\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c sip-account\"</li> <li>\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u044f</li> </ul> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u044f\u0442\u0438\u0437\u043d\u0430\u0447\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u041f\u0430\u0440\u043e\u043b\u044c \u043f\u0430\u0440\u043e\u043b\u044c \u0414\u043e\u043c\u0435\u043d yourdomain <p>\u041d\u0430 \u044d\u0442\u043e\u043c \u0436\u0435 \u044d\u043a\u0440\u0430\u043d\u0435 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442 TLS</p> <ul> <li>\u0412 \u043c\u0435\u043d\u044e \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0432\u0430\u0448 \u043d\u043e\u043c\u0435\u0440 \u0438 \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438.</li> </ul> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0421\u0435\u0440\u0432\u0435\u0440 STUN/TURN yourdomain \u0418\u0441\u0442\u0435\u043a\u0430\u0435\u0442 300 \u041f\u0440\u0435\u0444\u0438\u043a\u0441 \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u0432\u0441\u0435 \u0446\u0438\u0444\u0440\u044b, \u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u0443\u0441\u0442\u043e\u0435 \u043f\u043e\u043b\u0435 <p>\u041d\u0430\u043b\u0438\u0447\u0438\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u043e\u0448\u0438\u0431\u043a\u0435 Temporarily Unavailable. \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0432\u044b\u0437\u043e\u0432\u043e\u0432, \u0433\u0434\u0435 \u043f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 \u043a \u043d\u0430\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u043d\u043e\u043c\u0435\u0440\u0443 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f +7, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440. * \u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0438 \u0432\u043d\u0435\u0441\u0438\u0442\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0440\u0435\u0436\u0438\u043c \"\u041d\u0435 \u0431\u0435\u0441\u043f\u043e\u043a\u043e\u0438\u0442\u044c\" (DND). \u0412 Xiaomi \u044d\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u043d\u044e \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 =&gt; \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f =&gt; \u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f =&gt; \u0414\u0440\u0443\u0433\u0438\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f =&gt; Linphone =&gt; \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0441\u0451 , \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 =&gt; \u041f\u0438\u0442\u0430\u043d\u0438\u0435 \u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c =&gt; \u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 =&gt; linphone =&gt; \u041d\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439. \u041f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u0439 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u043f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c \u0438\u043b\u0438 \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0432\u044b\u0437\u043e\u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0432\u044b\u0434\u0430\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e Linphone \u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0437\u0432\u0443\u043a? \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0433\u0430\u043b\u043e\u0447\u043a\u0443 \"\u0411\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0441\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c\" \u0438 \u043d\u0430\u0436\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0443 \"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\". </p>"},{"location":"voip/softphone/#zoiper","title":"Zoiper","text":"<ul> <li>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 Zoiper</li> <li>\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0443 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \"create account\"</li> </ul> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043b\u043e\u0433\u0438\u043d@yourdomain \u041f\u0430\u0440\u043e\u043b\u044c \u043f\u0430\u0440\u043e\u043b\u044c <ul> <li>\u0412 \u043f\u043e\u043b\u0435 \u0438\u043c\u044f \u0445\u043e\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 yourdomain</li> <li>\u0414\u0430\u043b\u0435\u0435 \u0431\u0443\u0434\u0435\u0442 \u0444\u043e\u0440\u043c\u0430 \u0434\u043b\u044f \u0432\u0432\u043e\u0434\u0430 \u0438\u043c\u0435\u043d\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u043f\u0430\u0440\u043e\u043b\u044f. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c\".</li> <li>\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0441\u044f \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439 \u0438 \u0431\u0443\u0434\u0435\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u044b\u0431\u0440\u0430\u043d \u043f\u0443\u043d\u043a\u0442 SIP TLS \u0438\u043b\u0438 TCP \u0438\u043b\u0438 UDP. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \"\u041a\u043e\u043d\u0435\u0446\".</li> <li>\u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0438 \u0432\u043d\u0435\u0441\u0438\u0442\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0440\u0435\u0436\u0438\u043c \"\u041d\u0435 \u0431\u0435\u0441\u043f\u043e\u043a\u043e\u0438\u0442\u044c\" (DND). \u0412 Xiaomi \u044d\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u043d\u044e \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 =&gt; \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f =&gt; \u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f=&gt; \u0414\u0440\u0443\u0433\u0438\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f =&gt; Zoiper =&gt; \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0441\u0451 , \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 =&gt; \u041f\u0438\u0442\u0430\u043d\u0438\u0435 \u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c =&gt; \u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 =&gt; Zoiper=&gt; \u041d\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439.\u041f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u0439 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u043f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c \u0438\u043b\u0438 \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0432\u044b\u0437\u043e\u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0432\u044b\u0434\u0430\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e Zoiper \u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0437\u0432\u0443\u043a? \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0433\u0430\u043b\u043e\u0447\u043a\u0443 \"\u0411\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0441\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c\" \u0438 \u043d\u0430\u0436\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0443 \"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\". </li> </ul>"},{"location":"voip/softphone/#acrobits","title":"Acrobits","text":"<p>\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043a\u043e\u043c\u043c\u0435\u0440\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u043d\u044b\u0435. \u0412\u043e\u0442 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439:</p> <ul> <li>Acrobits Softphone</li> <li>Groundwire \u0442\u043e\u0442 \u0436\u0435 Acrobits, \u043d\u043e \u0441 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f\u043c\u0438 \u0438 \u0432\u0438\u0434\u0435\u043e.</li> </ul> <p>\u041e\u0437\u043d\u0430\u043a\u043e\u043c\u044c\u0442\u0435\u0441\u044c \u0441 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0435\u0439 \u043f\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 \u041e\u0421 androin \u0438 ios How To Make Acrobits Push Notifications Work In The Russian Federation.</p> <p>\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430</p> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 myphone \u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u043e\u043c\u0435\u0440 \u041f\u0430\u0440\u043e\u043b\u044c \u043f\u0430\u0440\u043e\u043b\u044c \u0414\u043e\u043c\u0435\u043d yourdomain <p>\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438</p> \u041f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0432\u043e\u043d\u043a\u0438 Push-\u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u044b\u0439 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b tls(sip) <p>\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 - \u041e\u0431\u0445\u043e\u0434 NAT</p> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0421\u0435\u0440\u0432\u0435\u0440 STUN yourdomain <p>\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 - Push options</p> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0425\u043e\u0441\u0442 SIPIS ru.sipis.acrobits.cz \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 SIPIS ru.sipis.acrobits.cz \u0414\u043b\u0438\u043d\u0430 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 SIPIS 0 <p>\u041f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u0435 \u043d\u0430 \u043d\u043e\u043c\u0435\u0440 <code>*9195</code> \u0438 \u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0432. \u0412\u044b \u0443\u0441\u043b\u044b\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0438\u0441\u044c \u0432\u0430\u0448\u0438\u0445 \u0441\u043b\u043e\u0432 \u0441 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434.</p> <p>\u041f\u0440\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430\u0445 \u0441 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0435\u0439 \u0441\u0432\u044f\u0437\u044c\u044e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043c\u0435\u043d\u044e \"\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\", \"\u0443\u0447\u0435\u0442\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438\", \"\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\". \u0422\u0430\u043c \u0431\u0443\u0434\u0443\u0442 \u043f\u0443\u043d\u043a\u0442\u044b \u043f\u0440\u043e \u043a\u043e\u0434\u0435\u043a\u0438 \u0434\u043b\u044f wifi \u0438 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0439 \u0441\u0435\u0442\u0438. \u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0432\u0441\u0435, \u043a\u0440\u043e\u043c\u0435 G711 A-law, \u0432 \u0441\u0435\u043a\u0446\u0438\u044e \"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0435\".</p>"},{"location":"voip/softphone/#ios","title":"\u0421\u043e\u0444\u0442\u0444\u043e\u043d\u044b \u0432 iOS","text":"<p>\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c, \u0447\u0442\u043e \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 11 \u0432\u0435\u0440\u0441\u0438\u0438 iOS, \u0432\u0441\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f ip-\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0438\u0438 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442, \u043a\u043e\u0433\u0434\u0430 \u043d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u044b. \u0415\u0441\u043b\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u0442\u043e \u0447\u0435\u0440\u0435\u0437 \u043f\u0430\u0440\u0443 \u043c\u0438\u043d\u0443\u0442 \u043d\u0435\u043b\u044c\u0437\u044f \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0432\u044b\u0437\u043e\u0432. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432 Zoiper \u0435\u0441\u0442\u044c Premium \u0444\u0443\u043d\u043a\u0438\u043e\u043d\u0430\u043b Push-\u0435\u0439. \u0411\u0435\u0437 \u043d\u0435\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0435\u0439 \u0441\u0432\u044f\u0437\u044c\u044e, \u0443\u0447\u0430\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u0410\u041a\u0421. Push'\u0438 \u0432 Zoiper \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043f\u043e \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0435, \u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 Acrobits \u043c\u043e\u0436\u043d\u043e \u043a\u0443\u043f\u0438\u0442\u044c \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0438 push'\u0438 \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c. \u041f\u043e\u043a\u0430 \u0432\u0430\u0448\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u043d\u0430 \u0430\u0442\u0441 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0441\u0435\u0440\u0432\u0435\u0440 Acrobits.</p>"},{"location":"voip/softphone/#zoiper_1","title":"Zoiper","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 Zoiper Lite. \u0421 \u0435\u0435 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0432\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0432\u043e\u043d\u043a\u0438, \u0443\u0447\u0430\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u0410\u041a\u0421.</p> <ul> <li>\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435 \u0434\u043e\u0441\u0442\u0443\u043f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043a \u043c\u0438\u043a\u0440\u043e\u0444\u043e\u043d\u0443 \u043f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u043c \u0437\u0430\u043f\u0443\u0441\u043a\u0435.</li> <li>\u0412 \u043c\u0435\u043d\u044e \"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\" - \"\u0423\u0447\u0435\u0442\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438\" \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u0437\u043d\u0430\u043a \"+\" \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438.</li> <li>\u041d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441 \"\u0423 \u0432\u0430\u0441 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0443\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c (\u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u043f\u0430\u0440\u043e\u043b\u044c)?\" \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \"\u0414\u0430\"</li> <li>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \"\u0420\u0443\u0447\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\"</li> <li>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 \"\u0423\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c SIP\"</li> <li>\u0412 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0444\u043e\u0440\u043c\u0435 \"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b SIP\" \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435</li> </ul> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0423\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c myphone (\u043c\u043e\u0436\u043d\u043e \u0447\u0442\u043e \u0443\u0433\u043e\u0434\u043d\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c) \u0414\u043e\u043c\u0435\u043d yourdomain \u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u044f\u0442\u0438\u0437\u043d\u0430\u0447\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u041f\u0430\u0440\u043e\u043b\u044c \u0432\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c <ul> <li>\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 </li> </ul> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0418\u043c\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0443\u0441\u0442\u043e (\u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u044f\u0442\u044c) \u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u043f\u0440\u043e\u043a\u0441\u0438 \u043d\u0435 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u043f\u0440\u043e\u043a\u0441\u0438 \u043f\u0443\u0441\u0442\u043e (\u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u044f\u0442\u044c) <p>\u0423\u0436\u0435 \u043d\u0430 \u044d\u0442\u043e\u043c \u044d\u0442\u0430\u043f\u0435 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0436\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0443 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0443\u0447\u0435\u0442\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445. \u0415\u0441\u043b\u0438 \u043e\u0448\u0438\u0431\u043a\u0430 \u0432 \u043f\u0430\u0440\u043e\u043b\u0435, \u0442\u043e \u043d\u0430\u043f\u0438\u0448\u0435\u0442 Forbidden. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435, \u0447\u0442\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0432 \u043f\u043e\u043b\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442 \u0441 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0432 \u043f\u0430\u0448\u0435\u043c \u043f\u0430\u0440\u043e\u043b\u0435. \u041f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043d\u0435\u0447\u0438\u0442\u0430\u0435\u043c\u044b\u043c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u043b\u0443\u0447\u0448\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u0435 \u0441\u043c\u0435\u043d\u0443 \u043f\u0430\u0440\u043e\u043b\u044f. \u0414\u0430\u043b\u044c\u0448\u0435\u0439\u0448\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043f\u0440\u0438 \u043e\u0442\u043c\u0435\u043d\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043f\u0443\u043d\u043a\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e\". </p> <ul> <li>\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 - \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0435\u0442\u0438 - \u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442. \u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c IPv6. \u0412\u043c\u0435\u0441\u0442\u043e UDP \u0432\u044b\u0431\u0440\u0430\u0442\u044c TLS \u0438 \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441 \"\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u043f\u0446\u0438\u044e rport - \u0441\u0438\u0433\u043d\u0430\u043b\u044c\u043d\u044b\u0439?\" \u043d\u0430\u0436\u0430\u0442\u044c \"\u0414\u0430\"</li> <li>\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 - \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0435\u0442\u0438 - NAT.</li> </ul> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c STUN \u0412\u043a\u043b\u043b\u044e\u0447\u0435\u043d\u043e ( \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e) \u0421\u0435\u0440\u0432\u0435\u0440 yourdomain <p>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c\" \u0432 \u0432\u0435\u0440\u0445\u043d\u0435\u043c \u043f\u0440\u0430\u0432\u043e\u043c \u0443\u0433\u043b\u0443.</p> <ul> <li>\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 - \u0410\u0443\u0434\u0438\u043e\u043a\u043e\u0434\u0435\u043a\u0438. \u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u0441\u0435 \u043a\u043e\u0434\u0435\u043a\u0438, \u043a\u0440\u043e\u043c\u0435 a-law.</li> <li>\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0437\u0435\u043b\u0435\u043d\u0443\u044e \u043a\u043d\u043e\u043f\u043a\u0443 \"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\".</li> </ul>"},{"location":"voip/softphone/#acrobits_1","title":"Acrobits","text":"<p>https://www.acrobits.net/sip-client-ios-android/ \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u0434\u043b\u044f Android \u0438 ios. Groundwire \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0442 Acrobits Softphone \u043d\u0430\u043b\u0438\u0447\u0438\u0435\u043c \u043a\u043e\u043d\u0444\u0438\u0440\u0435\u043d\u0446\u0438\u0439 \u0438 \u043f\u0435\u0440\u0435\u0430\u0434\u0440\u0435\u0441\u0430\u0446\u0438\u0435\u0439. \u041e\u0437\u043d\u0430\u043a\u043e\u043c\u044c\u0442\u0435\u0441\u044c \u0441 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0435\u0439 \u043f\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 \u041e\u0421 android \u0438 ios How To Make Acrobits Push Notifications Work In The Russian Federation.</p> <p>\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430</p> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 myphone \u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u043e\u043c\u0435\u0440 \u041f\u0430\u0440\u043e\u043b\u044c \u043f\u0430\u0440\u043e\u043b\u044c \u0414\u043e\u043c\u0435\u043d yourdomain <p>\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438</p> \u041f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0432\u043e\u043d\u043a\u0438 Push-\u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u044b\u0439 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b tls(sip) <p>\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 - \u041e\u0431\u0445\u043e\u0434 NAT</p> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0421\u0435\u0440\u0432\u0435\u0440 STUN yourdomain <p>\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 - Push options</p> \u041f\u043e\u043b\u0435 \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0425\u043e\u0441\u0442 SIPIS ru.sipis.acrobits.cz \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 SIPIS ru.sipis.acrobits.cz \u0414\u043b\u0438\u043d\u0430 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 SIPIS 0 <p>\u041f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u0435 \u043d\u0430 \u043d\u043e\u043c\u0435\u0440 <code>*9195</code> \u0438 \u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0432. \u0412\u044b \u0443\u0441\u043b\u044b\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0438\u0441\u044c \u0432\u0430\u0448\u0438\u0445 \u0441\u043b\u043e\u0432 \u0441 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434.</p> <p>\u041f\u0440\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430\u0445 \u0441 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0435\u0439 \u0441\u0432\u044f\u0437\u044c\u044e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043c\u0435\u043d\u044e \"\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\", \"\u0443\u0447\u0435\u0442\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438\", \"\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\". \u0422\u0430\u043c \u0431\u0443\u0434\u0443\u0442 \u043f\u0443\u043d\u043a\u0442\u044b \u043f\u0440\u043e \u043a\u043e\u0434\u0435\u043a\u0438 \u0434\u043b\u044f wifi \u0438 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0439 \u0441\u0435\u0442\u0438. \u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0432\u0441\u0435, \u043a\u0440\u043e\u043c\u0435 G711 A-law, \u0432 \u0441\u0435\u043a\u0446\u0438\u044e \"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0435\".</p>"},{"location":"voip/softphone/#_9","title":"\u0421\u043e\u0444\u0442\u0444\u043e\u043d\u044b \u043d\u0430 \u041f\u041a","text":""},{"location":"voip/softphone/#microsip","title":"MicroSIP","text":"<p>\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 Microsip \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u0438 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043f\u0440\u0430\u0432 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438.</p>"},{"location":"work/adguardhome/","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 AdGuardHome \u043d\u0430 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 raspberry pi","text":"<p>\u041d\u0443\u0436\u043d\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c ansible \u0440\u043e\u043b\u044c, \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441 \u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435. pi \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0441 \u043d\u0443\u043b\u044f, \u0430\u0434\u0440\u0435\u0441 \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d \u0432 dhcp \u0438\u043b\u0438 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439, \u0432\u043a\u043b\u044e\u0447\u0435\u043d ssh. \u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0435 AdGuardHome.</p>"},{"location":"work/adguardhome/#pi","title":"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u043d\u0430 pi","text":"<p>\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0442\u044c \u043a\u043b\u044e\u0447. \u0414\u043e\u043c\u0430 \u0431\u0435\u0437 \u043f\u0430\u0440\u043e\u043b\u044f \u0441\u043e\u0439\u0434\u0435\u0442 <pre><code>(base) vit@a:~$ ssh-keygen \nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/vit/.ssh/id_rsa): \nEnter passphrase (empty for no passphrase): \nEnter same passphrase again: \nYour identification has been saved in /home/vit/.ssh/id_rsa.\nYour public key has been saved in /home/vit/.ssh/id_rsa.pub.\nThe key fingerprint is:\nSHA256:Zvzpu/8ANQ1+ldUlsTr9AtDj/uHFAnsyXAKmHr3L5r0 vit@a\nThe key's randomart image is:\n+---[RSA 2048]----+\n|            . o.O|\n|           o o =.|\n|          + * +  |\n|       . + = *   |\n|        S o B o  |\n|       + o * B o |\n|        . + B = +|\n|         o.o B = |\n|         oB+Eo+  |\n+----[SHA256]-----+\n</code></pre> \u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u044e\u0447 \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f. <pre><code>(base) vit@a:~$ ssh-copy-id -i pi@192.168.2.254\n/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: \"/home/vit/.ssh/id_rsa.pub\"\n/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed\n/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys\npi@192.168.2.254's password: \n\nNumber of key(s) added: 1\n\nNow try logging into the machine, with:   \"ssh 'pi@192.168.2.254'\"\nand check to make sure that only the key(s) you wanted were added.\n\n(base) vit@a:~$ ssh pi@192.168.2.254\nLinux raspberrypi 5.4.51-v7+ #1327 SMP Thu Jul 23 10:58:46 BST 2020 armv7l\n</code></pre></p>"},{"location":"work/adguardhome/#ansible","title":"\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 ansible","text":"<p>\u0412 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 ~/work/home \u0431\u0443\u0434\u0435\u0442 \u0440\u043e\u043b\u044c \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 ansible, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0447\u0435\u0440\u0435\u0437 miniconda. <pre><code>(base) vit@a:~/work/home$ cat ansible.cfg \n[defaults]\nhost_key_checking = False\ninventory=./inventory\n(base) vit@a:~/work/home$ cat inventory \n[all:children]\nhome\n\n[home]\npi ansible_host=192.168.2.254\n\n[home:vars]\nansible_user=pi\nansible_become=true\n\n(base) vit@a:~/work/home$ ansible all --list-hosts\n  hosts (1):\n    pi\n\n(base) vit@a:~/work/home$ ansible all -m ping\n[WARNING]: Platform linux on host pi is using the discovered Python interpreter at /usr/bin/python, but future installation of another Python interpreter could change\nthis. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.\npi | SUCCESS =&gt; {\n    \"ansible_facts\": {\n        \"discovered_interpreter_python\": \"/usr/bin/python\"\n    },\n    \"changed\": false,\n    \"ping\": \"pong\"\n}\n</code></pre></p>"},{"location":"work/adguardhome/#ansible_1","title":"\u0420\u043e\u043b\u044c ansible","text":"<p>\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c https://github.com/v98765/ansible-adguardhome. \u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c <pre><code>$ git clone https://github.com/v98765/ansible-adguardhome\n</code></pre></p>"},{"location":"work/adguardhome/#_1","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"<p>\u041a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0430 yamllint <pre><code>(base) vit@a:~/work/home$ yamllint roles\nroles/adguardhome/tasks/install.yml\n  29:81     error    line too long (158 &gt; 80 characters)  (line-length)\n  30:81     error    line too long (117 &gt; 80 characters)  (line-length)\n  41:81     error    line too long (116 &gt; 80 characters)  (line-length)\n</code></pre> \u041e\u0448\u0438\u0431\u043e\u043a \u0432 \u043f\u043b\u0435\u0435 \u043d\u0435\u0442 <pre><code>(base) vit@a:~/work/home$ ansible-playbook play-pi.yml --syntax-check\n\nplaybook: play-pi.yml\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430 pi <pre><code>(base) vit@a:~/work/home$ ansible-playbook play-pi.yml --check\n</code></pre></p>"},{"location":"work/adguardhome/#_2","title":"\u0417\u0430\u043f\u0443\u0441\u043a","text":"<pre><code>$ ansible-playbook play-pi.yml\n</code></pre>"},{"location":"work/ansible_ntwrk/","title":"Ansible for ntwrk","text":""},{"location":"work/ansible_ntwrk/#best-practices","title":"best practices","text":"<p>Network Best Practices for Ansible 2.5 \u041c\u043e\u0434\u0443\u043b\u0438 net_get \u0432 2.6, \u0447\u0442\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043e \u0432 Red Hat Ansible Network Automation Updates</p>"},{"location":"work/ansible_ntwrk/#ansible-ubuntu","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 ansible \u0432 ubuntu","text":"<p>\u0415\u0441\u0442\u044c \u0442\u0430\u043a \u0441\u0435\u0431\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u044b, \u043f\u043e\u0447\u0435\u043c\u0443 \u043d\u0435 \u0447\u0435\u0440\u0435\u0437 pip, \u0430 \u0447\u0435\u0440\u0435\u0437 apt. \u041b\u0443\u0447\u0448\u0435 \u0447\u0435\u0440\u0435\u0437 pip \u0438\u043b\u0438 miniconda. installing-ansible-on-ubuntu</p> <pre><code>$ sudo apt update\n$ sudo apt install software-properties-common\n$ sudo apt-add-repository --yes --update ppa:ansible/ansible\n$ sudo apt install ansible\n</code></pre> <p>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u043c\u043e\u0434\u0443\u043b\u0435\u0439 net_get, net_put \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c scp. <pre><code>$ sudo apt install python-scp\n</code></pre></p> <p>\u0412 centos 7 c python-scp.noarch 0:0.7.1-3.el7 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 pip \u0432 venv <code>pip install scp</code> \u0438\u043b\u0438 miniconda <code>conda install scp</code>.</p>"},{"location":"work/ansible_ntwrk/#_1","title":"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<p>\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043a\u043e\u043b-\u0432\u0430 \u043f\u0430\u043c\u044f\u0442\u0438, \u043a\u043e\u0433\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u043a\u043e\u043b-\u0432\u043e forks. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e forks = 5</p> <p>ansible.cfg \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 <pre><code>[defaults]\nhost_key_checking = False\n#forks = 20\ninventory=./inventory\n[ssh_connection]\npipelining = true\n</code></pre></p> <p>\u0412 inventory. \u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0434\u0430\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c, \u043c\u043e\u0436\u043d\u043e \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 <pre><code>[all:children]\ncisco_l2\n\n[all:vars]\nansible_python_interpreter=/usr/bin/python3\n\n[cisco_l2]\ncisco-switch1 ansible_host=10.0.0.1\ncisco-switch2 ansible_host=10.0.0.2\n\n[cisco_l2:vars]\nansible_become=no\nansible_network_os=ios\nciscocopy_dir=/var/lib/cisco\n</code></pre></p> <p>playbook ciscocopy.yml. \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u043d\u0430\u043b\u043e\u0433\u0430 \u043d\u0435\u0442, \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0438 \u043d\u0438\u0436\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043e \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 <pre><code>---\n- name: copy config\n  hosts: cisco_l2\n  connection: network_cli\n  gather_facts: false\n\n  tasks:\n    - name: set scp server\n      cli_config:\n        config: ip scp server enable\n      notify:\n        - SAVE CONFIGURATION\n      tags:\n        - ciscocopy_set\n\n    - name: copy file from the network device to localhost\n      net_get:\n        src: startup-config\n        dest: \"{{ ciscocopy_dir }}/{{ inventory_hostname_short }}.cfg\"\n        protocol: scp\n      tags:\n        - ciscocopy_backup\n\n  handlers:\n\n    - name: SAVE CONFIGURATION\n      cli_command:\n        command: write memory\n</code></pre></p> <p>\u0417\u0430\u043f\u0443\u0441\u043a, \u0433\u0434\u0435 -k \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0432\u0432\u043e\u0434 \u043f\u0430\u0440\u043e\u043b\u044f \u0434\u043b\u044f \u0443\u0447\u0435\u0442\u043a\u0438 ciscologin <pre><code>$ ansible-playbook ciscocopy.yml -u ciscologin -k\n</code></pre></p> <p>\u041a\u043e\u0433\u0434\u0430 \u043d\u0430 \u0432\u0441\u0435\u0445 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430\u0445 \u0443\u0436\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d scp server, \u0442\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0441 \u0442\u0435\u0433\u043e\u043c <pre><code>$ ansible-playbook ciscocopy.yml -u ciscologin -k --tag ciscocopy_backup\n</code></pre></p> <p>\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043f\u043b\u0435\u0439 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 <pre><code>$ ansible-playbook ciscocopy.yml -u ciscologin -k --limit cisco-switch2\n</code></pre></p>"},{"location":"work/ansible_ntwrk/#junos","title":"junos","text":"<p>\u041d\u0438\u0436\u0435 \u0432\u0441\u0435 \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430, \u0431\u0435\u0437 \u0434\u043e\u043f. \u043f\u0440\u043e\u0432\u0435\u0440\u043e\u043a \u043d\u0430 \u0447\u0442\u043e-\u043b\u0438\u0431\u043e.</p> <p>\u0412 \u0438\u043d\u0432\u0435\u043d\u0442\u043e\u0440\u0438 <pre><code>[all:children]\njuniper_l2\n\n[all:vars]\nansible_python_interpreter=/usr/bin/python3\n\n[juniper_l2]\njuniper-switch1 ansible_host=10.0.0.1\n\n[juniper_l2:vars]\nansible_become=no\nansible_network_os=junos\n</code></pre></p> <p>\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e. \u041d\u0430\u0434\u043e \u043f\u043e\u0434\u0443\u043c\u0430\u0442\u044c \u043a\u0430\u043a \u0431\u044b\u0442\u044c \u0441 \u0430\u0440\u0445\u0438\u0432\u043e\u043c, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u043c\u043e\u0434\u0443\u043b\u044c \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442. \u0421 \u0442\u0435\u043a\u0441\u0442\u043e\u043c \u043e\u043a. <pre><code>---\n- name: copy config\n  hosts: juniper_l2\n  connection: network_cli\n  gather_facts: false\n\n  tasks:\n    - name: copy file from the network device to localhost\n      net_get:\n        src: /config/juniper.conf.gz\n        dest: \"~/config/{{ inventory_hostname_short }}.conf.gz\"\n        protocol: scp\n</code></pre> \u041f\u043e\u043b\u043e\u0436\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043d\u0430 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435  \u043d\u0435 \u0431\u044b\u043b\u043e. <pre><code>---\n- name: copy config\n  hosts: juniper_l2\n  connection: network_cli\n  gather_facts: false\n\n  tasks:\n    - name: copy file from the network device to localhost\n      net_get:\n        src: /config/juniper.conf.gz\n        dest: \"~/config/{{ inventory_hostname_short }}.conf.gz\"\n        protocol: scp\n</code></pre> \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0443\u044e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u043d\u0430 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435, \u043b\u0438\u0431\u043e \u0441\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u0441 \u0442\u0435\u043a\u0443\u0449\u0435\u0439, \u0435\u0441\u043b\u0438 <code>--check</code> \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u043f\u043b\u0435\u044f. \u041f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043e\u043d\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 <code>load override</code>, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f <code>show | compare</code>. \u041d\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439, \u0442\u043e <code>rollback 0</code> \u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435. \u0415\u0441\u043b\u0438 <code>show | compare</code> \u0441 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u043c\u0438, \u0442\u043e <code>commit and-quit</code>. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0435\u0441\u0442\u044c, \u0447\u0442\u043e \u0435\u0441\u0442\u044c \u043c\u0430\u043b\u043e\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0434\u043e\u043b\u0433\u043e \u0434\u0435\u043b\u0430\u0435\u0442 commit. \u0415\u0441\u043b\u0438 <code>commit</code> \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u0435\u0435 30 \u0441\u0435\u043a, \u0442\u043e \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0434\u0435\u0444\u043e\u043b\u0442\u043e\u0432\u044b\u0439 \u0442\u0430\u0439\u043c\u0430\u0443\u0442 \u043d\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e. \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043d\u0430 \u043c\u043e\u0434\u0443\u043b\u044c cli_config \u0441 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u043c\u0438.</p> <pre><code>---\n- name: copy config\n  hosts: juniper_l2\n  connection: network_cli\n  gather_facts: false\n\n  tasks:\n    - name: junos replace config\n      cli_config:\n        replace: \"/var/tmp/{{ inventory_hostname_short }}.conf\"\n</code></pre>"},{"location":"work/app_proxy/","title":"Proxy for app","text":"<p>\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u043a\u0441\u0438 \u0432 /etc/defaults/appname <pre><code>https_proxy=\"http://proxy.a.u:3128\"\nhttp_proxy=\"http://proxy.a.u:3128\"\nno_proxy=\"localhost,127.0.0.1,10.0.0.0/8,.mycompany.ru\"\n</code></pre></p>"},{"location":"work/empty/","title":"Empty, sshpass","text":"<p>\u0410\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e, \u0435\u0441\u043b\u0438 \u0441\u0435\u0439\u0447\u0430\u0441 2014 \u0433\u043e\u0434, \u043b\u0438\u0431\u043e \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0438\u0440\u0443\u0435\u043c\u043e\u0435 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435 - \u0434\u0440\u043e\u0432\u0430. \u0414\u043b\u044f \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432 \u043d\u0443\u0436\u0435\u043d \u0441\u043f\u0438\u0441\u043e\u043a \u0445\u043e\u0441\u0442\u043e\u0432, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043a\u0430\u043d\u0430\u043b\u043e\u0433\u0435 \u0444\u0430\u0439\u043b LIST, \u0433\u0434\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0441\u0442\u0440\u043e\u0447\u043d\u043e \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u044b \u0430\u0434\u0440\u0435\u0441\u0430/\u0438\u043c\u0435\u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432: <pre><code>1.2.3.4\n5.6.7.8\n</code></pre></p>"},{"location":"work/empty/#sshpass","title":"sshpass","text":"<p>\u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439 \u0441 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f cisco, \u0433\u0434\u0435 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d scp server. <pre><code>#!/bin/bash\n\nread -p \"Username: \"  username\necho -n 'Password:'\nread -s SSHPASS\nexport SSHPASS\nmkdir -p cfg\ncat LIST | while read line ; do\n    if ping -q -c 2 $line &gt; /dev/null 2&gt;&amp;1; then\n        sshpass -e scp -q $username@${line}:startup-config cfg/${line}.cfg\n        rc=$?; echo \"instance: $line, code: $rc\"\n    fi\ndone\n\nunset SSHPASS\necho $SSHPASS\n</code></pre></p>"},{"location":"work/empty/#empty-expect","title":"empty-expect","text":"<p>\u0412 ubuntu \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 empty-expect <pre><code>apt install empty-expect\n</code></pre> \u041c\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c\u0441\u044f telnet'\u043e\u043c, ssh. \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u0435, \u0435\u0441\u043b\u0438 \u0443 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043d\u0435\u0442 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043f\u0440\u043e\u0431\u043b\u0435\u043c \u0441 \u044d\u0445\u043e\u043c, \u043a\u0430\u043a \u0443 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u043e\u0432 tfortis,\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440. \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u0440\u043e\u0441\u0442\u043e \u0438 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u0434\u043e\u0431\u043d\u043e, \u0435\u0441\u043b\u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0432\u0441\u0435 \u0447\u0435\u0440\u0435\u0437 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u0447\u0442\u043e\u0431\u044b \u043a \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0443 \u0431\u044b\u043b\u043e \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0441\u043e \u0441\u0432\u043e\u0438\u043c \u043b\u043e\u0433\u043e\u043c \u0438 \u0442\u043f. \u0422\u0430\u043a \u043f\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0443 \u043b\u043e\u0433\u0430 \u043c\u043e\u0436\u043d\u043e \u0441\u0443\u0434\u0438\u0442\u044c \u043e\u0431 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0441\u0442\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0441\u043a\u0440\u0438\u043f\u0442\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440. \u0427\u0442\u043e\u0431\u044b empty \u043d\u0435 \u0442\u0443\u043f\u0438\u043b\u043e \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0445\u043e\u0441\u0442\u043e\u0432 \u0438 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0438\u0445 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c.</p> <p>\u0415\u0441\u043b\u0438 \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043c\u0430\u043d\u0434 \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0438 \u043d\u0443\u0436\u0435\u043d \u0431\u043e\u043b\u0435\u0435 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043a\u0440\u0438\u043f\u0442, \u0442\u043e \u0442\u0430\u043a\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043f\u0438\u0441\u0430\u043b \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0444\u0430\u0439\u043b CMD. \u041f\u0435\u0440\u0432\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 - \u044d\u0442\u043e \u0432\u0441\u0435\u0433\u0434\u0430 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0435\u0439\u0436\u0435\u0440\u0430 \u0438 \u043f\u0440\u043e\u0447\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b, \u0441\u043d\u0438\u043c\u0430\u044e\u0449\u0438\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0432\u044b\u0432\u043e\u0434\u0443 \u0442\u0435\u043a\u0441\u0442\u0430. \u041c\u043e\u0436\u043d\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0442\u0430\u043a, \u043a\u0430\u043a \u0443\u0434\u043e\u0431\u043d\u0435\u0435.</p> <p>Juniper Junos <pre><code>set cli terminal xterm\nset cli screen-length 0\nset cli screen-width 0\nshow system alarm\nshow chassis alarms\nshow chassis hardware | no-more\n</code></pre></p> <p>Cisco IOS <pre><code>terminal length 0\nshow int status\n</code></pre></p> <p>Eltex <pre><code>terminal datadump\nshow startup\n</code></pre></p> <p>\u0426\u0438\u043a\u043b \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u0430\u043d\u0434 \u0438\u0437 \u0444\u0430\u0439\u043b\u0430 CMD. <code>sleep</code> \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c, \u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e. <pre><code>cat ./CMD | while read line ; do\n    CmdStr=$(echo $line | tr -d \"\\r\\n\")\n    empty -w -i fifoputacl/out.$Host -o fifoputacl/inc.$Host \"#\" \"${CmdStr}\\n\"\ndone\n</code></pre></p> <p>\u0423\u0447\u0435\u0442\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u0441\u043a\u0440\u0438\u043f\u0442\u0430, \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0441\u043a\u0440\u0438\u043f\u0442\u0435, \u043b\u0438\u0431\u043e \u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0444\u0430\u0439\u043b\u0430. \u0414\u0432\u0430 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 <pre><code>empty -w -i fifostatus/out.$Host -o fifostatus/inc.$Host \"assword:\" \"${Password}\\n\"\nempty -s -i fifostatus/out.$Host -o fifostatus/inc.$Host &lt; ./mypass\n</code></pre></p> <p>\u041d\u0438\u0436\u0435 \u0441\u043a\u0440\u0438\u043f\u0442. \u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0438. <pre><code>#!/bin/bash\n\n# \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0445\u043e\u0441\u0442\u0430. \u0432\u0435\u0440\u043d\u0443\u0442\u044c 1, \u0435\u0441\u043b\u0438 \u043d\u0435 \u043f\u0438\u043d\u0433\u0443\u0435\u0442\u0441\u044f.\nfunction PingIt {\n    Host=$1    \n    if ! ping -q -c 2 $Host &gt; /dev/null 2&gt;&amp;1 ; then\n        echo \"$Host down\"\n        return 1\n    fi\n}\n\n# telnet \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0445\u043e\u0441\u0442 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430.\n# \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442\u0441\u044f \u0445\u043e\u0441\u0442, \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u043f\u0430\u0440\u043e\u043b\u044c\nfunction ReadStatus {\n    Host=$1\n    Username=$2\n    Password=$3\n    #\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0442 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430 empty\n    rm -f logstatus/$Host\n    rm -f fifostatus/inc.$Host\n    rm -f fifostatus/out.$Host\n    #login\n    empty -f -i fifostatus/inc.$Host -o fifostatus/out.$Host -p pidstatus/$Host -L logstatus/$Host telnet $Host\n    sleep 2\n    empty -w -i fifostatus/out.$Host -o fifostatus/inc.$Host \"name\" \"${Username}\\n\"\n    sleep 2\n    empty -w -i fifostatus/out.$Host -o fifostatus/inc.$Host \"assword:\" \"${Password}\\n\"\n    sleep 2\n    empty -w -i fifostatus/out.$Host -o fifostatus/inc.$Host \"#\" \"\\n\"\n    # \u0435\u0441\u043b\u0438 \u043f\u043e\u0441\u043b\u0435 \u0432\u0432\u043e\u0434\u0430 \u043f\u0430\u0440\u043e\u043b\u044f \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0441\u0438\u043c\u0432\u043e\u043b #, \u0442\u043e \u0432\u044b\u0439\u0442\u0438\n    if [ $? -eq 255 ] ; then\n        empty -k `cat pidstatus/$Host`\n        echo \"$Host Incorrect password or priv lvl\"\n        return\n    fi\n    echo ''\n    echo \"Connected to $Host\"\n    #\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0432\u0432\u043e\u0434 \u043a\u043e\u043c\u0430\u043d\u0434. \u0422\u0443\u0442 \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c while \u0434\u043b\u044f \u0444\u0430\u0439\u043b\u0430 CMD\n    empty -w -i fifostatus/out.$Host -o fifostatus/inc.$Host \"#\" \"terminal length 0\\n\"\n    empty -w -i fifostatus/out.$Host -o fifostatus/inc.$Host \"#\" \"show int status\\n\"\n    empty -w -i fifostatus/out.$Host -o fifostatus/inc.$Host \"#\" \"exit\\n\"\n    sleep 2\n    #\u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043e\u0442 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430, empty \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u043b \u0438 \u0442\u0435\u043f\u0435\u0440\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u043b\u043e\u0433\u043e\u0432 \u0432\u0441\u0435, \u043a\u0440\u043e\u043c\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0433\u043e\n    echo \"got iface name logstatus/$Host\"\n    #del all but ports\n    sed -i '/\\(^Fa\\|^Gi\\|^Te\\)/!d; ' logstatus/$Host\n}\n\n#\u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0438 \u0434\u043b\u044f empty\nmkdir -p logstatus\nmkdir -p fifostatus\nmkdir -p pidstatus\n\n#\u0432\u0432\u043e\u0434 \u0443\u0447\u0435\u0442\u043a\u0438\necho -n Username:\nread Username\n\necho -n Password:\nread -s Password\n\n#\u0437\u0430\u043f\u0443\u0441\u043a \u0432 \u0446\u0438\u043a\u043b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 PingIt \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0445\u043e\u0441\u0442\u043e\u0432. \u0415\u0441\u043b\u0438 \u0443\u0441\u043f\u0435\u0445, \u0442\u043e \u0437\u0430\u043f\u0443\u0441\u043a ReadStatus \u0441 &amp;.\nfor Host in `cat LIST` ; do\n   echo \"$Host start\"\n   PingIt \"$Host\" &amp;&amp; ReadStatus \"$Host\" \"$Username\" \"$Password\" &amp;\ndone\n</code></pre></p>"},{"location":"work/github/","title":"github","text":"<p>\u041e\u0434\u0438\u043d \u0440\u0430\u0437 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u043e\u043a\u0435\u043d</p> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u0435\u043f\u0443, \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438 <pre><code>git init\ngit add .\ngit commit -m \"first commit\"\ngit branch -M main\ngit remote add origin https://github.com/v98765/v98765_exporter_blackbox.git\ngit push -u origin main\n</code></pre> \u0412\u0432\u0435\u0441\u0442\u0438 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u0442\u043e\u043a\u0435\u043d/\u043f\u0430\u0440\u043e\u043b\u044c</p> <p>\u0414\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 \u043f\u0435\u0440\u0435\u0434 push \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c: <pre><code>git config credential.helper store\n</code></pre> \u0412 \u0434\u043e\u043c\u0430\u0448\u043d\u0435\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 \u0431\u0443\u0434\u0435\u0442 \u0444\u0430\u0439\u043b <code>.git-credentials</code></p>"},{"location":"work/miniconda/","title":"Miniconda","text":"<p>Miniconda install \u0438 repo <pre><code>wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh\nsh Miniconda3-latest-Linux-x86_64.sh \nconda update conda\nconda install -c conda-forge ansible\nconda install -c conda-forge yamllint\nconda install -c conda-forge molecule\nconda install -c conda-forge mkdocs\nconda install -c conda-forge mkdocs-material\nconda install -c conda-forge mkdocs-material-extensions\nconda install scp\n</code></pre></p>"},{"location":"work/mkdocs/","title":"Mkdocs","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c mkdocs mkdocs-material, mkdocs-material-extensions \u0447\u0435\u0440\u0435\u0437 miniconda \u0434\u043b\u044f \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0447\u0435\u0440\u0435\u0437 mkdocs serve.</p> <p>\u041f\u043e\u0447\u0438\u0442\u0430\u0442\u044c:</p> <ul> <li>https://squidfunk.github.io/mkdocs-material/creating-your-site/.</li> <li>https://docs.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site</li> </ul> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c repo \u0441 \u0438\u043c\u0435\u043d\u0435\u043c yourlogin.github.io, \u0441\u043e\u0437\u0434\u0430\u0442\u044c Action \u0438\u0437 \u043f\u0435\u0440\u0432\u043e\u0439 \u0441\u0441\u044b\u043b\u043a\u0438, \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0435\u0442\u043a\u0443 gh-pages \u0434\u043b\u044f pages \u0432 Settings.</p> <p>\u041f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 git: <pre><code>git status\ngit add filename\ngit commit -m \"some commit\"\ngit push -u origin master\n</code></pre></p>"},{"location":"work/molecule/","title":"Molecule","text":""},{"location":"work/molecule/#podman","title":"podman","text":"<p>\u041d\u0438\u0436\u0435 \u0432\u0441\u0435 \u0434\u043b\u044f \u0443\u0431\u0443\u043d\u0442\u044b 2.10, \u0433\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c podman. \u0427\u0442\u043e\u0431\u044b \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c 20.04 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432 /etc/update-manager/release-upgrades \u0443\u043a\u0430\u0437\u0430\u0442\u044c <code>normal</code>. \u0414\u0430\u043b\u0435\u0435 \u0432 <code>screen</code> \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c <code>do-release-upgrade</code>. \u0412 20.10 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c: <pre><code>sudo apt install slirp4netns podman runc fuse-overlayfs\n</code></pre> \u0412 <code>$HOME/.config/containers/storage.conf</code> <pre><code>graphroot=\"$HOME/.local/share/containers/storage\"\nrunroot=\"$XDG_RUNTIME_DIR/containers\"\n</code></pre></p>"},{"location":"work/molecule/#venv","title":"venv","text":"<p>\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435 v98765.github.io/work/venv/</p>"},{"location":"work/molecule/#molecule-driver-podmap","title":"molecule driver podmap","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 <pre><code>pip install molecule ansible-lint yamllint podman molecule-podman\n</code></pre> \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 <pre><code>$ molecule --version\nmolecule 3.2.3 using python 3.8\n    ansible:2.10.5\n    delegated:3.2.3 from molecule\n\n$ molecule init role --help\nUsage: molecule init role [OPTIONS] ROLE_NAME\n\n  Initialize a new role for use with Molecule.\n\nOptions:\n  --dependency-name [galaxy]      Name of dependency to initialize. (galaxy)\n  -d, --driver-name [delegated|podman]\n                                  Name of driver to initialize. (delegated)\n  --lint-name [yamllint]          Name of lint to initialize. (yamllint)\n  --provisioner-name [ansible]    Name of provisioner to initialize. (ansible)\n  --verifier-name [ansible|testinfra]\n                                  Name of verifier to initialize. (ansible)\n  --help                          Show this message and exit.\n</code></pre></p>"},{"location":"work/molecule/#_1","title":"\u0440\u043e\u043b\u0438","text":"<p>\u0420\u043e\u043b\u0438 \u0432 \u0434\u043e\u043c\u0430\u0448\u043d\u0435\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 <pre><code>cd .ansible\nmkdir roles\ncd roles\n</code></pre> \u0418\u043c\u044f \u0440\u043e\u043b\u0438 <code>^[a-z][a-z0-9_]+$</code> <pre><code>molecule init role ansible_distkontrol --driver-name=podman\n</code></pre> \u041f\u043e\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0444\u0430\u0439\u043b meta/main.yml , \u0447\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043d\u044f\u0442\u043d\u043e \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 <pre><code>ansible-lint ansible_distkontrol\n</code></pre> \u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0431\u0440\u0430\u0437\u043e\u0432: <pre><code>platforms:\n  - name: rhel8\n    image: registry.access.redhat.com/ubi8/ubi-init\n    tmpfs:\n      - /run\n      - /tmp\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    capabilities:\n      - SYS_ADMIN\n    command: \"/usr/sbin/init\"\n    pre_build_image: true\n  - name: ubuntu\n    image: geerlingguy/docker-ubuntu2004-ansible\n    tmpfs:\n      - /run\n      - /tmp\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    capabilities:\n      - SYS_ADMIN\n    command: \"/lib/systemd/systemd\"\n    pre_build_image: true\n</code></pre> \u0412\u044b\u0431\u0440\u0430\u043b ubuntu \u0438\u0437-\u0437\u0430 \u043d\u0435\u0443\u0434\u0430\u0447 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c usbip \u0432 centos8 <pre><code>platforms:\n  - name: ubuntu\n    image: geerlingguy/docker-ubuntu2004-ansible\n    tmpfs:\n      - /run\n      - /tmp\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    capabilities:\n      - SYS_ADMIN\n    command: \"/lib/systemd/systemd\"\n    pre_build_image: true\n</code></pre> \u0423\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0443\u0436\u043d\u043e\u0435 \u0432 <code>molecule/default/molecule.yml</code> \u0438 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u043d\u0435\u0446 <pre><code>lint: |\n  set -e\n  yamllint .\n  ansible-lint .\n</code></pre> \u0422\u0430\u043c \u0436\u0435 <pre><code>provisioner:\n  name: ansible\n  config_options:\n    defaults:\n      interpreter_python: auto_silent\n      callback_whitelist: profile_tasks, timer, yaml\n    ssh_connection:\n      pipelining: false\n</code></pre> \u0412 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 \u0440\u043e\u043b\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c <pre><code>molecule lint\n</code></pre> \u0415\u0441\u043b\u0438 \u0432\u0441\u0435 \u043f\u0430\u043a\u0435\u0442\u044b podman \u0438 \u0442\u0434 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u044b \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e, \u0444\u0430\u0439\u043b\u044b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439 \u0441\u0434\u0435\u043b\u0430\u043d\u044b, \u0442\u043e <pre><code>molecule create\n</code></pre> \u0411\u0443\u0434\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u043d \u0438\u043c\u0430\u0434\u0436 <pre><code>TASK [Create molecule instance(s)] *********************************************\nSaturday 13 February 2021  18:55:43 +0000 (0:00:00.124)       0:00:02.145 *****\nchanged: [localhost] =&gt; (item={'capabilities': ['SYS_ADMIN'], 'command': '/lib/systemd/systemd', 'image': 'geerlingguy/docker-ubuntu2004-ansible', 'name': 'ubuntu', 'pre_build_image': True, 'tmpfs': ['/run', '/tmp'], 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:ro']})\n...\nSaturday 13 February 2021  19:01:00 +0000 (0:05:16.421)       0:05:19.320 *****\n===============================================================================\nWait for instance(s) creation to complete ----------------------------- 316.42s\nDiscover local Podman images -------------------------------------------- 1.27s\nCreate molecule instance(s) --------------------------------------------- 0.75s\nCheck presence of custom Dockerfiles ------------------------------------ 0.45s\nDetermine the CMD directives -------------------------------------------- 0.12s\nLog into a container registry ------------------------------------------- 0.10s\nCreate Dockerfiles from image names ------------------------------------- 0.10s\nBuild an Ansible compatible image --------------------------------------- 0.07s\nPlaybook run took 0 days, 0 hours, 5 minutes, 19 seconds\nINFO     Running default &gt; prepare\nWARNING  Skipping, prepare playbook not configured.\n$ molecule list\nINFO     Running default &gt; list\n                \u2577             \u2577                  \u2577               \u2577         \u2577\n  Instance Name \u2502 Driver Name \u2502 Provisioner Name \u2502 Scenario Name \u2502 Created \u2502 Converged\n\u2576\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574\n  ubuntu        \u2502 podman      \u2502 ansible          \u2502 default       \u2502 true    \u2502 false\n                \u2575             \u2575                  \u2575               \u2575         \u2575\n$ podman ps\nCONTAINER ID  IMAGE                                                   COMMAND               CREATED        STATUS            PORTS   NAMES\na9d4b2366016  docker.io/geerlingguy/docker-ubuntu2004-ansible:latest  /lib/systemd/syst...  3 minutes ago  Up 3 minutes ago          ubuntu\n</code></pre> \u041f\u0440\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0440\u043e\u043b\u0438 Molecule \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0435 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u044b \u0434\u043b\u044f \u0435\u0435 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 \u0442\u0435\u0441\u0442 \u043f\u0440\u043e\u0432\u0430\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0438\u043b\u0438 \u043a\u0430\u043a\u0430\u044f-\u0442\u043e \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u043d\u0435\u043e\u0431\u0440\u0430\u0442\u0438\u043c\u044b\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u043c, \u0438\u0437-\u0437\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0432\u0441\u0435 \u043d\u0430\u0434\u043e \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c \u0441\u043d\u0430\u0447\u0430\u043b\u0430, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432 \u043b\u044e\u0431\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0443\u0431\u0438\u0442\u044c \u044d\u0442\u0438 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u044b \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 <code>molecule destroy</code> \u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0445 \u0437\u0430\u043d\u043e\u0432\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u043e\u0439 <code>molecule create</code>.</p> <p>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f <pre><code>$ molecule login -h ubuntu\nINFO     Running default &gt; login\nroot@ubuntu:/#\n</code></pre> \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u043e\u043b\u044c <code>molecule converge</code> \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e, \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439. \u0415\u0441\u043b\u0438 \u0432\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u0442\u043e <code>molecule test</code>.</p>"},{"location":"work/molecule/#molecule-driver-docker","title":"molecule driver docker","text":"<p><pre><code>pip install molecule-docker\n</code></pre> \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u043b \u0434\u043e\u043a\u0435\u0440 \u0447\u0435\u0440\u0435\u0437 snap <pre><code>sudo snap install docker\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 <pre><code>molecule init role v98765_vmalert --driver-name=docker\n</code></pre> \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043c\u043e\u043b\u0435\u043a\u0443\u043b\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0434\u043e\u043a\u0435\u0440\u0430 \u043e\u0442 root, \u0442.\u043a. \u043f\u0440\u0430\u0432 \u043d\u0435 \u0445\u0432\u0430\u0442\u0438\u0442. molecule/default/molecule.yml <pre><code>---\ndependency:\n  name: galaxy\ndriver:\n  name: docker\nplatforms:\n  - name: instance_vmalert\n    privileged: true\n    image: docker.io/pycontribs/centos:8\n    tmpfs:\n      - /run\n      - /tmp\n    volumes:\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\n    capabilities:\n      - SYS_ADMIN\n    command: \"/lib/systemd/systemd\"\n    pre_build_image: true\nprovisioner:\n  name: ansible\n  config_options:\n    defaults:\n      interpreter_python: auto_silent\n      callback_whitelist: profile_tasks, timer, yaml\n    ssh_connection:\n      pipelining: false\nverifier:\n  name: ansible\nlint: |\n  set -e\n  yamllint .\n  ansible-lint .\n</code></pre></p>"},{"location":"work/molecule/#_2","title":"\u0421\u0441\u044b\u043b\u043a\u0438","text":"<p>Developing and Testing Ansible Roles with Molecule and Podman - Part 1,  Developing and Testing Ansible Roles with Molecule and Podman - Part 2,  \u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 Ansible-\u0440\u043e\u043b\u0435\u0439 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c Molecule \u0438 Podman,  Podman Installation Instructions,  Basic Setup and Use of Podman,  Basic Setup and Use of Podman in a Rootless environment</p>"},{"location":"work/msys2/","title":"Msys2","text":"<p>msys2 \u043d\u0443\u0436\u0435\u043d \u0434\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 ansible \u0432 windows</p> <p><pre><code>$ pacman -S python3-pip\n$ pip3 install --upgrade pip\n$ pacman -S gcc make libffi-devel openssl-devel libcrypt-devel\n$ pacman -S sshpass\n$ pip install wheel\n$ pip install ansible\n$ pip install scp\n</code></pre> tnx \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a</p> <p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 <pre><code>$ ansible-galaxy collection install ansible.netcommon\n$ ansible-galaxy collection install cisco.nxos\n</code></pre> \u0441 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u043c \u043f\u043e\u043a\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0438\u0437-\u0437\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u0441 \u0441\u0438\u043c\u043b\u0438\u043d\u043a\u0430\u043c\u0438. \u043f\u043e\u0445\u043e\u0436\u0435 \u043d\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u043f\u0440\u0430\u0432 https://stackoverflow.com/questions/6260149/os-symlink-support-in-windows/8464306#8464306</p>"},{"location":"work/tacacs/","title":"Tacacs","text":""},{"location":"work/tacacs/#_1","title":"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430","text":"<p>tac_plus, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0435 \u043d\u0443\u0436\u043d\u043e \u0438\u0441\u043a\u0430\u0442\u044c \u0441\u0442\u0430\u0440\u044b\u0435 \u0440\u0435\u043f\u044b \u0434\u043b\u044f centos. \u0414\u043b\u044f ubuntu 16(xenial),18 (bionic) \u0435\u0441\u0442\u044c \u0432 \u043f\u0430\u043a\u0435\u0442\u0430\u0445 <pre><code>tacacs+/xenial 4.0.4.27a-1 amd64\n  TACACS+ authentication daemon\n\ntacacs+/bionic 4.0.4.27a-3 amd64\n  TACACS+ authentication daemon\n</code></pre></p>"},{"location":"work/tacacs/#_2","title":"\u043f\u0430\u0440\u043e\u043b\u0438","text":"<p><pre><code>$ tac_pwd \nPassword to be encrypted: test\nQ3SdrVnvYFMnM\n</code></pre> \u0412 \u043a\u043e\u043d\u0444\u0438\u0433\u0435 \u0431\u0443\u0434\u0435\u0442 \u0442\u0430\u043a <pre><code>login = des Q3SdrVnvYFMnM\n</code></pre> \u0438\u043b\u0438 \u0442\u0430\u043a <pre><code>login = cleartext test\n</code></pre></p>"},{"location":"work/tacacs/#_3","title":"\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430","text":"<p>\u041a\u043e\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b /etc/tac_plus.conf. \u041f\u0440\u0438 \u0435\u0433\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0440\u0435\u043b\u043e\u0430\u0434 \u0441\u0435\u0440\u0432\u0438\u0441\u0443 <code>systemctl reload tac_plus</code></p> <p>\u041a\u043b\u044e\u0447 \u0432 \u043e\u0442\u043a\u0440\u044b\u0442\u043e\u043c \u0432\u0438\u0434\u0435, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0432 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0438. \u041e\u0434\u0438\u043d \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432. <pre><code>key = \"\u043a\u043b\u044e\u0447 \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f\"\n</code></pre> \u0413\u0440\u0443\u043f\u043f\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439 15 \u043d\u0430 cisco, huawei, eltex, dlink \u0438 \u0442\u043f. \u041f\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u043f\u0440\u043e tacacs \u0432 junos \u0438 \u0432 KB Configuration for TACACS Plus \u0410 \u0432\u043e\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u044b\u0435 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043d\u0435 \u0432\u0435\u0437\u0434\u0435, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0438\u0437-\u0437\u0430 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a. \u041c\u043e\u0436\u043d\u043e \u0435\u0449\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0442\u044c, \u043f\u0440\u0438\u043c\u0435\u0440\u044b \u0432 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0430\u0445, \u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u043a\u0430\u043a \u043e\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0430 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0438 \u041d\u0415 cisco. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0438\u043c\u0435\u0435\u0442 \u0441\u043c\u044b\u0441\u043b \u043e\u0442\u043a\u0430\u0437\u0430\u0442\u044c\u0441\u044f \u043e\u0442 \u0442\u0430\u043a\u0438\u0445 \u0443\u0447\u0435\u0442\u043d\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0441 \u044f\u043a\u043e\u0431\u044b \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435\u043c \u043f\u043e \u0441\u043f\u0438\u0441\u043a\u0443 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434 \u0432\u043e\u0432\u0441\u0435.</p> <p>service \u0443 \u0440\u0430\u0437\u043d\u044b\u0445 \u0432\u0435\u043d\u0434\u043e\u0440\u043e\u0432 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f. \u0411\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0443 \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 exec.</p> <p><pre><code>group = admins {\n        default service = permit\n        login = PAM\n        service = exec {\n                priv-lvl = 15\n                idletime = 600\n                }\n        }\n</code></pre> \u0421\u043f\u0438\u0441\u043a\u0438 \u0434\u043b\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f. \u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f (tacacs source ip) \u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u0441 \u0430\u0434\u0440\u0435\u0441\u043e\u043c 10.9.8.* <pre><code>acl = acl8 {\n    permit = ^10\\.9\\.8\\.\n    deny   = ^10\\.\n    }\n</code></pre> \u0423\u0447\u0435\u0442\u043a\u0430 username1 \u0441 acl <pre><code>user = username1 {\n    member = admins\n    login = des secret\n    acl = voip\n    }\nuser = username2 {\n    member = admins\n    login = des secret\n    }\n</code></pre></p>"},{"location":"work/translit/","title":"Translit, recode","text":"<p>\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0431\u044b\u043b\u043e \u0438\u0437 csv \u0444\u0430\u0439\u043b\u0430 \u0432\u0437\u044f\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0438 \u0432\u043f\u0438\u0441\u0430\u0442\u044c \u0435\u0433\u043e \u0432 \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0448 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0442\u043e\u0440\u0430. \u041a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u0443 \u043f\u0435\u0440\u0435\u0434\u0435\u043b\u0430\u0442\u044c, \u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u0432 \u0442\u0440\u0430\u043d\u0441\u043b\u0438\u0442 \u0438 \u0443\u0431\u0440\u0430\u0442\u044c \u0441\u043f\u0435\u0446\u0441\u0438\u043c\u0432\u043e\u043b\u044b.</p> <p>\u0423\u0442\u0438\u043b\u0438\u0442\u043e\u0439 recode \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u0443 \u0442\u0435\u043a\u0441\u0442\u0430 \u043d\u0430 utf8 \u0432 \u0444\u0430\u0439\u043b\u0435 data_rus.csv <pre><code>recode windows-1251..utf8 data_rus.csv\n</code></pre> \u0423\u0442\u0438\u043b\u0438\u0442\u043e\u0439 translit \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u0432 \u0442\u0440\u0430\u043d\u0441\u043b\u0438\u0442. <pre><code>translit -t \"GOST 7.79 RUS\" -i data_rus.csv -o data_translit.csv\n</code></pre> \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043f\u0435\u0446\u0441\u0438\u043c\u0432\u043e\u043b\u044b <pre><code>cat data_translit.csv | tr -d \"'`\"\n</code></pre></p>"},{"location":"work/ubuntu/","title":"Ubuntu","text":""},{"location":"work/ubuntu/#floppy","title":"floppy","text":"<p>\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u043b\u043e\u0433\u0430\u0445 \u043f\u0440\u043e fd0</p> <pre><code>rmmod floppy\necho \"blacklist floppy\" | tee /etc/modprobe.d/blacklist-floppy.conf\ndpkg-reconfigure initramfs-tools\n</code></pre> <p>playbook <pre><code>---\n- name: remove floppy\n  hosts: all\n  gather_facts: true\n  connection: ssh\n\n  tasks:\n\n  - name: remove floppy\n    community.general.modprobe:\n      name: floppy\n      state: absent\n    notify:\n      - update initramfs\n\n  - name: copy content to modprobe\n    ansible.builtin.copy:\n      content: \"blacklist floppy\"\n      dest: /etc/modprobe.d/blacklist-floppy.conf\n    notify:\n      - reboot\n      - update initramfs\n\n  handlers:\n\n    - name: reboot\n      reboot:\n        msg: \"Reboot initiated by Ansible\"\n        connect_timeout: 5\n        reboot_timeout: 600\n        pre_reboot_delay: 0\n        post_reboot_delay: 30\n        test_command: whoami\n\n    - name: update initramfs\n      command: update-initramfs -u\n</code></pre></p>"},{"location":"work/ubuntu/#timezone","title":"timezone","text":"<pre><code>timedatectl set-timezone Europe/Moscow\n</code></pre> <p>playbook <pre><code>---\n- name: set timezone\n  hosts: all\n  gather_facts: true\n  connection: ssh\n\n  tasks:\n\n  - name: set timezone\n    community.general.timezone:\n      name: Europe/Moscow\n</code></pre></p>"},{"location":"work/ubuntu/#vmware-disk-uuid","title":"vmware disk uuid","text":"<p>\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u043b\u043e\u0433\u0430\u0445 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u043c\u0430\u0448\u0438\u043d\u044b <pre><code>sda: add missing path\n</code></pre></p> <p>fix <code>/etc/multipath.conf</code> <pre><code>defaults {\n    user_friendly_names yes\n}\nblacklist {\n    devnode \"^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*\"\n    devnode \"^sd[a-z]?[0-9]*\"\n}\n</code></pre> playbook <pre><code>---\n- name: fix multipath\n  hosts: all\n  gather_facts: true\n  connection: ssh\n\n  tasks:\n\n  - name: copy content to multipath\n    ansible.builtin.copy:\n      content: |\n        defaults {\n            user_friendly_names yes\n        }\n        blacklist {\n            devnode \"^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*\"\n            devnode \"^sd[a-z]?[0-9]*\"\n        }\n      dest: /etc/multipath.conf\n    notify:\n      - reboot\n\n  handlers:\n\n    - name: reboot\n      reboot:\n        msg: \"Reboot initiated by Ansible\"\n        connect_timeout: 5\n        reboot_timeout: 600\n        pre_reboot_delay: 0\n        post_reboot_delay: 30\n        test_command: whoami\n</code></pre></p>"},{"location":"work/ubuntu/#apt-update","title":"apt update","text":"<pre><code>---\n- name: update and reboot\n  hosts: all\n  gather_facts: true\n  connection: ssh\n\n  tasks:\n\n    - name: Only run \"update_cache=yes\" if the last one is more than 3600 seconds ago\n      apt:\n        update_cache: yes\n        cache_valid_time: 3600\n      async: 3600\n      poll: 30\n\n    - name: Update all packages to their latest version\n      apt:\n        name: \"*\"\n        state: latest\n\n    - name: reboot\n      reboot:\n        msg: \"Reboot initiated by Ansible\"\n        connect_timeout: 5\n        reboot_timeout: 600\n        pre_reboot_delay: 0\n        post_reboot_delay: 30\n        test_command: whoami\n</code></pre>"},{"location":"work/ubuntu/#resize-disk","title":"resize disk","text":"<p>\u0423\u0432\u0435\u043b\u0438\u0447\u0435\u043d \u0434\u0438\u0441\u043a \u0434\u043b\u044f \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u043a\u0438 \u0441 16 \u0434\u043e 32. \u041d\u0443\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e</p> <p><pre><code># fdisk  /dev/sda\n\nWelcome to fdisk (util-linux 2.36).\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nGPT PMBR size mismatch (33554431 != 67108863) will be corrected by write.\nThe backup GPT table is not on the end of the device. This problem will be corrected by write.\n\nCommand (m for help): w\n\nThe partition table has been altered.\nSyncing disks.\n</code></pre> \u041b\u0438\u0431\u043e <pre><code>echo 'w' | fdisk /dev/sda\n</code></pre> \u0414\u0430\u043b\u0435\u0435 playbook \u0441 \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0438\u0435\u043c \u0434\u0438\u0441\u043a\u0430 \u043d\u0430 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u043a\u0435 \u0441 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u043c ansible <pre><code>---\n- name: resize lvm\n  hosts: localhost\n  become: true\n  gather_facts: true\n  connection: local\n\n  tasks:\n\n  - name: Read device information (always use unit when probing)\n    community.general.parted:\n      device: /dev/sda\n      unit: MiB\n    register: sda_info\n\n  - name: Extend an existing partition to fill all available space\n    community.general.parted:\n      device: /dev/sda\n      number: \"{{ sda_info.partitions | length }}\"\n      label: gpt\n      unit: MiB\n      part_end: \"100%\"\n      state: present\n      resize: true\n\n  - name: Resize existing pv\n    community.general.lvg:\n      vg: ubuntu-vg\n      pvs: /dev/sda3\n      pvresize: yes\n\n  - name: Extend the logical volume to take all remaining space of the PVs and resize the underlying filesystem\n    community.general.lvol:\n      vg: ubuntu-vg\n      lv: ubuntu-lv\n      size: 100%PVS\n      resizefs: true\n</code></pre></p>"},{"location":"work/usbwrite/","title":"USB writer","text":"<p>\u041f\u041e \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043e\u0447\u043d\u044b\u0445 usb-\u0444\u043b\u0435\u0448\u0435\u043a</p>"},{"location":"work/usbwrite/#ubuntu","title":"ubuntu","text":"<pre><code>sudo add-apt-repository ppa:mkusb/ppa\nsudo apt update\nsudo apt install mkusb mkusb-nox usb-pack-efi\nsudo mkusb-nox Downloads/distrib_filename.img\n</code></pre>"},{"location":"work/usbwrite/#windows","title":"windows","text":"<p>rufus</p>"},{"location":"work/venv/","title":"Pip, venv","text":""},{"location":"work/venv/#venv-ubuntu","title":"venv \u0432 ubuntu","text":"<pre><code>sudo apt install python3-pip python3-venv\n</code></pre>"},{"location":"work/venv/#centos-8","title":"centos 8","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c python3 <pre><code>dnf install python3\n</code></pre></p>"},{"location":"work/venv/#_1","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430","text":"<p>Installing packages using pip and virtual environments</p> <p><pre><code>python3 -m venv base\nsource base/bin/activate\n</code></pre> \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0438 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435 <pre><code>python3 -m venv base\nsource base/bin/activate\n</code></pre> \u0412 prompt \u0448\u0435\u043b\u043b\u0430 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f <code>(base)</code>. \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 <code>source base/bin/activate</code> \u0432 \u043a\u043e\u043d\u0435\u0446 \u0444\u0430\u0439\u043b\u0430 <code>~/.bashrc</code> \u0412\u044b\u0445\u043e\u0434 \u0438\u0437 env <code>deactivate</code></p> <p>\u0412 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c pip \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442\u044b <pre><code>base/bin/python3 -m pip install --upgrade pip\npip -V\n</code></pre> \u041f\u043e\u043a\u0430\u0436\u0435\u0442 \u0432\u0435\u0440\u0441\u0438\u044e pip, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u0443\u044e \u0432 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0438.</p> <p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 ansible <pre><code>pip install wheel\npip install ansible scp\n</code></pre> \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439 <pre><code>ansible-galaxy collection install ansible.netcommon\nansible-galaxy collection install cisco.nxos\n</code></pre> \u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432 <code>~/.ansible/collections/</code> , \u0430 \u0440\u043e\u043b\u0438 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 <code>~/.ansible/roles/</code>. \u0412 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u043c \u043a\u043e\u043d\u0444\u0438\u0433\u0435 <code>ansible.cfg</code> \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u0442\u044c <code>roles_path = ~/.ansible/roles</code>.</p> <p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 using-requirements-files c <code>pip install -r requirements.txt</code></p>"},{"location":"work/vim/","title":"Vim","text":""},{"location":"work/vim/#yaml-plugin","title":"yaml plugin","text":"<pre><code>git clone --depth 1 https://github.com/dense-analysis/ale.git ~/.vim/pack/git-plugins/start/ale\ngit clone https://github.com/Yggdroot/indentLine.git ~/.vim/pack/vendor/start/indentLine\n</code></pre> <p><code>.vimrc</code></p> <pre><code>set mouse-=a\nsyntax on\nset tabstop=8\nset expandtab\nset shiftwidth=2\nset softtabstop=2\nau BufNewFile,BufRead *.conf setf cfg\n\nautocmd FileType yaml setlocal ts=2 sts=2 sw=2 expandtab\nautocmd FileType yml setlocal ts=2 sts=2 sw=2 expandtab\nlet g:ale_echo_msg_format = '[%linter%] %s [%severity%]'\nlet g:ale_sign_error = 'x'\nlet g:ale_sign_warning = '!'\nlet g:ale_lint_on_text_changed = 'never'\n</code></pre> <p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d yamllint. \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 <code>.config/yamllint/config</code> <pre><code>extends: relaxed\n\nrules:\n  line-length: disable\n</code></pre></p>"},{"location":"work/vim/#_1","title":"\u043a\u043d\u043e\u043f\u043a\u0438 \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p><code>2&gt;&gt;</code> \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0442\u0441\u0442\u0443\u043f \u0438\u0437 2 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432 (\u0442\u0430\u043a \u0432 .vimrc) \u0434\u043b\u044f 2 \u0441\u0442\u0440\u043e\u043a</p> <p><code>2dd</code> \u0443\u0434\u0430\u043b\u0438\u0442\u044c 2 \u0441\u0442\u0440\u043e\u043a\u0438</p> <p><code>2Y</code> \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c 2 \u0441\u0442\u0440\u043e\u043a\u0438</p> <p><code>p</code> \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0438\u043b\u0438 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 4 \u0441\u0442\u0440\u043e\u043a\u0438 \u043d\u0438\u0436\u0435 \u043a\u0443\u0440\u0441\u043e\u0440\u0430</p>"},{"location":"work/webtftp/","title":"Web,tftp","text":"<p>web,tftp-\u0441\u0435\u0440\u0432\u0435\u0440\u0430</p> <p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440\u0430</p> <pre><code>apt install lighttpd dnsmasq\n</code></pre> <p>\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u043b\u043e \u043b\u0438\u0441\u0442\u0438\u043d\u0433 \u0444\u0430\u0439\u043b\u043e\u0432 \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435, \u0441\u043e\u0437\u0434\u0430\u0442\u044c <code>/etc/lighttpd/conf-enabled/10-dir-listing.conf</code> <pre><code>dir-listing.encoding = \"utf-8\"\nserver.dir-listing   = \"enable\"\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0430\u043b\u043e\u0433 <pre><code>mkdir /var/www/html/fw\n</code></pre> \u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441 <pre><code>systemctl restart lighttpd\n</code></pre></p> <p>\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c tftp \u0432 dnsmasq, \u0441\u043e\u0437\u0434\u0430\u0432 \u043d\u043e\u0432\u044b\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b <code>/etc/dnsmasq.d/tftp.conf</code> <pre><code>enable-tftp\ntftp-root=/var/www/html/fw\n</code></pre> \u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441 <pre><code>systemctl restart dnsmasq\n</code></pre></p>"}]}